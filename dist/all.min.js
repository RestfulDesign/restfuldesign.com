window.matchMedia||(window.matchMedia=function(){"use strict";var t=window.styleMedia||window.media;if(!t){var e=document.createElement("style"),n=document.getElementsByTagName("script")[0],i=null;e.type="text/css",e.id="matchmediajs-test",n.parentNode.insertBefore(e,n),i="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,t={matchMedium:function(t){var n="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=n:e.textContent=n,"1px"===i.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(t,e,n){"use strict";function i(t){var e,n,i,r,s,a=t||{};e=a.elements||o.getAllElements();for(var l=0,u=e.length;u>l;l++)if(n=e[l],i=n.parentNode,r=void 0,s=void 0,"IMG"===n.nodeName.toUpperCase()&&(n[o.ns]||(n[o.ns]={}),a.reevaluate||!n[o.ns].evaluated)){if("PICTURE"===i.nodeName.toUpperCase()){if(o.removeVideoShim(i),r=o.getMatch(n,i),r===!1)continue}else r=void 0;("PICTURE"===i.nodeName.toUpperCase()||n.srcset&&!o.srcsetSupported||!o.sizesSupported&&n.srcset&&n.srcset.indexOf("w")>-1)&&o.dodgeSrcset(n),r?(s=o.processSourceSet(r),o.applyBestCandidate(s,n)):(s=o.processSourceSet(n),(void 0===n.srcset||n[o.ns].srcset)&&o.applyBestCandidate(s,n)),n[o.ns].evaluated=!0}}function r(){function n(){var e;t._picturefillWorking||(t._picturefillWorking=!0,t.clearTimeout(e),e=t.setTimeout(function(){i({reevaluate:!0}),t._picturefillWorking=!1},60))}i();var r=setInterval(function(){return i(),/^loaded|^i|^c/.test(e.readyState)?void clearInterval(r):void 0},250);t.addEventListener?t.addEventListener("resize",n,!1):t.attachEvent&&t.attachEvent("onresize",n)}if(t.HTMLPictureElement)return void(t.picturefill=function(){});e.createElement("picture");var o={};o.ns="picturefill",function(){o.srcsetSupported="srcset"in n,o.sizesSupported="sizes"in n}(),o.trim=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},o.endsWith=function(t,e){return t.endsWith?t.endsWith(e):-1!==t.indexOf(e,t.length-e.length)},o.restrictsMixedContent=function(){return"https:"===t.location.protocol},o.matchesMedia=function(e){return t.matchMedia&&t.matchMedia(e).matches},o.getDpr=function(){return t.devicePixelRatio||1},o.getWidthFromLength=function(t){t=t&&t.indexOf("%")>-1==!1&&(parseFloat(t)>0||t.indexOf("calc(")>-1)?t:"100vw",t=t.replace("vw","%"),o.lengthEl||(o.lengthEl=e.createElement("div"),o.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden"),o.lengthEl.style.width=t,e.body.appendChild(o.lengthEl),o.lengthEl.className="helper-from-picturefill-js",o.lengthEl.offsetWidth<=0&&(o.lengthEl.style.width=e.documentElement.offsetWidth+"px");var n=o.lengthEl.offsetWidth;return e.body.removeChild(o.lengthEl),n},o.types={},o.types["image/jpeg"]=!0,o.types["image/gif"]=!0,o.types["image/png"]=!0,o.types["image/svg+xml"]=e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),o.types["image/webp"]=function(){var t="image/webp";n.onerror=function(){o.types[t]=!1,i()},n.onload=function(){o.types[t]=1===n.width,i()},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="},o.verifyTypeSupport=function(t){var e=t.getAttribute("type");return null===e||""===e?!0:"function"==typeof o.types[e]?(o.types[e](),"pending"):o.types[e]},o.parseSize=function(t){var e=/(\([^)]+\))?\s*(.+)/g.exec(t);return{media:e&&e[1],length:e&&e[2]}},o.findWidthFromSourceSize=function(t){for(var e,n=o.trim(t).split(/\s*,\s*/),i=0,r=n.length;r>i;i++){var s=n[i],a=o.parseSize(s),l=a.length,u=a.media;if(l&&(!u||o.matchesMedia(u))){e=l;break}}return o.getWidthFromLength(e)},o.parseSrcset=function(t){for(var e=[];""!==t;){t=t.replace(/^\s+/g,"");var n,i=t.search(/\s/g),r=null;if(-1!==i){n=t.slice(0,i);var o=n.slice(-1);if((","===o||""===n)&&(n=n.replace(/,+$/,""),r=""),t=t.slice(i+1),null===r){var s=t.indexOf(",");-1!==s?(r=t.slice(0,s),t=t.slice(s+1)):(r=t,t="")}}else n=t,t="";(n||r)&&e.push({url:n,descriptor:r})}return e},o.parseDescriptor=function(t,e){var n,i=e||"100vw",r=t&&t.replace(/(^\s+|\s+$)/g,""),s=o.findWidthFromSourceSize(i);if(r)for(var a=r.split(" "),l=a.length-1;l>=0;l--){var u=a[l],c=u&&u.slice(u.length-1);if("h"!==c&&"w"!==c||o.sizesSupported){if("x"===c){var d=u&&parseFloat(u,10);n=d&&!isNaN(d)?d:1}}else n=parseFloat(parseInt(u,10)/s)}return n||1},o.getCandidatesFromSourceSet=function(t,e){for(var n=o.parseSrcset(t),i=[],r=0,s=n.length;s>r;r++){var a=n[r];i.push({url:a.url,resolution:o.parseDescriptor(a.descriptor,e)})}return i},o.dodgeSrcset=function(t){t.srcset&&(t[o.ns].srcset=t.srcset,t.removeAttribute("srcset"))},o.processSourceSet=function(t){var e=t.getAttribute("srcset"),n=t.getAttribute("sizes"),i=[];return"IMG"===t.nodeName.toUpperCase()&&t[o.ns]&&t[o.ns].srcset&&(e=t[o.ns].srcset),e&&(i=o.getCandidatesFromSourceSet(e,n)),i},o.applyBestCandidate=function(t,e){var n,i,r;t.sort(o.ascendingSort),i=t.length,r=t[i-1];for(var s=0;i>s;s++)if(n=t[s],n.resolution>=o.getDpr()){r=n;break}if(r&&!o.endsWith(e.src,r.url))if(o.restrictsMixedContent()&&"http:"===r.url.substr(0,"http:".length).toLowerCase())void 0!==typeof console&&console.warn("Blocked mixed content image "+r.url);else{e.src=r.url,e.currentSrc=e.src;var a=e.style||{},l="webkitBackfaceVisibility"in a,u=a.zoom;l&&(a.zoom=".999",l=e.offsetWidth,a.zoom=u)}},o.ascendingSort=function(t,e){return t.resolution-e.resolution},o.removeVideoShim=function(t){var e=t.getElementsByTagName("video");if(e.length){for(var n=e[0],i=n.getElementsByTagName("source");i.length;)t.insertBefore(i[0],n);n.parentNode.removeChild(n)}},o.getAllElements=function(){for(var t=[],n=e.getElementsByTagName("img"),i=0,r=n.length;r>i;i++){var s=n[i];("PICTURE"===s.parentNode.nodeName.toUpperCase()||null!==s.getAttribute("srcset")||s[o.ns]&&null!==s[o.ns].srcset)&&t.push(s)}return t},o.getMatch=function(t,e){for(var n,i=e.childNodes,r=0,s=i.length;s>r;r++){var a=i[r];if(1===a.nodeType){if(a===t)return n;if("SOURCE"===a.nodeName.toUpperCase()){null!==a.getAttribute("src")&&void 0!==typeof console&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var l=a.getAttribute("media");if(a.getAttribute("srcset")&&(!l||o.matchesMedia(l))){var u=o.verifyTypeSupport(a);if(u===!0){n=a;break}if("pending"===u)return!1}}}}return n},r(),i._=o,"object"==typeof module&&"object"==typeof module.exports?module.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):"object"==typeof t&&(t.picturefill=i)}(this,this.document,new this.Image),function(t,e,n){"undefined"!=typeof module&&module.exports?module.exports=n():t[e]=n()}(this,"verge",function(){function t(){return{width:c(),height:d()}}function e(t,e){var n={};return e=+e||0,n.width=(n.right=t.right+e)-(n.left=t.left-e),n.height=(n.bottom=t.bottom+e)-(n.top=t.top-e),n}function n(t,n){return t=t&&!t.nodeType?t[0]:t,t&&1===t.nodeType?e(t.getBoundingClientRect(),n):!1}function i(e){e=null==e?t():1===e.nodeType?n(e):e;var i=e.height,r=e.width;return i="function"==typeof i?i.call(e):i,r="function"==typeof r?r.call(e):r,r/i}var r={},o="undefined"!=typeof window&&window,s="undefined"!=typeof document&&document,a=s&&s.documentElement,l=o.matchMedia||o.msMatchMedia,u=l?function(t){return!!l.call(o,t).matches}:function(){return!1},c=r.viewportW=function(){var t=a.clientWidth,e=o.innerWidth;return e>t?e:t},d=r.viewportH=function(){var t=a.clientHeight,e=o.innerHeight;return e>t?e:t};return r.mq=u,r.matchMedia=l?function(){return l.apply(o,arguments)}:function(){return{}},r.viewport=t,r.scrollX=function(){return o.pageXOffset||a.scrollLeft},r.scrollY=function(){return o.pageYOffset||a.scrollTop},r.rectangle=n,r.aspect=i,r.inX=function(t,e){var i=n(t,e);return!!i&&i.right>=0&&i.left<=c()},r.inY=function(t,e){var i=n(t,e);return!!i&&i.bottom>=0&&i.top<=d()},r.inViewport=function(t,e){var i=n(t,e);return!!i&&i.bottom>=0&&i.right>=0&&i.top<=d()&&i.left<=c()},r}),function(){var t,e,n,i,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=function(){function t(){}return t.prototype.extend=function(t,e){var n,i;for(n in e)i=e[n],null==t[n]&&(t[n]=i);return t},t.prototype.isMobile=function(t){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)},t.prototype.addEvent=function(t,e,n){return null!=t.addEventListener?t.addEventListener(e,n,!1):null!=t.attachEvent?t.attachEvent("on"+e,n):t[e]=n},t.prototype.removeEvent=function(t,e,n){return null!=t.removeEventListener?t.removeEventListener(e,n,!1):null!=t.detachEvent?t.detachEvent("on"+e,n):delete t[e]},t.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},t}(),n=this.WeakMap||this.MozWeakMap||(n=function(){function t(){this.keys=[],this.values=[]}return t.prototype.get=function(t){var e,n,i,r,o;for(o=this.keys,e=i=0,r=o.length;r>i;e=++i)if(n=o[e],n===t)return this.values[e]},t.prototype.set=function(t,e){var n,i,r,o,s;for(s=this.keys,n=r=0,o=s.length;o>r;n=++r)if(i=s[n],i===t)return void(this.values[n]=e);return this.keys.push(t),this.values.push(e)},t}()),t=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(t=function(){function t(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return t.notSupported=!0,t.prototype.observe=function(){},t}()),i=this.getComputedStyle||function(t){return this.getPropertyValue=function(e){var n;return"float"===e&&(e="styleFloat"),r.test(e)&&e.replace(r,function(t,e){return e.toUpperCase()}),(null!=(n=t.currentStyle)?n[e]:void 0)||null},this},r=/(\-([a-z]){1})/g,this.WOW=function(){function r(t){null==t&&(t={}),this.scrollCallback=o(this.scrollCallback,this),this.scrollHandler=o(this.scrollHandler,this),this.start=o(this.start,this),this.scrolled=!0,this.config=this.util().extend(t,this.defaults),this.animationNameCache=new n}return r.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null},r.prototype.init=function(){var t;return this.element=window.document.documentElement,"interactive"===(t=document.readyState)||"complete"===t?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},r.prototype.start=function(){var e,n,i,r;if(this.stopped=!1,this.boxes=function(){var t,n,i,r;for(i=this.element.querySelectorAll("."+this.config.boxClass),r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e);return r}.call(this),this.all=function(){var t,n,i,r;for(i=this.boxes,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e);return r}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(r=this.boxes,n=0,i=r.length;i>n;n++)e=r[n],this.applyStyle(e,!0);return this.disabled()||(this.util().addEvent(window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new t(function(t){return function(e){var n,i,r,o,s;for(s=[],r=0,o=e.length;o>r;r++)i=e[r],s.push(function(){var t,e,r,o;for(r=i.addedNodes||[],o=[],t=0,e=r.length;e>t;t++)n=r[t],o.push(this.doSync(n));return o}.call(t));return s}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},r.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval?clearInterval(this.interval):void 0},r.prototype.sync=function(){return t.notSupported?this.doSync(this.element):void 0},r.prototype.doSync=function(t){var e,n,i,r,o;if(null==t&&(t=this.element),1===t.nodeType){for(t=t.parentNode||t,r=t.querySelectorAll("."+this.config.boxClass),o=[],n=0,i=r.length;i>n;n++)e=r[n],s.call(this.all,e)<0?(this.boxes.push(e),this.all.push(e),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(e,!0),o.push(this.scrolled=!0)):o.push(void 0);return o}},r.prototype.show=function(t){return this.applyStyle(t),t.className=""+t.className+" "+this.config.animateClass,null!=this.config.callback?this.config.callback(t):void 0},r.prototype.applyStyle=function(t,e){var n,i,r;return i=t.getAttribute("data-wow-duration"),n=t.getAttribute("data-wow-delay"),r=t.getAttribute("data-wow-iteration"),this.animate(function(o){return function(){return o.customStyle(t,e,i,n,r)}}(this))},r.prototype.animate=function(){return"requestAnimationFrame"in window?function(t){return window.requestAnimationFrame(t)}:function(t){return t()}}(),r.prototype.resetStyle=function(){var t,e,n,i,r;for(i=this.boxes,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.style.visibility="visible");return r},r.prototype.customStyle=function(t,e,n,i,r){return e&&this.cacheAnimationName(t),t.style.visibility=e?"hidden":"visible",n&&this.vendorSet(t.style,{animationDuration:n}),i&&this.vendorSet(t.style,{animationDelay:i}),r&&this.vendorSet(t.style,{animationIterationCount:r}),this.vendorSet(t.style,{animationName:e?"none":this.cachedAnimationName(t)}),t},r.prototype.vendors=["moz","webkit"],r.prototype.vendorSet=function(t,e){var n,i,r,o;o=[];for(n in e)i=e[n],t[""+n]=i,o.push(function(){var e,o,s,a;for(s=this.vendors,a=[],e=0,o=s.length;o>e;e++)r=s[e],a.push(t[""+r+n.charAt(0).toUpperCase()+n.substr(1)]=i);return a}.call(this));return o},r.prototype.vendorCSS=function(t,e){var n,r,o,s,a,l;for(r=i(t),n=r.getPropertyCSSValue(e),l=this.vendors,s=0,a=l.length;a>s;s++)o=l[s],n=n||r.getPropertyCSSValue("-"+o+"-"+e);return n},r.prototype.animationName=function(t){var e;try{e=this.vendorCSS(t,"animation-name").cssText}catch(n){e=i(t).getPropertyValue("animation-name")}return"none"===e?"":e},r.prototype.cacheAnimationName=function(t){return this.animationNameCache.set(t,this.animationName(t))},r.prototype.cachedAnimationName=function(t){return this.animationNameCache.get(t)},r.prototype.scrollHandler=function(){return this.scrolled=!0},r.prototype.scrollCallback=function(){var t;return!this.scrolled||(this.scrolled=!1,this.boxes=function(){var e,n,i,r;for(i=this.boxes,r=[],e=0,n=i.length;n>e;e++)t=i[e],t&&(this.isVisible(t)?this.show(t):r.push(t));return r}.call(this),this.boxes.length||this.config.live)?void 0:this.stop()},r.prototype.offsetTop=function(t){for(var e;void 0===t.offsetTop;)t=t.parentNode;for(e=t.offsetTop;t=t.offsetParent;)e+=t.offsetTop;return e},r.prototype.isVisible=function(t){var e,n,i,r,o;return n=t.getAttribute("data-wow-offset")||this.config.offset,o=window.pageYOffset,r=o+Math.min(this.element.clientHeight,this.util().innerHeight())-n,i=this.offsetTop(t),e=i+t.clientHeight,r>=i&&e>=o},r.prototype.util=function(){return null!=this._util?this._util:this._util=new e},r.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},r}()}.call(this),(new WOW).init(),window.matchMedia||(window.matchMedia=function(){"use strict";var t=window.styleMedia||window.media;if(!t){var e=document.createElement("style"),n=document.getElementsByTagName("script")[0],i=null;e.type="text/css",e.id="matchmediajs-test",n.parentNode.insertBefore(e,n),i="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,t={matchMedium:function(t){var n="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=n:e.textContent=n,"1px"===i.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(t,e,n){"use strict";function i(t){var e,n,i,r,s,a=t||{};e=a.elements||o.getAllElements();for(var l=0,u=e.length;u>l;l++)if(n=e[l],i=n.parentNode,r=void 0,s=void 0,"IMG"===n.nodeName.toUpperCase()&&(n[o.ns]||(n[o.ns]={}),a.reevaluate||!n[o.ns].evaluated)){if("PICTURE"===i.nodeName.toUpperCase()){if(o.removeVideoShim(i),r=o.getMatch(n,i),r===!1)continue}else r=void 0;("PICTURE"===i.nodeName.toUpperCase()||n.srcset&&!o.srcsetSupported||!o.sizesSupported&&n.srcset&&n.srcset.indexOf("w")>-1)&&o.dodgeSrcset(n),r?(s=o.processSourceSet(r),o.applyBestCandidate(s,n)):(s=o.processSourceSet(n),(void 0===n.srcset||n[o.ns].srcset)&&o.applyBestCandidate(s,n)),n[o.ns].evaluated=!0}}function r(){function n(){var e;t._picturefillWorking||(t._picturefillWorking=!0,t.clearTimeout(e),e=t.setTimeout(function(){i({reevaluate:!0}),t._picturefillWorking=!1},60))}i();var r=setInterval(function(){return i(),/^loaded|^i|^c/.test(e.readyState)?void clearInterval(r):void 0},250);t.addEventListener?t.addEventListener("resize",n,!1):t.attachEvent&&t.attachEvent("onresize",n)}if(t.HTMLPictureElement)return void(t.picturefill=function(){});e.createElement("picture");var o={};o.ns="picturefill",function(){o.srcsetSupported="srcset"in n,o.sizesSupported="sizes"in n}(),o.trim=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},o.endsWith=function(t,e){return t.endsWith?t.endsWith(e):-1!==t.indexOf(e,t.length-e.length)},o.restrictsMixedContent=function(){return"https:"===t.location.protocol},o.matchesMedia=function(e){return t.matchMedia&&t.matchMedia(e).matches},o.getDpr=function(){return t.devicePixelRatio||1},o.getWidthFromLength=function(t){t=t&&t.indexOf("%")>-1==!1&&(parseFloat(t)>0||t.indexOf("calc(")>-1)?t:"100vw",t=t.replace("vw","%"),o.lengthEl||(o.lengthEl=e.createElement("div"),o.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden"),o.lengthEl.style.width=t,e.body.appendChild(o.lengthEl),o.lengthEl.className="helper-from-picturefill-js",o.lengthEl.offsetWidth<=0&&(o.lengthEl.style.width=e.documentElement.offsetWidth+"px");var n=o.lengthEl.offsetWidth;return e.body.removeChild(o.lengthEl),n},o.types={},o.types["image/jpeg"]=!0,o.types["image/gif"]=!0,o.types["image/png"]=!0,o.types["image/svg+xml"]=e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),o.types["image/webp"]=function(){var t="image/webp";n.onerror=function(){o.types[t]=!1,i()},n.onload=function(){o.types[t]=1===n.width,i()},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="},o.verifyTypeSupport=function(t){var e=t.getAttribute("type");return null===e||""===e?!0:"function"==typeof o.types[e]?(o.types[e](),"pending"):o.types[e]},o.parseSize=function(t){var e=/(\([^)]+\))?\s*(.+)/g.exec(t);return{media:e&&e[1],length:e&&e[2]}},o.findWidthFromSourceSize=function(t){for(var e,n=o.trim(t).split(/\s*,\s*/),i=0,r=n.length;r>i;i++){var s=n[i],a=o.parseSize(s),l=a.length,u=a.media;if(l&&(!u||o.matchesMedia(u))){e=l;break}}return o.getWidthFromLength(e)},o.parseSrcset=function(t){for(var e=[];""!==t;){t=t.replace(/^\s+/g,"");var n,i=t.search(/\s/g),r=null;if(-1!==i){n=t.slice(0,i);var o=n.slice(-1);if((","===o||""===n)&&(n=n.replace(/,+$/,""),r=""),t=t.slice(i+1),null===r){var s=t.indexOf(",");-1!==s?(r=t.slice(0,s),t=t.slice(s+1)):(r=t,t="")}}else n=t,t="";(n||r)&&e.push({url:n,descriptor:r})}return e},o.parseDescriptor=function(t,e){var n,i=e||"100vw",r=t&&t.replace(/(^\s+|\s+$)/g,""),s=o.findWidthFromSourceSize(i);if(r)for(var a=r.split(" "),l=a.length-1;l>=0;l--){var u=a[l],c=u&&u.slice(u.length-1);if("h"!==c&&"w"!==c||o.sizesSupported){if("x"===c){var d=u&&parseFloat(u,10);n=d&&!isNaN(d)?d:1}}else n=parseFloat(parseInt(u,10)/s)}return n||1},o.getCandidatesFromSourceSet=function(t,e){for(var n=o.parseSrcset(t),i=[],r=0,s=n.length;s>r;r++){var a=n[r];i.push({url:a.url,resolution:o.parseDescriptor(a.descriptor,e)})}return i},o.dodgeSrcset=function(t){t.srcset&&(t[o.ns].srcset=t.srcset,t.removeAttribute("srcset"))},o.processSourceSet=function(t){var e=t.getAttribute("srcset"),n=t.getAttribute("sizes"),i=[];return"IMG"===t.nodeName.toUpperCase()&&t[o.ns]&&t[o.ns].srcset&&(e=t[o.ns].srcset),e&&(i=o.getCandidatesFromSourceSet(e,n)),i},o.applyBestCandidate=function(t,e){var n,i,r;t.sort(o.ascendingSort),i=t.length,r=t[i-1];for(var s=0;i>s;s++)if(n=t[s],n.resolution>=o.getDpr()){r=n;break}if(r&&!o.endsWith(e.src,r.url))if(o.restrictsMixedContent()&&"http:"===r.url.substr(0,"http:".length).toLowerCase())void 0!==typeof console&&console.warn("Blocked mixed content image "+r.url);else{e.src=r.url,e.currentSrc=e.src;var a=e.style||{},l="webkitBackfaceVisibility"in a,u=a.zoom;l&&(a.zoom=".999",l=e.offsetWidth,a.zoom=u)}},o.ascendingSort=function(t,e){return t.resolution-e.resolution},o.removeVideoShim=function(t){var e=t.getElementsByTagName("video");if(e.length){for(var n=e[0],i=n.getElementsByTagName("source");i.length;)t.insertBefore(i[0],n);n.parentNode.removeChild(n)}},o.getAllElements=function(){for(var t=[],n=e.getElementsByTagName("img"),i=0,r=n.length;r>i;i++){var s=n[i];("PICTURE"===s.parentNode.nodeName.toUpperCase()||null!==s.getAttribute("srcset")||s[o.ns]&&null!==s[o.ns].srcset)&&t.push(s)}return t},o.getMatch=function(t,e){for(var n,i=e.childNodes,r=0,s=i.length;s>r;r++){var a=i[r];if(1===a.nodeType){if(a===t)return n;if("SOURCE"===a.nodeName.toUpperCase()){null!==a.getAttribute("src")&&void 0!==typeof console&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var l=a.getAttribute("media");if(a.getAttribute("srcset")&&(!l||o.matchesMedia(l))){var u=o.verifyTypeSupport(a);if(u===!0){n=a;break}if("pending"===u)return!1}}}}return n},r(),i._=o,"object"==typeof module&&"object"==typeof module.exports?module.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):"object"==typeof t&&(t.picturefill=i)}(this,this.document,new this.Image),function(t,e,n){"undefined"!=typeof module&&module.exports?module.exports=n():t[e]=n()}(this,"verge",function(){function t(){return{width:c(),height:d()}}function e(t,e){var n={};return e=+e||0,n.width=(n.right=t.right+e)-(n.left=t.left-e),n.height=(n.bottom=t.bottom+e)-(n.top=t.top-e),n}function n(t,n){return t=t&&!t.nodeType?t[0]:t,t&&1===t.nodeType?e(t.getBoundingClientRect(),n):!1}function i(e){e=null==e?t():1===e.nodeType?n(e):e;var i=e.height,r=e.width;return i="function"==typeof i?i.call(e):i,r="function"==typeof r?r.call(e):r,r/i}var r={},o="undefined"!=typeof window&&window,s="undefined"!=typeof document&&document,a=s&&s.documentElement,l=o.matchMedia||o.msMatchMedia,u=l?function(t){return!!l.call(o,t).matches}:function(){return!1},c=r.viewportW=function(){var t=a.clientWidth,e=o.innerWidth;return e>t?e:t},d=r.viewportH=function(){var t=a.clientHeight,e=o.innerHeight;return e>t?e:t};return r.mq=u,r.matchMedia=l?function(){return l.apply(o,arguments)}:function(){return{}},r.viewport=t,r.scrollX=function(){return o.pageXOffset||a.scrollLeft},r.scrollY=function(){return o.pageYOffset||a.scrollTop},r.rectangle=n,r.aspect=i,r.inX=function(t,e){var i=n(t,e);return!!i&&i.right>=0&&i.left<=c()},r.inY=function(t,e){var i=n(t,e);return!!i&&i.bottom>=0&&i.top<=d()},r.inViewport=function(t,e){var i=n(t,e);return!!i&&i.bottom>=0&&i.right>=0&&i.top<=d()&&i.left<=c()},r}),function(){var t,e,n,i,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=function(){function t(){}return t.prototype.extend=function(t,e){var n,i;for(n in e)i=e[n],null==t[n]&&(t[n]=i);return t},t.prototype.isMobile=function(t){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)},t.prototype.addEvent=function(t,e,n){return null!=t.addEventListener?t.addEventListener(e,n,!1):null!=t.attachEvent?t.attachEvent("on"+e,n):t[e]=n},t.prototype.removeEvent=function(t,e,n){return null!=t.removeEventListener?t.removeEventListener(e,n,!1):null!=t.detachEvent?t.detachEvent("on"+e,n):delete t[e]},t.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},t}(),n=this.WeakMap||this.MozWeakMap||(n=function(){function t(){this.keys=[],this.values=[]}return t.prototype.get=function(t){var e,n,i,r,o;for(o=this.keys,e=i=0,r=o.length;r>i;e=++i)if(n=o[e],n===t)return this.values[e]},t.prototype.set=function(t,e){var n,i,r,o,s;for(s=this.keys,n=r=0,o=s.length;o>r;n=++r)if(i=s[n],i===t)return void(this.values[n]=e);return this.keys.push(t),this.values.push(e)},t}()),t=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(t=function(){function t(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return t.notSupported=!0,t.prototype.observe=function(){},t}()),i=this.getComputedStyle||function(t){return this.getPropertyValue=function(e){var n;return"float"===e&&(e="styleFloat"),r.test(e)&&e.replace(r,function(t,e){return e.toUpperCase()}),(null!=(n=t.currentStyle)?n[e]:void 0)||null},this},r=/(\-([a-z]){1})/g,this.WOW=function(){function r(t){null==t&&(t={}),this.scrollCallback=o(this.scrollCallback,this),this.scrollHandler=o(this.scrollHandler,this),this.start=o(this.start,this),this.scrolled=!0,this.config=this.util().extend(t,this.defaults),this.animationNameCache=new n}return r.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null},r.prototype.init=function(){var t;return this.element=window.document.documentElement,"interactive"===(t=document.readyState)||"complete"===t?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},r.prototype.start=function(){var e,n,i,r;if(this.stopped=!1,this.boxes=function(){var t,n,i,r;for(i=this.element.querySelectorAll("."+this.config.boxClass),r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e);return r}.call(this),this.all=function(){var t,n,i,r;for(i=this.boxes,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e);return r}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(r=this.boxes,n=0,i=r.length;i>n;n++)e=r[n],this.applyStyle(e,!0);return this.disabled()||(this.util().addEvent(window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new t(function(t){return function(e){var n,i,r,o,s;for(s=[],r=0,o=e.length;o>r;r++)i=e[r],s.push(function(){var t,e,r,o;for(r=i.addedNodes||[],o=[],t=0,e=r.length;e>t;t++)n=r[t],o.push(this.doSync(n));return o}.call(t));return s}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},r.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval?clearInterval(this.interval):void 0},r.prototype.sync=function(){return t.notSupported?this.doSync(this.element):void 0},r.prototype.doSync=function(t){var e,n,i,r,o;if(null==t&&(t=this.element),1===t.nodeType){for(t=t.parentNode||t,r=t.querySelectorAll("."+this.config.boxClass),o=[],n=0,i=r.length;i>n;n++)e=r[n],s.call(this.all,e)<0?(this.boxes.push(e),this.all.push(e),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(e,!0),o.push(this.scrolled=!0)):o.push(void 0);return o}},r.prototype.show=function(t){return this.applyStyle(t),t.className=""+t.className+" "+this.config.animateClass,null!=this.config.callback?this.config.callback(t):void 0},r.prototype.applyStyle=function(t,e){var n,i,r;return i=t.getAttribute("data-wow-duration"),n=t.getAttribute("data-wow-delay"),r=t.getAttribute("data-wow-iteration"),this.animate(function(o){return function(){return o.customStyle(t,e,i,n,r)}}(this))},r.prototype.animate=function(){return"requestAnimationFrame"in window?function(t){return window.requestAnimationFrame(t)}:function(t){return t()}}(),r.prototype.resetStyle=function(){var t,e,n,i,r;for(i=this.boxes,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.style.visibility="visible");return r},r.prototype.customStyle=function(t,e,n,i,r){return e&&this.cacheAnimationName(t),t.style.visibility=e?"hidden":"visible",n&&this.vendorSet(t.style,{animationDuration:n}),i&&this.vendorSet(t.style,{animationDelay:i}),r&&this.vendorSet(t.style,{animationIterationCount:r}),this.vendorSet(t.style,{animationName:e?"none":this.cachedAnimationName(t)}),t},r.prototype.vendors=["moz","webkit"],r.prototype.vendorSet=function(t,e){var n,i,r,o;o=[];for(n in e)i=e[n],t[""+n]=i,o.push(function(){var e,o,s,a;for(s=this.vendors,a=[],e=0,o=s.length;o>e;e++)r=s[e],a.push(t[""+r+n.charAt(0).toUpperCase()+n.substr(1)]=i);return a}.call(this));return o},r.prototype.vendorCSS=function(t,e){var n,r,o,s,a,l;for(r=i(t),n=r.getPropertyCSSValue(e),l=this.vendors,s=0,a=l.length;a>s;s++)o=l[s],n=n||r.getPropertyCSSValue("-"+o+"-"+e);return n},r.prototype.animationName=function(t){var e;try{e=this.vendorCSS(t,"animation-name").cssText}catch(n){e=i(t).getPropertyValue("animation-name")}return"none"===e?"":e},r.prototype.cacheAnimationName=function(t){return this.animationNameCache.set(t,this.animationName(t))},r.prototype.cachedAnimationName=function(t){return this.animationNameCache.get(t)},r.prototype.scrollHandler=function(){return this.scrolled=!0},r.prototype.scrollCallback=function(){var t;return!this.scrolled||(this.scrolled=!1,this.boxes=function(){var e,n,i,r;for(i=this.boxes,r=[],e=0,n=i.length;n>e;e++)t=i[e],t&&(this.isVisible(t)?this.show(t):r.push(t));return r}.call(this),this.boxes.length||this.config.live)?void 0:this.stop()},r.prototype.offsetTop=function(t){for(var e;void 0===t.offsetTop;)t=t.parentNode;for(e=t.offsetTop;t=t.offsetParent;)e+=t.offsetTop;return e},r.prototype.isVisible=function(t){var e,n,i,r,o;return n=t.getAttribute("data-wow-offset")||this.config.offset,o=window.pageYOffset,r=o+Math.min(this.element.clientHeight,this.util().innerHeight())-n,i=this.offsetTop(t),e=i+t.clientHeight,r>=i&&e>=o},r.prototype.util=function(){return null!=this._util?this._util:this._util=new e},r.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},r}()}.call(this);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwbHVnaW5zL3BpY3R1cmVmaWxsLmpzIiwicGx1Z2lucy93b3cuanMiXSwibmFtZXMiOlsid2luZG93IiwibWF0Y2hNZWRpYSIsInN0eWxlTWVkaWEiLCJtZWRpYSIsInN0eWxlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2NyaXB0IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpbmZvIiwidHlwZSIsImlkIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsImdldENvbXB1dGVkU3R5bGUiLCJjdXJyZW50U3R5bGUiLCJtYXRjaE1lZGl1bSIsInRleHQiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsInRleHRDb250ZW50Iiwid2lkdGgiLCJtYXRjaGVzIiwidyIsImRvYyIsImltYWdlIiwicGljdHVyZWZpbGwiLCJvcHQiLCJlbGVtZW50cyIsImVsZW1lbnQiLCJwYXJlbnQiLCJmaXJzdE1hdGNoIiwiY2FuZGlkYXRlcyIsIm9wdGlvbnMiLCJwZiIsImdldEFsbEVsZW1lbnRzIiwiaSIsInBsZW4iLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJub2RlTmFtZSIsInRvVXBwZXJDYXNlIiwibnMiLCJyZWV2YWx1YXRlIiwiZXZhbHVhdGVkIiwicmVtb3ZlVmlkZW9TaGltIiwiZ2V0TWF0Y2giLCJzcmNzZXQiLCJzcmNzZXRTdXBwb3J0ZWQiLCJzaXplc1N1cHBvcnRlZCIsImluZGV4T2YiLCJkb2RnZVNyY3NldCIsInByb2Nlc3NTb3VyY2VTZXQiLCJhcHBseUJlc3RDYW5kaWRhdGUiLCJydW5QaWN0dXJlZmlsbCIsImNoZWNrUmVzaXplIiwicmVzaXplVGhyb3R0bGUiLCJfcGljdHVyZWZpbGxXb3JraW5nIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsInRlc3QiLCJyZWFkeVN0YXRlIiwiY2xlYXJJbnRlcnZhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsIkhUTUxQaWN0dXJlRWxlbWVudCIsInRyaW0iLCJzdHIiLCJyZXBsYWNlIiwiZW5kc1dpdGgiLCJzdWZmaXgiLCJyZXN0cmljdHNNaXhlZENvbnRlbnQiLCJsb2NhdGlvbiIsInByb3RvY29sIiwibWF0Y2hlc01lZGlhIiwiZ2V0RHByIiwiZGV2aWNlUGl4ZWxSYXRpbyIsImdldFdpZHRoRnJvbUxlbmd0aCIsInBhcnNlRmxvYXQiLCJsZW5ndGhFbCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNsYXNzTmFtZSIsIm9mZnNldFdpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwicmVtb3ZlQ2hpbGQiLCJ0eXBlcyIsImltcGxlbWVudGF0aW9uIiwiaGFzRmVhdHVyZSIsIm9uZXJyb3IiLCJvbmxvYWQiLCJzcmMiLCJ2ZXJpZnlUeXBlU3VwcG9ydCIsInNvdXJjZSIsImdldEF0dHJpYnV0ZSIsInBhcnNlU2l6ZSIsInNvdXJjZVNpemVTdHIiLCJtYXRjaCIsImV4ZWMiLCJmaW5kV2lkdGhGcm9tU291cmNlU2l6ZSIsInNvdXJjZVNpemVMaXN0U3RyIiwid2lubmluZ0xlbmd0aCIsInNvdXJjZVNpemVMaXN0Iiwic3BsaXQiLCJsZW4iLCJzb3VyY2VTaXplIiwicGFyc2VkU2l6ZSIsInBhcnNlU3Jjc2V0IiwidXJsIiwicG9zIiwic2VhcmNoIiwiZGVzY3JpcHRvciIsInNsaWNlIiwibGFzdCIsImRlc2Nwb3MiLCJwdXNoIiwicGFyc2VEZXNjcmlwdG9yIiwic2l6ZXNhdHRyIiwicmVzQ2FuZGlkYXRlIiwic2l6ZXMiLCJzaXplRGVzY3JpcHRvciIsIndpZHRoSW5Dc3NQaXhlbHMiLCJzcGxpdERlc2NyaXB0b3IiLCJjdXJyIiwibGFzdGNoYXIiLCJyZXMiLCJpc05hTiIsInBhcnNlSW50IiwiZ2V0Q2FuZGlkYXRlc0Zyb21Tb3VyY2VTZXQiLCJmb3JtYXR0ZWRDYW5kaWRhdGVzIiwiY2FuZGlkYXRlIiwicmVzb2x1dGlvbiIsImltZyIsInJlbW92ZUF0dHJpYnV0ZSIsImVsIiwicGljSW1nIiwiYmVzdENhbmRpZGF0ZSIsInNvcnQiLCJhc2NlbmRpbmdTb3J0Iiwic3Vic3RyIiwidG9Mb3dlckNhc2UiLCJjb25zb2xlIiwid2FybiIsImN1cnJlbnRTcmMiLCJXZWJraXRCYWNrZmFjZVZpc2liaWxpdHkiLCJjdXJyZW50Wm9vbSIsInpvb20iLCJhIiwiYiIsInBpY3R1cmUiLCJ2aWRlb3MiLCJ2aWRlbyIsInZzb3VyY2VzIiwiZWxlbXMiLCJpbWdzIiwiaCIsImN1cnJJbWciLCJzb3VyY2VzIiwiY2hpbGROb2RlcyIsImoiLCJzbGVuIiwibm9kZVR5cGUiLCJ0eXBlU3VwcG9ydGVkIiwiXyIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwiSW1hZ2UiLCJyb290IiwibmFtZSIsIm1ha2UiLCJ2aWV3cG9ydCIsInZpZXdwb3J0VyIsImhlaWdodCIsInZpZXdwb3J0SCIsImNhbGlicmF0ZSIsImNvb3JkcyIsImN1c2hpb24iLCJvIiwicmVjdGFuZ2xlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYXNwZWN0IiwiY2FsbCIsInhwb3J0cyIsIndpbiIsImRvY0VsZW0iLCJtcSIsInEiLCJhcHBseSIsImFyZ3VtZW50cyIsInBhZ2VYT2Zmc2V0Iiwic2Nyb2xsTGVmdCIsInBhZ2VZT2Zmc2V0Iiwic2Nyb2xsVG9wIiwiciIsInJpZ2h0IiwibGVmdCIsImJvdHRvbSIsInRvcCIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJVdGlsIiwiV2Vha01hcCIsImdldENvbXB1dGVkU3R5bGVSWCIsIl9fYmluZCIsImZuIiwibWUiLCJfX2luZGV4T2YiLCJpdGVtIiwibCIsInByb3RvdHlwZSIsImV4dGVuZCIsImN1c3RvbSIsImRlZmF1bHRzIiwia2V5IiwidmFsdWUiLCJpc01vYmlsZSIsImFnZW50IiwiYWRkRXZlbnQiLCJlbGVtIiwiZXZlbnQiLCJyZW1vdmVFdmVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkZXRhY2hFdmVudCIsImlubmVySGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiTW96V2Vha01hcCIsImtleXMiLCJ2YWx1ZXMiLCJnZXQiLCJfaSIsIl9sZW4iLCJfcmVmIiwic2V0IiwiV2Via2l0TXV0YXRpb25PYnNlcnZlciIsIk1vek11dGF0aW9uT2JzZXJ2ZXIiLCJub3RTdXBwb3J0ZWQiLCJvYnNlcnZlIiwiZ2V0UHJvcGVydHlWYWx1ZSIsInByb3AiLCJfY2hhciIsIldPVyIsInNjcm9sbENhbGxiYWNrIiwic2Nyb2xsSGFuZGxlciIsInN0YXJ0Iiwic2Nyb2xsZWQiLCJjb25maWciLCJ1dGlsIiwiYW5pbWF0aW9uTmFtZUNhY2hlIiwiYm94Q2xhc3MiLCJhbmltYXRlQ2xhc3MiLCJvZmZzZXQiLCJtb2JpbGUiLCJsaXZlIiwiY2FsbGJhY2siLCJpbml0IiwiZmluaXNoZWQiLCJib3giLCJzdG9wcGVkIiwiYm94ZXMiLCJfcmVzdWx0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhbGwiLCJkaXNhYmxlZCIsInJlc2V0U3R5bGUiLCJhcHBseVN0eWxlIiwiaW50ZXJ2YWwiLCJfdGhpcyIsInJlY29yZHMiLCJub2RlIiwicmVjb3JkIiwiX2oiLCJfbGVuMSIsIl9rIiwiX2xlbjIiLCJfcmVmMSIsIl9yZXN1bHRzMSIsImFkZGVkTm9kZXMiLCJkb1N5bmMiLCJjaGlsZExpc3QiLCJzdWJ0cmVlIiwic3RvcCIsInN5bmMiLCJzaG93IiwiaGlkZGVuIiwiZGVsYXkiLCJkdXJhdGlvbiIsIml0ZXJhdGlvbiIsImFuaW1hdGUiLCJjdXN0b21TdHlsZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInZpc2liaWxpdHkiLCJjYWNoZUFuaW1hdGlvbk5hbWUiLCJ2ZW5kb3JTZXQiLCJhbmltYXRpb25EdXJhdGlvbiIsImFuaW1hdGlvbkRlbGF5IiwiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQiLCJhbmltYXRpb25OYW1lIiwiY2FjaGVkQW5pbWF0aW9uTmFtZSIsInZlbmRvcnMiLCJwcm9wZXJ0aWVzIiwidmVuZG9yIiwiY2hhckF0IiwidmVuZG9yQ1NTIiwicHJvcGVydHkiLCJyZXN1bHQiLCJnZXRQcm9wZXJ0eUNTU1ZhbHVlIiwiX2Vycm9yIiwiaXNWaXNpYmxlIiwib2Zmc2V0VG9wIiwib2Zmc2V0UGFyZW50Iiwidmlld0JvdHRvbSIsInZpZXdUb3AiLCJNYXRoIiwibWluIiwiX3V0aWwiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiXSwibWFwcGluZ3MiOiJBQUtBQSxPQUFBQyxhQUFBRCxPQUFBQyxXQUFBLFdBQ0EsWUFHQSxJQUFBQyxHQUFBRixPQUFBRSxZQUFBRixPQUFBRyxLQUdBLEtBQUFELEVBQUEsQ0FDQSxHQUFBRSxHQUFBQyxTQUFBQyxjQUFBLFNBQ0FDLEVBQUFGLFNBQUFHLHFCQUFBLFVBQUEsR0FDQUMsRUFBQSxJQUVBTCxHQUFBTSxLQUFBLFdBQ0FOLEVBQUFPLEdBQUEsb0JBRUFKLEVBQUFLLFdBQUFDLGFBQUFULEVBQUFHLEdBR0FFLEVBQUEsb0JBQUFULFNBQUFBLE9BQUFjLGlCQUFBVixFQUFBLE9BQUFBLEVBQUFXLGFBRUFiLEdBQ0FjLFlBQUEsU0FBQWIsR0FDQSxHQUFBYyxHQUFBLFVBQUFkLEVBQUEsd0NBVUEsT0FQQUMsR0FBQWMsV0FDQWQsRUFBQWMsV0FBQUMsUUFBQUYsRUFFQWIsRUFBQWdCLFlBQUFILEVBSUEsUUFBQVIsRUFBQVksUUFLQSxNQUFBLFVBQUFsQixHQUNBLE9BQ0FtQixRQUFBcEIsRUFBQWMsWUFBQWIsR0FBQSxPQUNBQSxNQUFBQSxHQUFBLFlBU0EsU0FBQW9CLEVBQUFDLEVBQUFDLEdBRUEsWUFvZEEsU0FBQUMsR0FBQUMsR0FDQSxHQUFBQyxHQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUFBTixLQUVBQyxHQUFBSyxFQUFBTCxVQUFBTSxFQUFBQyxnQkFHQSxLQUFBLEdBQUFDLEdBQUEsRUFBQUMsRUFBQVQsRUFBQVUsT0FBQUQsRUFBQUQsRUFBQUEsSUFPQSxHQU5BUCxFQUFBRCxFQUFBUSxHQUNBTixFQUFBRCxFQUFBakIsV0FDQW1CLEVBQUFRLE9BQ0FQLEVBQUFPLE9BR0EsUUFBQVYsRUFBQVcsU0FBQUMsZ0JBS0FaLEVBQUFLLEVBQUFR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QUFBQSxFQUFBakIsVUFHQSxLQURBOEwsRUFBQTdLLEVBQUEyUixVQUNBM1IsRUFBQUEsRUFBQTRSLGNBQ0EvRyxHQUFBN0ssRUFBQTJSLFNBRUEsT0FBQTlHLElBR0EwQyxFQUFBL0IsVUFBQWtHLFVBQUEsU0FBQW5ELEdBQ0EsR0FBQTNELEdBQUFxRCxFQUFBcEQsRUFBQWdILEVBQUFDLENBTUEsT0FMQTdELEdBQUFNLEVBQUFwSyxhQUFBLG9CQUFBMEUsS0FBQStFLE9BQUFLLE9BQ0E2RCxFQUFBM1QsT0FBQW9NLFlBQ0FzSCxFQUFBQyxFQUFBQyxLQUFBQyxJQUFBbkosS0FBQTdJLFFBQUF1TSxhQUFBMUQsS0FBQWdGLE9BQUF2QixlQUFBMkIsRUFDQXBELEVBQUFoQyxLQUFBOEksVUFBQXBELEdBQ0EzRCxFQUFBQyxFQUFBMEQsRUFBQWhDLGFBQ0FzRixHQUFBaEgsR0FBQUQsR0FBQWtILEdBR0F2RSxFQUFBL0IsVUFBQXFDLEtBQUEsV0FDQSxNQUFBLE9BQUFoRixLQUFBb0osTUFBQXBKLEtBQUFvSixNQUFBcEosS0FBQW9KLE1BQUEsR0FBQWxILElBR0F3QyxFQUFBL0IsVUFBQXFELFNBQUEsV0FDQSxPQUFBaEcsS0FBQStFLE9BQUFNLFFBQUFyRixLQUFBZ0YsT0FBQS9CLFNBQUFvRyxVQUFBQyxZQUdBNUUsTUFJQTFELEtBQUFoQiIsImZpbGUiOiJhbGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIFBpY3R1cmVmaWxsIC0gdjIuMi4wIC0gMjAxNC0xMC0zMFxuKiBodHRwOi8vc2NvdHRqZWhsLmdpdGh1Yi5pby9waWN0dXJlZmlsbFxuKiBDb3B5cmlnaHQgKGMpIDIwMTQgaHR0cHM6Ly9naXRodWIuY29tL3Njb3R0amVobC9waWN0dXJlZmlsbC9ibG9iL21hc3Rlci9BdXRob3JzLnR4dDsgTGljZW5zZWQgTUlUICovXG4vKiEgbWF0Y2hNZWRpYSgpIHBvbHlmaWxsIC0gVGVzdCBhIENTUyBtZWRpYSB0eXBlL3F1ZXJ5IGluIEpTLiBBdXRob3JzICYgY29weXJpZ2h0IChjKSAyMDEyOiBTY290dCBKZWhsLCBQYXVsIElyaXNoLCBOaWNob2xhcyBaYWthcywgRGF2aWQgS25pZ2h0LiBEdWFsIE1JVC9CU0QgbGljZW5zZSAqL1xuXG53aW5kb3cubWF0Y2hNZWRpYSB8fCAod2luZG93Lm1hdGNoTWVkaWEgPSBmdW5jdGlvbigpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLy8gRm9yIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBtYXRjaE1lZGl1bSBhcGkgc3VjaCBhcyBJRSA5IGFuZCB3ZWJraXRcbiAgdmFyIHN0eWxlTWVkaWEgPSAod2luZG93LnN0eWxlTWVkaWEgfHwgd2luZG93Lm1lZGlhKTtcblxuICAvLyBGb3IgdGhvc2UgdGhhdCBkb24ndCBzdXBwb3J0IG1hdGNoTWVkaXVtXG4gIGlmICghc3R5bGVNZWRpYSkge1xuICAgIHZhciBzdHlsZSAgICAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyksXG4gICAgICBzY3JpcHQgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXSxcbiAgICAgIGluZm8gICAgICAgID0gbnVsbDtcblxuICAgIHN0eWxlLnR5cGUgID0gJ3RleHQvY3NzJztcbiAgICBzdHlsZS5pZCAgICA9ICdtYXRjaG1lZGlhanMtdGVzdCc7XG5cbiAgICBzY3JpcHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc3R5bGUsIHNjcmlwdCk7XG5cbiAgICAvLyAnc3R5bGUuY3VycmVudFN0eWxlJyBpcyB1c2VkIGJ5IElFIDw9IDggYW5kICd3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZScgZm9yIGFsbCBvdGhlciBicm93c2Vyc1xuICAgIGluZm8gPSAoJ2dldENvbXB1dGVkU3R5bGUnIGluIHdpbmRvdykgJiYgd2luZG93LmdldENvbXB1dGVkU3R5bGUoc3R5bGUsIG51bGwpIHx8IHN0eWxlLmN1cnJlbnRTdHlsZTtcblxuICAgIHN0eWxlTWVkaWEgPSB7XG4gICAgICBtYXRjaE1lZGl1bTogZnVuY3Rpb24obWVkaWEpIHtcbiAgICAgICAgdmFyIHRleHQgPSAnQG1lZGlhICcgKyBtZWRpYSArICd7ICNtYXRjaG1lZGlhanMtdGVzdCB7IHdpZHRoOiAxcHg7IH0gfSc7XG5cbiAgICAgICAgLy8gJ3N0eWxlLnN0eWxlU2hlZXQnIGlzIHVzZWQgYnkgSUUgPD0gOCBhbmQgJ3N0eWxlLnRleHRDb250ZW50JyBmb3IgYWxsIG90aGVyIGJyb3dzZXJzXG4gICAgICAgIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgICAgICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gdGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUZXN0IGlmIG1lZGlhIHF1ZXJ5IGlzIHRydWUgb3IgZmFsc2VcbiAgICAgICAgcmV0dXJuIGluZm8ud2lkdGggPT09ICcxcHgnO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24obWVkaWEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWF0Y2hlczogc3R5bGVNZWRpYS5tYXRjaE1lZGl1bShtZWRpYSB8fCAnYWxsJyksXG4gICAgICBtZWRpYTogbWVkaWEgfHwgJ2FsbCdcbiAgICB9O1xuICB9O1xufSgpKTtcbi8qISBQaWN0dXJlZmlsbCAtIFJlc3BvbnNpdmUgSW1hZ2VzIHRoYXQgd29yayB0b2RheS5cbiogIEF1dGhvcjogU2NvdHQgSmVobCwgRmlsYW1lbnQgR3JvdXAsIDIwMTIgKCBuZXcgcHJvcG9zYWwgaW1wbGVtZW50ZWQgYnkgU2hhd24gSmFuc2VwYXIgKVxuKiAgTGljZW5zZTogTUlUL0dQTHYyXG4qICBTcGVjOiBodHRwOi8vcGljdHVyZS5yZXNwb25zaXZlaW1hZ2VzLm9yZy9cbiovXG4oZnVuY3Rpb24oIHcsIGRvYywgaW1hZ2UgKSB7XG4gIC8vIEVuYWJsZSBzdHJpY3QgbW9kZVxuICBcInVzZSBzdHJpY3RcIjtcblxuICAvLyBJZiBwaWN0dXJlIGlzIHN1cHBvcnRlZCwgd2VsbCwgdGhhdCdzIGF3ZXNvbWUuIExldCdzIGdldCBvdXR0YSBoZXJlLi4uXG4gIGlmICggdy5IVE1MUGljdHVyZUVsZW1lbnQgKSB7XG4gICAgdy5waWN0dXJlZmlsbCA9IGZ1bmN0aW9uKCkgeyB9O1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEhUTUwgc2hpbXx2IGl0IGZvciBvbGQgSUUgKElFOSB3aWxsIHN0aWxsIG5lZWQgdGhlIEhUTUwgdmlkZW8gdGFnIHdvcmthcm91bmQpXG4gIGRvYy5jcmVhdGVFbGVtZW50KCBcInBpY3R1cmVcIiApO1xuXG4gIC8vIGxvY2FsIG9iamVjdCBmb3IgbWV0aG9kIHJlZmVyZW5jZXMgYW5kIHRlc3RpbmcgZXhwb3N1cmVcbiAgdmFyIHBmID0ge307XG5cbiAgLy8gbmFtZXNwYWNlXG4gIHBmLm5zID0gXCJwaWN0dXJlZmlsbFwiO1xuXG4gIC8vIHNyY3NldCBzdXBwb3J0IHRlc3RcbiAgKGZ1bmN0aW9uKCkge1xuICAgIHBmLnNyY3NldFN1cHBvcnRlZCA9IFwic3Jjc2V0XCIgaW4gaW1hZ2U7XG4gICAgcGYuc2l6ZXNTdXBwb3J0ZWQgPSBcInNpemVzXCIgaW4gaW1hZ2U7XG4gIH0pKCk7XG5cbiAgLy8ganVzdCBhIHN0cmluZyB0cmltIHdvcmthcm91bmRcbiAgcGYudHJpbSA9IGZ1bmN0aW9uKCBzdHIgKSB7XG4gICAgcmV0dXJuIHN0ci50cmltID8gc3RyLnRyaW0oKSA6IHN0ci5yZXBsYWNlKCAvXlxccyt8XFxzKyQvZywgXCJcIiApO1xuICB9O1xuXG4gIC8vIGp1c3QgYSBzdHJpbmcgZW5kc1dpdGggd29ya2Fyb3VuZFxuICBwZi5lbmRzV2l0aCA9IGZ1bmN0aW9uKCBzdHIsIHN1ZmZpeCApIHtcbiAgICByZXR1cm4gc3RyLmVuZHNXaXRoID8gc3RyLmVuZHNXaXRoKCBzdWZmaXggKSA6IHN0ci5pbmRleE9mKCBzdWZmaXgsIHN0ci5sZW5ndGggLSBzdWZmaXgubGVuZ3RoICkgIT09IC0xO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTaG9ydGN1dCBtZXRob2QgZm9yIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJhcHBzZWMvc3BlY3MvbWl4ZWRjb250ZW50LyNyZXN0cmljdHMtbWl4ZWQtY29udGVudCAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxuICAgKi9cbiAgcGYucmVzdHJpY3RzTWl4ZWRDb250ZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHcubG9jYXRpb24ucHJvdG9jb2wgPT09IFwiaHR0cHM6XCI7XG4gIH07XG4gIC8qKlxuICAgKiBTaG9ydGN1dCBtZXRob2QgZm9yIG1hdGNoTWVkaWEgKCBmb3IgZWFzeSBvdmVycmlkaW5nIGluIHRlc3RzIClcbiAgICovXG5cbiAgcGYubWF0Y2hlc01lZGlhID0gZnVuY3Rpb24oIG1lZGlhICkge1xuICAgIHJldHVybiB3Lm1hdGNoTWVkaWEgJiYgdy5tYXRjaE1lZGlhKCBtZWRpYSApLm1hdGNoZXM7XG4gIH07XG5cbiAgLy8gU2hvcnRjdXQgbWV0aG9kIGZvciBgZGV2aWNlUGl4ZWxSYXRpb2AgKCBmb3IgZWFzeSBvdmVycmlkaW5nIGluIHRlc3RzIClcbiAgcGYuZ2V0RHByID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICggdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEgKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHdpZHRoIGluIGNzcyBwaXhlbCB2YWx1ZSBmcm9tIGEgXCJsZW5ndGhcIiB2YWx1ZVxuICAgKiBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MtdmFsdWVzLTMvI2xlbmd0aC12YWx1ZVxuICAgKi9cbiAgcGYuZ2V0V2lkdGhGcm9tTGVuZ3RoID0gZnVuY3Rpb24oIGxlbmd0aCApIHtcbiAgICAvLyBJZiBhIGxlbmd0aCBpcyBzcGVjaWZpZWQgYW5kIGRvZXNu4oCZdCBjb250YWluIGEgcGVyY2VudGFnZSwgYW5kIGl0IGlzIGdyZWF0ZXIgdGhhbiAwIG9yIHVzaW5nIGBjYWxjYCwgdXNlIGl0LiBFbHNlLCB1c2UgdGhlIGAxMDB2d2AgZGVmYXVsdC5cbiAgICBsZW5ndGggPSBsZW5ndGggJiYgbGVuZ3RoLmluZGV4T2YoIFwiJVwiICkgPiAtMSA9PT0gZmFsc2UgJiYgKCBwYXJzZUZsb2F0KCBsZW5ndGggKSA+IDAgfHwgbGVuZ3RoLmluZGV4T2YoIFwiY2FsYyhcIiApID4gLTEgKSA/IGxlbmd0aCA6IFwiMTAwdndcIjtcblxuICAgIC8qKlxuICAgICAqIElmIGxlbmd0aCBpcyBzcGVjaWZpZWQgaW4gIGB2d2AgdW5pdHMsIHVzZSBgJWAgaW5zdGVhZCBzaW5jZSB0aGUgZGl2IHdl4oCZcmUgbWVhc3VyaW5nXG4gICAgICogaXMgaW5qZWN0ZWQgYXQgdGhlIHRvcCBvZiB0aGUgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBUT0RPOiBtYXliZSB3ZSBzaG91bGQgcHV0IHRoaXMgYmVoaW5kIGEgZmVhdHVyZSB0ZXN0IGZvciBgdndgP1xuICAgICAqL1xuICAgIGxlbmd0aCA9IGxlbmd0aC5yZXBsYWNlKCBcInZ3XCIsIFwiJVwiICk7XG5cbiAgICAvLyBDcmVhdGUgYSBjYWNoZWQgZWxlbWVudCBmb3IgZ2V0dGluZyBsZW5ndGggdmFsdWUgd2lkdGhzXG4gICAgaWYgKCAhcGYubGVuZ3RoRWwgKSB7XG4gICAgICBwZi5sZW5ndGhFbCA9IGRvYy5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG5cbiAgICAgIC8vIFBvc2l0aW9uaW5nIHN0eWxlcyBoZWxwIHByZXZlbnQgcGFkZGluZy9tYXJnaW4vd2lkdGggb24gYGh0bWxgIG9yIGBib2R5YCBmcm9tIHRocm93aW5nIGNhbGN1bGF0aW9ucyBvZmYuXG4gICAgICBwZi5sZW5ndGhFbC5zdHlsZS5jc3NUZXh0ID0gXCJib3JkZXI6MDtkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZToxZW07bGVmdDowO21hcmdpbjowO3BhZGRpbmc6MDtwb3NpdGlvbjphYnNvbHV0ZTt2aXNpYmlsaXR5OmhpZGRlblwiO1xuICAgIH1cblxuICAgIHBmLmxlbmd0aEVsLnN0eWxlLndpZHRoID0gbGVuZ3RoO1xuXG4gICAgZG9jLmJvZHkuYXBwZW5kQ2hpbGQocGYubGVuZ3RoRWwpO1xuXG4gICAgLy8gQWRkIGEgY2xhc3MsIHNvIHRoYXQgZXZlcnlvbmUga25vd3Mgd2hlcmUgdGhpcyBlbGVtZW50IGNvbWVzIGZyb21cbiAgICBwZi5sZW5ndGhFbC5jbGFzc05hbWUgPSBcImhlbHBlci1mcm9tLXBpY3R1cmVmaWxsLWpzXCI7XG5cbiAgICBpZiAoIHBmLmxlbmd0aEVsLm9mZnNldFdpZHRoIDw9IDAgKSB7XG4gICAgICAvLyBTb21ldGhpbmcgaGFzIGdvbmUgd3JvbmcuIGBjYWxjKClgIGlzIGluIHVzZSBhbmQgdW5zdXBwb3J0ZWQsIG1vc3QgbGlrZWx5LiBEZWZhdWx0IHRvIGAxMDB2d2AgKGAxMDAlYCwgZm9yIGJyb2FkZXIgc3VwcG9ydC4pOlxuICAgICAgcGYubGVuZ3RoRWwuc3R5bGUud2lkdGggPSBkb2MuZG9jdW1lbnRFbGVtZW50Lm9mZnNldFdpZHRoICsgXCJweFwiO1xuICAgIH1cblxuICAgIHZhciBvZmZzZXRXaWR0aCA9IHBmLmxlbmd0aEVsLm9mZnNldFdpZHRoO1xuXG4gICAgZG9jLmJvZHkucmVtb3ZlQ2hpbGQoIHBmLmxlbmd0aEVsICk7XG5cbiAgICByZXR1cm4gb2Zmc2V0V2lkdGg7XG4gIH07XG5cbiAgLy8gY29udGFpbmVyIG9mIHN1cHBvcnRlZCBtaW1lIHR5cGVzIHRoYXQgb25lIG1pZ2h0IG5lZWQgdG8gcXVhbGlmeSBiZWZvcmUgdXNpbmdcbiAgcGYudHlwZXMgPSAge307XG5cbiAgLy8gQWRkIHN1cHBvcnQgZm9yIHN0YW5kYXJkIG1pbWUgdHlwZXNcbiAgcGYudHlwZXNbIFwiaW1hZ2UvanBlZ1wiIF0gPSB0cnVlO1xuICBwZi50eXBlc1sgXCJpbWFnZS9naWZcIiBdID0gdHJ1ZTtcbiAgcGYudHlwZXNbIFwiaW1hZ2UvcG5nXCIgXSA9IHRydWU7XG5cbiAgLy8gdGVzdCBzdmcgc3VwcG9ydFxuICBwZi50eXBlc1sgXCJpbWFnZS9zdmcreG1sXCIgXSA9IGRvYy5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKFwiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNJbWFnZVwiLCBcIjEuMVwiKTtcblxuICAvLyB0ZXN0IHdlYnAgc3VwcG9ydCwgb25seSB3aGVuIHRoZSBtYXJrdXAgY2FsbHMgZm9yIGl0XG4gIHBmLnR5cGVzWyBcImltYWdlL3dlYnBcIiBdID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gYmFzZWQgb24gTW9kZXJuaXpyJ3MgbG9zc2xlc3MgaW1nLXdlYnAgdGVzdFxuICAgIC8vIG5vdGU6IGFzeW5jaHJvbm91c1xuICAgIHZhciB0eXBlID0gXCJpbWFnZS93ZWJwXCI7XG5cbiAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICBwZi50eXBlc1sgdHlwZSBdID0gZmFsc2U7XG4gICAgICBwaWN0dXJlZmlsbCgpO1xuICAgIH07XG4gICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICBwZi50eXBlc1sgdHlwZSBdID0gaW1hZ2Uud2lkdGggPT09IDE7XG4gICAgICBwaWN0dXJlZmlsbCgpO1xuICAgIH07XG4gICAgaW1hZ2Uuc3JjID0gXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFVrbEdSaDRBQUFCWFJVSlFWbEE0VEJFQUFBQXZBQUFBQUFmUS8vNzN2LytCaU9oL0FBQT1cIjtcbiAgfTtcblxuICAvKipcbiAgICogVGFrZXMgYSBzb3VyY2UgZWxlbWVudCBhbmQgY2hlY2tzIGlmIGl0cyB0eXBlIGF0dHJpYnV0ZSBpcyBwcmVzZW50IGFuZCBpZiBzbywgc3VwcG9ydGVkXG4gICAqIE5vdGU6IGZvciB0eXBlIHRlc3RzIHRoYXQgcmVxdWlyZSBhIGFzeW5jIGxvZ2ljLFxuICAgKiB5b3UgY2FuIGRlZmluZSB0aGVtIGFzIGEgZnVuY3Rpb24gdGhhdCdsbCBydW4gb25seSBpZiB0aGF0IHR5cGUgbmVlZHMgdG8gYmUgdGVzdGVkLiBKdXN0IG1ha2UgdGhlIHRlc3QgZnVuY3Rpb24gY2FsbCBwaWN0dXJlZmlsbCBhZ2FpbiB3aGVuIGl0IGlzIGNvbXBsZXRlLlxuICAgKiBzZWUgdGhlIGFzeW5jIHdlYnAgdGVzdCBhYm92ZSBmb3IgZXhhbXBsZVxuICAgKi9cbiAgcGYudmVyaWZ5VHlwZVN1cHBvcnQgPSBmdW5jdGlvbiggc291cmNlICkge1xuICAgIHZhciB0eXBlID0gc291cmNlLmdldEF0dHJpYnV0ZSggXCJ0eXBlXCIgKTtcbiAgICAvLyBpZiB0eXBlIGF0dHJpYnV0ZSBleGlzdHMsIHJldHVybiB0ZXN0IHJlc3VsdCwgb3RoZXJ3aXNlIHJldHVybiB0cnVlXG4gICAgaWYgKCB0eXBlID09PSBudWxsIHx8IHR5cGUgPT09IFwiXCIgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaWYgdGhlIHR5cGUgdGVzdCBpcyBhIGZ1bmN0aW9uLCBydW4gaXQgYW5kIHJldHVybiBcInBlbmRpbmdcIiBzdGF0dXMuIFRoZSBmdW5jdGlvbiB3aWxsIHJlcnVuIHBpY3R1cmVmaWxsIG9uIHBlbmRpbmcgZWxlbWVudHMgb25jZSBmaW5pc2hlZC5cbiAgICAgIGlmICggdHlwZW9mKCBwZi50eXBlc1sgdHlwZSBdICkgPT09IFwiZnVuY3Rpb25cIiApIHtcbiAgICAgICAgcGYudHlwZXNbIHR5cGUgXSgpO1xuICAgICAgICByZXR1cm4gXCJwZW5kaW5nXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcGYudHlwZXNbIHR5cGUgXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gUGFyc2VzIGFuIGluZGl2aWR1YWwgYHNpemVgIGFuZCByZXR1cm5zIHRoZSBsZW5ndGgsIGFuZCBvcHRpb25hbCBtZWRpYSBxdWVyeVxuICBwZi5wYXJzZVNpemUgPSBmdW5jdGlvbiggc291cmNlU2l6ZVN0ciApIHtcbiAgICB2YXIgbWF0Y2ggPSAvKFxcKFteKV0rXFwpKT9cXHMqKC4rKS9nLmV4ZWMoIHNvdXJjZVNpemVTdHIgKTtcbiAgICByZXR1cm4ge1xuICAgICAgbWVkaWE6IG1hdGNoICYmIG1hdGNoWzFdLFxuICAgICAgbGVuZ3RoOiBtYXRjaCAmJiBtYXRjaFsyXVxuICAgIH07XG4gIH07XG5cbiAgLy8gVGFrZXMgYSBzdHJpbmcgb2Ygc2l6ZXMgYW5kIHJldHVybnMgdGhlIHdpZHRoIGluIHBpeGVscyBhcyBhIG51bWJlclxuICBwZi5maW5kV2lkdGhGcm9tU291cmNlU2l6ZSA9IGZ1bmN0aW9uKCBzb3VyY2VTaXplTGlzdFN0ciApIHtcbiAgICAvLyBTcGxpdCB1cCBzb3VyY2Ugc2l6ZSBsaXN0LCBpZSAoIG1heC13aWR0aDogMzBlbSApIDEwMCUsICggbWF4LXdpZHRoOiA1MGVtICkgNTAlLCAzMyVcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciAobWluLXdpZHRoOjMwZW0pIGNhbGMoMzAlIC0gMTVweClcbiAgICB2YXIgc291cmNlU2l6ZUxpc3QgPSBwZi50cmltKCBzb3VyY2VTaXplTGlzdFN0ciApLnNwbGl0KCAvXFxzKixcXHMqLyApLFxuICAgICAgd2lubmluZ0xlbmd0aDtcblxuICAgIGZvciAoIHZhciBpID0gMCwgbGVuID0gc291cmNlU2l6ZUxpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgICAvLyBNYXRjaCA8bWVkaWEtY29uZGl0aW9uPj8gbGVuZ3RoLCBpZSAoIG1pbi13aWR0aDogNTBlbSApIDEwMCVcbiAgICAgIHZhciBzb3VyY2VTaXplID0gc291cmNlU2l6ZUxpc3RbIGkgXSxcbiAgICAgICAgLy8gU3BsaXQgXCIoIG1pbi13aWR0aDogNTBlbSApIDEwMCVcIiBpbnRvIHNlcGFyYXRlIHN0cmluZ3NcbiAgICAgICAgcGFyc2VkU2l6ZSA9IHBmLnBhcnNlU2l6ZSggc291cmNlU2l6ZSApLFxuICAgICAgICBsZW5ndGggPSBwYXJzZWRTaXplLmxlbmd0aCxcbiAgICAgICAgbWVkaWEgPSBwYXJzZWRTaXplLm1lZGlhO1xuXG4gICAgICBpZiAoICFsZW5ndGggKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKCAhbWVkaWEgfHwgcGYubWF0Y2hlc01lZGlhKCBtZWRpYSApICkge1xuICAgICAgICAvLyBpZiB0aGVyZSBpcyBubyBtZWRpYSBxdWVyeSBvciBpdCBtYXRjaGVzLCBjaG9vc2UgdGhpcyBhcyBvdXIgd2lubmluZyBsZW5ndGhcbiAgICAgICAgLy8gYW5kIGVuZCBhbGdvcml0aG1cbiAgICAgICAgd2lubmluZ0xlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcGFzcyB0aGUgbGVuZ3RoIHRvIGEgbWV0aG9kIHRoYXQgY2FuIHByb3Blcmx5IGRldGVybWluZSBsZW5ndGhcbiAgICAvLyBpbiBwaXhlbHMgYmFzZWQgb24gdGhlc2UgZm9ybWF0czogaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy0zLyNsZW5ndGgtdmFsdWVcbiAgICByZXR1cm4gcGYuZ2V0V2lkdGhGcm9tTGVuZ3RoKCB3aW5uaW5nTGVuZ3RoICk7XG4gIH07XG5cbiAgcGYucGFyc2VTcmNzZXQgPSBmdW5jdGlvbiggc3Jjc2V0ICkge1xuICAgIC8qKlxuICAgICAqIEEgbG90IG9mIHRoaXMgd2FzIHB1bGxlZCBmcm9tIEJvcmlzIFNtdXPigJkgcGFyc2VyIGZvciB0aGUgbm93LWRlZnVuY3QgV0hBVFdHIGBzcmNzZXRgXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2JvcmlzbXVzL3NyY3NldC1wb2x5ZmlsbC9ibG9iL21hc3Rlci9qcy9zcmNzZXQtaW5mby5qc1xuICAgICAqXG4gICAgICogMS4gTGV0IGlucHV0IChgc3Jjc2V0YCkgYmUgdGhlIHZhbHVlIHBhc3NlZCB0byB0aGlzIGFsZ29yaXRobS5cbiAgICAgKiAyLiBMZXQgcG9zaXRpb24gYmUgYSBwb2ludGVyIGludG8gaW5wdXQsIGluaXRpYWxseSBwb2ludGluZyBhdCB0aGUgc3RhcnQgb2YgdGhlIHN0cmluZy5cbiAgICAgKiAzLiBMZXQgcmF3IGNhbmRpZGF0ZXMgYmUgYW4gaW5pdGlhbGx5IGVtcHR5IG9yZGVyZWQgbGlzdCBvZiBVUkxzIHdpdGggYXNzb2NpYXRlZFxuICAgICAqICAgIHVucGFyc2VkIGRlc2NyaXB0b3JzLiBUaGUgb3JkZXIgb2YgZW50cmllcyBpbiB0aGUgbGlzdCBpcyB0aGUgb3JkZXIgaW4gd2hpY2ggZW50cmllc1xuICAgICAqICAgIGFyZSBhZGRlZCB0byB0aGUgbGlzdC5cbiAgICAgKi9cbiAgICB2YXIgY2FuZGlkYXRlcyA9IFtdO1xuXG4gICAgd2hpbGUgKCBzcmNzZXQgIT09IFwiXCIgKSB7XG4gICAgICBzcmNzZXQgPSBzcmNzZXQucmVwbGFjZSggL15cXHMrL2csIFwiXCIgKTtcblxuICAgICAgLy8gNS4gQ29sbGVjdCBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgdGhhdCBhcmUgbm90IHNwYWNlIGNoYXJhY3RlcnMsIGFuZCBsZXQgdGhhdCBiZSB1cmwuXG4gICAgICB2YXIgcG9zID0gc3Jjc2V0LnNlYXJjaCgvXFxzL2cpLFxuICAgICAgICB1cmwsIGRlc2NyaXB0b3IgPSBudWxsO1xuXG4gICAgICBpZiAoIHBvcyAhPT0gLTEgKSB7XG4gICAgICAgIHVybCA9IHNyY3NldC5zbGljZSggMCwgcG9zICk7XG5cbiAgICAgICAgdmFyIGxhc3QgPSB1cmwuc2xpY2UoLTEpO1xuXG4gICAgICAgIC8vIDYuIElmIHVybCBlbmRzIHdpdGggYSBVKzAwMkMgQ09NTUEgY2hhcmFjdGVyICgsKSwgcmVtb3ZlIHRoYXQgY2hhcmFjdGVyIGZyb20gdXJsXG4gICAgICAgIC8vIGFuZCBsZXQgZGVzY3JpcHRvcnMgYmUgdGhlIGVtcHR5IHN0cmluZy4gT3RoZXJ3aXNlLCBmb2xsb3cgdGhlc2Ugc3Vic3RlcHNcbiAgICAgICAgLy8gNi4xLiBJZiB1cmwgaXMgZW1wdHksIHRoZW4ganVtcCB0byB0aGUgc3RlcCBsYWJlbGVkIGRlc2NyaXB0b3IgcGFyc2VyLlxuXG4gICAgICAgIGlmICggbGFzdCA9PT0gXCIsXCIgfHwgdXJsID09PSBcIlwiICkge1xuICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCAvLCskLywgXCJcIiApO1xuICAgICAgICAgIGRlc2NyaXB0b3IgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHNyY3NldCA9IHNyY3NldC5zbGljZSggcG9zICsgMSApO1xuXG4gICAgICAgIC8vIDYuMi4gQ29sbGVjdCBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgdGhhdCBhcmUgbm90IFUrMDAyQyBDT01NQSBjaGFyYWN0ZXJzICgsKSwgYW5kXG4gICAgICAgIC8vIGxldCB0aGF0IGJlIGRlc2NyaXB0b3JzLlxuICAgICAgICBpZiAoIGRlc2NyaXB0b3IgPT09IG51bGwgKSB7XG4gICAgICAgICAgdmFyIGRlc2Nwb3MgPSBzcmNzZXQuaW5kZXhPZiggXCIsXCIgKTtcbiAgICAgICAgICBpZiAoIGRlc2Nwb3MgIT09IC0xICkge1xuICAgICAgICAgICAgZGVzY3JpcHRvciA9IHNyY3NldC5zbGljZSggMCwgZGVzY3BvcyApO1xuICAgICAgICAgICAgc3Jjc2V0ID0gc3Jjc2V0LnNsaWNlKCBkZXNjcG9zICsgMSApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZXNjcmlwdG9yID0gc3Jjc2V0O1xuICAgICAgICAgICAgc3Jjc2V0ID0gXCJcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVybCA9IHNyY3NldDtcbiAgICAgICAgc3Jjc2V0ID0gXCJcIjtcbiAgICAgIH1cblxuICAgICAgLy8gNy4gQWRkIHVybCB0byByYXcgY2FuZGlkYXRlcywgYXNzb2NpYXRlZCB3aXRoIGRlc2NyaXB0b3JzLlxuICAgICAgaWYgKCB1cmwgfHwgZGVzY3JpcHRvciApIHtcbiAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHtcbiAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICBkZXNjcmlwdG9yOiBkZXNjcmlwdG9yXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2FuZGlkYXRlcztcbiAgfTtcblxuICBwZi5wYXJzZURlc2NyaXB0b3IgPSBmdW5jdGlvbiggZGVzY3JpcHRvciwgc2l6ZXNhdHRyICkge1xuICAgIC8vIDExLiBEZXNjcmlwdG9yIHBhcnNlcjogTGV0IGNhbmRpZGF0ZXMgYmUgYW4gaW5pdGlhbGx5IGVtcHR5IHNvdXJjZSBzZXQuIFRoZSBvcmRlciBvZiBlbnRyaWVzIGluIHRoZSBsaXN0XG4gICAgLy8gaXMgdGhlIG9yZGVyIGluIHdoaWNoIGVudHJpZXMgYXJlIGFkZGVkIHRvIHRoZSBsaXN0LlxuICAgIHZhciBzaXplcyA9IHNpemVzYXR0ciB8fCBcIjEwMHZ3XCIsXG4gICAgICBzaXplRGVzY3JpcHRvciA9IGRlc2NyaXB0b3IgJiYgZGVzY3JpcHRvci5yZXBsYWNlKCAvKF5cXHMrfFxccyskKS9nLCBcIlwiICksXG4gICAgICB3aWR0aEluQ3NzUGl4ZWxzID0gcGYuZmluZFdpZHRoRnJvbVNvdXJjZVNpemUoIHNpemVzICksXG4gICAgICByZXNDYW5kaWRhdGU7XG5cbiAgICAgIGlmICggc2l6ZURlc2NyaXB0b3IgKSB7XG4gICAgICAgIHZhciBzcGxpdERlc2NyaXB0b3IgPSBzaXplRGVzY3JpcHRvci5zcGxpdChcIiBcIik7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHNwbGl0RGVzY3JpcHRvci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIHZhciBjdXJyID0gc3BsaXREZXNjcmlwdG9yWyBpIF0sXG4gICAgICAgICAgICBsYXN0Y2hhciA9IGN1cnIgJiYgY3Vyci5zbGljZSggY3Vyci5sZW5ndGggLSAxICk7XG5cbiAgICAgICAgICBpZiAoICggbGFzdGNoYXIgPT09IFwiaFwiIHx8IGxhc3RjaGFyID09PSBcIndcIiApICYmICFwZi5zaXplc1N1cHBvcnRlZCApIHtcbiAgICAgICAgICAgIHJlc0NhbmRpZGF0ZSA9IHBhcnNlRmxvYXQoICggcGFyc2VJbnQoIGN1cnIsIDEwICkgLyB3aWR0aEluQ3NzUGl4ZWxzICkgKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCBsYXN0Y2hhciA9PT0gXCJ4XCIgKSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gY3VyciAmJiBwYXJzZUZsb2F0KCBjdXJyLCAxMCApO1xuICAgICAgICAgICAgcmVzQ2FuZGlkYXRlID0gcmVzICYmICFpc05hTiggcmVzICkgPyByZXMgOiAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIHJldHVybiByZXNDYW5kaWRhdGUgfHwgMTtcbiAgfTtcblxuICAvKipcbiAgICogVGFrZXMgYSBzcmNzZXQgaW4gdGhlIGZvcm0gb2YgdXJsL1xuICAgKiBleC4gXCJpbWFnZXMvcGljLW1lZGl1bS5wbmcgMXgsIGltYWdlcy9waWMtbWVkaXVtLTJ4LnBuZyAyeFwiIG9yXG4gICAqICAgICBcImltYWdlcy9waWMtbWVkaXVtLnBuZyA0MDB3LCBpbWFnZXMvcGljLW1lZGl1bS0yeC5wbmcgODAwd1wiIG9yXG4gICAqICAgICBcImltYWdlcy9waWMtc21hbGwucG5nXCJcbiAgICogR2V0IGFuIGFycmF5IG9mIGltYWdlIGNhbmRpZGF0ZXMgaW4gdGhlIGZvcm0gb2ZcbiAgICogICAgICB7dXJsOiBcIi9mb28vYmFyLnBuZ1wiLCByZXNvbHV0aW9uOiAxfVxuICAgKiB3aGVyZSByZXNvbHV0aW9uIGlzIGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzcy12YWx1ZXMtMy8jcmVzb2x1dGlvbi12YWx1ZVxuICAgKiBJZiBzaXplcyBpcyBzcGVjaWZpZWQsIHJlc29sdXRpb24gaXMgY2FsY3VsYXRlZFxuICAgKi9cbiAgcGYuZ2V0Q2FuZGlkYXRlc0Zyb21Tb3VyY2VTZXQgPSBmdW5jdGlvbiggc3Jjc2V0LCBzaXplcyApIHtcbiAgICB2YXIgY2FuZGlkYXRlcyA9IHBmLnBhcnNlU3Jjc2V0KCBzcmNzZXQgKSxcbiAgICAgIGZvcm1hdHRlZENhbmRpZGF0ZXMgPSBbXTtcblxuICAgIGZvciAoIHZhciBpID0gMCwgbGVuID0gY2FuZGlkYXRlcy5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgIHZhciBjYW5kaWRhdGUgPSBjYW5kaWRhdGVzWyBpIF07XG5cbiAgICAgIGZvcm1hdHRlZENhbmRpZGF0ZXMucHVzaCh7XG4gICAgICAgIHVybDogY2FuZGlkYXRlLnVybCxcbiAgICAgICAgcmVzb2x1dGlvbjogcGYucGFyc2VEZXNjcmlwdG9yKCBjYW5kaWRhdGUuZGVzY3JpcHRvciwgc2l6ZXMgKVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBmb3JtYXR0ZWRDYW5kaWRhdGVzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBpZiBpdCdzIGFuIGltZyBlbGVtZW50IGFuZCBpdCBoYXMgYSBzcmNzZXQgcHJvcGVydHksXG4gICAqIHdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgc28gd2UgY2FuIG1hbmlwdWxhdGUgc3JjXG4gICAqICh0aGUgcHJvcGVydHkncyBleGlzdGVuY2UgaW5mZXJzIG5hdGl2ZSBzcmNzZXQgc3VwcG9ydCwgYW5kIGEgc3Jjc2V0LXN1cHBvcnRpbmcgYnJvd3NlciB3aWxsIHByaW9yaXRpemUgc3Jjc2V0J3MgdmFsdWUgb3ZlciBvdXIgd2lubmluZyBwaWN0dXJlIGNhbmRpZGF0ZSlcbiAgICogdGhpcyBtb3ZlcyBzcmNzZXQncyB2YWx1ZSB0byBtZW1vcnkgZm9yIGxhdGVyIHVzZSBhbmQgcmVtb3ZlcyB0aGUgYXR0clxuICAgKi9cbiAgcGYuZG9kZ2VTcmNzZXQgPSBmdW5jdGlvbiggaW1nICkge1xuICAgIGlmICggaW1nLnNyY3NldCApIHtcbiAgICAgIGltZ1sgcGYubnMgXS5zcmNzZXQgPSBpbWcuc3Jjc2V0O1xuICAgICAgaW1nLnJlbW92ZUF0dHJpYnV0ZSggXCJzcmNzZXRcIiApO1xuICAgIH1cbiAgfTtcblxuICAvLyBBY2NlcHQgYSBzb3VyY2Ugb3IgaW1nIGVsZW1lbnQgYW5kIHByb2Nlc3MgaXRzIHNyY3NldCBhbmQgc2l6ZXMgYXR0cnNcbiAgcGYucHJvY2Vzc1NvdXJjZVNldCA9IGZ1bmN0aW9uKCBlbCApIHtcbiAgICB2YXIgc3Jjc2V0ID0gZWwuZ2V0QXR0cmlidXRlKCBcInNyY3NldFwiICksXG4gICAgICBzaXplcyA9IGVsLmdldEF0dHJpYnV0ZSggXCJzaXplc1wiICksXG4gICAgICBjYW5kaWRhdGVzID0gW107XG5cbiAgICAvLyBpZiBpdCdzIGFuIGltZyBlbGVtZW50LCB1c2UgdGhlIGNhY2hlZCBzcmNzZXQgcHJvcGVydHkgKGRlZmluZWQgb3Igbm90KVxuICAgIGlmICggZWwubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJJTUdcIiAmJiBlbFsgcGYubnMgXSAmJiBlbFsgcGYubnMgXS5zcmNzZXQgKSB7XG4gICAgICBzcmNzZXQgPSBlbFsgcGYubnMgXS5zcmNzZXQ7XG4gICAgfVxuXG4gICAgaWYgKCBzcmNzZXQgKSB7XG4gICAgICBjYW5kaWRhdGVzID0gcGYuZ2V0Q2FuZGlkYXRlc0Zyb21Tb3VyY2VTZXQoIHNyY3NldCwgc2l6ZXMgKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbmRpZGF0ZXM7XG4gIH07XG5cbiAgcGYuYXBwbHlCZXN0Q2FuZGlkYXRlID0gZnVuY3Rpb24oIGNhbmRpZGF0ZXMsIHBpY0ltZyApIHtcbiAgICB2YXIgY2FuZGlkYXRlLFxuICAgICAgbGVuZ3RoLFxuICAgICAgYmVzdENhbmRpZGF0ZTtcblxuICAgIGNhbmRpZGF0ZXMuc29ydCggcGYuYXNjZW5kaW5nU29ydCApO1xuXG4gICAgbGVuZ3RoID0gY2FuZGlkYXRlcy5sZW5ndGg7XG4gICAgYmVzdENhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbIGxlbmd0aCAtIDEgXTtcblxuICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrICkge1xuICAgICAgY2FuZGlkYXRlID0gY2FuZGlkYXRlc1sgaSBdO1xuICAgICAgaWYgKCBjYW5kaWRhdGUucmVzb2x1dGlvbiA+PSBwZi5nZXREcHIoKSApIHtcbiAgICAgICAgYmVzdENhbmRpZGF0ZSA9IGNhbmRpZGF0ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCBiZXN0Q2FuZGlkYXRlICYmICFwZi5lbmRzV2l0aCggcGljSW1nLnNyYywgYmVzdENhbmRpZGF0ZS51cmwgKSApIHtcbiAgICAgIGlmICggcGYucmVzdHJpY3RzTWl4ZWRDb250ZW50KCkgJiYgYmVzdENhbmRpZGF0ZS51cmwuc3Vic3RyKDAsIFwiaHR0cDpcIi5sZW5ndGgpLnRvTG93ZXJDYXNlKCkgPT09IFwiaHR0cDpcIiApIHtcbiAgICAgICAgaWYgKCB0eXBlb2YgY29uc29sZSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgIGNvbnNvbGUud2FybiggXCJCbG9ja2VkIG1peGVkIGNvbnRlbnQgaW1hZ2UgXCIgKyBiZXN0Q2FuZGlkYXRlLnVybCApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwaWNJbWcuc3JjID0gYmVzdENhbmRpZGF0ZS51cmw7XG4gICAgICAgIC8vIGN1cnJlbnRTcmMgYXR0cmlidXRlIGFuZCBwcm9wZXJ0eSB0byBtYXRjaFxuICAgICAgICAvLyBodHRwOi8vcGljdHVyZS5yZXNwb25zaXZlaW1hZ2VzLm9yZy8jdGhlLWltZy1lbGVtZW50XG4gICAgICAgIHBpY0ltZy5jdXJyZW50U3JjID0gcGljSW1nLnNyYztcblxuICAgICAgICB2YXIgc3R5bGUgPSBwaWNJbWcuc3R5bGUgfHwge30sXG4gICAgICAgICAgV2Via2l0QmFja2ZhY2VWaXNpYmlsaXR5ID0gXCJ3ZWJraXRCYWNrZmFjZVZpc2liaWxpdHlcIiBpbiBzdHlsZSxcbiAgICAgICAgICBjdXJyZW50Wm9vbSA9IHN0eWxlLnpvb207XG5cbiAgICAgICAgaWYgKFdlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSkgeyAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvcGljdHVyZWZpbGwvaXNzdWVzLzMzMlxuICAgICAgICAgIHN0eWxlLnpvb20gPSBcIi45OTlcIjtcblxuICAgICAgICAgIFdlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSA9IHBpY0ltZy5vZmZzZXRXaWR0aDtcblxuICAgICAgICAgIHN0eWxlLnpvb20gPSBjdXJyZW50Wm9vbTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBwZi5hc2NlbmRpbmdTb3J0ID0gZnVuY3Rpb24oIGEsIGIgKSB7XG4gICAgcmV0dXJuIGEucmVzb2x1dGlvbiAtIGIucmVzb2x1dGlvbjtcbiAgfTtcblxuICAvKipcbiAgICogSW4gSUU5LCA8c291cmNlPiBlbGVtZW50cyBnZXQgcmVtb3ZlZCBpZiB0aGV5IGFyZW4ndCBjaGlsZHJlbiBvZlxuICAgKiB2aWRlbyBlbGVtZW50cy4gVGh1cywgd2UgY29uZGl0aW9uYWxseSB3cmFwIHNvdXJjZSBlbGVtZW50c1xuICAgKiB1c2luZyA8IS0tW2lmIElFIDldPjx2aWRlbyBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PCFbZW5kaWZdLS0+XG4gICAqIGFuZCBtdXN0IGFjY291bnQgZm9yIHRoYXQgaGVyZSBieSBtb3ZpbmcgdGhvc2Ugc291cmNlIGVsZW1lbnRzXG4gICAqIGJhY2sgaW50byB0aGUgcGljdHVyZSBlbGVtZW50LlxuICAgKi9cbiAgcGYucmVtb3ZlVmlkZW9TaGltID0gZnVuY3Rpb24oIHBpY3R1cmUgKSB7XG4gICAgdmFyIHZpZGVvcyA9IHBpY3R1cmUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwidmlkZW9cIiApO1xuICAgIGlmICggdmlkZW9zLmxlbmd0aCApIHtcbiAgICAgIHZhciB2aWRlbyA9IHZpZGVvc1sgMCBdLFxuICAgICAgICB2c291cmNlcyA9IHZpZGVvLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInNvdXJjZVwiICk7XG4gICAgICB3aGlsZSAoIHZzb3VyY2VzLmxlbmd0aCApIHtcbiAgICAgICAgcGljdHVyZS5pbnNlcnRCZWZvcmUoIHZzb3VyY2VzWyAwIF0sIHZpZGVvICk7XG4gICAgICB9XG4gICAgICAvLyBSZW1vdmUgdGhlIHZpZGVvIGVsZW1lbnQgb25jZSB3ZSdyZSBmaW5pc2hlZCByZW1vdmluZyBpdHMgY2hpbGRyZW5cbiAgICAgIHZpZGVvLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHZpZGVvICk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBGaW5kIGFsbCBgaW1nYCBlbGVtZW50cywgYW5kIGFkZCB0aGVtIHRvIHRoZSBjYW5kaWRhdGUgbGlzdCBpZiB0aGV5IGhhdmVcbiAgICogYSBgcGljdHVyZWAgcGFyZW50LCBhIGBzaXplc2AgYXR0cmlidXRlIGluIGJhc2ljIGBzcmNzZXRgIHN1cHBvcnRpbmcgYnJvd3NlcnMsXG4gICAqIGEgYHNyY3NldGAgYXR0cmlidXRlIGF0IGFsbCwgYW5kIHRoZXkgaGF2ZW7igJl0IGJlZW4gZXZhbHVhdGVkIGFscmVhZHkuXG4gICAqL1xuICBwZi5nZXRBbGxFbGVtZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBlbGVtcyA9IFtdLFxuICAgICAgaW1ncyA9IGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJpbWdcIiApO1xuXG4gICAgZm9yICggdmFyIGggPSAwLCBsZW4gPSBpbWdzLmxlbmd0aDsgaCA8IGxlbjsgaCsrICkge1xuICAgICAgdmFyIGN1cnJJbWcgPSBpbWdzWyBoIF07XG5cbiAgICAgIGlmICggY3VyckltZy5wYXJlbnROb2RlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiUElDVFVSRVwiIHx8XG4gICAgICAoIGN1cnJJbWcuZ2V0QXR0cmlidXRlKCBcInNyY3NldFwiICkgIT09IG51bGwgKSB8fCBjdXJySW1nWyBwZi5ucyBdICYmIGN1cnJJbWdbIHBmLm5zIF0uc3Jjc2V0ICE9PSBudWxsICkge1xuICAgICAgICBlbGVtcy5wdXNoKCBjdXJySW1nICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlbGVtcztcbiAgfTtcblxuICBwZi5nZXRNYXRjaCA9IGZ1bmN0aW9uKCBpbWcsIHBpY3R1cmUgKSB7XG4gICAgdmFyIHNvdXJjZXMgPSBwaWN0dXJlLmNoaWxkTm9kZXMsXG4gICAgICBtYXRjaDtcblxuICAgIC8vIEdvIHRocm91Z2ggZWFjaCBjaGlsZCwgYW5kIGlmIHRoZXkgaGF2ZSBtZWRpYSBxdWVyaWVzLCBldmFsdWF0ZSB0aGVtXG4gICAgZm9yICggdmFyIGogPSAwLCBzbGVuID0gc291cmNlcy5sZW5ndGg7IGogPCBzbGVuOyBqKysgKSB7XG4gICAgICB2YXIgc291cmNlID0gc291cmNlc1sgaiBdO1xuXG4gICAgICAvLyBpZ25vcmUgbm9uLWVsZW1lbnQgbm9kZXNcbiAgICAgIGlmICggc291cmNlLm5vZGVUeXBlICE9PSAxICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gSGl0dGluZyB0aGUgYGltZ2AgZWxlbWVudCB0aGF0IHN0YXJ0ZWQgZXZlcnl0aGluZyBzdG9wcyB0aGUgc2VhcmNoIGZvciBgc291cmNlc2AuXG4gICAgICAvLyBJZiBubyBwcmV2aW91cyBgc291cmNlYCBtYXRjaGVzLCB0aGUgYGltZ2AgaXRzZWxmIGlzIGV2YWx1YXRlZCBsYXRlci5cbiAgICAgIGlmICggc291cmNlID09PSBpbWcgKSB7XG4gICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgIH1cblxuICAgICAgLy8gaWdub3JlIG5vbi1gc291cmNlYCBub2Rlc1xuICAgICAgaWYgKCBzb3VyY2Uubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPT0gXCJTT1VSQ0VcIiApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyBpZiBpdCdzIGEgc291cmNlIGVsZW1lbnQgdGhhdCBoYXMgdGhlIGBzcmNgIHByb3BlcnR5IHNldCwgdGhyb3cgYSB3YXJuaW5nIGluIHRoZSBjb25zb2xlXG4gICAgICBpZiAoIHNvdXJjZS5nZXRBdHRyaWJ1dGUoIFwic3JjXCIgKSAhPT0gbnVsbCAmJiB0eXBlb2YgY29uc29sZSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJUaGUgYHNyY2AgYXR0cmlidXRlIGlzIGludmFsaWQgb24gYHBpY3R1cmVgIGBzb3VyY2VgIGVsZW1lbnQ7IGluc3RlYWQsIHVzZSBgc3Jjc2V0YC5cIik7XG4gICAgICB9XG5cbiAgICAgIHZhciBtZWRpYSA9IHNvdXJjZS5nZXRBdHRyaWJ1dGUoIFwibWVkaWFcIiApO1xuXG4gICAgICAvLyBpZiBzb3VyY2UgZG9lcyBub3QgaGF2ZSBhIHNyY3NldCBhdHRyaWJ1dGUsIHNraXBcbiAgICAgIGlmICggIXNvdXJjZS5nZXRBdHRyaWJ1dGUoIFwic3Jjc2V0XCIgKSApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHRoZXJlJ3Mgbm8gbWVkaWEgc3BlY2lmaWVkLCBPUiB3Lm1hdGNoTWVkaWEgaXMgc3VwcG9ydGVkXG4gICAgICBpZiAoICggIW1lZGlhIHx8IHBmLm1hdGNoZXNNZWRpYSggbWVkaWEgKSApICkge1xuICAgICAgICB2YXIgdHlwZVN1cHBvcnRlZCA9IHBmLnZlcmlmeVR5cGVTdXBwb3J0KCBzb3VyY2UgKTtcblxuICAgICAgICBpZiAoIHR5cGVTdXBwb3J0ZWQgPT09IHRydWUgKSB7XG4gICAgICAgICAgbWF0Y2ggPSBzb3VyY2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSBpZiAoIHR5cGVTdXBwb3J0ZWQgPT09IFwicGVuZGluZ1wiICkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtYXRjaDtcbiAgfTtcblxuICBmdW5jdGlvbiBwaWN0dXJlZmlsbCggb3B0ICkge1xuICAgIHZhciBlbGVtZW50cyxcbiAgICAgIGVsZW1lbnQsXG4gICAgICBwYXJlbnQsXG4gICAgICBmaXJzdE1hdGNoLFxuICAgICAgY2FuZGlkYXRlcyxcbiAgICAgIG9wdGlvbnMgPSBvcHQgfHwge307XG5cbiAgICBlbGVtZW50cyA9IG9wdGlvbnMuZWxlbWVudHMgfHwgcGYuZ2V0QWxsRWxlbWVudHMoKTtcblxuICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgZWxlbWVudHNcbiAgICBmb3IgKCB2YXIgaSA9IDAsIHBsZW4gPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBwbGVuOyBpKysgKSB7XG4gICAgICBlbGVtZW50ID0gZWxlbWVudHNbIGkgXTtcbiAgICAgIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgIGZpcnN0TWF0Y2ggPSB1bmRlZmluZWQ7XG4gICAgICBjYW5kaWRhdGVzID0gdW5kZWZpbmVkO1xuXG4gICAgICAvLyBpbW1lZGlhdGVseSBza2lwIG5vbi1gaW1nYCBub2Rlc1xuICAgICAgaWYgKCBlbGVtZW50Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgIT09IFwiSU1HXCIgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBleHBhbmRvIGZvciBjYWNoaW5nIGRhdGEgb24gdGhlIGltZ1xuICAgICAgaWYgKCAhZWxlbWVudFsgcGYubnMgXSApIHtcbiAgICAgICAgZWxlbWVudFsgcGYubnMgXSA9IHt9O1xuICAgICAgfVxuXG4gICAgICAvLyBpZiB0aGUgZWxlbWVudCBoYXMgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZCwgc2tpcCBpdCB1bmxlc3NcbiAgICAgIC8vIGBvcHRpb25zLnJlZXZhbHVhdGVgIGlzIHNldCB0byB0cnVlICggdGhpcywgZm9yIGV4YW1wbGUsXG4gICAgICAvLyBpcyBzZXQgdG8gdHJ1ZSB3aGVuIHJ1bm5pbmcgYHBpY3R1cmVmaWxsYCBvbiBgcmVzaXplYCApLlxuICAgICAgaWYgKCAhb3B0aW9ucy5yZWV2YWx1YXRlICYmIGVsZW1lbnRbIHBmLm5zIF0uZXZhbHVhdGVkICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gaWYgYGltZ2AgaXMgaW4gYSBgcGljdHVyZWAgZWxlbWVudFxuICAgICAgaWYgKCBwYXJlbnQubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJQSUNUVVJFXCIgKSB7XG5cbiAgICAgICAgLy8gSUU5IHZpZGVvIHdvcmthcm91bmRcbiAgICAgICAgcGYucmVtb3ZlVmlkZW9TaGltKCBwYXJlbnQgKTtcblxuICAgICAgICAvLyByZXR1cm4gdGhlIGZpcnN0IG1hdGNoIHdoaWNoIG1pZ2h0IHVuZGVmaW5lZFxuICAgICAgICAvLyByZXR1cm5zIGZhbHNlIGlmIHRoZXJlIGlzIGEgcGVuZGluZyBzb3VyY2VcbiAgICAgICAgLy8gVE9ETyB0aGUgcmV0dXJuIHR5cGUgaGVyZSBpcyBicnV0YWwsIGNsZWFudXBcbiAgICAgICAgZmlyc3RNYXRjaCA9IHBmLmdldE1hdGNoKCBlbGVtZW50LCBwYXJlbnQgKTtcblxuICAgICAgICAvLyBpZiBhbnkgc291cmNlcyBhcmUgcGVuZGluZyBpbiB0aGlzIHBpY3R1cmUgZHVlIHRvIGFzeW5jIHR5cGUgdGVzdChzKVxuICAgICAgICAvLyByZW1vdmUgdGhlIGV2YWx1YXRlZCBhdHRyIGFuZCBza2lwIGZvciBub3cgKCB0aGUgcGVuZGluZyB0ZXN0IHdpbGxcbiAgICAgICAgLy8gcmVydW4gcGljdHVyZWZpbGwgb24gdGhpcyBlbGVtZW50IHdoZW4gY29tcGxldGUpXG4gICAgICAgIGlmICggZmlyc3RNYXRjaCA9PT0gZmFsc2UgKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpcnN0TWF0Y2ggPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIENhY2hlIGFuZCByZW1vdmUgYHNyY3NldGAgaWYgcHJlc2VudCBhbmQgd2XigJlyZSBnb2luZyB0byBiZSBkb2luZyBgcGljdHVyZWAvYHNyY3NldGAvYHNpemVzYCBwb2x5ZmlsbGluZyB0byBpdC5cbiAgICAgIGlmICggcGFyZW50Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiUElDVFVSRVwiIHx8XG4gICAgICAoIGVsZW1lbnQuc3Jjc2V0ICYmICFwZi5zcmNzZXRTdXBwb3J0ZWQgKSB8fFxuICAgICAgKCAhcGYuc2l6ZXNTdXBwb3J0ZWQgJiYgKCBlbGVtZW50LnNyY3NldCAmJiBlbGVtZW50LnNyY3NldC5pbmRleE9mKFwid1wiKSA+IC0xICkgKSApIHtcbiAgICAgICAgcGYuZG9kZ2VTcmNzZXQoIGVsZW1lbnQgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCBmaXJzdE1hdGNoICkge1xuICAgICAgICBjYW5kaWRhdGVzID0gcGYucHJvY2Vzc1NvdXJjZVNldCggZmlyc3RNYXRjaCApO1xuICAgICAgICBwZi5hcHBseUJlc3RDYW5kaWRhdGUoIGNhbmRpZGF0ZXMsIGVsZW1lbnQgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vIHNvdXJjZXMgbWF0Y2hlZCwgc28gd2XigJlyZSBkb3duIHRvIHByb2Nlc3NpbmcgdGhlIGlubmVyIGBpbWdgIGFzIGEgc291cmNlLlxuICAgICAgICBjYW5kaWRhdGVzID0gcGYucHJvY2Vzc1NvdXJjZVNldCggZWxlbWVudCApO1xuXG4gICAgICAgIGlmICggZWxlbWVudC5zcmNzZXQgPT09IHVuZGVmaW5lZCB8fCBlbGVtZW50WyBwZi5ucyBdLnNyY3NldCApIHtcbiAgICAgICAgICAvLyBFaXRoZXIgYHNyY3NldGAgaXMgY29tcGxldGVseSB1bnN1cHBvcnRlZCwgb3Igd2UgbmVlZCB0byBwb2x5ZmlsbCBgc2l6ZXNgIGZ1bmN0aW9uYWxpdHkuXG4gICAgICAgICAgcGYuYXBwbHlCZXN0Q2FuZGlkYXRlKCBjYW5kaWRhdGVzLCBlbGVtZW50ICk7XG4gICAgICAgIH0gLy8gRWxzZSwgcmVzb2x1dGlvbi1vbmx5IGBzcmNzZXRgIGlzIHN1cHBvcnRlZCBuYXRpdmVseS5cbiAgICAgIH1cblxuICAgICAgLy8gc2V0IGV2YWx1YXRlZCB0byB0cnVlIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHJlcGFyc2luZ1xuICAgICAgZWxlbWVudFsgcGYubnMgXS5ldmFsdWF0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHBpY3R1cmUgcG9seWZpbGwgYnkgcG9sbGluZyB0aGUgZG9jdW1lbnQgYW5kIHJ1bm5pbmdcbiAgICogdGhlIHBvbHlmaWxsIGV2ZXJ5IDI1MG1zIHVudGlsIHRoZSBkb2N1bWVudCBpcyByZWFkeS5cbiAgICogQWxzbyBhdHRhY2hlcyBwaWN0dXJlZmlsbCBvbiByZXNpemVcbiAgICovXG4gIGZ1bmN0aW9uIHJ1blBpY3R1cmVmaWxsKCkge1xuICAgIHBpY3R1cmVmaWxsKCk7XG4gICAgdmFyIGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCggZnVuY3Rpb24oKSB7XG4gICAgICAvLyBXaGVuIHRoZSBkb2N1bWVudCBoYXMgZmluaXNoZWQgbG9hZGluZywgc3RvcCBjaGVja2luZyBmb3IgbmV3IGltYWdlc1xuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2RlZC9kb21yZWFkeS9ibG9iL21hc3Rlci9yZWFkeS5qcyNMMTVcbiAgICAgIHBpY3R1cmVmaWxsKCk7XG4gICAgICBpZiAoIC9ebG9hZGVkfF5pfF5jLy50ZXN0KCBkb2MucmVhZHlTdGF0ZSApICkge1xuICAgICAgICBjbGVhckludGVydmFsKCBpbnRlcnZhbElkICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9LCAyNTAgKTtcblxuICAgIGZ1bmN0aW9uIGNoZWNrUmVzaXplKCkge1xuICAgICAgdmFyIHJlc2l6ZVRocm90dGxlO1xuXG4gICAgICBpZiAoICF3Ll9waWN0dXJlZmlsbFdvcmtpbmcgKSB7XG4gICAgICAgIHcuX3BpY3R1cmVmaWxsV29ya2luZyA9IHRydWU7XG4gICAgICAgIHcuY2xlYXJUaW1lb3V0KCByZXNpemVUaHJvdHRsZSApO1xuICAgICAgICByZXNpemVUaHJvdHRsZSA9IHcuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcGljdHVyZWZpbGwoeyByZWV2YWx1YXRlOiB0cnVlIH0pO1xuICAgICAgICAgIHcuX3BpY3R1cmVmaWxsV29ya2luZyA9IGZhbHNlO1xuICAgICAgICB9LCA2MCApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICggdy5hZGRFdmVudExpc3RlbmVyICkge1xuICAgICAgdy5hZGRFdmVudExpc3RlbmVyKCBcInJlc2l6ZVwiLCBjaGVja1Jlc2l6ZSwgZmFsc2UgKTtcbiAgICB9IGVsc2UgaWYgKCB3LmF0dGFjaEV2ZW50ICkge1xuICAgICAgdy5hdHRhY2hFdmVudCggXCJvbnJlc2l6ZVwiLCBjaGVja1Jlc2l6ZSApO1xuICAgIH1cbiAgfVxuXG4gIHJ1blBpY3R1cmVmaWxsKCk7XG5cbiAgLyogZXhwb3NlIG1ldGhvZHMgZm9yIHRlc3RpbmcgKi9cbiAgcGljdHVyZWZpbGwuXyA9IHBmO1xuXG4gIC8qIGV4cG9zZSBwaWN0dXJlZmlsbCAqL1xuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiICkge1xuICAgIC8vIENvbW1vbkpTLCBqdXN0IGV4cG9ydFxuICAgIG1vZHVsZS5leHBvcnRzID0gcGljdHVyZWZpbGw7XG4gIH0gZWxzZSBpZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xuICAgIC8vIEFNRCBzdXBwb3J0XG4gICAgZGVmaW5lKCBmdW5jdGlvbigpIHsgcmV0dXJuIHBpY3R1cmVmaWxsOyB9ICk7XG4gIH0gZWxzZSBpZiAoIHR5cGVvZiB3ID09PSBcIm9iamVjdFwiICkge1xuICAgIC8vIElmIG5vIEFNRCBhbmQgd2UgYXJlIGluIHRoZSBicm93c2VyLCBhdHRhY2ggdG8gd2luZG93XG4gICAgdy5waWN0dXJlZmlsbCA9IHBpY3R1cmVmaWxsO1xuICB9XG5cbn0gKSggdGhpcywgdGhpcy5kb2N1bWVudCwgbmV3IHRoaXMuSW1hZ2UoKSApO1xuXG4vKiFcbiAqIHZlcmdlIDEuOS4xKzIwMTQwMjEzMDgwM1xuICogaHR0cHM6Ly9naXRodWIuY29tL3J5YW52ZS92ZXJnZVxuICogTUlUIExpY2Vuc2UgMjAxMyBSeWFuIFZhbiBFdHRlblxuICovXG5cbihmdW5jdGlvbihyb290LCBuYW1lLCBtYWtlKSB7XG4gIGlmICh0eXBlb2YgbW9kdWxlICE9ICd1bmRlZmluZWQnICYmIG1vZHVsZVsnZXhwb3J0cyddKSBtb2R1bGVbJ2V4cG9ydHMnXSA9IG1ha2UoKTtcbiAgZWxzZSByb290W25hbWVdID0gbWFrZSgpO1xufSh0aGlzLCAndmVyZ2UnLCBmdW5jdGlvbigpIHtcblxuICB2YXIgeHBvcnRzID0ge31cbiAgICAsIHdpbiA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93XG4gICAgLCBkb2MgPSB0eXBlb2YgZG9jdW1lbnQgIT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnRcbiAgICAsIGRvY0VsZW0gPSBkb2MgJiYgZG9jLmRvY3VtZW50RWxlbWVudFxuICAgICwgbWF0Y2hNZWRpYSA9IHdpblsnbWF0Y2hNZWRpYSddIHx8IHdpblsnbXNNYXRjaE1lZGlhJ11cbiAgICAsIG1xID0gbWF0Y2hNZWRpYSA/IGZ1bmN0aW9uKHEpIHtcbiAgICAgICAgcmV0dXJuICEhbWF0Y2hNZWRpYS5jYWxsKHdpbiwgcSkubWF0Y2hlcztcbiAgICAgIH0gOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICwgdmlld3BvcnRXID0geHBvcnRzWyd2aWV3cG9ydFcnXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYSA9IGRvY0VsZW1bJ2NsaWVudFdpZHRoJ10sIGIgPSB3aW5bJ2lubmVyV2lkdGgnXTtcbiAgICAgICAgcmV0dXJuIGEgPCBiID8gYiA6IGE7XG4gICAgICB9XG4gICAgLCB2aWV3cG9ydEggPSB4cG9ydHNbJ3ZpZXdwb3J0SCddID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhID0gZG9jRWxlbVsnY2xpZW50SGVpZ2h0J10sIGIgPSB3aW5bJ2lubmVySGVpZ2h0J107XG4gICAgICAgIHJldHVybiBhIDwgYiA/IGIgOiBhO1xuICAgICAgfTtcblxuICAvKipcbiAgICogVGVzdCBpZiBhIG1lZGlhIHF1ZXJ5IGlzIGFjdGl2ZS4gTGlrZSBNb2Rlcm5penIubXFcbiAgICogQHNpbmNlIDEuNi4wXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICB4cG9ydHNbJ21xJ10gPSBtcTtcblxuICAvKipcbiAgICogTm9ybWFsaXplZCBtYXRjaE1lZGlhXG4gICAqIEBzaW5jZSAxLjYuMFxuICAgKiBAcmV0dXJuIHtNZWRpYVF1ZXJ5TGlzdHxPYmplY3R9XG4gICAqL1xuICB4cG9ydHNbJ21hdGNoTWVkaWEnXSA9IG1hdGNoTWVkaWEgPyBmdW5jdGlvbigpIHtcbiAgICAvLyBtYXRjaE1lZGlhIG11c3QgYmUgYmluZGVkIHRvIHdpbmRvd1xuICAgIHJldHVybiBtYXRjaE1lZGlhLmFwcGx5KHdpbiwgYXJndW1lbnRzKTtcbiAgfSA6IGZ1bmN0aW9uKCkge1xuICAgIC8vIEdyYWNlZnVsbHkgZGVncmFkZSB0byBwbGFpbiBvYmplY3RcbiAgICByZXR1cm4ge307XG4gIH07XG5cbiAgLyoqXG4gICAqIEBzaW5jZSAxLjguMFxuICAgKiBAcmV0dXJuIHt7d2lkdGg6bnVtYmVyLCBoZWlnaHQ6bnVtYmVyfX1cbiAgICovXG4gIGZ1bmN0aW9uIHZpZXdwb3J0KCkge1xuICAgIHJldHVybiB7J3dpZHRoJzp2aWV3cG9ydFcoKSwgJ2hlaWdodCc6dmlld3BvcnRIKCl9O1xuICB9XG4gIHhwb3J0c1sndmlld3BvcnQnXSA9IHZpZXdwb3J0O1xuXG4gIC8qKlxuICAgKiBDcm9zcy1icm93c2VyIHdpbmRvdy5zY3JvbGxYXG4gICAqIEBzaW5jZSAxLjAuMFxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB4cG9ydHNbJ3Njcm9sbFgnXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB3aW4ucGFnZVhPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxMZWZ0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcm9zcy1icm93c2VyIHdpbmRvdy5zY3JvbGxZXG4gICAqIEBzaW5jZSAxLjAuMFxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB4cG9ydHNbJ3Njcm9sbFknXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB3aW4ucGFnZVlPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxUb3A7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7e3RvcDpudW1iZXIsIHJpZ2h0Om51bWJlciwgYm90dG9tOm51bWJlciwgbGVmdDpudW1iZXJ9fSBjb29yZHNcbiAgICogQHBhcmFtIHtudW1iZXI9fSBjdXNoaW9uIGFkanVzdG1lbnRcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZnVuY3Rpb24gY2FsaWJyYXRlKGNvb3JkcywgY3VzaGlvbikge1xuICAgIHZhciBvID0ge307XG4gICAgY3VzaGlvbiA9ICtjdXNoaW9uIHx8IDA7XG4gICAgb1snd2lkdGgnXSA9IChvWydyaWdodCddID0gY29vcmRzWydyaWdodCddICsgY3VzaGlvbikgLSAob1snbGVmdCddID0gY29vcmRzWydsZWZ0J10gLSBjdXNoaW9uKTtcbiAgICBvWydoZWlnaHQnXSA9IChvWydib3R0b20nXSA9IGNvb3Jkc1snYm90dG9tJ10gKyBjdXNoaW9uKSAtIChvWyd0b3AnXSA9IGNvb3Jkc1sndG9wJ10gLSBjdXNoaW9uKTtcbiAgICByZXR1cm4gbztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcm9zcy1icm93c2VyIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IHBsdXMgb3B0aW9uYWwgY3VzaGlvbi5cbiAgICogQ29vcmRzIGFyZSByZWxhdGl2ZSB0byB0aGUgdG9wLWxlZnQgY29ybmVyIG9mIHRoZSB2aWV3cG9ydC5cbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsIGVsZW1lbnQgb3Igc3RhY2sgKHVzZXMgZmlyc3QgaXRlbSlcbiAgICogQHBhcmFtIHtudW1iZXI9fSBjdXNoaW9uICsvLSBwaXhlbCBhZGp1c3RtZW50IGFtb3VudFxuICAgKiBAcmV0dXJuIHtPYmplY3R8Ym9vbGVhbn1cbiAgICovXG4gIGZ1bmN0aW9uIHJlY3RhbmdsZShlbCwgY3VzaGlvbikge1xuICAgIGVsID0gZWwgJiYgIWVsLm5vZGVUeXBlID8gZWxbMF0gOiBlbDtcbiAgICBpZiAoIWVsIHx8IDEgIT09IGVsLm5vZGVUeXBlKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGNhbGlicmF0ZShlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgY3VzaGlvbik7XG4gIH1cbiAgeHBvcnRzWydyZWN0YW5nbGUnXSA9IHJlY3RhbmdsZTtcblxuICAvKipcbiAgICogR2V0IHRoZSB2aWV3cG9ydCBhc3BlY3QgcmF0aW8gKG9yIHRoZSBhc3BlY3QgcmF0aW8gb2YgYW4gb2JqZWN0IG9yIGVsZW1lbnQpXG4gICAqIEBzaW5jZSAxLjcuMFxuICAgKiBAcGFyYW0geyhFbGVtZW50fE9iamVjdCk9fSBvIG9wdGlvbmFsIG9iamVjdCB3aXRoIHdpZHRoL2hlaWdodCBwcm9wcyBvciBtZXRob2RzXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogQGxpbmsgaHR0cDovL3czLm9yZy9UUi9jc3MzLW1lZGlhcXVlcmllcy8jb3JpZW50YXRpb25cbiAgICovXG4gIGZ1bmN0aW9uIGFzcGVjdChvKSB7XG4gICAgbyA9IG51bGwgPT0gbyA/IHZpZXdwb3J0KCkgOiAxID09PSBvLm5vZGVUeXBlID8gcmVjdGFuZ2xlKG8pIDogbztcbiAgICB2YXIgaCA9IG9bJ2hlaWdodCddLCB3ID0gb1snd2lkdGgnXTtcbiAgICBoID0gdHlwZW9mIGggPT0gJ2Z1bmN0aW9uJyA/IGguY2FsbChvKSA6IGg7XG4gICAgdyA9IHR5cGVvZiB3ID09ICdmdW5jdGlvbicgPyB3LmNhbGwobykgOiB3O1xuICAgIHJldHVybiB3L2g7XG4gIH1cbiAgeHBvcnRzWydhc3BlY3QnXSA9IGFzcGVjdDtcblxuICAvKipcbiAgICogVGVzdCBpZiBhbiBlbGVtZW50IGlzIGluIHRoZSBzYW1lIHgtYXhpcyBzZWN0aW9uIGFzIHRoZSB2aWV3cG9ydC5cbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gY3VzaGlvblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgeHBvcnRzWydpblgnXSA9IGZ1bmN0aW9uKGVsLCBjdXNoaW9uKSB7XG4gICAgdmFyIHIgPSByZWN0YW5nbGUoZWwsIGN1c2hpb24pO1xuICAgIHJldHVybiAhIXIgJiYgci5yaWdodCA+PSAwICYmIHIubGVmdCA8PSB2aWV3cG9ydFcoKTtcbiAgfTtcblxuICAvKipcbiAgICogVGVzdCBpZiBhbiBlbGVtZW50IGlzIGluIHRoZSBzYW1lIHktYXhpcyBzZWN0aW9uIGFzIHRoZSB2aWV3cG9ydC5cbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gY3VzaGlvblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgeHBvcnRzWydpblknXSA9IGZ1bmN0aW9uKGVsLCBjdXNoaW9uKSB7XG4gICAgdmFyIHIgPSByZWN0YW5nbGUoZWwsIGN1c2hpb24pO1xuICAgIHJldHVybiAhIXIgJiYgci5ib3R0b20gPj0gMCAmJiByLnRvcCA8PSB2aWV3cG9ydEgoKTtcbiAgfTtcblxuICAvKipcbiAgICogVGVzdCBpZiBhbiBlbGVtZW50IGlzIGluIHRoZSB2aWV3cG9ydC5cbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gY3VzaGlvblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgeHBvcnRzWydpblZpZXdwb3J0J10gPSBmdW5jdGlvbihlbCwgY3VzaGlvbikge1xuICAgIC8vIEVxdWl2IHRvIGBpblgoZWwsIGN1c2hpb24pICYmIGluWShlbCwgY3VzaGlvbilgIGJ1dCBqdXN0IG1hbnVhbGx5IGRvIGJvdGhcbiAgICAvLyB0byBhdm9pZCBjYWxsaW5nIHJlY3RhbmdsZSgpIHR3aWNlLiBJdCBnemlwcyBqdXN0IGFzIHNtYWxsIGxpa2UgdGhpcy5cbiAgICB2YXIgciA9IHJlY3RhbmdsZShlbCwgY3VzaGlvbik7XG4gICAgcmV0dXJuICEhciAmJiByLmJvdHRvbSA+PSAwICYmIHIucmlnaHQgPj0gMCAmJiByLnRvcCA8PSB2aWV3cG9ydEgoKSAmJiByLmxlZnQgPD0gdmlld3BvcnRXKCk7XG4gIH07XG5cbiAgcmV0dXJuIHhwb3J0cztcbn0pKTtcbihmdW5jdGlvbigpIHtcbiAgdmFyIE11dGF0aW9uT2JzZXJ2ZXIsIFV0aWwsIFdlYWtNYXAsIGdldENvbXB1dGVkU3R5bGUsIGdldENvbXB1dGVkU3R5bGVSWCxcbiAgICBfX2JpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxuICAgIF9faW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9O1xuXG4gIFV0aWwgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gVXRpbCgpIHt9XG5cbiAgICBVdGlsLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbihjdXN0b20sIGRlZmF1bHRzKSB7XG4gICAgICB2YXIga2V5LCB2YWx1ZTtcbiAgICAgIGZvciAoa2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICAgIHZhbHVlID0gZGVmYXVsdHNba2V5XTtcbiAgICAgICAgaWYgKGN1c3RvbVtrZXldID09IG51bGwpIHtcbiAgICAgICAgICBjdXN0b21ba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VzdG9tO1xuICAgIH07XG5cbiAgICBVdGlsLnByb3RvdHlwZS5pc01vYmlsZSA9IGZ1bmN0aW9uKGFnZW50KSB7XG4gICAgICByZXR1cm4gL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KGFnZW50KTtcbiAgICB9O1xuXG4gICAgVXRpbC5wcm90b3R5cGUuYWRkRXZlbnQgPSBmdW5jdGlvbihlbGVtLCBldmVudCwgZm4pIHtcbiAgICAgIGlmIChlbGVtLmFkZEV2ZW50TGlzdGVuZXIgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZWxlbS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmIChlbGVtLmF0dGFjaEV2ZW50ICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGVsZW0uYXR0YWNoRXZlbnQoXCJvblwiICsgZXZlbnQsIGZuKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBlbGVtW2V2ZW50XSA9IGZuO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBVdGlsLnByb3RvdHlwZS5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uKGVsZW0sIGV2ZW50LCBmbikge1xuICAgICAgaWYgKGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGZuLCBmYWxzZSk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW0uZGV0YWNoRXZlbnQgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZWxlbS5kZXRhY2hFdmVudChcIm9uXCIgKyBldmVudCwgZm4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlbGV0ZSBlbGVtW2V2ZW50XTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVXRpbC5wcm90b3R5cGUuaW5uZXJIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgnaW5uZXJIZWlnaHQnIGluIHdpbmRvdykge1xuICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBVdGlsO1xuXG4gIH0pKCk7XG5cbiAgV2Vha01hcCA9IHRoaXMuV2Vha01hcCB8fCB0aGlzLk1veldlYWtNYXAgfHwgKFdlYWtNYXAgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gV2Vha01hcCgpIHtcbiAgICAgIHRoaXMua2V5cyA9IFtdO1xuICAgICAgdGhpcy52YWx1ZXMgPSBbXTtcbiAgICB9XG5cbiAgICBXZWFrTWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBpLCBpdGVtLCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgIF9yZWYgPSB0aGlzLmtleXM7XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBpdGVtID0gX3JlZltpXTtcbiAgICAgICAgaWYgKGl0ZW0gPT09IGtleSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlc1tpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBXZWFrTWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICB2YXIgaSwgaXRlbSwgX2ksIF9sZW4sIF9yZWY7XG4gICAgICBfcmVmID0gdGhpcy5rZXlzO1xuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgaXRlbSA9IF9yZWZbaV07XG4gICAgICAgIGlmIChpdGVtID09PSBrZXkpIHtcbiAgICAgICAgICB0aGlzLnZhbHVlc1tpXSA9IHZhbHVlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5rZXlzLnB1c2goa2V5KTtcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFdlYWtNYXA7XG5cbiAgfSkoKSk7XG5cbiAgTXV0YXRpb25PYnNlcnZlciA9IHRoaXMuTXV0YXRpb25PYnNlcnZlciB8fCB0aGlzLldlYmtpdE11dGF0aW9uT2JzZXJ2ZXIgfHwgdGhpcy5Nb3pNdXRhdGlvbk9ic2VydmVyIHx8IChNdXRhdGlvbk9ic2VydmVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIE11dGF0aW9uT2JzZXJ2ZXIoKSB7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ011dGF0aW9uT2JzZXJ2ZXIgaXMgbm90IHN1cHBvcnRlZCBieSB5b3VyIGJyb3dzZXIuJyk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1dPVy5qcyBjYW5ub3QgZGV0ZWN0IGRvbSBtdXRhdGlvbnMsIHBsZWFzZSBjYWxsIC5zeW5jKCkgYWZ0ZXIgbG9hZGluZyBuZXcgY29udGVudC4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBNdXRhdGlvbk9ic2VydmVyLm5vdFN1cHBvcnRlZCA9IHRydWU7XG5cbiAgICBNdXRhdGlvbk9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24oKSB7fTtcblxuICAgIHJldHVybiBNdXRhdGlvbk9ic2VydmVyO1xuXG4gIH0pKCkpO1xuXG4gIGdldENvbXB1dGVkU3R5bGUgPSB0aGlzLmdldENvbXB1dGVkU3R5bGUgfHwgZnVuY3Rpb24oZWwsIHBzZXVkbykge1xuICAgIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIHZhciBfcmVmO1xuICAgICAgaWYgKHByb3AgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgcHJvcCA9ICdzdHlsZUZsb2F0JztcbiAgICAgIH1cbiAgICAgIGlmIChnZXRDb21wdXRlZFN0eWxlUlgudGVzdChwcm9wKSkge1xuICAgICAgICBwcm9wLnJlcGxhY2UoZ2V0Q29tcHV0ZWRTdHlsZVJYLCBmdW5jdGlvbihfLCBfY2hhcikge1xuICAgICAgICAgIHJldHVybiBfY2hhci50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoKF9yZWYgPSBlbC5jdXJyZW50U3R5bGUpICE9IG51bGwgPyBfcmVmW3Byb3BdIDogdm9pZCAwKSB8fCBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgZ2V0Q29tcHV0ZWRTdHlsZVJYID0gLyhcXC0oW2Etel0pezF9KS9nO1xuXG4gIHRoaXMuV09XID0gKGZ1bmN0aW9uKCkge1xuICAgIFdPVy5wcm90b3R5cGUuZGVmYXVsdHMgPSB7XG4gICAgICBib3hDbGFzczogJ3dvdycsXG4gICAgICBhbmltYXRlQ2xhc3M6ICdhbmltYXRlZCcsXG4gICAgICBvZmZzZXQ6IDAsXG4gICAgICBtb2JpbGU6IHRydWUsXG4gICAgICBsaXZlOiB0cnVlLFxuICAgICAgY2FsbGJhY2s6IG51bGxcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gV09XKG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgdGhpcy5zY3JvbGxDYWxsYmFjayA9IF9fYmluZCh0aGlzLnNjcm9sbENhbGxiYWNrLCB0aGlzKTtcbiAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlciA9IF9fYmluZCh0aGlzLnNjcm9sbEhhbmRsZXIsIHRoaXMpO1xuICAgICAgdGhpcy5zdGFydCA9IF9fYmluZCh0aGlzLnN0YXJ0LCB0aGlzKTtcbiAgICAgIHRoaXMuc2Nyb2xsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5jb25maWcgPSB0aGlzLnV0aWwoKS5leHRlbmQob3B0aW9ucywgdGhpcy5kZWZhdWx0cyk7XG4gICAgICB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG4gICAgfVxuXG4gICAgV09XLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3JlZjtcbiAgICAgIHRoaXMuZWxlbWVudCA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICBpZiAoKF9yZWYgPSBkb2N1bWVudC5yZWFkeVN0YXRlKSA9PT0gXCJpbnRlcmFjdGl2ZVwiIHx8IF9yZWYgPT09IFwiY29tcGxldGVcIikge1xuICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudChkb2N1bWVudCwgJ0RPTUNvbnRlbnRMb2FkZWQnLCB0aGlzLnN0YXJ0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmZpbmlzaGVkID0gW107XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBib3gsIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmJveGVzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgICBfcmVmID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIgKyB0aGlzLmNvbmZpZy5ib3hDbGFzcyk7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIGJveCA9IF9yZWZbX2ldO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goYm94KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5hbGwgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZWYgPSB0aGlzLmJveGVzO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICBib3ggPSBfcmVmW19pXTtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKGJveCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgIGlmICh0aGlzLmJveGVzLmxlbmd0aCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCgpKSB7XG4gICAgICAgICAgdGhpcy5yZXNldFN0eWxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3JlZiA9IHRoaXMuYm94ZXM7XG4gICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICBib3ggPSBfcmVmW19pXTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTdHlsZShib3gsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKCkpIHtcbiAgICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQod2luZG93LCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQod2luZG93LCAncmVzaXplJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMuc2Nyb2xsQ2FsbGJhY2ssIDUwKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5saXZlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25PYnNlcnZlcigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVjb3Jkcykge1xuICAgICAgICAgICAgdmFyIG5vZGUsIHJlY29yZCwgX2osIF9sZW4xLCBfcmVzdWx0cztcbiAgICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSByZWNvcmRzLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgICAgICByZWNvcmQgPSByZWNvcmRzW19qXTtcbiAgICAgICAgICAgICAgX3Jlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9rLCBfbGVuMiwgX3JlZjEsIF9yZXN1bHRzMTtcbiAgICAgICAgICAgICAgICBfcmVmMSA9IHJlY29yZC5hZGRlZE5vZGVzIHx8IFtdO1xuICAgICAgICAgICAgICAgIF9yZXN1bHRzMSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAoX2sgPSAwLCBfbGVuMiA9IF9yZWYxLmxlbmd0aDsgX2sgPCBfbGVuMjsgX2srKykge1xuICAgICAgICAgICAgICAgICAgbm9kZSA9IF9yZWYxW19rXTtcbiAgICAgICAgICAgICAgICAgIF9yZXN1bHRzMS5wdXNoKHRoaXMuZG9TeW5jKG5vZGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHRzMTtcbiAgICAgICAgICAgICAgfSkuY2FsbChfdGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pKHRoaXMpKS5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgdGhpcy51dGlsKCkucmVtb3ZlRXZlbnQod2luZG93LCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgIHRoaXMudXRpbCgpLnJlbW92ZUV2ZW50KHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XG4gICAgICBpZiAodGhpcy5pbnRlcnZhbCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnN5bmMgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICBpZiAoTXV0YXRpb25PYnNlcnZlci5ub3RTdXBwb3J0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9TeW5jKHRoaXMuZWxlbWVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuZG9TeW5jID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgdmFyIGJveCwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgaWYgKGVsZW1lbnQgPT0gbnVsbCkge1xuICAgICAgICBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgfVxuICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgIT09IDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSB8fCBlbGVtZW50O1xuICAgICAgX3JlZiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIHRoaXMuY29uZmlnLmJveENsYXNzKTtcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgYm94ID0gX3JlZltfaV07XG4gICAgICAgIGlmIChfX2luZGV4T2YuY2FsbCh0aGlzLmFsbCwgYm94KSA8IDApIHtcbiAgICAgICAgICB0aGlzLmJveGVzLnB1c2goYm94KTtcbiAgICAgICAgICB0aGlzLmFsbC5wdXNoKGJveCk7XG4gICAgICAgICAgaWYgKHRoaXMuc3RvcHBlZCB8fCB0aGlzLmRpc2FibGVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTdHlsZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5U3R5bGUoYm94LCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLnNjcm9sbGVkID0gdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaCh2b2lkIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgdGhpcy5hcHBseVN0eWxlKGJveCk7XG4gICAgICBib3guY2xhc3NOYW1lID0gXCJcIiArIGJveC5jbGFzc05hbWUgKyBcIiBcIiArIHRoaXMuY29uZmlnLmFuaW1hdGVDbGFzcztcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5jYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5jYWxsYmFjayhib3gpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmFwcGx5U3R5bGUgPSBmdW5jdGlvbihib3gsIGhpZGRlbikge1xuICAgICAgdmFyIGRlbGF5LCBkdXJhdGlvbiwgaXRlcmF0aW9uO1xuICAgICAgZHVyYXRpb24gPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1kdXJhdGlvbicpO1xuICAgICAgZGVsYXkgPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1kZWxheScpO1xuICAgICAgaXRlcmF0aW9uID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctaXRlcmF0aW9uJyk7XG4gICAgICByZXR1cm4gdGhpcy5hbmltYXRlKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmN1c3RvbVN0eWxlKGJveCwgaGlkZGVuLCBkdXJhdGlvbiwgZGVsYXksIGl0ZXJhdGlvbik7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuYW5pbWF0ZSA9IChmdW5jdGlvbigpIHtcbiAgICAgIGlmICgncmVxdWVzdEFuaW1hdGlvbkZyYW1lJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSkoKTtcblxuICAgIFdPVy5wcm90b3R5cGUucmVzZXRTdHlsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJveCwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgX3JlZiA9IHRoaXMuYm94ZXM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGJveCA9IF9yZWZbX2ldO1xuICAgICAgICBfcmVzdWx0cy5wdXNoKGJveC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5jdXN0b21TdHlsZSA9IGZ1bmN0aW9uKGJveCwgaGlkZGVuLCBkdXJhdGlvbiwgZGVsYXksIGl0ZXJhdGlvbikge1xuICAgICAgaWYgKGhpZGRlbikge1xuICAgICAgICB0aGlzLmNhY2hlQW5pbWF0aW9uTmFtZShib3gpO1xuICAgICAgfVxuICAgICAgYm94LnN0eWxlLnZpc2liaWxpdHkgPSBoaWRkZW4gPyAnaGlkZGVuJyA6ICd2aXNpYmxlJztcbiAgICAgIGlmIChkdXJhdGlvbikge1xuICAgICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcbiAgICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogZHVyYXRpb25cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoZGVsYXkpIHtcbiAgICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XG4gICAgICAgICAgYW5pbWF0aW9uRGVsYXk6IGRlbGF5XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZXJhdGlvbikge1xuICAgICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcbiAgICAgICAgICBhbmltYXRpb25JdGVyYXRpb25Db3VudDogaXRlcmF0aW9uXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XG4gICAgICAgIGFuaW1hdGlvbk5hbWU6IGhpZGRlbiA/ICdub25lJyA6IHRoaXMuY2FjaGVkQW5pbWF0aW9uTmFtZShib3gpXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBib3g7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUudmVuZG9ycyA9IFtcIm1velwiLCBcIndlYmtpdFwiXTtcblxuICAgIFdPVy5wcm90b3R5cGUudmVuZG9yU2V0ID0gZnVuY3Rpb24oZWxlbSwgcHJvcGVydGllcykge1xuICAgICAgdmFyIG5hbWUsIHZhbHVlLCB2ZW5kb3IsIF9yZXN1bHRzO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAobmFtZSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHZhbHVlID0gcHJvcGVydGllc1tuYW1lXTtcbiAgICAgICAgZWxlbVtcIlwiICsgbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgX3Jlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0czE7XG4gICAgICAgICAgX3JlZiA9IHRoaXMudmVuZG9ycztcbiAgICAgICAgICBfcmVzdWx0czEgPSBbXTtcbiAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgIHZlbmRvciA9IF9yZWZbX2ldO1xuICAgICAgICAgICAgX3Jlc3VsdHMxLnB1c2goZWxlbVtcIlwiICsgdmVuZG9yICsgKG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkpICsgKG5hbWUuc3Vic3RyKDEpKV0gPSB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0czE7XG4gICAgICAgIH0pLmNhbGwodGhpcykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnZlbmRvckNTUyA9IGZ1bmN0aW9uKGVsZW0sIHByb3BlcnR5KSB7XG4gICAgICB2YXIgcmVzdWx0LCBzdHlsZSwgdmVuZG9yLCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTtcbiAgICAgIHJlc3VsdCA9IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUocHJvcGVydHkpO1xuICAgICAgX3JlZiA9IHRoaXMudmVuZG9ycztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICB2ZW5kb3IgPSBfcmVmW19pXTtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0IHx8IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUoXCItXCIgKyB2ZW5kb3IgKyBcIi1cIiArIHByb3BlcnR5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuYW5pbWF0aW9uTmFtZSA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgdmFyIGFuaW1hdGlvbk5hbWU7XG4gICAgICB0cnkge1xuICAgICAgICBhbmltYXRpb25OYW1lID0gdGhpcy52ZW5kb3JDU1MoYm94LCAnYW5pbWF0aW9uLW5hbWUnKS5jc3NUZXh0O1xuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgIGFuaW1hdGlvbk5hbWUgPSBnZXRDb21wdXRlZFN0eWxlKGJveCkuZ2V0UHJvcGVydHlWYWx1ZSgnYW5pbWF0aW9uLW5hbWUnKTtcbiAgICAgIH1cbiAgICAgIGlmIChhbmltYXRpb25OYW1lID09PSAnbm9uZScpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFuaW1hdGlvbk5hbWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuY2FjaGVBbmltYXRpb25OYW1lID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICByZXR1cm4gdGhpcy5hbmltYXRpb25OYW1lQ2FjaGUuc2V0KGJveCwgdGhpcy5hbmltYXRpb25OYW1lKGJveCkpO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmNhY2hlZEFuaW1hdGlvbk5hbWUgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgIHJldHVybiB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZS5nZXQoYm94KTtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zY3JvbGxIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5zY3JvbGxlZCA9IHRydWU7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc2Nyb2xsQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBib3g7XG4gICAgICBpZiAodGhpcy5zY3JvbGxlZCkge1xuICAgICAgICB0aGlzLnNjcm9sbGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYm94ZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0cztcbiAgICAgICAgICBfcmVmID0gdGhpcy5ib3hlcztcbiAgICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgYm94ID0gX3JlZltfaV07XG4gICAgICAgICAgICBpZiAoIShib3gpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKGJveCkpIHtcbiAgICAgICAgICAgICAgdGhpcy5zaG93KGJveCk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3Jlc3VsdHMucHVzaChib3gpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICAgIGlmICghKHRoaXMuYm94ZXMubGVuZ3RoIHx8IHRoaXMuY29uZmlnLmxpdmUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUub2Zmc2V0VG9wID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgdmFyIHRvcDtcbiAgICAgIHdoaWxlIChlbGVtZW50Lm9mZnNldFRvcCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICB9XG4gICAgICB0b3AgPSBlbGVtZW50Lm9mZnNldFRvcDtcbiAgICAgIHdoaWxlIChlbGVtZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQpIHtcbiAgICAgICAgdG9wICs9IGVsZW1lbnQub2Zmc2V0VG9wO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRvcDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5pc1Zpc2libGUgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgIHZhciBib3R0b20sIG9mZnNldCwgdG9wLCB2aWV3Qm90dG9tLCB2aWV3VG9wO1xuICAgICAgb2Zmc2V0ID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctb2Zmc2V0JykgfHwgdGhpcy5jb25maWcub2Zmc2V0O1xuICAgICAgdmlld1RvcCA9IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgIHZpZXdCb3R0b20gPSB2aWV3VG9wICsgTWF0aC5taW4odGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCwgdGhpcy51dGlsKCkuaW5uZXJIZWlnaHQoKSkgLSBvZmZzZXQ7XG4gICAgICB0b3AgPSB0aGlzLm9mZnNldFRvcChib3gpO1xuICAgICAgYm90dG9tID0gdG9wICsgYm94LmNsaWVudEhlaWdodDtcbiAgICAgIHJldHVybiB0b3AgPD0gdmlld0JvdHRvbSAmJiBib3R0b20gPj0gdmlld1RvcDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS51dGlsID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdXRpbCAhPSBudWxsID8gdGhpcy5fdXRpbCA6IHRoaXMuX3V0aWwgPSBuZXcgVXRpbCgpO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmRpc2FibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuY29uZmlnLm1vYmlsZSAmJiB0aGlzLnV0aWwoKS5pc01vYmlsZShuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFdPVztcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuLyohXG4gKiBTaXRlIGNvZGVcbiAqL1xubmV3IFdPVygpLmluaXQoKTtcbiIsIi8qISBQaWN0dXJlZmlsbCAtIHYyLjIuMCAtIDIwMTQtMTAtMzBcbiogaHR0cDovL3Njb3R0amVobC5naXRodWIuaW8vcGljdHVyZWZpbGxcbiogQ29weXJpZ2h0IChjKSAyMDE0IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvcGljdHVyZWZpbGwvYmxvYi9tYXN0ZXIvQXV0aG9ycy50eHQ7IExpY2Vuc2VkIE1JVCAqL1xuLyohIG1hdGNoTWVkaWEoKSBwb2x5ZmlsbCAtIFRlc3QgYSBDU1MgbWVkaWEgdHlwZS9xdWVyeSBpbiBKUy4gQXV0aG9ycyAmIGNvcHlyaWdodCAoYykgMjAxMjogU2NvdHQgSmVobCwgUGF1bCBJcmlzaCwgTmljaG9sYXMgWmFrYXMsIERhdmlkIEtuaWdodC4gRHVhbCBNSVQvQlNEIGxpY2Vuc2UgKi9cblxud2luZG93Lm1hdGNoTWVkaWEgfHwgKHdpbmRvdy5tYXRjaE1lZGlhID0gZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8vIEZvciBicm93c2VycyB0aGF0IHN1cHBvcnQgbWF0Y2hNZWRpdW0gYXBpIHN1Y2ggYXMgSUUgOSBhbmQgd2Via2l0XG4gIHZhciBzdHlsZU1lZGlhID0gKHdpbmRvdy5zdHlsZU1lZGlhIHx8IHdpbmRvdy5tZWRpYSk7XG5cbiAgLy8gRm9yIHRob3NlIHRoYXQgZG9uJ3Qgc3VwcG9ydCBtYXRjaE1lZGl1bVxuICBpZiAoIXN0eWxlTWVkaWEpIHtcbiAgICB2YXIgc3R5bGUgICAgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpLFxuICAgICAgc2NyaXB0ICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF0sXG4gICAgICBpbmZvICAgICAgICA9IG51bGw7XG5cbiAgICBzdHlsZS50eXBlICA9ICd0ZXh0L2Nzcyc7XG4gICAgc3R5bGUuaWQgICAgPSAnbWF0Y2htZWRpYWpzLXRlc3QnO1xuXG4gICAgc2NyaXB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN0eWxlLCBzY3JpcHQpO1xuXG4gICAgLy8gJ3N0eWxlLmN1cnJlbnRTdHlsZScgaXMgdXNlZCBieSBJRSA8PSA4IGFuZCAnd2luZG93LmdldENvbXB1dGVkU3R5bGUnIGZvciBhbGwgb3RoZXIgYnJvd3NlcnNcbiAgICBpbmZvID0gKCdnZXRDb21wdXRlZFN0eWxlJyBpbiB3aW5kb3cpICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHN0eWxlLCBudWxsKSB8fCBzdHlsZS5jdXJyZW50U3R5bGU7XG5cbiAgICBzdHlsZU1lZGlhID0ge1xuICAgICAgbWF0Y2hNZWRpdW06IGZ1bmN0aW9uKG1lZGlhKSB7XG4gICAgICAgIHZhciB0ZXh0ID0gJ0BtZWRpYSAnICsgbWVkaWEgKyAneyAjbWF0Y2htZWRpYWpzLXRlc3QgeyB3aWR0aDogMXB4OyB9IH0nO1xuXG4gICAgICAgIC8vICdzdHlsZS5zdHlsZVNoZWV0JyBpcyB1c2VkIGJ5IElFIDw9IDggYW5kICdzdHlsZS50ZXh0Q29udGVudCcgZm9yIGFsbCBvdGhlciBicm93c2Vyc1xuICAgICAgICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgICAgICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHRleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGVzdCBpZiBtZWRpYSBxdWVyeSBpcyB0cnVlIG9yIGZhbHNlXG4gICAgICAgIHJldHVybiBpbmZvLndpZHRoID09PSAnMXB4JztcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKG1lZGlhKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1hdGNoZXM6IHN0eWxlTWVkaWEubWF0Y2hNZWRpdW0obWVkaWEgfHwgJ2FsbCcpLFxuICAgICAgbWVkaWE6IG1lZGlhIHx8ICdhbGwnXG4gICAgfTtcbiAgfTtcbn0oKSk7XG4vKiEgUGljdHVyZWZpbGwgLSBSZXNwb25zaXZlIEltYWdlcyB0aGF0IHdvcmsgdG9kYXkuXG4qICBBdXRob3I6IFNjb3R0IEplaGwsIEZpbGFtZW50IEdyb3VwLCAyMDEyICggbmV3IHByb3Bvc2FsIGltcGxlbWVudGVkIGJ5IFNoYXduIEphbnNlcGFyIClcbiogIExpY2Vuc2U6IE1JVC9HUEx2MlxuKiAgU3BlYzogaHR0cDovL3BpY3R1cmUucmVzcG9uc2l2ZWltYWdlcy5vcmcvXG4qL1xuKGZ1bmN0aW9uKCB3LCBkb2MsIGltYWdlICkge1xuICAvLyBFbmFibGUgc3RyaWN0IG1vZGVcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLy8gSWYgcGljdHVyZSBpcyBzdXBwb3J0ZWQsIHdlbGwsIHRoYXQncyBhd2Vzb21lLiBMZXQncyBnZXQgb3V0dGEgaGVyZS4uLlxuICBpZiAoIHcuSFRNTFBpY3R1cmVFbGVtZW50ICkge1xuICAgIHcucGljdHVyZWZpbGwgPSBmdW5jdGlvbigpIHsgfTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBIVE1MIHNoaW18diBpdCBmb3Igb2xkIElFIChJRTkgd2lsbCBzdGlsbCBuZWVkIHRoZSBIVE1MIHZpZGVvIHRhZyB3b3JrYXJvdW5kKVxuICBkb2MuY3JlYXRlRWxlbWVudCggXCJwaWN0dXJlXCIgKTtcblxuICAvLyBsb2NhbCBvYmplY3QgZm9yIG1ldGhvZCByZWZlcmVuY2VzIGFuZCB0ZXN0aW5nIGV4cG9zdXJlXG4gIHZhciBwZiA9IHt9O1xuXG4gIC8vIG5hbWVzcGFjZVxuICBwZi5ucyA9IFwicGljdHVyZWZpbGxcIjtcblxuICAvLyBzcmNzZXQgc3VwcG9ydCB0ZXN0XG4gIChmdW5jdGlvbigpIHtcbiAgICBwZi5zcmNzZXRTdXBwb3J0ZWQgPSBcInNyY3NldFwiIGluIGltYWdlO1xuICAgIHBmLnNpemVzU3VwcG9ydGVkID0gXCJzaXplc1wiIGluIGltYWdlO1xuICB9KSgpO1xuXG4gIC8vIGp1c3QgYSBzdHJpbmcgdHJpbSB3b3JrYXJvdW5kXG4gIHBmLnRyaW0gPSBmdW5jdGlvbiggc3RyICkge1xuICAgIHJldHVybiBzdHIudHJpbSA/IHN0ci50cmltKCkgOiBzdHIucmVwbGFjZSggL15cXHMrfFxccyskL2csIFwiXCIgKTtcbiAgfTtcblxuICAvLyBqdXN0IGEgc3RyaW5nIGVuZHNXaXRoIHdvcmthcm91bmRcbiAgcGYuZW5kc1dpdGggPSBmdW5jdGlvbiggc3RyLCBzdWZmaXggKSB7XG4gICAgcmV0dXJuIHN0ci5lbmRzV2l0aCA/IHN0ci5lbmRzV2l0aCggc3VmZml4ICkgOiBzdHIuaW5kZXhPZiggc3VmZml4LCBzdHIubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCApICE9PSAtMTtcbiAgfTtcblxuICAvKipcbiAgICogU2hvcnRjdXQgbWV0aG9kIGZvciBodHRwczovL3czYy5naXRodWIuaW8vd2ViYXBwc2VjL3NwZWNzL21peGVkY29udGVudC8jcmVzdHJpY3RzLW1peGVkLWNvbnRlbnQgKCBmb3IgZWFzeSBvdmVycmlkaW5nIGluIHRlc3RzIClcbiAgICovXG4gIHBmLnJlc3RyaWN0c01peGVkQ29udGVudCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB3LmxvY2F0aW9uLnByb3RvY29sID09PSBcImh0dHBzOlwiO1xuICB9O1xuICAvKipcbiAgICogU2hvcnRjdXQgbWV0aG9kIGZvciBtYXRjaE1lZGlhICggZm9yIGVhc3kgb3ZlcnJpZGluZyBpbiB0ZXN0cyApXG4gICAqL1xuXG4gIHBmLm1hdGNoZXNNZWRpYSA9IGZ1bmN0aW9uKCBtZWRpYSApIHtcbiAgICByZXR1cm4gdy5tYXRjaE1lZGlhICYmIHcubWF0Y2hNZWRpYSggbWVkaWEgKS5tYXRjaGVzO1xuICB9O1xuXG4gIC8vIFNob3J0Y3V0IG1ldGhvZCBmb3IgYGRldmljZVBpeGVsUmF0aW9gICggZm9yIGVhc3kgb3ZlcnJpZGluZyBpbiB0ZXN0cyApXG4gIHBmLmdldERwciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoIHcuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB3aWR0aCBpbiBjc3MgcGl4ZWwgdmFsdWUgZnJvbSBhIFwibGVuZ3RoXCIgdmFsdWVcbiAgICogaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy0zLyNsZW5ndGgtdmFsdWVcbiAgICovXG4gIHBmLmdldFdpZHRoRnJvbUxlbmd0aCA9IGZ1bmN0aW9uKCBsZW5ndGggKSB7XG4gICAgLy8gSWYgYSBsZW5ndGggaXMgc3BlY2lmaWVkIGFuZCBkb2VzbuKAmXQgY29udGFpbiBhIHBlcmNlbnRhZ2UsIGFuZCBpdCBpcyBncmVhdGVyIHRoYW4gMCBvciB1c2luZyBgY2FsY2AsIHVzZSBpdC4gRWxzZSwgdXNlIHRoZSBgMTAwdndgIGRlZmF1bHQuXG4gICAgbGVuZ3RoID0gbGVuZ3RoICYmIGxlbmd0aC5pbmRleE9mKCBcIiVcIiApID4gLTEgPT09IGZhbHNlICYmICggcGFyc2VGbG9hdCggbGVuZ3RoICkgPiAwIHx8IGxlbmd0aC5pbmRleE9mKCBcImNhbGMoXCIgKSA+IC0xICkgPyBsZW5ndGggOiBcIjEwMHZ3XCI7XG5cbiAgICAvKipcbiAgICAgKiBJZiBsZW5ndGggaXMgc3BlY2lmaWVkIGluICBgdndgIHVuaXRzLCB1c2UgYCVgIGluc3RlYWQgc2luY2UgdGhlIGRpdiB3ZeKAmXJlIG1lYXN1cmluZ1xuICAgICAqIGlzIGluamVjdGVkIGF0IHRoZSB0b3Agb2YgdGhlIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogVE9ETzogbWF5YmUgd2Ugc2hvdWxkIHB1dCB0aGlzIGJlaGluZCBhIGZlYXR1cmUgdGVzdCBmb3IgYHZ3YD9cbiAgICAgKi9cbiAgICBsZW5ndGggPSBsZW5ndGgucmVwbGFjZSggXCJ2d1wiLCBcIiVcIiApO1xuXG4gICAgLy8gQ3JlYXRlIGEgY2FjaGVkIGVsZW1lbnQgZm9yIGdldHRpbmcgbGVuZ3RoIHZhbHVlIHdpZHRoc1xuICAgIGlmICggIXBmLmxlbmd0aEVsICkge1xuICAgICAgcGYubGVuZ3RoRWwgPSBkb2MuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xuXG4gICAgICAvLyBQb3NpdGlvbmluZyBzdHlsZXMgaGVscCBwcmV2ZW50IHBhZGRpbmcvbWFyZ2luL3dpZHRoIG9uIGBodG1sYCBvciBgYm9keWAgZnJvbSB0aHJvd2luZyBjYWxjdWxhdGlvbnMgb2ZmLlxuICAgICAgcGYubGVuZ3RoRWwuc3R5bGUuY3NzVGV4dCA9IFwiYm9yZGVyOjA7ZGlzcGxheTpibG9jaztmb250LXNpemU6MWVtO2xlZnQ6MDttYXJnaW46MDtwYWRkaW5nOjA7cG9zaXRpb246YWJzb2x1dGU7dmlzaWJpbGl0eTpoaWRkZW5cIjtcbiAgICB9XG5cbiAgICBwZi5sZW5ndGhFbC5zdHlsZS53aWR0aCA9IGxlbmd0aDtcblxuICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKHBmLmxlbmd0aEVsKTtcblxuICAgIC8vIEFkZCBhIGNsYXNzLCBzbyB0aGF0IGV2ZXJ5b25lIGtub3dzIHdoZXJlIHRoaXMgZWxlbWVudCBjb21lcyBmcm9tXG4gICAgcGYubGVuZ3RoRWwuY2xhc3NOYW1lID0gXCJoZWxwZXItZnJvbS1waWN0dXJlZmlsbC1qc1wiO1xuXG4gICAgaWYgKCBwZi5sZW5ndGhFbC5vZmZzZXRXaWR0aCA8PSAwICkge1xuICAgICAgLy8gU29tZXRoaW5nIGhhcyBnb25lIHdyb25nLiBgY2FsYygpYCBpcyBpbiB1c2UgYW5kIHVuc3VwcG9ydGVkLCBtb3N0IGxpa2VseS4gRGVmYXVsdCB0byBgMTAwdndgIChgMTAwJWAsIGZvciBicm9hZGVyIHN1cHBvcnQuKTpcbiAgICAgIHBmLmxlbmd0aEVsLnN0eWxlLndpZHRoID0gZG9jLmRvY3VtZW50RWxlbWVudC5vZmZzZXRXaWR0aCArIFwicHhcIjtcbiAgICB9XG5cbiAgICB2YXIgb2Zmc2V0V2lkdGggPSBwZi5sZW5ndGhFbC5vZmZzZXRXaWR0aDtcblxuICAgIGRvYy5ib2R5LnJlbW92ZUNoaWxkKCBwZi5sZW5ndGhFbCApO1xuXG4gICAgcmV0dXJuIG9mZnNldFdpZHRoO1xuICB9O1xuXG4gIC8vIGNvbnRhaW5lciBvZiBzdXBwb3J0ZWQgbWltZSB0eXBlcyB0aGF0IG9uZSBtaWdodCBuZWVkIHRvIHF1YWxpZnkgYmVmb3JlIHVzaW5nXG4gIHBmLnR5cGVzID0gIHt9O1xuXG4gIC8vIEFkZCBzdXBwb3J0IGZvciBzdGFuZGFyZCBtaW1lIHR5cGVzXG4gIHBmLnR5cGVzWyBcImltYWdlL2pwZWdcIiBdID0gdHJ1ZTtcbiAgcGYudHlwZXNbIFwiaW1hZ2UvZ2lmXCIgXSA9IHRydWU7XG4gIHBmLnR5cGVzWyBcImltYWdlL3BuZ1wiIF0gPSB0cnVlO1xuXG4gIC8vIHRlc3Qgc3ZnIHN1cHBvcnRcbiAgcGYudHlwZXNbIFwiaW1hZ2Uvc3ZnK3htbFwiIF0gPSBkb2MuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZShcImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjSW1hZ2VcIiwgXCIxLjFcIik7XG5cbiAgLy8gdGVzdCB3ZWJwIHN1cHBvcnQsIG9ubHkgd2hlbiB0aGUgbWFya3VwIGNhbGxzIGZvciBpdFxuICBwZi50eXBlc1sgXCJpbWFnZS93ZWJwXCIgXSA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIGJhc2VkIG9uIE1vZGVybml6cidzIGxvc3NsZXNzIGltZy13ZWJwIHRlc3RcbiAgICAvLyBub3RlOiBhc3luY2hyb25vdXNcbiAgICB2YXIgdHlwZSA9IFwiaW1hZ2Uvd2VicFwiO1xuXG4gICAgaW1hZ2Uub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcGYudHlwZXNbIHR5cGUgXSA9IGZhbHNlO1xuICAgICAgcGljdHVyZWZpbGwoKTtcbiAgICB9O1xuICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcGYudHlwZXNbIHR5cGUgXSA9IGltYWdlLndpZHRoID09PSAxO1xuICAgICAgcGljdHVyZWZpbGwoKTtcbiAgICB9O1xuICAgIGltYWdlLnNyYyA9IFwiZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCxVa2xHUmg0QUFBQlhSVUpRVmxBNFRCRUFBQUF2QUFBQUFBZlEvLzczdi8rQmlPaC9BQUE9XCI7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRha2VzIGEgc291cmNlIGVsZW1lbnQgYW5kIGNoZWNrcyBpZiBpdHMgdHlwZSBhdHRyaWJ1dGUgaXMgcHJlc2VudCBhbmQgaWYgc28sIHN1cHBvcnRlZFxuICAgKiBOb3RlOiBmb3IgdHlwZSB0ZXN0cyB0aGF0IHJlcXVpcmUgYSBhc3luYyBsb2dpYyxcbiAgICogeW91IGNhbiBkZWZpbmUgdGhlbSBhcyBhIGZ1bmN0aW9uIHRoYXQnbGwgcnVuIG9ubHkgaWYgdGhhdCB0eXBlIG5lZWRzIHRvIGJlIHRlc3RlZC4gSnVzdCBtYWtlIHRoZSB0ZXN0IGZ1bmN0aW9uIGNhbGwgcGljdHVyZWZpbGwgYWdhaW4gd2hlbiBpdCBpcyBjb21wbGV0ZS5cbiAgICogc2VlIHRoZSBhc3luYyB3ZWJwIHRlc3QgYWJvdmUgZm9yIGV4YW1wbGVcbiAgICovXG4gIHBmLnZlcmlmeVR5cGVTdXBwb3J0ID0gZnVuY3Rpb24oIHNvdXJjZSApIHtcbiAgICB2YXIgdHlwZSA9IHNvdXJjZS5nZXRBdHRyaWJ1dGUoIFwidHlwZVwiICk7XG4gICAgLy8gaWYgdHlwZSBhdHRyaWJ1dGUgZXhpc3RzLCByZXR1cm4gdGVzdCByZXN1bHQsIG90aGVyd2lzZSByZXR1cm4gdHJ1ZVxuICAgIGlmICggdHlwZSA9PT0gbnVsbCB8fCB0eXBlID09PSBcIlwiICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGlmIHRoZSB0eXBlIHRlc3QgaXMgYSBmdW5jdGlvbiwgcnVuIGl0IGFuZCByZXR1cm4gXCJwZW5kaW5nXCIgc3RhdHVzLiBUaGUgZnVuY3Rpb24gd2lsbCByZXJ1biBwaWN0dXJlZmlsbCBvbiBwZW5kaW5nIGVsZW1lbnRzIG9uY2UgZmluaXNoZWQuXG4gICAgICBpZiAoIHR5cGVvZiggcGYudHlwZXNbIHR5cGUgXSApID09PSBcImZ1bmN0aW9uXCIgKSB7XG4gICAgICAgIHBmLnR5cGVzWyB0eXBlIF0oKTtcbiAgICAgICAgcmV0dXJuIFwicGVuZGluZ1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBmLnR5cGVzWyB0eXBlIF07XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFBhcnNlcyBhbiBpbmRpdmlkdWFsIGBzaXplYCBhbmQgcmV0dXJucyB0aGUgbGVuZ3RoLCBhbmQgb3B0aW9uYWwgbWVkaWEgcXVlcnlcbiAgcGYucGFyc2VTaXplID0gZnVuY3Rpb24oIHNvdXJjZVNpemVTdHIgKSB7XG4gICAgdmFyIG1hdGNoID0gLyhcXChbXildK1xcKSk/XFxzKiguKykvZy5leGVjKCBzb3VyY2VTaXplU3RyICk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1lZGlhOiBtYXRjaCAmJiBtYXRjaFsxXSxcbiAgICAgIGxlbmd0aDogbWF0Y2ggJiYgbWF0Y2hbMl1cbiAgICB9O1xuICB9O1xuXG4gIC8vIFRha2VzIGEgc3RyaW5nIG9mIHNpemVzIGFuZCByZXR1cm5zIHRoZSB3aWR0aCBpbiBwaXhlbHMgYXMgYSBudW1iZXJcbiAgcGYuZmluZFdpZHRoRnJvbVNvdXJjZVNpemUgPSBmdW5jdGlvbiggc291cmNlU2l6ZUxpc3RTdHIgKSB7XG4gICAgLy8gU3BsaXQgdXAgc291cmNlIHNpemUgbGlzdCwgaWUgKCBtYXgtd2lkdGg6IDMwZW0gKSAxMDAlLCAoIG1heC13aWR0aDogNTBlbSApIDUwJSwgMzMlXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgKG1pbi13aWR0aDozMGVtKSBjYWxjKDMwJSAtIDE1cHgpXG4gICAgdmFyIHNvdXJjZVNpemVMaXN0ID0gcGYudHJpbSggc291cmNlU2l6ZUxpc3RTdHIgKS5zcGxpdCggL1xccyosXFxzKi8gKSxcbiAgICAgIHdpbm5pbmdMZW5ndGg7XG5cbiAgICBmb3IgKCB2YXIgaSA9IDAsIGxlbiA9IHNvdXJjZVNpemVMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xuICAgICAgLy8gTWF0Y2ggPG1lZGlhLWNvbmRpdGlvbj4/IGxlbmd0aCwgaWUgKCBtaW4td2lkdGg6IDUwZW0gKSAxMDAlXG4gICAgICB2YXIgc291cmNlU2l6ZSA9IHNvdXJjZVNpemVMaXN0WyBpIF0sXG4gICAgICAgIC8vIFNwbGl0IFwiKCBtaW4td2lkdGg6IDUwZW0gKSAxMDAlXCIgaW50byBzZXBhcmF0ZSBzdHJpbmdzXG4gICAgICAgIHBhcnNlZFNpemUgPSBwZi5wYXJzZVNpemUoIHNvdXJjZVNpemUgKSxcbiAgICAgICAgbGVuZ3RoID0gcGFyc2VkU2l6ZS5sZW5ndGgsXG4gICAgICAgIG1lZGlhID0gcGFyc2VkU2l6ZS5tZWRpYTtcblxuICAgICAgaWYgKCAhbGVuZ3RoICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICggIW1lZGlhIHx8IHBmLm1hdGNoZXNNZWRpYSggbWVkaWEgKSApIHtcbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gbWVkaWEgcXVlcnkgb3IgaXQgbWF0Y2hlcywgY2hvb3NlIHRoaXMgYXMgb3VyIHdpbm5pbmcgbGVuZ3RoXG4gICAgICAgIC8vIGFuZCBlbmQgYWxnb3JpdGhtXG4gICAgICAgIHdpbm5pbmdMZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHBhc3MgdGhlIGxlbmd0aCB0byBhIG1ldGhvZCB0aGF0IGNhbiBwcm9wZXJseSBkZXRlcm1pbmUgbGVuZ3RoXG4gICAgLy8gaW4gcGl4ZWxzIGJhc2VkIG9uIHRoZXNlIGZvcm1hdHM6IGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzcy12YWx1ZXMtMy8jbGVuZ3RoLXZhbHVlXG4gICAgcmV0dXJuIHBmLmdldFdpZHRoRnJvbUxlbmd0aCggd2lubmluZ0xlbmd0aCApO1xuICB9O1xuXG4gIHBmLnBhcnNlU3Jjc2V0ID0gZnVuY3Rpb24oIHNyY3NldCApIHtcbiAgICAvKipcbiAgICAgKiBBIGxvdCBvZiB0aGlzIHdhcyBwdWxsZWQgZnJvbSBCb3JpcyBTbXVz4oCZIHBhcnNlciBmb3IgdGhlIG5vdy1kZWZ1bmN0IFdIQVRXRyBgc3Jjc2V0YFxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ib3Jpc211cy9zcmNzZXQtcG9seWZpbGwvYmxvYi9tYXN0ZXIvanMvc3Jjc2V0LWluZm8uanNcbiAgICAgKlxuICAgICAqIDEuIExldCBpbnB1dCAoYHNyY3NldGApIGJlIHRoZSB2YWx1ZSBwYXNzZWQgdG8gdGhpcyBhbGdvcml0aG0uXG4gICAgICogMi4gTGV0IHBvc2l0aW9uIGJlIGEgcG9pbnRlciBpbnRvIGlucHV0LCBpbml0aWFsbHkgcG9pbnRpbmcgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzdHJpbmcuXG4gICAgICogMy4gTGV0IHJhdyBjYW5kaWRhdGVzIGJlIGFuIGluaXRpYWxseSBlbXB0eSBvcmRlcmVkIGxpc3Qgb2YgVVJMcyB3aXRoIGFzc29jaWF0ZWRcbiAgICAgKiAgICB1bnBhcnNlZCBkZXNjcmlwdG9ycy4gVGhlIG9yZGVyIG9mIGVudHJpZXMgaW4gdGhlIGxpc3QgaXMgdGhlIG9yZGVyIGluIHdoaWNoIGVudHJpZXNcbiAgICAgKiAgICBhcmUgYWRkZWQgdG8gdGhlIGxpc3QuXG4gICAgICovXG4gICAgdmFyIGNhbmRpZGF0ZXMgPSBbXTtcblxuICAgIHdoaWxlICggc3Jjc2V0ICE9PSBcIlwiICkge1xuICAgICAgc3Jjc2V0ID0gc3Jjc2V0LnJlcGxhY2UoIC9eXFxzKy9nLCBcIlwiICk7XG5cbiAgICAgIC8vIDUuIENvbGxlY3QgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIHRoYXQgYXJlIG5vdCBzcGFjZSBjaGFyYWN0ZXJzLCBhbmQgbGV0IHRoYXQgYmUgdXJsLlxuICAgICAgdmFyIHBvcyA9IHNyY3NldC5zZWFyY2goL1xccy9nKSxcbiAgICAgICAgdXJsLCBkZXNjcmlwdG9yID0gbnVsbDtcblxuICAgICAgaWYgKCBwb3MgIT09IC0xICkge1xuICAgICAgICB1cmwgPSBzcmNzZXQuc2xpY2UoIDAsIHBvcyApO1xuXG4gICAgICAgIHZhciBsYXN0ID0gdXJsLnNsaWNlKC0xKTtcblxuICAgICAgICAvLyA2LiBJZiB1cmwgZW5kcyB3aXRoIGEgVSswMDJDIENPTU1BIGNoYXJhY3RlciAoLCksIHJlbW92ZSB0aGF0IGNoYXJhY3RlciBmcm9tIHVybFxuICAgICAgICAvLyBhbmQgbGV0IGRlc2NyaXB0b3JzIGJlIHRoZSBlbXB0eSBzdHJpbmcuIE90aGVyd2lzZSwgZm9sbG93IHRoZXNlIHN1YnN0ZXBzXG4gICAgICAgIC8vIDYuMS4gSWYgdXJsIGlzIGVtcHR5LCB0aGVuIGp1bXAgdG8gdGhlIHN0ZXAgbGFiZWxlZCBkZXNjcmlwdG9yIHBhcnNlci5cblxuICAgICAgICBpZiAoIGxhc3QgPT09IFwiLFwiIHx8IHVybCA9PT0gXCJcIiApIHtcbiAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSggLywrJC8sIFwiXCIgKTtcbiAgICAgICAgICBkZXNjcmlwdG9yID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBzcmNzZXQgPSBzcmNzZXQuc2xpY2UoIHBvcyArIDEgKTtcblxuICAgICAgICAvLyA2LjIuIENvbGxlY3QgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIHRoYXQgYXJlIG5vdCBVKzAwMkMgQ09NTUEgY2hhcmFjdGVycyAoLCksIGFuZFxuICAgICAgICAvLyBsZXQgdGhhdCBiZSBkZXNjcmlwdG9ycy5cbiAgICAgICAgaWYgKCBkZXNjcmlwdG9yID09PSBudWxsICkge1xuICAgICAgICAgIHZhciBkZXNjcG9zID0gc3Jjc2V0LmluZGV4T2YoIFwiLFwiICk7XG4gICAgICAgICAgaWYgKCBkZXNjcG9zICE9PSAtMSApIHtcbiAgICAgICAgICAgIGRlc2NyaXB0b3IgPSBzcmNzZXQuc2xpY2UoIDAsIGRlc2Nwb3MgKTtcbiAgICAgICAgICAgIHNyY3NldCA9IHNyY3NldC5zbGljZSggZGVzY3BvcyArIDEgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVzY3JpcHRvciA9IHNyY3NldDtcbiAgICAgICAgICAgIHNyY3NldCA9IFwiXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cmwgPSBzcmNzZXQ7XG4gICAgICAgIHNyY3NldCA9IFwiXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIDcuIEFkZCB1cmwgdG8gcmF3IGNhbmRpZGF0ZXMsIGFzc29jaWF0ZWQgd2l0aCBkZXNjcmlwdG9ycy5cbiAgICAgIGlmICggdXJsIHx8IGRlc2NyaXB0b3IgKSB7XG4gICAgICAgIGNhbmRpZGF0ZXMucHVzaCh7XG4gICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgZGVzY3JpcHRvcjogZGVzY3JpcHRvclxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhbmRpZGF0ZXM7XG4gIH07XG5cbiAgcGYucGFyc2VEZXNjcmlwdG9yID0gZnVuY3Rpb24oIGRlc2NyaXB0b3IsIHNpemVzYXR0ciApIHtcbiAgICAvLyAxMS4gRGVzY3JpcHRvciBwYXJzZXI6IExldCBjYW5kaWRhdGVzIGJlIGFuIGluaXRpYWxseSBlbXB0eSBzb3VyY2Ugc2V0LiBUaGUgb3JkZXIgb2YgZW50cmllcyBpbiB0aGUgbGlzdFxuICAgIC8vIGlzIHRoZSBvcmRlciBpbiB3aGljaCBlbnRyaWVzIGFyZSBhZGRlZCB0byB0aGUgbGlzdC5cbiAgICB2YXIgc2l6ZXMgPSBzaXplc2F0dHIgfHwgXCIxMDB2d1wiLFxuICAgICAgc2l6ZURlc2NyaXB0b3IgPSBkZXNjcmlwdG9yICYmIGRlc2NyaXB0b3IucmVwbGFjZSggLyheXFxzK3xcXHMrJCkvZywgXCJcIiApLFxuICAgICAgd2lkdGhJbkNzc1BpeGVscyA9IHBmLmZpbmRXaWR0aEZyb21Tb3VyY2VTaXplKCBzaXplcyApLFxuICAgICAgcmVzQ2FuZGlkYXRlO1xuXG4gICAgICBpZiAoIHNpemVEZXNjcmlwdG9yICkge1xuICAgICAgICB2YXIgc3BsaXREZXNjcmlwdG9yID0gc2l6ZURlc2NyaXB0b3Iuc3BsaXQoXCIgXCIpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBzcGxpdERlc2NyaXB0b3IubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICB2YXIgY3VyciA9IHNwbGl0RGVzY3JpcHRvclsgaSBdLFxuICAgICAgICAgICAgbGFzdGNoYXIgPSBjdXJyICYmIGN1cnIuc2xpY2UoIGN1cnIubGVuZ3RoIC0gMSApO1xuXG4gICAgICAgICAgaWYgKCAoIGxhc3RjaGFyID09PSBcImhcIiB8fCBsYXN0Y2hhciA9PT0gXCJ3XCIgKSAmJiAhcGYuc2l6ZXNTdXBwb3J0ZWQgKSB7XG4gICAgICAgICAgICByZXNDYW5kaWRhdGUgPSBwYXJzZUZsb2F0KCAoIHBhcnNlSW50KCBjdXJyLCAxMCApIC8gd2lkdGhJbkNzc1BpeGVscyApICk7XG4gICAgICAgICAgfSBlbHNlIGlmICggbGFzdGNoYXIgPT09IFwieFwiICkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IGN1cnIgJiYgcGFyc2VGbG9hdCggY3VyciwgMTAgKTtcbiAgICAgICAgICAgIHJlc0NhbmRpZGF0ZSA9IHJlcyAmJiAhaXNOYU4oIHJlcyApID8gcmVzIDogMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICByZXR1cm4gcmVzQ2FuZGlkYXRlIHx8IDE7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRha2VzIGEgc3Jjc2V0IGluIHRoZSBmb3JtIG9mIHVybC9cbiAgICogZXguIFwiaW1hZ2VzL3BpYy1tZWRpdW0ucG5nIDF4LCBpbWFnZXMvcGljLW1lZGl1bS0yeC5wbmcgMnhcIiBvclxuICAgKiAgICAgXCJpbWFnZXMvcGljLW1lZGl1bS5wbmcgNDAwdywgaW1hZ2VzL3BpYy1tZWRpdW0tMngucG5nIDgwMHdcIiBvclxuICAgKiAgICAgXCJpbWFnZXMvcGljLXNtYWxsLnBuZ1wiXG4gICAqIEdldCBhbiBhcnJheSBvZiBpbWFnZSBjYW5kaWRhdGVzIGluIHRoZSBmb3JtIG9mXG4gICAqICAgICAge3VybDogXCIvZm9vL2Jhci5wbmdcIiwgcmVzb2x1dGlvbjogMX1cbiAgICogd2hlcmUgcmVzb2x1dGlvbiBpcyBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MtdmFsdWVzLTMvI3Jlc29sdXRpb24tdmFsdWVcbiAgICogSWYgc2l6ZXMgaXMgc3BlY2lmaWVkLCByZXNvbHV0aW9uIGlzIGNhbGN1bGF0ZWRcbiAgICovXG4gIHBmLmdldENhbmRpZGF0ZXNGcm9tU291cmNlU2V0ID0gZnVuY3Rpb24oIHNyY3NldCwgc2l6ZXMgKSB7XG4gICAgdmFyIGNhbmRpZGF0ZXMgPSBwZi5wYXJzZVNyY3NldCggc3Jjc2V0ICksXG4gICAgICBmb3JtYXR0ZWRDYW5kaWRhdGVzID0gW107XG5cbiAgICBmb3IgKCB2YXIgaSA9IDAsIGxlbiA9IGNhbmRpZGF0ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgICB2YXIgY2FuZGlkYXRlID0gY2FuZGlkYXRlc1sgaSBdO1xuXG4gICAgICBmb3JtYXR0ZWRDYW5kaWRhdGVzLnB1c2goe1xuICAgICAgICB1cmw6IGNhbmRpZGF0ZS51cmwsXG4gICAgICAgIHJlc29sdXRpb246IHBmLnBhcnNlRGVzY3JpcHRvciggY2FuZGlkYXRlLmRlc2NyaXB0b3IsIHNpemVzIClcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0dGVkQ2FuZGlkYXRlcztcbiAgfTtcblxuICAvKipcbiAgICogaWYgaXQncyBhbiBpbWcgZWxlbWVudCBhbmQgaXQgaGFzIGEgc3Jjc2V0IHByb3BlcnR5LFxuICAgKiB3ZSBuZWVkIHRvIHJlbW92ZSB0aGUgYXR0cmlidXRlIHNvIHdlIGNhbiBtYW5pcHVsYXRlIHNyY1xuICAgKiAodGhlIHByb3BlcnR5J3MgZXhpc3RlbmNlIGluZmVycyBuYXRpdmUgc3Jjc2V0IHN1cHBvcnQsIGFuZCBhIHNyY3NldC1zdXBwb3J0aW5nIGJyb3dzZXIgd2lsbCBwcmlvcml0aXplIHNyY3NldCdzIHZhbHVlIG92ZXIgb3VyIHdpbm5pbmcgcGljdHVyZSBjYW5kaWRhdGUpXG4gICAqIHRoaXMgbW92ZXMgc3Jjc2V0J3MgdmFsdWUgdG8gbWVtb3J5IGZvciBsYXRlciB1c2UgYW5kIHJlbW92ZXMgdGhlIGF0dHJcbiAgICovXG4gIHBmLmRvZGdlU3Jjc2V0ID0gZnVuY3Rpb24oIGltZyApIHtcbiAgICBpZiAoIGltZy5zcmNzZXQgKSB7XG4gICAgICBpbWdbIHBmLm5zIF0uc3Jjc2V0ID0gaW1nLnNyY3NldDtcbiAgICAgIGltZy5yZW1vdmVBdHRyaWJ1dGUoIFwic3Jjc2V0XCIgKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQWNjZXB0IGEgc291cmNlIG9yIGltZyBlbGVtZW50IGFuZCBwcm9jZXNzIGl0cyBzcmNzZXQgYW5kIHNpemVzIGF0dHJzXG4gIHBmLnByb2Nlc3NTb3VyY2VTZXQgPSBmdW5jdGlvbiggZWwgKSB7XG4gICAgdmFyIHNyY3NldCA9IGVsLmdldEF0dHJpYnV0ZSggXCJzcmNzZXRcIiApLFxuICAgICAgc2l6ZXMgPSBlbC5nZXRBdHRyaWJ1dGUoIFwic2l6ZXNcIiApLFxuICAgICAgY2FuZGlkYXRlcyA9IFtdO1xuXG4gICAgLy8gaWYgaXQncyBhbiBpbWcgZWxlbWVudCwgdXNlIHRoZSBjYWNoZWQgc3Jjc2V0IHByb3BlcnR5IChkZWZpbmVkIG9yIG5vdClcbiAgICBpZiAoIGVsLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiSU1HXCIgJiYgZWxbIHBmLm5zIF0gJiYgZWxbIHBmLm5zIF0uc3Jjc2V0ICkge1xuICAgICAgc3Jjc2V0ID0gZWxbIHBmLm5zIF0uc3Jjc2V0O1xuICAgIH1cblxuICAgIGlmICggc3Jjc2V0ICkge1xuICAgICAgY2FuZGlkYXRlcyA9IHBmLmdldENhbmRpZGF0ZXNGcm9tU291cmNlU2V0KCBzcmNzZXQsIHNpemVzICk7XG4gICAgfVxuICAgIHJldHVybiBjYW5kaWRhdGVzO1xuICB9O1xuXG4gIHBmLmFwcGx5QmVzdENhbmRpZGF0ZSA9IGZ1bmN0aW9uKCBjYW5kaWRhdGVzLCBwaWNJbWcgKSB7XG4gICAgdmFyIGNhbmRpZGF0ZSxcbiAgICAgIGxlbmd0aCxcbiAgICAgIGJlc3RDYW5kaWRhdGU7XG5cbiAgICBjYW5kaWRhdGVzLnNvcnQoIHBmLmFzY2VuZGluZ1NvcnQgKTtcblxuICAgIGxlbmd0aCA9IGNhbmRpZGF0ZXMubGVuZ3RoO1xuICAgIGJlc3RDYW5kaWRhdGUgPSBjYW5kaWRhdGVzWyBsZW5ndGggLSAxIF07XG5cbiAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyApIHtcbiAgICAgIGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbIGkgXTtcbiAgICAgIGlmICggY2FuZGlkYXRlLnJlc29sdXRpb24gPj0gcGYuZ2V0RHByKCkgKSB7XG4gICAgICAgIGJlc3RDYW5kaWRhdGUgPSBjYW5kaWRhdGU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICggYmVzdENhbmRpZGF0ZSAmJiAhcGYuZW5kc1dpdGgoIHBpY0ltZy5zcmMsIGJlc3RDYW5kaWRhdGUudXJsICkgKSB7XG4gICAgICBpZiAoIHBmLnJlc3RyaWN0c01peGVkQ29udGVudCgpICYmIGJlc3RDYW5kaWRhdGUudXJsLnN1YnN0cigwLCBcImh0dHA6XCIubGVuZ3RoKS50b0xvd2VyQ2FzZSgpID09PSBcImh0dHA6XCIgKSB7XG4gICAgICAgIGlmICggdHlwZW9mIGNvbnNvbGUgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oIFwiQmxvY2tlZCBtaXhlZCBjb250ZW50IGltYWdlIFwiICsgYmVzdENhbmRpZGF0ZS51cmwgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGljSW1nLnNyYyA9IGJlc3RDYW5kaWRhdGUudXJsO1xuICAgICAgICAvLyBjdXJyZW50U3JjIGF0dHJpYnV0ZSBhbmQgcHJvcGVydHkgdG8gbWF0Y2hcbiAgICAgICAgLy8gaHR0cDovL3BpY3R1cmUucmVzcG9uc2l2ZWltYWdlcy5vcmcvI3RoZS1pbWctZWxlbWVudFxuICAgICAgICBwaWNJbWcuY3VycmVudFNyYyA9IHBpY0ltZy5zcmM7XG5cbiAgICAgICAgdmFyIHN0eWxlID0gcGljSW1nLnN0eWxlIHx8IHt9LFxuICAgICAgICAgIFdlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSA9IFwid2Via2l0QmFja2ZhY2VWaXNpYmlsaXR5XCIgaW4gc3R5bGUsXG4gICAgICAgICAgY3VycmVudFpvb20gPSBzdHlsZS56b29tO1xuXG4gICAgICAgIGlmIChXZWJraXRCYWNrZmFjZVZpc2liaWxpdHkpIHsgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRqZWhsL3BpY3R1cmVmaWxsL2lzc3Vlcy8zMzJcbiAgICAgICAgICBzdHlsZS56b29tID0gXCIuOTk5XCI7XG5cbiAgICAgICAgICBXZWJraXRCYWNrZmFjZVZpc2liaWxpdHkgPSBwaWNJbWcub2Zmc2V0V2lkdGg7XG5cbiAgICAgICAgICBzdHlsZS56b29tID0gY3VycmVudFpvb207XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcGYuYXNjZW5kaW5nU29ydCA9IGZ1bmN0aW9uKCBhLCBiICkge1xuICAgIHJldHVybiBhLnJlc29sdXRpb24gLSBiLnJlc29sdXRpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIEluIElFOSwgPHNvdXJjZT4gZWxlbWVudHMgZ2V0IHJlbW92ZWQgaWYgdGhleSBhcmVuJ3QgY2hpbGRyZW4gb2ZcbiAgICogdmlkZW8gZWxlbWVudHMuIFRodXMsIHdlIGNvbmRpdGlvbmFsbHkgd3JhcCBzb3VyY2UgZWxlbWVudHNcbiAgICogdXNpbmcgPCEtLVtpZiBJRSA5XT48dmlkZW8gc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjwhW2VuZGlmXS0tPlxuICAgKiBhbmQgbXVzdCBhY2NvdW50IGZvciB0aGF0IGhlcmUgYnkgbW92aW5nIHRob3NlIHNvdXJjZSBlbGVtZW50c1xuICAgKiBiYWNrIGludG8gdGhlIHBpY3R1cmUgZWxlbWVudC5cbiAgICovXG4gIHBmLnJlbW92ZVZpZGVvU2hpbSA9IGZ1bmN0aW9uKCBwaWN0dXJlICkge1xuICAgIHZhciB2aWRlb3MgPSBwaWN0dXJlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInZpZGVvXCIgKTtcbiAgICBpZiAoIHZpZGVvcy5sZW5ndGggKSB7XG4gICAgICB2YXIgdmlkZW8gPSB2aWRlb3NbIDAgXSxcbiAgICAgICAgdnNvdXJjZXMgPSB2aWRlby5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJzb3VyY2VcIiApO1xuICAgICAgd2hpbGUgKCB2c291cmNlcy5sZW5ndGggKSB7XG4gICAgICAgIHBpY3R1cmUuaW5zZXJ0QmVmb3JlKCB2c291cmNlc1sgMCBdLCB2aWRlbyApO1xuICAgICAgfVxuICAgICAgLy8gUmVtb3ZlIHRoZSB2aWRlbyBlbGVtZW50IG9uY2Ugd2UncmUgZmluaXNoZWQgcmVtb3ZpbmcgaXRzIGNoaWxkcmVuXG4gICAgICB2aWRlby5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCB2aWRlbyApO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRmluZCBhbGwgYGltZ2AgZWxlbWVudHMsIGFuZCBhZGQgdGhlbSB0byB0aGUgY2FuZGlkYXRlIGxpc3QgaWYgdGhleSBoYXZlXG4gICAqIGEgYHBpY3R1cmVgIHBhcmVudCwgYSBgc2l6ZXNgIGF0dHJpYnV0ZSBpbiBiYXNpYyBgc3Jjc2V0YCBzdXBwb3J0aW5nIGJyb3dzZXJzLFxuICAgKiBhIGBzcmNzZXRgIGF0dHJpYnV0ZSBhdCBhbGwsIGFuZCB0aGV5IGhhdmVu4oCZdCBiZWVuIGV2YWx1YXRlZCBhbHJlYWR5LlxuICAgKi9cbiAgcGYuZ2V0QWxsRWxlbWVudHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWxlbXMgPSBbXSxcbiAgICAgIGltZ3MgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwiaW1nXCIgKTtcblxuICAgIGZvciAoIHZhciBoID0gMCwgbGVuID0gaW1ncy5sZW5ndGg7IGggPCBsZW47IGgrKyApIHtcbiAgICAgIHZhciBjdXJySW1nID0gaW1nc1sgaCBdO1xuXG4gICAgICBpZiAoIGN1cnJJbWcucGFyZW50Tm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIlBJQ1RVUkVcIiB8fFxuICAgICAgKCBjdXJySW1nLmdldEF0dHJpYnV0ZSggXCJzcmNzZXRcIiApICE9PSBudWxsICkgfHwgY3VyckltZ1sgcGYubnMgXSAmJiBjdXJySW1nWyBwZi5ucyBdLnNyY3NldCAhPT0gbnVsbCApIHtcbiAgICAgICAgZWxlbXMucHVzaCggY3VyckltZyApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZWxlbXM7XG4gIH07XG5cbiAgcGYuZ2V0TWF0Y2ggPSBmdW5jdGlvbiggaW1nLCBwaWN0dXJlICkge1xuICAgIHZhciBzb3VyY2VzID0gcGljdHVyZS5jaGlsZE5vZGVzLFxuICAgICAgbWF0Y2g7XG5cbiAgICAvLyBHbyB0aHJvdWdoIGVhY2ggY2hpbGQsIGFuZCBpZiB0aGV5IGhhdmUgbWVkaWEgcXVlcmllcywgZXZhbHVhdGUgdGhlbVxuICAgIGZvciAoIHZhciBqID0gMCwgc2xlbiA9IHNvdXJjZXMubGVuZ3RoOyBqIDwgc2xlbjsgaisrICkge1xuICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbIGogXTtcblxuICAgICAgLy8gaWdub3JlIG5vbi1lbGVtZW50IG5vZGVzXG4gICAgICBpZiAoIHNvdXJjZS5ub2RlVHlwZSAhPT0gMSApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEhpdHRpbmcgdGhlIGBpbWdgIGVsZW1lbnQgdGhhdCBzdGFydGVkIGV2ZXJ5dGhpbmcgc3RvcHMgdGhlIHNlYXJjaCBmb3IgYHNvdXJjZXNgLlxuICAgICAgLy8gSWYgbm8gcHJldmlvdXMgYHNvdXJjZWAgbWF0Y2hlcywgdGhlIGBpbWdgIGl0c2VsZiBpcyBldmFsdWF0ZWQgbGF0ZXIuXG4gICAgICBpZiAoIHNvdXJjZSA9PT0gaW1nICkge1xuICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICB9XG5cbiAgICAgIC8vIGlnbm9yZSBub24tYHNvdXJjZWAgbm9kZXNcbiAgICAgIGlmICggc291cmNlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgIT09IFwiU09VUkNFXCIgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy8gaWYgaXQncyBhIHNvdXJjZSBlbGVtZW50IHRoYXQgaGFzIHRoZSBgc3JjYCBwcm9wZXJ0eSBzZXQsIHRocm93IGEgd2FybmluZyBpbiB0aGUgY29uc29sZVxuICAgICAgaWYgKCBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcInNyY1wiICkgIT09IG51bGwgJiYgdHlwZW9mIGNvbnNvbGUgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiVGhlIGBzcmNgIGF0dHJpYnV0ZSBpcyBpbnZhbGlkIG9uIGBwaWN0dXJlYCBgc291cmNlYCBlbGVtZW50OyBpbnN0ZWFkLCB1c2UgYHNyY3NldGAuXCIpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbWVkaWEgPSBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcIm1lZGlhXCIgKTtcblxuICAgICAgLy8gaWYgc291cmNlIGRvZXMgbm90IGhhdmUgYSBzcmNzZXQgYXR0cmlidXRlLCBza2lwXG4gICAgICBpZiAoICFzb3VyY2UuZ2V0QXR0cmlidXRlKCBcInNyY3NldFwiICkgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBpZiB0aGVyZSdzIG5vIG1lZGlhIHNwZWNpZmllZCwgT1Igdy5tYXRjaE1lZGlhIGlzIHN1cHBvcnRlZFxuICAgICAgaWYgKCAoICFtZWRpYSB8fCBwZi5tYXRjaGVzTWVkaWEoIG1lZGlhICkgKSApIHtcbiAgICAgICAgdmFyIHR5cGVTdXBwb3J0ZWQgPSBwZi52ZXJpZnlUeXBlU3VwcG9ydCggc291cmNlICk7XG5cbiAgICAgICAgaWYgKCB0eXBlU3VwcG9ydGVkID09PSB0cnVlICkge1xuICAgICAgICAgIG1hdGNoID0gc291cmNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2UgaWYgKCB0eXBlU3VwcG9ydGVkID09PSBcInBlbmRpbmdcIiApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbWF0Y2g7XG4gIH07XG5cbiAgZnVuY3Rpb24gcGljdHVyZWZpbGwoIG9wdCApIHtcbiAgICB2YXIgZWxlbWVudHMsXG4gICAgICBlbGVtZW50LFxuICAgICAgcGFyZW50LFxuICAgICAgZmlyc3RNYXRjaCxcbiAgICAgIGNhbmRpZGF0ZXMsXG4gICAgICBvcHRpb25zID0gb3B0IHx8IHt9O1xuXG4gICAgZWxlbWVudHMgPSBvcHRpb25zLmVsZW1lbnRzIHx8IHBmLmdldEFsbEVsZW1lbnRzKCk7XG5cbiAgICAvLyBMb29wIHRocm91Z2ggYWxsIGVsZW1lbnRzXG4gICAgZm9yICggdmFyIGkgPSAwLCBwbGVuID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgcGxlbjsgaSsrICkge1xuICAgICAgZWxlbWVudCA9IGVsZW1lbnRzWyBpIF07XG4gICAgICBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICBmaXJzdE1hdGNoID0gdW5kZWZpbmVkO1xuICAgICAgY2FuZGlkYXRlcyA9IHVuZGVmaW5lZDtcblxuICAgICAgLy8gaW1tZWRpYXRlbHkgc2tpcCBub24tYGltZ2Agbm9kZXNcbiAgICAgIGlmICggZWxlbWVudC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpICE9PSBcIklNR1wiICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gZXhwYW5kbyBmb3IgY2FjaGluZyBkYXRhIG9uIHRoZSBpbWdcbiAgICAgIGlmICggIWVsZW1lbnRbIHBmLm5zIF0gKSB7XG4gICAgICAgIGVsZW1lbnRbIHBmLm5zIF0gPSB7fTtcbiAgICAgIH1cblxuICAgICAgLy8gaWYgdGhlIGVsZW1lbnQgaGFzIGFscmVhZHkgYmVlbiBldmFsdWF0ZWQsIHNraXAgaXQgdW5sZXNzXG4gICAgICAvLyBgb3B0aW9ucy5yZWV2YWx1YXRlYCBpcyBzZXQgdG8gdHJ1ZSAoIHRoaXMsIGZvciBleGFtcGxlLFxuICAgICAgLy8gaXMgc2V0IHRvIHRydWUgd2hlbiBydW5uaW5nIGBwaWN0dXJlZmlsbGAgb24gYHJlc2l6ZWAgKS5cbiAgICAgIGlmICggIW9wdGlvbnMucmVldmFsdWF0ZSAmJiBlbGVtZW50WyBwZi5ucyBdLmV2YWx1YXRlZCApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIGBpbWdgIGlzIGluIGEgYHBpY3R1cmVgIGVsZW1lbnRcbiAgICAgIGlmICggcGFyZW50Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiUElDVFVSRVwiICkge1xuXG4gICAgICAgIC8vIElFOSB2aWRlbyB3b3JrYXJvdW5kXG4gICAgICAgIHBmLnJlbW92ZVZpZGVvU2hpbSggcGFyZW50ICk7XG5cbiAgICAgICAgLy8gcmV0dXJuIHRoZSBmaXJzdCBtYXRjaCB3aGljaCBtaWdodCB1bmRlZmluZWRcbiAgICAgICAgLy8gcmV0dXJucyBmYWxzZSBpZiB0aGVyZSBpcyBhIHBlbmRpbmcgc291cmNlXG4gICAgICAgIC8vIFRPRE8gdGhlIHJldHVybiB0eXBlIGhlcmUgaXMgYnJ1dGFsLCBjbGVhbnVwXG4gICAgICAgIGZpcnN0TWF0Y2ggPSBwZi5nZXRNYXRjaCggZWxlbWVudCwgcGFyZW50ICk7XG5cbiAgICAgICAgLy8gaWYgYW55IHNvdXJjZXMgYXJlIHBlbmRpbmcgaW4gdGhpcyBwaWN0dXJlIGR1ZSB0byBhc3luYyB0eXBlIHRlc3QocylcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBldmFsdWF0ZWQgYXR0ciBhbmQgc2tpcCBmb3Igbm93ICggdGhlIHBlbmRpbmcgdGVzdCB3aWxsXG4gICAgICAgIC8vIHJlcnVuIHBpY3R1cmVmaWxsIG9uIHRoaXMgZWxlbWVudCB3aGVuIGNvbXBsZXRlKVxuICAgICAgICBpZiAoIGZpcnN0TWF0Y2ggPT09IGZhbHNlICkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaXJzdE1hdGNoID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICAvLyBDYWNoZSBhbmQgcmVtb3ZlIGBzcmNzZXRgIGlmIHByZXNlbnQgYW5kIHdl4oCZcmUgZ29pbmcgdG8gYmUgZG9pbmcgYHBpY3R1cmVgL2BzcmNzZXRgL2BzaXplc2AgcG9seWZpbGxpbmcgdG8gaXQuXG4gICAgICBpZiAoIHBhcmVudC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIlBJQ1RVUkVcIiB8fFxuICAgICAgKCBlbGVtZW50LnNyY3NldCAmJiAhcGYuc3Jjc2V0U3VwcG9ydGVkICkgfHxcbiAgICAgICggIXBmLnNpemVzU3VwcG9ydGVkICYmICggZWxlbWVudC5zcmNzZXQgJiYgZWxlbWVudC5zcmNzZXQuaW5kZXhPZihcIndcIikgPiAtMSApICkgKSB7XG4gICAgICAgIHBmLmRvZGdlU3Jjc2V0KCBlbGVtZW50ICk7XG4gICAgICB9XG5cbiAgICAgIGlmICggZmlyc3RNYXRjaCApIHtcbiAgICAgICAgY2FuZGlkYXRlcyA9IHBmLnByb2Nlc3NTb3VyY2VTZXQoIGZpcnN0TWF0Y2ggKTtcbiAgICAgICAgcGYuYXBwbHlCZXN0Q2FuZGlkYXRlKCBjYW5kaWRhdGVzLCBlbGVtZW50ICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBObyBzb3VyY2VzIG1hdGNoZWQsIHNvIHdl4oCZcmUgZG93biB0byBwcm9jZXNzaW5nIHRoZSBpbm5lciBgaW1nYCBhcyBhIHNvdXJjZS5cbiAgICAgICAgY2FuZGlkYXRlcyA9IHBmLnByb2Nlc3NTb3VyY2VTZXQoIGVsZW1lbnQgKTtcblxuICAgICAgICBpZiAoIGVsZW1lbnQuc3Jjc2V0ID09PSB1bmRlZmluZWQgfHwgZWxlbWVudFsgcGYubnMgXS5zcmNzZXQgKSB7XG4gICAgICAgICAgLy8gRWl0aGVyIGBzcmNzZXRgIGlzIGNvbXBsZXRlbHkgdW5zdXBwb3J0ZWQsIG9yIHdlIG5lZWQgdG8gcG9seWZpbGwgYHNpemVzYCBmdW5jdGlvbmFsaXR5LlxuICAgICAgICAgIHBmLmFwcGx5QmVzdENhbmRpZGF0ZSggY2FuZGlkYXRlcywgZWxlbWVudCApO1xuICAgICAgICB9IC8vIEVsc2UsIHJlc29sdXRpb24tb25seSBgc3Jjc2V0YCBpcyBzdXBwb3J0ZWQgbmF0aXZlbHkuXG4gICAgICB9XG5cbiAgICAgIC8vIHNldCBldmFsdWF0ZWQgdG8gdHJ1ZSB0byBhdm9pZCB1bm5lY2Vzc2FyeSByZXBhcnNpbmdcbiAgICAgIGVsZW1lbnRbIHBmLm5zIF0uZXZhbHVhdGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCBwaWN0dXJlIHBvbHlmaWxsIGJ5IHBvbGxpbmcgdGhlIGRvY3VtZW50IGFuZCBydW5uaW5nXG4gICAqIHRoZSBwb2x5ZmlsbCBldmVyeSAyNTBtcyB1bnRpbCB0aGUgZG9jdW1lbnQgaXMgcmVhZHkuXG4gICAqIEFsc28gYXR0YWNoZXMgcGljdHVyZWZpbGwgb24gcmVzaXplXG4gICAqL1xuICBmdW5jdGlvbiBydW5QaWN0dXJlZmlsbCgpIHtcbiAgICBwaWN0dXJlZmlsbCgpO1xuICAgIHZhciBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gV2hlbiB0aGUgZG9jdW1lbnQgaGFzIGZpbmlzaGVkIGxvYWRpbmcsIHN0b3AgY2hlY2tpbmcgZm9yIG5ldyBpbWFnZXNcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kZWQvZG9tcmVhZHkvYmxvYi9tYXN0ZXIvcmVhZHkuanMjTDE1XG4gICAgICBwaWN0dXJlZmlsbCgpO1xuICAgICAgaWYgKCAvXmxvYWRlZHxeaXxeYy8udGVzdCggZG9jLnJlYWR5U3RhdGUgKSApIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCggaW50ZXJ2YWxJZCApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSwgMjUwICk7XG5cbiAgICBmdW5jdGlvbiBjaGVja1Jlc2l6ZSgpIHtcbiAgICAgIHZhciByZXNpemVUaHJvdHRsZTtcblxuICAgICAgaWYgKCAhdy5fcGljdHVyZWZpbGxXb3JraW5nICkge1xuICAgICAgICB3Ll9waWN0dXJlZmlsbFdvcmtpbmcgPSB0cnVlO1xuICAgICAgICB3LmNsZWFyVGltZW91dCggcmVzaXplVGhyb3R0bGUgKTtcbiAgICAgICAgcmVzaXplVGhyb3R0bGUgPSB3LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHBpY3R1cmVmaWxsKHsgcmVldmFsdWF0ZTogdHJ1ZSB9KTtcbiAgICAgICAgICB3Ll9waWN0dXJlZmlsbFdvcmtpbmcgPSBmYWxzZTtcbiAgICAgICAgfSwgNjAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIHcuYWRkRXZlbnRMaXN0ZW5lciApIHtcbiAgICAgIHcuYWRkRXZlbnRMaXN0ZW5lciggXCJyZXNpemVcIiwgY2hlY2tSZXNpemUsIGZhbHNlICk7XG4gICAgfSBlbHNlIGlmICggdy5hdHRhY2hFdmVudCApIHtcbiAgICAgIHcuYXR0YWNoRXZlbnQoIFwib25yZXNpemVcIiwgY2hlY2tSZXNpemUgKTtcbiAgICB9XG4gIH1cblxuICBydW5QaWN0dXJlZmlsbCgpO1xuXG4gIC8qIGV4cG9zZSBtZXRob2RzIGZvciB0ZXN0aW5nICovXG4gIHBpY3R1cmVmaWxsLl8gPSBwZjtcblxuICAvKiBleHBvc2UgcGljdHVyZWZpbGwgKi9cbiAgaWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIiApIHtcbiAgICAvLyBDb21tb25KUywganVzdCBleHBvcnRcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHBpY3R1cmVmaWxsO1xuICB9IGVsc2UgaWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcbiAgICAvLyBBTUQgc3VwcG9ydFxuICAgIGRlZmluZSggZnVuY3Rpb24oKSB7IHJldHVybiBwaWN0dXJlZmlsbDsgfSApO1xuICB9IGVsc2UgaWYgKCB0eXBlb2YgdyA9PT0gXCJvYmplY3RcIiApIHtcbiAgICAvLyBJZiBubyBBTUQgYW5kIHdlIGFyZSBpbiB0aGUgYnJvd3NlciwgYXR0YWNoIHRvIHdpbmRvd1xuICAgIHcucGljdHVyZWZpbGwgPSBwaWN0dXJlZmlsbDtcbiAgfVxuXG59ICkoIHRoaXMsIHRoaXMuZG9jdW1lbnQsIG5ldyB0aGlzLkltYWdlKCkgKTtcbiIsIi8qIVxuICogdmVyZ2UgMS45LjErMjAxNDAyMTMwODAzXG4gKiBodHRwczovL2dpdGh1Yi5jb20vcnlhbnZlL3ZlcmdlXG4gKiBNSVQgTGljZW5zZSAyMDEzIFJ5YW4gVmFuIEV0dGVuXG4gKi9cblxuKGZ1bmN0aW9uKHJvb3QsIG5hbWUsIG1ha2UpIHtcbiAgaWYgKHR5cGVvZiBtb2R1bGUgIT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlWydleHBvcnRzJ10pIG1vZHVsZVsnZXhwb3J0cyddID0gbWFrZSgpO1xuICBlbHNlIHJvb3RbbmFtZV0gPSBtYWtlKCk7XG59KHRoaXMsICd2ZXJnZScsIGZ1bmN0aW9uKCkge1xuXG4gIHZhciB4cG9ydHMgPSB7fVxuICAgICwgd2luID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3dcbiAgICAsIGRvYyA9IHR5cGVvZiBkb2N1bWVudCAhPSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudFxuICAgICwgZG9jRWxlbSA9IGRvYyAmJiBkb2MuZG9jdW1lbnRFbGVtZW50XG4gICAgLCBtYXRjaE1lZGlhID0gd2luWydtYXRjaE1lZGlhJ10gfHwgd2luWydtc01hdGNoTWVkaWEnXVxuICAgICwgbXEgPSBtYXRjaE1lZGlhID8gZnVuY3Rpb24ocSkge1xuICAgICAgICByZXR1cm4gISFtYXRjaE1lZGlhLmNhbGwod2luLCBxKS5tYXRjaGVzO1xuICAgICAgfSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgLCB2aWV3cG9ydFcgPSB4cG9ydHNbJ3ZpZXdwb3J0VyddID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhID0gZG9jRWxlbVsnY2xpZW50V2lkdGgnXSwgYiA9IHdpblsnaW5uZXJXaWR0aCddO1xuICAgICAgICByZXR1cm4gYSA8IGIgPyBiIDogYTtcbiAgICAgIH1cbiAgICAsIHZpZXdwb3J0SCA9IHhwb3J0c1sndmlld3BvcnRIJ10gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGEgPSBkb2NFbGVtWydjbGllbnRIZWlnaHQnXSwgYiA9IHdpblsnaW5uZXJIZWlnaHQnXTtcbiAgICAgICAgcmV0dXJuIGEgPCBiID8gYiA6IGE7XG4gICAgICB9O1xuXG4gIC8qKlxuICAgKiBUZXN0IGlmIGEgbWVkaWEgcXVlcnkgaXMgYWN0aXZlLiBMaWtlIE1vZGVybml6ci5tcVxuICAgKiBAc2luY2UgMS42LjBcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHhwb3J0c1snbXEnXSA9IG1xO1xuXG4gIC8qKlxuICAgKiBOb3JtYWxpemVkIG1hdGNoTWVkaWFcbiAgICogQHNpbmNlIDEuNi4wXG4gICAqIEByZXR1cm4ge01lZGlhUXVlcnlMaXN0fE9iamVjdH1cbiAgICovXG4gIHhwb3J0c1snbWF0Y2hNZWRpYSddID0gbWF0Y2hNZWRpYSA/IGZ1bmN0aW9uKCkge1xuICAgIC8vIG1hdGNoTWVkaWEgbXVzdCBiZSBiaW5kZWQgdG8gd2luZG93XG4gICAgcmV0dXJuIG1hdGNoTWVkaWEuYXBwbHkod2luLCBhcmd1bWVudHMpO1xuICB9IDogZnVuY3Rpb24oKSB7XG4gICAgLy8gR3JhY2VmdWxseSBkZWdyYWRlIHRvIHBsYWluIG9iamVjdFxuICAgIHJldHVybiB7fTtcbiAgfTtcblxuICAvKipcbiAgICogQHNpbmNlIDEuOC4wXG4gICAqIEByZXR1cm4ge3t3aWR0aDpudW1iZXIsIGhlaWdodDpudW1iZXJ9fVxuICAgKi9cbiAgZnVuY3Rpb24gdmlld3BvcnQoKSB7XG4gICAgcmV0dXJuIHsnd2lkdGgnOnZpZXdwb3J0VygpLCAnaGVpZ2h0Jzp2aWV3cG9ydEgoKX07XG4gIH1cbiAgeHBvcnRzWyd2aWV3cG9ydCddID0gdmlld3BvcnQ7XG5cbiAgLyoqXG4gICAqIENyb3NzLWJyb3dzZXIgd2luZG93LnNjcm9sbFhcbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIHhwb3J0c1snc2Nyb2xsWCddID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHdpbi5wYWdlWE9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbExlZnQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyb3NzLWJyb3dzZXIgd2luZG93LnNjcm9sbFlcbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIHhwb3J0c1snc2Nyb2xsWSddID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHdpbi5wYWdlWU9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbFRvcDtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHt7dG9wOm51bWJlciwgcmlnaHQ6bnVtYmVyLCBib3R0b206bnVtYmVyLCBsZWZ0Om51bWJlcn19IGNvb3Jkc1xuICAgKiBAcGFyYW0ge251bWJlcj19IGN1c2hpb24gYWRqdXN0bWVudFxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBmdW5jdGlvbiBjYWxpYnJhdGUoY29vcmRzLCBjdXNoaW9uKSB7XG4gICAgdmFyIG8gPSB7fTtcbiAgICBjdXNoaW9uID0gK2N1c2hpb24gfHwgMDtcbiAgICBvWyd3aWR0aCddID0gKG9bJ3JpZ2h0J10gPSBjb29yZHNbJ3JpZ2h0J10gKyBjdXNoaW9uKSAtIChvWydsZWZ0J10gPSBjb29yZHNbJ2xlZnQnXSAtIGN1c2hpb24pO1xuICAgIG9bJ2hlaWdodCddID0gKG9bJ2JvdHRvbSddID0gY29vcmRzWydib3R0b20nXSArIGN1c2hpb24pIC0gKG9bJ3RvcCddID0gY29vcmRzWyd0b3AnXSAtIGN1c2hpb24pO1xuICAgIHJldHVybiBvO1xuICB9XG5cbiAgLyoqXG4gICAqIENyb3NzLWJyb3dzZXIgZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QgcGx1cyBvcHRpb25hbCBjdXNoaW9uLlxuICAgKiBDb29yZHMgYXJlIHJlbGF0aXZlIHRvIHRoZSB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIHZpZXdwb3J0LlxuICAgKiBAc2luY2UgMS4wLjBcbiAgICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWwgZWxlbWVudCBvciBzdGFjayAodXNlcyBmaXJzdCBpdGVtKVxuICAgKiBAcGFyYW0ge251bWJlcj19IGN1c2hpb24gKy8tIHBpeGVsIGFkanVzdG1lbnQgYW1vdW50XG4gICAqIEByZXR1cm4ge09iamVjdHxib29sZWFufVxuICAgKi9cbiAgZnVuY3Rpb24gcmVjdGFuZ2xlKGVsLCBjdXNoaW9uKSB7XG4gICAgZWwgPSBlbCAmJiAhZWwubm9kZVR5cGUgPyBlbFswXSA6IGVsO1xuICAgIGlmICghZWwgfHwgMSAhPT0gZWwubm9kZVR5cGUpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gY2FsaWJyYXRlKGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBjdXNoaW9uKTtcbiAgfVxuICB4cG9ydHNbJ3JlY3RhbmdsZSddID0gcmVjdGFuZ2xlO1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXdwb3J0IGFzcGVjdCByYXRpbyAob3IgdGhlIGFzcGVjdCByYXRpbyBvZiBhbiBvYmplY3Qgb3IgZWxlbWVudClcbiAgICogQHNpbmNlIDEuNy4wXG4gICAqIEBwYXJhbSB7KEVsZW1lbnR8T2JqZWN0KT19IG8gb3B0aW9uYWwgb2JqZWN0IHdpdGggd2lkdGgvaGVpZ2h0IHByb3BzIG9yIG1ldGhvZHNcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiBAbGluayBodHRwOi8vdzMub3JnL1RSL2NzczMtbWVkaWFxdWVyaWVzLyNvcmllbnRhdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gYXNwZWN0KG8pIHtcbiAgICBvID0gbnVsbCA9PSBvID8gdmlld3BvcnQoKSA6IDEgPT09IG8ubm9kZVR5cGUgPyByZWN0YW5nbGUobykgOiBvO1xuICAgIHZhciBoID0gb1snaGVpZ2h0J10sIHcgPSBvWyd3aWR0aCddO1xuICAgIGggPSB0eXBlb2YgaCA9PSAnZnVuY3Rpb24nID8gaC5jYWxsKG8pIDogaDtcbiAgICB3ID0gdHlwZW9mIHcgPT0gJ2Z1bmN0aW9uJyA/IHcuY2FsbChvKSA6IHc7XG4gICAgcmV0dXJuIHcvaDtcbiAgfVxuICB4cG9ydHNbJ2FzcGVjdCddID0gYXNwZWN0O1xuXG4gIC8qKlxuICAgKiBUZXN0IGlmIGFuIGVsZW1lbnQgaXMgaW4gdGhlIHNhbWUgeC1heGlzIHNlY3Rpb24gYXMgdGhlIHZpZXdwb3J0LlxuICAgKiBAc2luY2UgMS4wLjBcbiAgICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxcbiAgICogQHBhcmFtIHtudW1iZXI9fSBjdXNoaW9uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICB4cG9ydHNbJ2luWCddID0gZnVuY3Rpb24oZWwsIGN1c2hpb24pIHtcbiAgICB2YXIgciA9IHJlY3RhbmdsZShlbCwgY3VzaGlvbik7XG4gICAgcmV0dXJuICEhciAmJiByLnJpZ2h0ID49IDAgJiYgci5sZWZ0IDw9IHZpZXdwb3J0VygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUZXN0IGlmIGFuIGVsZW1lbnQgaXMgaW4gdGhlIHNhbWUgeS1heGlzIHNlY3Rpb24gYXMgdGhlIHZpZXdwb3J0LlxuICAgKiBAc2luY2UgMS4wLjBcbiAgICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxcbiAgICogQHBhcmFtIHtudW1iZXI9fSBjdXNoaW9uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICB4cG9ydHNbJ2luWSddID0gZnVuY3Rpb24oZWwsIGN1c2hpb24pIHtcbiAgICB2YXIgciA9IHJlY3RhbmdsZShlbCwgY3VzaGlvbik7XG4gICAgcmV0dXJuICEhciAmJiByLmJvdHRvbSA+PSAwICYmIHIudG9wIDw9IHZpZXdwb3J0SCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUZXN0IGlmIGFuIGVsZW1lbnQgaXMgaW4gdGhlIHZpZXdwb3J0LlxuICAgKiBAc2luY2UgMS4wLjBcbiAgICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxcbiAgICogQHBhcmFtIHtudW1iZXI9fSBjdXNoaW9uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICB4cG9ydHNbJ2luVmlld3BvcnQnXSA9IGZ1bmN0aW9uKGVsLCBjdXNoaW9uKSB7XG4gICAgLy8gRXF1aXYgdG8gYGluWChlbCwgY3VzaGlvbikgJiYgaW5ZKGVsLCBjdXNoaW9uKWAgYnV0IGp1c3QgbWFudWFsbHkgZG8gYm90aFxuICAgIC8vIHRvIGF2b2lkIGNhbGxpbmcgcmVjdGFuZ2xlKCkgdHdpY2UuIEl0IGd6aXBzIGp1c3QgYXMgc21hbGwgbGlrZSB0aGlzLlxuICAgIHZhciByID0gcmVjdGFuZ2xlKGVsLCBjdXNoaW9uKTtcbiAgICByZXR1cm4gISFyICYmIHIuYm90dG9tID49IDAgJiYgci5yaWdodCA+PSAwICYmIHIudG9wIDw9IHZpZXdwb3J0SCgpICYmIHIubGVmdCA8PSB2aWV3cG9ydFcoKTtcbiAgfTtcblxuICByZXR1cm4geHBvcnRzO1xufSkpO1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgTXV0YXRpb25PYnNlcnZlciwgVXRpbCwgV2Vha01hcCwgZ2V0Q29tcHV0ZWRTdHlsZSwgZ2V0Q29tcHV0ZWRTdHlsZVJYLFxuICAgIF9fYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sXG4gICAgX19pbmRleE9mID0gW10uaW5kZXhPZiB8fCBmdW5jdGlvbihpdGVtKSB7IGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsgfSByZXR1cm4gLTE7IH07XG5cbiAgVXRpbCA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBVdGlsKCkge31cblxuICAgIFV0aWwucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uKGN1c3RvbSwgZGVmYXVsdHMpIHtcbiAgICAgIHZhciBrZXksIHZhbHVlO1xuICAgICAgZm9yIChrZXkgaW4gZGVmYXVsdHMpIHtcbiAgICAgICAgdmFsdWUgPSBkZWZhdWx0c1trZXldO1xuICAgICAgICBpZiAoY3VzdG9tW2tleV0gPT0gbnVsbCkge1xuICAgICAgICAgIGN1c3RvbVtrZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXN0b207XG4gICAgfTtcblxuICAgIFV0aWwucHJvdG90eXBlLmlzTW9iaWxlID0gZnVuY3Rpb24oYWdlbnQpIHtcbiAgICAgIHJldHVybiAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QoYWdlbnQpO1xuICAgIH07XG5cbiAgICBVdGlsLnByb3RvdHlwZS5hZGRFdmVudCA9IGZ1bmN0aW9uKGVsZW0sIGV2ZW50LCBmbikge1xuICAgICAgaWYgKGVsZW0uYWRkRXZlbnRMaXN0ZW5lciAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGZuLCBmYWxzZSk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW0uYXR0YWNoRXZlbnQgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZWxlbS5hdHRhY2hFdmVudChcIm9uXCIgKyBldmVudCwgZm4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGVsZW1bZXZlbnRdID0gZm47XG4gICAgICB9XG4gICAgfTtcblxuICAgIFV0aWwucHJvdG90eXBlLnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24oZWxlbSwgZXZlbnQsIGZuKSB7XG4gICAgICBpZiAoZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgZm4sIGZhbHNlKTtcbiAgICAgIH0gZWxzZSBpZiAoZWxlbS5kZXRhY2hFdmVudCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBlbGVtLmRldGFjaEV2ZW50KFwib25cIiArIGV2ZW50LCBmbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVsZXRlIGVsZW1bZXZlbnRdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBVdGlsLnByb3RvdHlwZS5pbm5lckhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCdpbm5lckhlaWdodCcgaW4gd2luZG93KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFV0aWw7XG5cbiAgfSkoKTtcblxuICBXZWFrTWFwID0gdGhpcy5XZWFrTWFwIHx8IHRoaXMuTW96V2Vha01hcCB8fCAoV2Vha01hcCA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBXZWFrTWFwKCkge1xuICAgICAgdGhpcy5rZXlzID0gW107XG4gICAgICB0aGlzLnZhbHVlcyA9IFtdO1xuICAgIH1cblxuICAgIFdlYWtNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgdmFyIGksIGl0ZW0sIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgX3JlZiA9IHRoaXMua2V5cztcbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgIGl0ZW0gPSBfcmVmW2ldO1xuICAgICAgICBpZiAoaXRlbSA9PT0ga2V5KSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW2ldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdlYWtNYXAucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgIHZhciBpLCBpdGVtLCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgIF9yZWYgPSB0aGlzLmtleXM7XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBpdGVtID0gX3JlZltpXTtcbiAgICAgICAgaWYgKGl0ZW0gPT09IGtleSkge1xuICAgICAgICAgIHRoaXMudmFsdWVzW2ldID0gdmFsdWU7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmtleXMucHVzaChrZXkpO1xuICAgICAgcmV0dXJuIHRoaXMudmFsdWVzLnB1c2godmFsdWUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gV2Vha01hcDtcblxuICB9KSgpKTtcblxuICBNdXRhdGlvbk9ic2VydmVyID0gdGhpcy5NdXRhdGlvbk9ic2VydmVyIHx8IHRoaXMuV2Via2l0TXV0YXRpb25PYnNlcnZlciB8fCB0aGlzLk1vek11dGF0aW9uT2JzZXJ2ZXIgfHwgKE11dGF0aW9uT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTXV0YXRpb25PYnNlcnZlciBpcyBub3Qgc3VwcG9ydGVkIGJ5IHlvdXIgYnJvd3Nlci4nKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignV09XLmpzIGNhbm5vdCBkZXRlY3QgZG9tIG11dGF0aW9ucywgcGxlYXNlIGNhbGwgLnN5bmMoKSBhZnRlciBsb2FkaW5nIG5ldyBjb250ZW50LicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIE11dGF0aW9uT2JzZXJ2ZXIubm90U3VwcG9ydGVkID0gdHJ1ZTtcblxuICAgIE11dGF0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgcmV0dXJuIE11dGF0aW9uT2JzZXJ2ZXI7XG5cbiAgfSkoKSk7XG5cbiAgZ2V0Q29tcHV0ZWRTdHlsZSA9IHRoaXMuZ2V0Q29tcHV0ZWRTdHlsZSB8fCBmdW5jdGlvbihlbCwgcHNldWRvKSB7XG4gICAgdGhpcy5nZXRQcm9wZXJ0eVZhbHVlID0gZnVuY3Rpb24ocHJvcCkge1xuICAgICAgdmFyIF9yZWY7XG4gICAgICBpZiAocHJvcCA9PT0gJ2Zsb2F0Jykge1xuICAgICAgICBwcm9wID0gJ3N0eWxlRmxvYXQnO1xuICAgICAgfVxuICAgICAgaWYgKGdldENvbXB1dGVkU3R5bGVSWC50ZXN0KHByb3ApKSB7XG4gICAgICAgIHByb3AucmVwbGFjZShnZXRDb21wdXRlZFN0eWxlUlgsIGZ1bmN0aW9uKF8sIF9jaGFyKSB7XG4gICAgICAgICAgcmV0dXJuIF9jaGFyLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuICgoX3JlZiA9IGVsLmN1cnJlbnRTdHlsZSkgIT0gbnVsbCA/IF9yZWZbcHJvcF0gOiB2b2lkIDApIHx8IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBnZXRDb21wdXRlZFN0eWxlUlggPSAvKFxcLShbYS16XSl7MX0pL2c7XG5cbiAgdGhpcy5XT1cgPSAoZnVuY3Rpb24oKSB7XG4gICAgV09XLnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgICAgIGJveENsYXNzOiAnd293JyxcbiAgICAgIGFuaW1hdGVDbGFzczogJ2FuaW1hdGVkJyxcbiAgICAgIG9mZnNldDogMCxcbiAgICAgIG1vYmlsZTogdHJ1ZSxcbiAgICAgIGxpdmU6IHRydWUsXG4gICAgICBjYWxsYmFjazogbnVsbFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBXT1cob3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICB0aGlzLnNjcm9sbENhbGxiYWNrID0gX19iaW5kKHRoaXMuc2Nyb2xsQ2FsbGJhY2ssIHRoaXMpO1xuICAgICAgdGhpcy5zY3JvbGxIYW5kbGVyID0gX19iaW5kKHRoaXMuc2Nyb2xsSGFuZGxlciwgdGhpcyk7XG4gICAgICB0aGlzLnN0YXJ0ID0gX19iaW5kKHRoaXMuc3RhcnQsIHRoaXMpO1xuICAgICAgdGhpcy5zY3JvbGxlZCA9IHRydWU7XG4gICAgICB0aGlzLmNvbmZpZyA9IHRoaXMudXRpbCgpLmV4dGVuZChvcHRpb25zLCB0aGlzLmRlZmF1bHRzKTtcbiAgICAgIHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbiAgICB9XG5cbiAgICBXT1cucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmO1xuICAgICAgdGhpcy5lbGVtZW50ID0gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgIGlmICgoX3JlZiA9IGRvY3VtZW50LnJlYWR5U3RhdGUpID09PSBcImludGVyYWN0aXZlXCIgfHwgX3JlZiA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudXRpbCgpLmFkZEV2ZW50KGRvY3VtZW50LCAnRE9NQ29udGVudExvYWRlZCcsIHRoaXMuc3RhcnQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZmluaXNoZWQgPSBbXTtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJveCwgX2ksIF9sZW4sIF9yZWY7XG4gICAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuYm94ZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZWYgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIHRoaXMuY29uZmlnLmJveENsYXNzKTtcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgYm94ID0gX3JlZltfaV07XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaChib3gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmFsbCA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0cztcbiAgICAgICAgX3JlZiA9IHRoaXMuYm94ZXM7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIGJveCA9IF9yZWZbX2ldO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goYm94KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgaWYgKHRoaXMuYm94ZXMubGVuZ3RoKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKCkpIHtcbiAgICAgICAgICB0aGlzLnJlc2V0U3R5bGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfcmVmID0gdGhpcy5ib3hlcztcbiAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgIGJveCA9IF9yZWZbX2ldO1xuICAgICAgICAgICAgdGhpcy5hcHBseVN0eWxlKGJveCwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuZGlzYWJsZWQoKSkge1xuICAgICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudCh3aW5kb3csICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICAgICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudCh3aW5kb3csICdyZXNpemUnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5zY3JvbGxDYWxsYmFjaywgNTApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY29uZmlnLmxpdmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhdGlvbk9ic2VydmVyKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyZWNvcmRzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSwgcmVjb3JkLCBfaiwgX2xlbjEsIF9yZXN1bHRzO1xuICAgICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IHJlY29yZHMubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgICAgICAgIHJlY29yZCA9IHJlY29yZHNbX2pdO1xuICAgICAgICAgICAgICBfcmVzdWx0cy5wdXNoKChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2ssIF9sZW4yLCBfcmVmMSwgX3Jlc3VsdHMxO1xuICAgICAgICAgICAgICAgIF9yZWYxID0gcmVjb3JkLmFkZGVkTm9kZXMgfHwgW107XG4gICAgICAgICAgICAgICAgX3Jlc3VsdHMxID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChfayA9IDAsIF9sZW4yID0gX3JlZjEubGVuZ3RoOyBfayA8IF9sZW4yOyBfaysrKSB7XG4gICAgICAgICAgICAgICAgICBub2RlID0gX3JlZjFbX2tdO1xuICAgICAgICAgICAgICAgICAgX3Jlc3VsdHMxLnB1c2godGhpcy5kb1N5bmMobm9kZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gX3Jlc3VsdHMxO1xuICAgICAgICAgICAgICB9KS5jYWxsKF90aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSkodGhpcykpLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xuICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG4gICAgICB0aGlzLnV0aWwoKS5yZW1vdmVFdmVudCh3aW5kb3csICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICAgICAgdGhpcy51dGlsKCkucmVtb3ZlRXZlbnQod2luZG93LCAncmVzaXplJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgIGlmICh0aGlzLmludGVydmFsICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc3luYyA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgIGlmIChNdXRhdGlvbk9ic2VydmVyLm5vdFN1cHBvcnRlZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb1N5bmModGhpcy5lbGVtZW50KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5kb1N5bmMgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICB2YXIgYm94LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICBpZiAoZWxlbWVudCA9PSBudWxsKSB7XG4gICAgICAgIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICB9XG4gICAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSAhPT0gMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlIHx8IGVsZW1lbnQ7XG4gICAgICBfcmVmID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiICsgdGhpcy5jb25maWcuYm94Q2xhc3MpO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBib3ggPSBfcmVmW19pXTtcbiAgICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKHRoaXMuYWxsLCBib3gpIDwgMCkge1xuICAgICAgICAgIHRoaXMuYm94ZXMucHVzaChib3gpO1xuICAgICAgICAgIHRoaXMuYWxsLnB1c2goYm94KTtcbiAgICAgICAgICBpZiAodGhpcy5zdG9wcGVkIHx8IHRoaXMuZGlzYWJsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFN0eWxlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTdHlsZShib3gsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKHRoaXMuc2Nyb2xsZWQgPSB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKHZvaWQgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICB0aGlzLmFwcGx5U3R5bGUoYm94KTtcbiAgICAgIGJveC5jbGFzc05hbWUgPSBcIlwiICsgYm94LmNsYXNzTmFtZSArIFwiIFwiICsgdGhpcy5jb25maWcuYW5pbWF0ZUNsYXNzO1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmNhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmNhbGxiYWNrKGJveCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuYXBwbHlTdHlsZSA9IGZ1bmN0aW9uKGJveCwgaGlkZGVuKSB7XG4gICAgICB2YXIgZGVsYXksIGR1cmF0aW9uLCBpdGVyYXRpb247XG4gICAgICBkdXJhdGlvbiA9IGJveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtd293LWR1cmF0aW9uJyk7XG4gICAgICBkZWxheSA9IGJveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtd293LWRlbGF5Jyk7XG4gICAgICBpdGVyYXRpb24gPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1pdGVyYXRpb24nKTtcbiAgICAgIHJldHVybiB0aGlzLmFuaW1hdGUoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuY3VzdG9tU3R5bGUoYm94LCBoaWRkZW4sIGR1cmF0aW9uLCBkZWxheSwgaXRlcmF0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5hbmltYXRlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCdyZXF1ZXN0QW5pbWF0aW9uRnJhbWUnIGluIHdpbmRvdykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICByZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KSgpO1xuXG4gICAgV09XLnByb3RvdHlwZS5yZXNldFN0eWxlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYm94LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICBfcmVmID0gdGhpcy5ib3hlcztcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgYm94ID0gX3JlZltfaV07XG4gICAgICAgIF9yZXN1bHRzLnB1c2goYm94LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZScpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmN1c3RvbVN0eWxlID0gZnVuY3Rpb24oYm94LCBoaWRkZW4sIGR1cmF0aW9uLCBkZWxheSwgaXRlcmF0aW9uKSB7XG4gICAgICBpZiAoaGlkZGVuKSB7XG4gICAgICAgIHRoaXMuY2FjaGVBbmltYXRpb25OYW1lKGJveCk7XG4gICAgICB9XG4gICAgICBib3guc3R5bGUudmlzaWJpbGl0eSA9IGhpZGRlbiA/ICdoaWRkZW4nIDogJ3Zpc2libGUnO1xuICAgICAgaWYgKGR1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMudmVuZG9yU2V0KGJveC5zdHlsZSwge1xuICAgICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiBkdXJhdGlvblxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWxheSkge1xuICAgICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcbiAgICAgICAgICBhbmltYXRpb25EZWxheTogZGVsYXlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoaXRlcmF0aW9uKSB7XG4gICAgICAgIHRoaXMudmVuZG9yU2V0KGJveC5zdHlsZSwge1xuICAgICAgICAgIGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiBpdGVyYXRpb25cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcbiAgICAgICAgYW5pbWF0aW9uTmFtZTogaGlkZGVuID8gJ25vbmUnIDogdGhpcy5jYWNoZWRBbmltYXRpb25OYW1lKGJveClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGJveDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS52ZW5kb3JzID0gW1wibW96XCIsIFwid2Via2l0XCJdO1xuXG4gICAgV09XLnByb3RvdHlwZS52ZW5kb3JTZXQgPSBmdW5jdGlvbihlbGVtLCBwcm9wZXJ0aWVzKSB7XG4gICAgICB2YXIgbmFtZSwgdmFsdWUsIHZlbmRvciwgX3Jlc3VsdHM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChuYW1lIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgdmFsdWUgPSBwcm9wZXJ0aWVzW25hbWVdO1xuICAgICAgICBlbGVtW1wiXCIgKyBuYW1lXSA9IHZhbHVlO1xuICAgICAgICBfcmVzdWx0cy5wdXNoKChmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzMTtcbiAgICAgICAgICBfcmVmID0gdGhpcy52ZW5kb3JzO1xuICAgICAgICAgIF9yZXN1bHRzMSA9IFtdO1xuICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgdmVuZG9yID0gX3JlZltfaV07XG4gICAgICAgICAgICBfcmVzdWx0czEucHVzaChlbGVtW1wiXCIgKyB2ZW5kb3IgKyAobmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSkgKyAobmFtZS5zdWJzdHIoMSkpXSA9IHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF9yZXN1bHRzMTtcbiAgICAgICAgfSkuY2FsbCh0aGlzKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUudmVuZG9yQ1NTID0gZnVuY3Rpb24oZWxlbSwgcHJvcGVydHkpIHtcbiAgICAgIHZhciByZXN1bHQsIHN0eWxlLCB2ZW5kb3IsIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW0pO1xuICAgICAgcmVzdWx0ID0gc3R5bGUuZ2V0UHJvcGVydHlDU1NWYWx1ZShwcm9wZXJ0eSk7XG4gICAgICBfcmVmID0gdGhpcy52ZW5kb3JzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHZlbmRvciA9IF9yZWZbX2ldO1xuICAgICAgICByZXN1bHQgPSByZXN1bHQgfHwgc3R5bGUuZ2V0UHJvcGVydHlDU1NWYWx1ZShcIi1cIiArIHZlbmRvciArIFwiLVwiICsgcHJvcGVydHkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5hbmltYXRpb25OYW1lID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICB2YXIgYW5pbWF0aW9uTmFtZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGFuaW1hdGlvbk5hbWUgPSB0aGlzLnZlbmRvckNTUyhib3gsICdhbmltYXRpb24tbmFtZScpLmNzc1RleHQ7XG4gICAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgYW5pbWF0aW9uTmFtZSA9IGdldENvbXB1dGVkU3R5bGUoYm94KS5nZXRQcm9wZXJ0eVZhbHVlKCdhbmltYXRpb24tbmFtZScpO1xuICAgICAgfVxuICAgICAgaWYgKGFuaW1hdGlvbk5hbWUgPT09ICdub25lJykge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYW5pbWF0aW9uTmFtZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5jYWNoZUFuaW1hdGlvbk5hbWUgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgIHJldHVybiB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZS5zZXQoYm94LCB0aGlzLmFuaW1hdGlvbk5hbWUoYm94KSk7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuY2FjaGVkQW5pbWF0aW9uTmFtZSA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlLmdldChib3gpO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnNjcm9sbGVkID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zY3JvbGxDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJveDtcbiAgICAgIGlmICh0aGlzLnNjcm9sbGVkKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ib3hlcyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgICAgIF9yZWYgPSB0aGlzLmJveGVzO1xuICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICBib3ggPSBfcmVmW19pXTtcbiAgICAgICAgICAgIGlmICghKGJveCkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUoYm94KSkge1xuICAgICAgICAgICAgICB0aGlzLnNob3coYm94KTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfcmVzdWx0cy5wdXNoKGJveCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKCEodGhpcy5ib3hlcy5sZW5ndGggfHwgdGhpcy5jb25maWcubGl2ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5vZmZzZXRUb3AgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICB2YXIgdG9wO1xuICAgICAgd2hpbGUgKGVsZW1lbnQub2Zmc2V0VG9wID09PSB2b2lkIDApIHtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgIH1cbiAgICAgIHRvcCA9IGVsZW1lbnQub2Zmc2V0VG9wO1xuICAgICAgd2hpbGUgKGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudCkge1xuICAgICAgICB0b3AgKz0gZWxlbWVudC5vZmZzZXRUb3A7XG4gICAgICB9XG4gICAgICByZXR1cm4gdG9wO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmlzVmlzaWJsZSA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgdmFyIGJvdHRvbSwgb2Zmc2V0LCB0b3AsIHZpZXdCb3R0b20sIHZpZXdUb3A7XG4gICAgICBvZmZzZXQgPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1vZmZzZXQnKSB8fCB0aGlzLmNvbmZpZy5vZmZzZXQ7XG4gICAgICB2aWV3VG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgICAgdmlld0JvdHRvbSA9IHZpZXdUb3AgKyBNYXRoLm1pbih0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0LCB0aGlzLnV0aWwoKS5pbm5lckhlaWdodCgpKSAtIG9mZnNldDtcbiAgICAgIHRvcCA9IHRoaXMub2Zmc2V0VG9wKGJveCk7XG4gICAgICBib3R0b20gPSB0b3AgKyBib3guY2xpZW50SGVpZ2h0O1xuICAgICAgcmV0dXJuIHRvcCA8PSB2aWV3Qm90dG9tICYmIGJvdHRvbSA+PSB2aWV3VG9wO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnV0aWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl91dGlsICE9IG51bGwgPyB0aGlzLl91dGlsIDogdGhpcy5fdXRpbCA9IG5ldyBVdGlsKCk7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuZGlzYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5jb25maWcubW9iaWxlICYmIHRoaXMudXRpbCgpLmlzTW9iaWxlKG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gV09XO1xuXG4gIH0pKCk7XG5cbn0pLmNhbGwodGhpcyk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9