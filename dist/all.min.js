function CarouselInViewport(){var t=getChildrenOf("quotes"),e=document.querySelector(".quote-progress");verge.inViewport(e)&&(Carousel(t,15e3,0),console.log(verge.inViewport(e)))}function Carousel(t,e,n,i,r){function o(){for(r=i;~r;r--)t[r].className=r==n?"t":"";n=++n%(i+1)}var i=t.length-1,n=n||0;o(),setInterval(o,e)}function changeBackgroundColor(t){var e=window.pageYOffset||document.documentElement.scrollTop;t.className=e>20?"fixed":""}function getChildrenOf(t){return[].filter.call(document.getElementById(t).childNodes,function(t){return 1===t.nodeType})}window.matchMedia||(window.matchMedia=function(){"use strict";var t=window.styleMedia||window.media;if(!t){var e=document.createElement("style"),n=document.getElementsByTagName("script")[0],i=null;e.type="text/css",e.id="matchmediajs-test",n.parentNode.insertBefore(e,n),i="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,t={matchMedium:function(t){var n="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=n:e.textContent=n,"1px"===i.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(t,e,n){"use strict";function i(t){var e,n,i,r,s,l=t||{};e=l.elements||o.getAllElements();for(var a=0,u=e.length;u>a;a++)if(n=e[a],i=n.parentNode,r=void 0,s=void 0,"IMG"===n.nodeName.toUpperCase()&&(n[o.ns]||(n[o.ns]={}),l.reevaluate||!n[o.ns].evaluated)){if("PICTURE"===i.nodeName.toUpperCase()){if(o.removeVideoShim(i),r=o.getMatch(n,i),r===!1)continue}else r=void 0;("PICTURE"===i.nodeName.toUpperCase()||n.srcset&&!o.srcsetSupported||!o.sizesSupported&&n.srcset&&n.srcset.indexOf("w")>-1)&&o.dodgeSrcset(n),r?(s=o.processSourceSet(r),o.applyBestCandidate(s,n)):(s=o.processSourceSet(n),(void 0===n.srcset||n[o.ns].srcset)&&o.applyBestCandidate(s,n)),n[o.ns].evaluated=!0}}function r(){function n(){var e;t._picturefillWorking||(t._picturefillWorking=!0,t.clearTimeout(e),e=t.setTimeout(function(){i({reevaluate:!0}),t._picturefillWorking=!1},60))}i();var r=setInterval(function(){return i(),/^loaded|^i|^c/.test(e.readyState)?void clearInterval(r):void 0},250);t.addEventListener?t.addEventListener("resize",n,!1):t.attachEvent&&t.attachEvent("onresize",n)}if(t.HTMLPictureElement)return void(t.picturefill=function(){});e.createElement("picture");var o={};o.ns="picturefill",function(){o.srcsetSupported="srcset"in n,o.sizesSupported="sizes"in n}(),o.trim=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},o.endsWith=function(t,e){return t.endsWith?t.endsWith(e):-1!==t.indexOf(e,t.length-e.length)},o.restrictsMixedContent=function(){return"https:"===t.location.protocol},o.matchesMedia=function(e){return t.matchMedia&&t.matchMedia(e).matches},o.getDpr=function(){return t.devicePixelRatio||1},o.getWidthFromLength=function(t){t=t&&t.indexOf("%")>-1==!1&&(parseFloat(t)>0||t.indexOf("calc(")>-1)?t:"100vw",t=t.replace("vw","%"),o.lengthEl||(o.lengthEl=e.createElement("div"),o.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden"),o.lengthEl.style.width=t,e.body.appendChild(o.lengthEl),o.lengthEl.className="helper-from-picturefill-js",o.lengthEl.offsetWidth<=0&&(o.lengthEl.style.width=e.documentElement.offsetWidth+"px");var n=o.lengthEl.offsetWidth;return e.body.removeChild(o.lengthEl),n},o.types={},o.types["image/jpeg"]=!0,o.types["image/gif"]=!0,o.types["image/png"]=!0,o.types["image/svg+xml"]=e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),o.types["image/webp"]=function(){var t="image/webp";n.onerror=function(){o.types[t]=!1,i()},n.onload=function(){o.types[t]=1===n.width,i()},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="},o.verifyTypeSupport=function(t){var e=t.getAttribute("type");return null===e||""===e?!0:"function"==typeof o.types[e]?(o.types[e](),"pending"):o.types[e]},o.parseSize=function(t){var e=/(\([^)]+\))?\s*(.+)/g.exec(t);return{media:e&&e[1],length:e&&e[2]}},o.findWidthFromSourceSize=function(t){for(var e,n=o.trim(t).split(/\s*,\s*/),i=0,r=n.length;r>i;i++){var s=n[i],l=o.parseSize(s),a=l.length,u=l.media;if(a&&(!u||o.matchesMedia(u))){e=a;break}}return o.getWidthFromLength(e)},o.parseSrcset=function(t){for(var e=[];""!==t;){t=t.replace(/^\s+/g,"");var n,i=t.search(/\s/g),r=null;if(-1!==i){n=t.slice(0,i);var o=n.slice(-1);if((","===o||""===n)&&(n=n.replace(/,+$/,""),r=""),t=t.slice(i+1),null===r){var s=t.indexOf(",");-1!==s?(r=t.slice(0,s),t=t.slice(s+1)):(r=t,t="")}}else n=t,t="";(n||r)&&e.push({url:n,descriptor:r})}return e},o.parseDescriptor=function(t,e){var n,i=e||"100vw",r=t&&t.replace(/(^\s+|\s+$)/g,""),s=o.findWidthFromSourceSize(i);if(r)for(var l=r.split(" "),a=l.length-1;a>=0;a--){var u=l[a],c=u&&u.slice(u.length-1);if("h"!==c&&"w"!==c||o.sizesSupported){if("x"===c){var d=u&&parseFloat(u,10);n=d&&!isNaN(d)?d:1}}else n=parseFloat(parseInt(u,10)/s)}return n||1},o.getCandidatesFromSourceSet=function(t,e){for(var n=o.parseSrcset(t),i=[],r=0,s=n.length;s>r;r++){var l=n[r];i.push({url:l.url,resolution:o.parseDescriptor(l.descriptor,e)})}return i},o.dodgeSrcset=function(t){t.srcset&&(t[o.ns].srcset=t.srcset,t.removeAttribute("srcset"))},o.processSourceSet=function(t){var e=t.getAttribute("srcset"),n=t.getAttribute("sizes"),i=[];return"IMG"===t.nodeName.toUpperCase()&&t[o.ns]&&t[o.ns].srcset&&(e=t[o.ns].srcset),e&&(i=o.getCandidatesFromSourceSet(e,n)),i},o.applyBestCandidate=function(t,e){var n,i,r;t.sort(o.ascendingSort),i=t.length,r=t[i-1];for(var s=0;i>s;s++)if(n=t[s],n.resolution>=o.getDpr()){r=n;break}if(r&&!o.endsWith(e.src,r.url))if(o.restrictsMixedContent()&&"http:"===r.url.substr(0,"http:".length).toLowerCase())void 0!==typeof console&&console.warn("Blocked mixed content image "+r.url);else{e.src=r.url,e.currentSrc=e.src;var l=e.style||{},a="webkitBackfaceVisibility"in l,u=l.zoom;a&&(l.zoom=".999",a=e.offsetWidth,l.zoom=u)}},o.ascendingSort=function(t,e){return t.resolution-e.resolution},o.removeVideoShim=function(t){var e=t.getElementsByTagName("video");if(e.length){for(var n=e[0],i=n.getElementsByTagName("source");i.length;)t.insertBefore(i[0],n);n.parentNode.removeChild(n)}},o.getAllElements=function(){for(var t=[],n=e.getElementsByTagName("img"),i=0,r=n.length;r>i;i++){var s=n[i];("PICTURE"===s.parentNode.nodeName.toUpperCase()||null!==s.getAttribute("srcset")||s[o.ns]&&null!==s[o.ns].srcset)&&t.push(s)}return t},o.getMatch=function(t,e){for(var n,i=e.childNodes,r=0,s=i.length;s>r;r++){var l=i[r];if(1===l.nodeType){if(l===t)return n;if("SOURCE"===l.nodeName.toUpperCase()){null!==l.getAttribute("src")&&void 0!==typeof console&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var a=l.getAttribute("media");if(l.getAttribute("srcset")&&(!a||o.matchesMedia(a))){var u=o.verifyTypeSupport(l);if(u===!0){n=l;break}if("pending"===u)return!1}}}}return n},r(),i._=o,"object"==typeof module&&"object"==typeof module.exports?module.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):"object"==typeof t&&(t.picturefill=i)}(this,this.document,new this.Image),function(t,e,n){"undefined"!=typeof module&&module.exports?module.exports=n():t[e]=n()}(this,"verge",function(){function t(){return{width:c(),height:d()}}function e(t,e){var n={};return e=+e||0,n.width=(n.right=t.right+e)-(n.left=t.left-e),n.height=(n.bottom=t.bottom+e)-(n.top=t.top-e),n}function n(t,n){return t=t&&!t.nodeType?t[0]:t,t&&1===t.nodeType?e(t.getBoundingClientRect(),n):!1}function i(e){e=null==e?t():1===e.nodeType?n(e):e;var i=e.height,r=e.width;return i="function"==typeof i?i.call(e):i,r="function"==typeof r?r.call(e):r,r/i}var r={},o="undefined"!=typeof window&&window,s="undefined"!=typeof document&&document,l=s&&s.documentElement,a=o.matchMedia||o.msMatchMedia,u=a?function(t){return!!a.call(o,t).matches}:function(){return!1},c=r.viewportW=function(){var t=l.clientWidth,e=o.innerWidth;return e>t?e:t},d=r.viewportH=function(){var t=l.clientHeight,e=o.innerHeight;return e>t?e:t};return r.mq=u,r.matchMedia=a?function(){return a.apply(o,arguments)}:function(){return{}},r.viewport=t,r.scrollX=function(){return o.pageXOffset||l.scrollLeft},r.scrollY=function(){return o.pageYOffset||l.scrollTop},r.rectangle=n,r.aspect=i,r.inX=function(t,e){var i=n(t,e);return!!i&&i.right>=0&&i.left<=c()},r.inY=function(t,e){var i=n(t,e);return!!i&&i.bottom>=0&&i.top<=d()},r.inViewport=function(t,e){var i=n(t,e);return!!i&&i.bottom>=0&&i.right>=0&&i.top<=d()&&i.left<=c()},r}),function(){var t,e,n,i,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=function(){function t(){}return t.prototype.extend=function(t,e){var n,i;for(n in e)i=e[n],null==t[n]&&(t[n]=i);return t},t.prototype.isMobile=function(t){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)},t.prototype.addEvent=function(t,e,n){return null!=t.addEventListener?t.addEventListener(e,n,!1):null!=t.attachEvent?t.attachEvent("on"+e,n):t[e]=n},t.prototype.removeEvent=function(t,e,n){return null!=t.removeEventListener?t.removeEventListener(e,n,!1):null!=t.detachEvent?t.detachEvent("on"+e,n):delete t[e]},t.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},t}(),n=this.WeakMap||this.MozWeakMap||(n=function(){function t(){this.keys=[],this.values=[]}return t.prototype.get=function(t){var e,n,i,r,o;for(o=this.keys,e=i=0,r=o.length;r>i;e=++i)if(n=o[e],n===t)return this.values[e]},t.prototype.set=function(t,e){var n,i,r,o,s;for(s=this.keys,n=r=0,o=s.length;o>r;n=++r)if(i=s[n],i===t)return void(this.values[n]=e);return this.keys.push(t),this.values.push(e)},t}()),t=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(t=function(){function t(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return t.notSupported=!0,t.prototype.observe=function(){},t}()),i=this.getComputedStyle||function(t){return this.getPropertyValue=function(e){var n;return"float"===e&&(e="styleFloat"),r.test(e)&&e.replace(r,function(t,e){return e.toUpperCase()}),(null!=(n=t.currentStyle)?n[e]:void 0)||null},this},r=/(\-([a-z]){1})/g,this.WOW=function(){function r(t){null==t&&(t={}),this.scrollCallback=o(this.scrollCallback,this),this.scrollHandler=o(this.scrollHandler,this),this.start=o(this.start,this),this.scrolled=!0,this.config=this.util().extend(t,this.defaults),this.animationNameCache=new n}return r.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null},r.prototype.init=function(){var t;return this.element=window.document.documentElement,"interactive"===(t=document.readyState)||"complete"===t?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},r.prototype.start=function(){var e,n,i,r;if(this.stopped=!1,this.boxes=function(){var t,n,i,r;for(i=this.element.querySelectorAll("."+this.config.boxClass),r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e);return r}.call(this),this.all=function(){var t,n,i,r;for(i=this.boxes,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e);return r}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(r=this.boxes,n=0,i=r.length;i>n;n++)e=r[n],this.applyStyle(e,!0);return this.disabled()||(this.util().addEvent(window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new t(function(t){return function(e){var n,i,r,o,s;for(s=[],r=0,o=e.length;o>r;r++)i=e[r],s.push(function(){var t,e,r,o;for(r=i.addedNodes||[],o=[],t=0,e=r.length;e>t;t++)n=r[t],o.push(this.doSync(n));return o}.call(t));return s}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},r.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval?clearInterval(this.interval):void 0},r.prototype.sync=function(){return t.notSupported?this.doSync(this.element):void 0},r.prototype.doSync=function(t){var e,n,i,r,o;if(null==t&&(t=this.element),1===t.nodeType){for(t=t.parentNode||t,r=t.querySelectorAll("."+this.config.boxClass),o=[],n=0,i=r.length;i>n;n++)e=r[n],s.call(this.all,e)<0?(this.boxes.push(e),this.all.push(e),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(e,!0),o.push(this.scrolled=!0)):o.push(void 0);return o}},r.prototype.show=function(t){return this.applyStyle(t),t.className=""+t.className+" "+this.config.animateClass,null!=this.config.callback?this.config.callback(t):void 0},r.prototype.applyStyle=function(t,e){var n,i,r;return i=t.getAttribute("data-wow-duration"),n=t.getAttribute("data-wow-delay"),r=t.getAttribute("data-wow-iteration"),this.animate(function(o){return function(){return o.customStyle(t,e,i,n,r)}}(this))},r.prototype.animate=function(){return"requestAnimationFrame"in window?function(t){return window.requestAnimationFrame(t)}:function(t){return t()}}(),r.prototype.resetStyle=function(){var t,e,n,i,r;for(i=this.boxes,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.style.visibility="visible");return r},r.prototype.customStyle=function(t,e,n,i,r){return e&&this.cacheAnimationName(t),t.style.visibility=e?"hidden":"visible",n&&this.vendorSet(t.style,{animationDuration:n}),i&&this.vendorSet(t.style,{animationDelay:i}),r&&this.vendorSet(t.style,{animationIterationCount:r}),this.vendorSet(t.style,{animationName:e?"none":this.cachedAnimationName(t)}),t},r.prototype.vendors=["moz","webkit"],r.prototype.vendorSet=function(t,e){var n,i,r,o;o=[];for(n in e)i=e[n],t[""+n]=i,o.push(function(){var e,o,s,l;for(s=this.vendors,l=[],e=0,o=s.length;o>e;e++)r=s[e],l.push(t[""+r+n.charAt(0).toUpperCase()+n.substr(1)]=i);return l}.call(this));return o},r.prototype.vendorCSS=function(t,e){var n,r,o,s,l,a;for(r=i(t),n=r.getPropertyCSSValue(e),a=this.vendors,s=0,l=a.length;l>s;s++)o=a[s],n=n||r.getPropertyCSSValue("-"+o+"-"+e);return n},r.prototype.animationName=function(t){var e;try{e=this.vendorCSS(t,"animation-name").cssText}catch(n){e=i(t).getPropertyValue("animation-name")}return"none"===e?"":e},r.prototype.cacheAnimationName=function(t){return this.animationNameCache.set(t,this.animationName(t))},r.prototype.cachedAnimationName=function(t){return this.animationNameCache.get(t)},r.prototype.scrollHandler=function(){return this.scrolled=!0},r.prototype.scrollCallback=function(){var t;return!this.scrolled||(this.scrolled=!1,this.boxes=function(){var e,n,i,r;for(i=this.boxes,r=[],e=0,n=i.length;n>e;e++)t=i[e],t&&(this.isVisible(t)?this.show(t):r.push(t));return r}.call(this),this.boxes.length||this.config.live)?void 0:this.stop()},r.prototype.offsetTop=function(t){for(var e;void 0===t.offsetTop;)t=t.parentNode;for(e=t.offsetTop;t=t.offsetParent;)e+=t.offsetTop;return e},r.prototype.isVisible=function(t){var e,n,i,r,o;return n=t.getAttribute("data-wow-offset")||this.config.offset,o=window.pageYOffset,r=o+Math.min(this.element.clientHeight,this.util().innerHeight())-n,i=this.offsetTop(t),e=i+t.clientHeight,r>=i&&e>=o},r.prototype.util=function(){return null!=this._util?this._util:this._util=new e},r.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},r}()}.call(this),(new WOW).init(),window.addEventListener("load",function(){var t=document.getElementById("nav");changeBackgroundColor(t),CarouselInViewport(),window.onscroll=function(){changeBackgroundColor(t),CarouselInViewport()}},!1);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwaWN0dXJlZmlsbC5qcyIsIndvdy5qcyJdLCJuYW1lcyI6WyJDYXJvdXNlbEluVmlld3BvcnQiLCJxb3V0ZXMiLCJnZXRDaGlsZHJlbk9mIiwicXVvdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ2ZXJnZSIsImluVmlld3BvcnQiLCJDYXJvdXNlbCIsImNvbnNvbGUiLCJsb2ciLCJlIiwicyIsImMiLCJtIiwiaSIsImYiLCJjbGFzc05hbWUiLCJsZW5ndGgiLCJzZXRJbnRlcnZhbCIsImNoYW5nZUJhY2tncm91bmRDb2xvciIsImlkIiwieSIsIndpbmRvdyIsInBhZ2VZT2Zmc2V0IiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsVG9wIiwiZmlsdGVyIiwiY2FsbCIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGROb2RlcyIsIm5vZGVUeXBlIiwibWF0Y2hNZWRpYSIsInN0eWxlTWVkaWEiLCJtZWRpYSIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsInNjcmlwdCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5mbyIsInR5cGUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImN1cnJlbnRTdHlsZSIsIm1hdGNoTWVkaXVtIiwidGV4dCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwidGV4dENvbnRlbnQiLCJ3aWR0aCIsIm1hdGNoZXMiLCJ3IiwiZG9jIiwiaW1hZ2UiLCJwaWN0dXJlZmlsbCIsIm9wdCIsImVsZW1lbnRzIiwiZWxlbWVudCIsInBhcmVudCIsImZpcnN0TWF0Y2giLCJjYW5kaWRhdGVzIiwib3B0aW9ucyIsInBmIiwiZ2V0QWxsRWxlbWVudHMiLCJwbGVuIiwidW5kZWZpbmVkIiwibm9kZU5hbWUiLCJ0b1VwcGVyQ2FzZSIsIm5zIiwicmVldmFsdWF0ZSIsImV2YWx1YXRlZCIsInJlbW92ZVZpZGVvU2hpbSIsImdldE1hdGNoIiwic3Jjc2V0Iiwic3Jjc2V0U3VwcG9ydGVkIiwic2l6ZXNTdXBwb3J0ZWQiLCJpbmRleE9mIiwiZG9kZ2VTcmNzZXQiLCJwcm9jZXNzU291cmNlU2V0IiwiYXBwbHlCZXN0Q2FuZGlkYXRlIiwicnVuUGljdHVyZWZpbGwiLCJjaGVja1Jlc2l6ZSIsInJlc2l6ZVRocm90dGxlIiwiX3BpY3R1cmVmaWxsV29ya2luZyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJpbnRlcnZhbElkIiwidGVzdCIsInJlYWR5U3RhdGUiLCJjbGVhckludGVydmFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImF0dGFjaEV2ZW50IiwiSFRNTFBpY3R1cmVFbGVtZW50IiwidHJpbSIsInN0ciIsInJlcGxhY2UiLCJlbmRzV2l0aCIsInN1ZmZpeCIsInJlc3RyaWN0c01peGVkQ29udGVudCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJtYXRjaGVzTWVkaWEiLCJnZXREcHIiLCJkZXZpY2VQaXhlbFJhdGlvIiwiZ2V0V2lkdGhGcm9tTGVuZ3RoIiwicGFyc2VGbG9hdCIsImxlbmd0aEVsIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJyZW1vdmVDaGlsZCIsInR5cGVzIiwiaW1wbGVtZW50YXRpb24iLCJoYXNGZWF0dXJlIiwib25lcnJvciIsIm9ubG9hZCIsInNyYyIsInZlcmlmeVR5cGVTdXBwb3J0Iiwic291cmNlIiwiZ2V0QXR0cmlidXRlIiwicGFyc2VTaXplIiwic291cmNlU2l6ZVN0ciIsIm1hdGNoIiwiZXhlYyIsImZpbmRXaWR0aEZyb21Tb3VyY2VTaXplIiwic291cmNlU2l6ZUxpc3RTdHIiLCJ3aW5uaW5nTGVuZ3RoIiwic291cmNlU2l6ZUxpc3QiLCJzcGxpdCIsImxlbiIsInNvdXJjZVNpemUiLCJwYXJzZWRTaXplIiwicGFyc2VTcmNzZXQiLCJ1cmwiLCJwb3MiLCJzZWFyY2giLCJkZXNjcmlwdG9yIiwic2xpY2UiLCJsYXN0IiwiZGVzY3BvcyIsInB1c2giLCJwYXJzZURlc2NyaXB0b3IiLCJzaXplc2F0dHIiLCJyZXNDYW5kaWRhdGUiLCJzaXplcyIsInNpemVEZXNjcmlwdG9yIiwid2lkdGhJbkNzc1BpeGVscyIsInNwbGl0RGVzY3JpcHRvciIsImN1cnIiLCJsYXN0Y2hhciIsInJlcyIsImlzTmFOIiwicGFyc2VJbnQiLCJnZXRDYW5kaWRhdGVzRnJvbVNvdXJjZVNldCIsImZvcm1hdHRlZENhbmRpZGF0ZXMiLCJjYW5kaWRhdGUiLCJyZXNvbHV0aW9uIiwiaW1nIiwicmVtb3ZlQXR0cmlidXRlIiwiZWwiLCJwaWNJbWciLCJiZXN0Q2FuZGlkYXRlIiwic29ydCIsImFzY2VuZGluZ1NvcnQiLCJzdWJzdHIiLCJ0b0xvd2VyQ2FzZSIsIndhcm4iLCJjdXJyZW50U3JjIiwiV2Via2l0QmFja2ZhY2VWaXNpYmlsaXR5IiwiY3VycmVudFpvb20iLCJ6b29tIiwiYSIsImIiLCJwaWN0dXJlIiwidmlkZW9zIiwidmlkZW8iLCJ2c291cmNlcyIsImVsZW1zIiwiaW1ncyIsImgiLCJjdXJySW1nIiwic291cmNlcyIsImoiLCJzbGVuIiwidHlwZVN1cHBvcnRlZCIsIl8iLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsIkltYWdlIiwicm9vdCIsIm5hbWUiLCJtYWtlIiwidmlld3BvcnQiLCJ2aWV3cG9ydFciLCJoZWlnaHQiLCJ2aWV3cG9ydEgiLCJjYWxpYnJhdGUiLCJjb29yZHMiLCJjdXNoaW9uIiwibyIsInJlY3RhbmdsZSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImFzcGVjdCIsInhwb3J0cyIsIndpbiIsImRvY0VsZW0iLCJtcSIsInEiLCJhcHBseSIsImFyZ3VtZW50cyIsInBhZ2VYT2Zmc2V0Iiwic2Nyb2xsTGVmdCIsInIiLCJyaWdodCIsImxlZnQiLCJib3R0b20iLCJ0b3AiLCJNdXRhdGlvbk9ic2VydmVyIiwiVXRpbCIsIldlYWtNYXAiLCJnZXRDb21wdXRlZFN0eWxlUlgiLCJfX2JpbmQiLCJmbiIsIm1lIiwiX19pbmRleE9mIiwiaXRlbSIsImwiLCJwcm90b3R5cGUiLCJleHRlbmQiLCJjdXN0b20iLCJkZWZhdWx0cyIsImtleSIsInZhbHVlIiwiaXNNb2JpbGUiLCJhZ2VudCIsImFkZEV2ZW50IiwiZWxlbSIsImV2ZW50IiwicmVtb3ZlRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGV0YWNoRXZlbnQiLCJpbm5lckhlaWdodCIsImNsaWVudEhlaWdodCIsIk1veldlYWtNYXAiLCJrZXlzIiwidmFsdWVzIiwiZ2V0IiwiX2kiLCJfbGVuIiwiX3JlZiIsInNldCIsIldlYmtpdE11dGF0aW9uT2JzZXJ2ZXIiLCJNb3pNdXRhdGlvbk9ic2VydmVyIiwibm90U3VwcG9ydGVkIiwib2JzZXJ2ZSIsImdldFByb3BlcnR5VmFsdWUiLCJwcm9wIiwiX2NoYXIiLCJXT1ciLCJzY3JvbGxDYWxsYmFjayIsInNjcm9sbEhhbmRsZXIiLCJzdGFydCIsInNjcm9sbGVkIiwiY29uZmlnIiwidXRpbCIsImFuaW1hdGlvbk5hbWVDYWNoZSIsImJveENsYXNzIiwiYW5pbWF0ZUNsYXNzIiwib2Zmc2V0IiwibW9iaWxlIiwibGl2ZSIsImNhbGxiYWNrIiwiaW5pdCIsImZpbmlzaGVkIiwiYm94Iiwic3RvcHBlZCIsImJveGVzIiwiX3Jlc3VsdHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWxsIiwiZGlzYWJsZWQiLCJyZXNldFN0eWxlIiwiYXBwbHlTdHlsZSIsImludGVydmFsIiwiX3RoaXMiLCJyZWNvcmRzIiwibm9kZSIsInJlY29yZCIsIl9qIiwiX2xlbjEiLCJfayIsIl9sZW4yIiwiX3JlZjEiLCJfcmVzdWx0czEiLCJhZGRlZE5vZGVzIiwiZG9TeW5jIiwiY2hpbGRMaXN0Iiwic3VidHJlZSIsInN0b3AiLCJzeW5jIiwic2hvdyIsImhpZGRlbiIsImRlbGF5IiwiZHVyYXRpb24iLCJpdGVyYXRpb24iLCJhbmltYXRlIiwiY3VzdG9tU3R5bGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ2aXNpYmlsaXR5IiwiY2FjaGVBbmltYXRpb25OYW1lIiwidmVuZG9yU2V0IiwiYW5pbWF0aW9uRHVyYXRpb24iLCJhbmltYXRpb25EZWxheSIsImFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50IiwiYW5pbWF0aW9uTmFtZSIsImNhY2hlZEFuaW1hdGlvbk5hbWUiLCJ2ZW5kb3JzIiwicHJvcGVydGllcyIsInZlbmRvciIsImNoYXJBdCIsInZlbmRvckNTUyIsInByb3BlcnR5IiwicmVzdWx0IiwiZ2V0UHJvcGVydHlDU1NWYWx1ZSIsIl9lcnJvciIsImlzVmlzaWJsZSIsIm9mZnNldFRvcCIsIm9mZnNldFBhcmVudCIsInZpZXdCb3R0b20iLCJ2aWV3VG9wIiwiTWF0aCIsIm1pbiIsIl91dGlsIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9wTmF2Iiwib25zY3JvbGwiXSwibWFwcGluZ3MiOiJBQW9CQSxRQUFBQSxzQkFFQSxHQUFBQyxHQUFBQyxjQUFBLFVBQ0FDLEVBQUFDLFNBQUFDLGNBQUEsa0JBRUFDLE9BQUFDLFdBQUFKLEtBQ0FLLFNBQUFQLEVBQUEsS0FBQSxHQUNBUSxRQUFBQyxJQUFBSixNQUFBQyxXQUFBSixLQUlBLFFBQUFLLFVBQUFHLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBS0EsUUFBQUMsS0FDQSxJQUFBRCxFQUFBRCxHQUFBQyxFQUFBQSxJQUFBSixFQUFBSSxHQUFBRSxVQUFBRixHQUFBRixFQUFBLElBQUEsRUFBQUEsS0FBQUEsR0FBQUMsRUFBQSxHQUxBLEdBQUFBLEdBQUFILEVBQUFPLE9BQUEsRUFDQUwsRUFBQUEsR0FBQSxDQU1BRyxLQUNBRyxZQUFBSCxFQUFBSixHQUdBLFFBQUFRLHVCQUFBQyxHQUNBLEdBQUFDLEdBQUFDLE9BQUFDLGFBQUFwQixTQUFBcUIsZ0JBQUFDLFNBRUFMLEdBQUFKLFVBREFLLEVBQUEsR0FDQSxRQUVBLEdBSUEsUUFBQXBCLGVBQUFtQixHQUNBLFNBQUFNLE9BQUFDLEtBQUF4QixTQUFBeUIsZUFBQVIsR0FBQVMsV0FBQSxTQUFBUixHQUNBLE1BQUEsS0FBQUEsRUFBQVMsV0NqREFSLE9BQUFTLGFBQUFULE9BQUFTLFdBQUEsV0FDQSxZQUdBLElBQUFDLEdBQUFWLE9BQUFVLFlBQUFWLE9BQUFXLEtBR0EsS0FBQUQsRUFBQSxDQUNBLEdBQUFFLEdBQUEvQixTQUFBZ0MsY0FBQSxTQUNBQyxFQUFBakMsU0FBQWtDLHFCQUFBLFVBQUEsR0FDQUMsRUFBQSxJQUVBSixHQUFBSyxLQUFBLFdBQ0FMLEVBQUFkLEdBQUEsb0JBRUFnQixFQUFBSSxXQUFBQyxhQUFBUCxFQUFBRSxHQUdBRSxFQUFBLG9CQUFBaEIsU0FBQUEsT0FBQW9CLGlCQUFBUixFQUFBLE9BQUFBLEVBQUFTLGFBRUFYLEdBQ0FZLFlBQUEsU0FBQVgsR0FDQSxHQUFBWSxHQUFBLFVBQUFaLEVBQUEsd0NBVUEsT0FQQUMsR0FBQVksV0FDQVosRUFBQVksV0FBQUMsUUFBQUYsRUFFQVgsRUFBQWMsWUFBQUgsRUFJQSxRQUFBUCxFQUFBVyxRQUtBLE1BQUEsVUFBQWhCLEdBQ0EsT0FDQWlCLFFBQUFsQixFQUFBWSxZQUFBWCxHQUFBLE9BQ0FBLE1BQUFBLEdBQUEsWUFTQSxTQUFBa0IsRUFBQUMsRUFBQUMsR0FFQSxZQW9kQSxTQUFBQyxHQUFBQyxHQUNBLEdBQUFDLEdBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQUFOLEtBRUFDLEdBQUFLLEVBQUFMLFVBQUFNLEVBQUFDLGdCQUdBLEtBQUEsR0FBQWpELEdBQUEsRUFBQWtELEVBQUFSLEVBQUF2QyxPQUFBK0MsRUFBQWxELEVBQUFBLElBT0EsR0FOQTJDLEVBQUFELEVBQUExQyxHQUNBNEMsRUFBQUQsRUFBQWpCLFdBQ0FtQixFQUFBTSxPQUNBTCxFQUFBSyxPQUdBLFFBQUFSLEVBQUFTLFNBQUFDLGdCQUtBVixFQUFBSyxFQUFBTSxNQUNBWCxFQUFBSyxFQUFBTSxRQU1BUCxFQUFBUSxhQUFBWixFQUFBSyxFQUFBTSxJQUFBRSxXQUFBLENBS0EsR0FBQSxZQUFBWixFQUFBUSxTQUFBQyxlQWFBLEdBVkFMLEVBQUFTLGdCQUFBYixHQUtBQyxFQUFBRyxFQUFBVSxTQUFBZixFQUFBQyxHQUtBQyxLQUFBLEVBQ0EsYUFHQUEsR0FBQU0sUUFJQSxZQUFBUCxFQUFBUSxTQUFBQyxlQUNBVixFQUFBZ0IsU0FBQVgsRUFBQVksa0JBQ0FaLEVBQUFhLGdCQUFBbEIsRUFBQWdCLFFBQUFoQixFQUFBZ0IsT0FBQUcsUUFBQSxLQUFBLEtBQ0FkLEVBQUFlLFlBQUFwQixHQUdBRSxHQUNBQyxFQUFBRSxFQUFBZ0IsaUJBQUFuQixHQUNBRyxFQUFBaUIsbUJBQUFuQixFQUFBSCxLQUdBRyxFQUFBRSxFQUFBZ0IsaUJBQUFyQixJQUVBUSxTQUFBUixFQUFBZ0IsUUFBQWhCLEVBQUFLLEVBQUFNLElBQUFLLFNBRUFYLEVBQUFpQixtQkFBQW5CLEVBQUFILElBS0FBLEVBQUFLLEVBQUFNLElBQUFFLFdBQUEsR0FTQSxRQUFBVSxLQVlBLFFBQUFDLEtBQ0EsR0FBQUMsRUFFQS9CLEdBQUFnQyxzQkFDQWhDLEVBQUFnQyxxQkFBQSxFQUNBaEMsRUFBQWlDLGFBQUFGLEdBQ0FBLEVBQUEvQixFQUFBa0MsV0FBQSxXQUNBL0IsR0FBQWUsWUFBQSxJQUNBbEIsRUFBQWdDLHFCQUFBLEdBQ0EsS0FwQkE3QixHQUNBLElBQUFnQyxHQUFBcEUsWUFBQSxXQUlBLE1BREFvQyxLQUNBLGdCQUFBaUMsS0FBQW5DLEVBQUFvQyxnQkFDQUMsZUFBQUgsR0FEQSxRQUlBLElBZUFuQyxHQUFBdUMsaUJBQ0F2QyxFQUFBdUMsaUJBQUEsU0FBQVQsR0FBQSxHQUNBOUIsRUFBQXdDLGFBQ0F4QyxFQUFBd0MsWUFBQSxXQUFBVixHQWxrQkEsR0FBQTlCLEVBQUF5QyxtQkFFQSxZQURBekMsRUFBQUcsWUFBQSxhQUtBRixHQUFBakIsY0FBQSxVQUdBLElBQUEyQixLQUdBQSxHQUFBTSxHQUFBLGNBR0EsV0FDQU4sRUFBQVksZ0JBQUEsVUFBQXJCLEdBQ0FTLEVBQUFhLGVBQUEsU0FBQXRCLE1BSUFTLEVBQUErQixLQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQUQsS0FBQUMsRUFBQUQsT0FBQUMsRUFBQUMsUUFBQSxhQUFBLEtBSUFqQyxFQUFBa0MsU0FBQSxTQUFBRixFQUFBRyxHQUNBLE1BQUFILEdBQUFFLFNBQUFGLEVBQUFFLFNBQUFDLEdBQUEsS0FBQUgsRUFBQWxCLFFBQUFxQixFQUFBSCxFQUFBN0UsT0FBQWdGLEVBQUFoRixTQU1BNkMsRUFBQW9DLHNCQUFBLFdBQ0EsTUFBQSxXQUFBL0MsRUFBQWdELFNBQUFDLFVBTUF0QyxFQUFBdUMsYUFBQSxTQUFBcEUsR0FDQSxNQUFBa0IsR0FBQXBCLFlBQUFvQixFQUFBcEIsV0FBQUUsR0FBQWlCLFNBSUFZLEVBQUF3QyxPQUFBLFdBQ0EsTUFBQW5ELEdBQUFvRCxrQkFBQSxHQU9BekMsRUFBQTBDLG1CQUFBLFNBQUF2RixHQUVBQSxFQUFBQSxHQUFBQSxFQUFBMkQsUUFBQSxLQUFBLEtBQUEsSUFBQTZCLFdBQUF4RixHQUFBLEdBQUFBLEVBQUEyRCxRQUFBLFNBQUEsSUFBQTNELEVBQUEsUUFRQUEsRUFBQUEsRUFBQThFLFFBQUEsS0FBQSxLQUdBakMsRUFBQTRDLFdBQ0E1QyxFQUFBNEMsU0FBQXRELEVBQUFqQixjQUFBLE9BR0EyQixFQUFBNEMsU0FBQXhFLE1BQUFhLFFBQUEsc0dBR0FlLEVBQUE0QyxTQUFBeEUsTUFBQWUsTUFBQWhDLEVBRUFtQyxFQUFBdUQsS0FBQUMsWUFBQTlDLEVBQUE0QyxVQUdBNUMsRUFBQTRDLFNBQUExRixVQUFBLDZCQUVBOEMsRUFBQTRDLFNBQUFHLGFBQUEsSUFFQS9DLEVBQUE0QyxTQUFBeEUsTUFBQWUsTUFBQUcsRUFBQTVCLGdCQUFBcUYsWUFBQSxLQUdBLElBQUFBLEdBQUEvQyxFQUFBNEMsU0FBQUcsV0FJQSxPQUZBekQsR0FBQXVELEtBQUFHLFlBQUFoRCxFQUFBNEMsVUFFQUcsR0FJQS9DLEVBQUFpRCxTQUdBakQsRUFBQWlELE1BQUEsZUFBQSxFQUNBakQsRUFBQWlELE1BQUEsY0FBQSxFQUNBakQsRUFBQWlELE1BQUEsY0FBQSxFQUdBakQsRUFBQWlELE1BQUEsaUJBQUEzRCxFQUFBNEQsZUFBQUMsV0FBQSwyQ0FBQSxPQUdBbkQsRUFBQWlELE1BQUEsY0FBQSxXQUdBLEdBQUF4RSxHQUFBLFlBRUFjLEdBQUE2RCxRQUFBLFdBQ0FwRCxFQUFBaUQsTUFBQXhFLElBQUEsRUFDQWUsS0FFQUQsRUFBQThELE9BQUEsV0FDQXJELEVBQUFpRCxNQUFBeEUsR0FBQSxJQUFBYyxFQUFBSixNQUNBSyxLQUVBRCxFQUFBK0QsSUFBQSwrRUFTQXRELEVBQUF1RCxrQkFBQSxTQUFBQyxHQUNBLEdBQUEvRSxHQUFBK0UsRUFBQUMsYUFBQSxPQUVBLE9BQUEsUUFBQWhGLEdBQUEsS0FBQUEsR0FDQSxFQUdBLGtCQUFBdUIsR0FBQWlELE1BQUF4RSxJQUNBdUIsRUFBQWlELE1BQUF4RSxLQUNBLFdBRUF1QixFQUFBaUQsTUFBQXhFLElBTUF1QixFQUFBMEQsVUFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUEsdUJBQUFDLEtBQUFGLEVBQ0EsUUFDQXhGLE1BQUF5RixHQUFBQSxFQUFBLEdBQ0F6RyxPQUFBeUcsR0FBQUEsRUFBQSxLQUtBNUQsRUFBQThELHdCQUFBLFNBQUFDLEdBTUEsSUFBQSxHQUZBQyxHQURBQyxFQUFBakUsRUFBQStCLEtBQUFnQyxHQUFBRyxNQUFBLFdBR0FsSCxFQUFBLEVBQUFtSCxFQUFBRixFQUFBOUcsT0FBQWdILEVBQUFuSCxFQUFBQSxJQUFBLENBRUEsR0FBQW9ILEdBQUFILEVBQUFqSCxHQUVBcUgsRUFBQXJFLEVBQUEwRCxVQUFBVSxHQUNBakgsRUFBQWtILEVBQUFsSCxPQUNBZ0IsRUFBQWtHLEVBQUFsRyxLQUVBLElBQUFoQixLQUdBZ0IsR0FBQTZCLEVBQUF1QyxhQUFBcEUsSUFBQSxDQUdBNkYsRUFBQTdHLENBQ0EsUUFNQSxNQUFBNkMsR0FBQTBDLG1CQUFBc0IsSUFHQWhFLEVBQUFzRSxZQUFBLFNBQUEzRCxHQWFBLElBRkEsR0FBQWIsTUFFQSxLQUFBYSxHQUFBLENBQ0FBLEVBQUFBLEVBQUFzQixRQUFBLFFBQUEsR0FHQSxJQUNBc0MsR0FEQUMsRUFBQTdELEVBQUE4RCxPQUFBLE9BQ0FDLEVBQUEsSUFFQSxJQUFBLEtBQUFGLEVBQUEsQ0FDQUQsRUFBQTVELEVBQUFnRSxNQUFBLEVBQUFILEVBRUEsSUFBQUksR0FBQUwsRUFBQUksTUFBQSxHQWNBLEtBUkEsTUFBQUMsR0FBQSxLQUFBTCxLQUNBQSxFQUFBQSxFQUFBdEMsUUFBQSxNQUFBLElBQ0F5QyxFQUFBLElBRUEvRCxFQUFBQSxFQUFBZ0UsTUFBQUgsRUFBQSxHQUlBLE9BQUFFLEVBQUEsQ0FDQSxHQUFBRyxHQUFBbEUsRUFBQUcsUUFBQSxJQUNBLE1BQUErRCxHQUNBSCxFQUFBL0QsRUFBQWdFLE1BQUEsRUFBQUUsR0FDQWxFLEVBQUFBLEVBQUFnRSxNQUFBRSxFQUFBLEtBRUFILEVBQUEvRCxFQUNBQSxFQUFBLFNBSUE0RCxHQUFBNUQsRUFDQUEsRUFBQSxJQUlBNEQsR0FBQUcsSUFDQTVFLEVBQUFnRixNQUNBUCxJQUFBQSxFQUNBRyxXQUFBQSxJQUlBLE1BQUE1RSxJQUdBRSxFQUFBK0UsZ0JBQUEsU0FBQUwsRUFBQU0sR0FHQSxHQUdBQyxHQUhBQyxFQUFBRixHQUFBLFFBQ0FHLEVBQUFULEdBQUFBLEVBQUF6QyxRQUFBLGVBQUEsSUFDQW1ELEVBQUFwRixFQUFBOEQsd0JBQUFvQixFQUdBLElBQUFDLEVBR0EsSUFBQSxHQUZBRSxHQUFBRixFQUFBakIsTUFBQSxLQUVBbEgsRUFBQXFJLEVBQUFsSSxPQUFBLEVBQUFILEdBQUEsRUFBQUEsSUFBQSxDQUNBLEdBQUFzSSxHQUFBRCxFQUFBckksR0FDQXVJLEVBQUFELEdBQUFBLEVBQUFYLE1BQUFXLEVBQUFuSSxPQUFBLEVBRUEsSUFBQSxNQUFBb0ksR0FBQSxNQUFBQSxHQUFBdkYsRUFBQWEsZ0JBRUEsR0FBQSxNQUFBMEUsRUFBQSxDQUNBLEdBQUFDLEdBQUFGLEdBQUEzQyxXQUFBMkMsRUFBQSxHQUNBTCxHQUFBTyxJQUFBQyxNQUFBRCxHQUFBQSxFQUFBLE9BSEFQLEdBQUF0QyxXQUFBK0MsU0FBQUosRUFBQSxJQUFBRixHQU9BLE1BQUFILElBQUEsR0FhQWpGLEVBQUEyRiwyQkFBQSxTQUFBaEYsRUFBQXVFLEdBSUEsSUFBQSxHQUhBcEYsR0FBQUUsRUFBQXNFLFlBQUEzRCxHQUNBaUYsS0FFQTVJLEVBQUEsRUFBQW1ILEVBQUFyRSxFQUFBM0MsT0FBQWdILEVBQUFuSCxFQUFBQSxJQUFBLENBQ0EsR0FBQTZJLEdBQUEvRixFQUFBOUMsRUFFQTRJLEdBQUFkLE1BQ0FQLElBQUFzQixFQUFBdEIsSUFDQXVCLFdBQUE5RixFQUFBK0UsZ0JBQUFjLEVBQUFuQixXQUFBUSxLQUdBLE1BQUFVLElBU0E1RixFQUFBZSxZQUFBLFNBQUFnRixHQUNBQSxFQUFBcEYsU0FDQW9GLEVBQUEvRixFQUFBTSxJQUFBSyxPQUFBb0YsRUFBQXBGLE9BQ0FvRixFQUFBQyxnQkFBQSxZQUtBaEcsRUFBQWdCLGlCQUFBLFNBQUFpRixHQUNBLEdBQUF0RixHQUFBc0YsRUFBQXhDLGFBQUEsVUFDQXlCLEVBQUFlLEVBQUF4QyxhQUFBLFNBQ0EzRCxJQVVBLE9BUEEsUUFBQW1HLEVBQUE3RixTQUFBQyxlQUFBNEYsRUFBQWpHLEVBQUFNLEtBQUEyRixFQUFBakcsRUFBQU0sSUFBQUssU0FDQUEsRUFBQXNGLEVBQUFqRyxFQUFBTSxJQUFBSyxRQUdBQSxJQUNBYixFQUFBRSxFQUFBMkYsMkJBQUFoRixFQUFBdUUsSUFFQXBGLEdBR0FFLEVBQUFpQixtQkFBQSxTQUFBbkIsRUFBQW9HLEdBQ0EsR0FBQUwsR0FDQTFJLEVBQ0FnSixDQUVBckcsR0FBQXNHLEtBQUFwRyxFQUFBcUcsZUFFQWxKLEVBQUEyQyxFQUFBM0MsT0FDQWdKLEVBQUFyRyxFQUFBM0MsRUFBQSxFQUVBLEtBQUEsR0FBQUgsR0FBQSxFQUFBRyxFQUFBSCxFQUFBQSxJQUVBLEdBREE2SSxFQUFBL0YsRUFBQTlDLEdBQ0E2SSxFQUFBQyxZQUFBOUYsRUFBQXdDLFNBQUEsQ0FDQTJELEVBQUFOLENBQ0EsT0FJQSxHQUFBTSxJQUFBbkcsRUFBQWtDLFNBQUFnRSxFQUFBNUMsSUFBQTZDLEVBQUE1QixLQUNBLEdBQUF2RSxFQUFBb0MseUJBQUEsVUFBQStELEVBQUE1QixJQUFBK0IsT0FBQSxFQUFBLFFBQUFuSixRQUFBb0osY0FDQXBHLGVBQUF6RCxVQUNBQSxRQUFBOEosS0FBQSwrQkFBQUwsRUFBQTVCLFNBRUEsQ0FDQTJCLEVBQUE1QyxJQUFBNkMsRUFBQTVCLElBR0EyQixFQUFBTyxXQUFBUCxFQUFBNUMsR0FFQSxJQUFBbEYsR0FBQThILEVBQUE5SCxVQUNBc0ksRUFBQSw0QkFBQXRJLEdBQ0F1SSxFQUFBdkksRUFBQXdJLElBRUFGLEtBQ0F0SSxFQUFBd0ksS0FBQSxPQUVBRixFQUFBUixFQUFBbkQsWUFFQTNFLEVBQUF3SSxLQUFBRCxLQU1BM0csRUFBQXFHLGNBQUEsU0FBQVEsRUFBQUMsR0FDQSxNQUFBRCxHQUFBZixXQUFBZ0IsRUFBQWhCLFlBVUE5RixFQUFBUyxnQkFBQSxTQUFBc0csR0FDQSxHQUFBQyxHQUFBRCxFQUFBeEkscUJBQUEsUUFDQSxJQUFBeUksRUFBQTdKLE9BQUEsQ0FHQSxJQUZBLEdBQUE4SixHQUFBRCxFQUFBLEdBQ0FFLEVBQUFELEVBQUExSSxxQkFBQSxVQUNBMkksRUFBQS9KLFFBQ0E0SixFQUFBcEksYUFBQXVJLEVBQUEsR0FBQUQsRUFHQUEsR0FBQXZJLFdBQUFzRSxZQUFBaUUsS0FTQWpILEVBQUFDLGVBQUEsV0FJQSxJQUFBLEdBSEFrSCxNQUNBQyxFQUFBOUgsRUFBQWYscUJBQUEsT0FFQThJLEVBQUEsRUFBQWxELEVBQUFpRCxFQUFBakssT0FBQWdILEVBQUFrRCxFQUFBQSxJQUFBLENBQ0EsR0FBQUMsR0FBQUYsRUFBQUMsSUFFQSxZQUFBQyxFQUFBNUksV0FBQTBCLFNBQUFDLGVBQ0EsT0FBQWlILEVBQUE3RCxhQUFBLFdBQUE2RCxFQUFBdEgsRUFBQU0sS0FBQSxPQUFBZ0gsRUFBQXRILEVBQUFNLElBQUFLLFNBQ0F3RyxFQUFBckMsS0FBQXdDLEdBR0EsTUFBQUgsSUFHQW5ILEVBQUFVLFNBQUEsU0FBQXFGLEVBQUFnQixHQUtBLElBQUEsR0FIQW5ELEdBREEyRCxFQUFBUixFQUFBaEosV0FJQXlKLEVBQUEsRUFBQUMsRUFBQUYsRUFBQXBLLE9BQUFzSyxFQUFBRCxFQUFBQSxJQUFBLENBQ0EsR0FBQWhFLEdBQUErRCxFQUFBQyxFQUdBLElBQUEsSUFBQWhFLEVBQUF4RixTQUFBLENBTUEsR0FBQXdGLElBQUF1QyxFQUNBLE1BQUFuQyxFQUlBLElBQUEsV0FBQUosRUFBQXBELFNBQUFDLGNBQUEsQ0FJQSxPQUFBbUQsRUFBQUMsYUFBQSxRQUFBdEQsZUFBQXpELFVBQ0FBLFFBQUE4SixLQUFBLHVGQUdBLElBQUFySSxHQUFBcUYsRUFBQUMsYUFBQSxRQUdBLElBQUFELEVBQUFDLGFBQUEsYUFLQXRGLEdBQUE2QixFQUFBdUMsYUFBQXBFLElBQUEsQ0FDQSxHQUFBdUosR0FBQTFILEVBQUF1RCxrQkFBQUMsRUFFQSxJQUFBa0UsS0FBQSxFQUFBLENBQ0E5RCxFQUFBSixDQUNBLE9BQ0EsR0FBQSxZQUFBa0UsRUFDQSxPQUFBLEtBS0EsTUFBQTlELElBd0hBMUMsSUFHQTFCLEVBQUFtSSxFQUFBM0gsRUFHQSxnQkFBQTRILFNBQUEsZ0JBQUFBLFFBQUFDLFFBRUFELE9BQUFDLFFBQUFySSxFQUNBLGtCQUFBc0ksU0FBQUEsT0FBQUMsSUFFQUQsT0FBQSxXQUFBLE1BQUF0SSxLQUNBLGdCQUFBSCxLQUVBQSxFQUFBRyxZQUFBQSxJQUdBd0ksS0FBQUEsS0FBQTNMLFNBQUEsR0FBQTJMLE1BQUFDLE9DNW9CQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBLG1CQUFBUixTQUFBQSxPQUFBLFFBQUFBLE9BQUEsUUFBQVEsSUFDQUYsRUFBQUMsR0FBQUMsS0FDQUosS0FBQSxRQUFBLFdBNkNBLFFBQUFLLEtBQ0EsT0FBQWxKLE1BQUFtSixJQUFBQyxPQUFBQyxLQTJCQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEtBSUEsT0FIQUQsSUFBQUEsR0FBQSxFQUNBQyxFQUFBLE9BQUFBLEVBQUEsTUFBQUYsRUFBQSxNQUFBQyxJQUFBQyxFQUFBLEtBQUFGLEVBQUEsS0FBQUMsR0FDQUMsRUFBQSxRQUFBQSxFQUFBLE9BQUFGLEVBQUEsT0FBQUMsSUFBQUMsRUFBQSxJQUFBRixFQUFBLElBQUFDLEdBQ0FDLEVBV0EsUUFBQUMsR0FBQTVDLEVBQUEwQyxHQUVBLE1BREExQyxHQUFBQSxJQUFBQSxFQUFBakksU0FBQWlJLEVBQUEsR0FBQUEsRUFDQUEsR0FBQSxJQUFBQSxFQUFBakksU0FDQXlLLEVBQUF4QyxFQUFBNkMsd0JBQUFILElBREEsRUFZQSxRQUFBSSxHQUFBSCxHQUNBQSxFQUFBLE1BQUFBLEVBQUFQLElBQUEsSUFBQU8sRUFBQTVLLFNBQUE2SyxFQUFBRCxHQUFBQSxDQUNBLElBQUF2QixHQUFBdUIsRUFBQSxPQUFBdkosRUFBQXVKLEVBQUEsS0FHQSxPQUZBdkIsR0FBQSxrQkFBQUEsR0FBQUEsRUFBQXhKLEtBQUErSyxHQUFBdkIsRUFDQWhJLEVBQUEsa0JBQUFBLEdBQUFBLEVBQUF4QixLQUFBK0ssR0FBQXZKLEVBQ0FBLEVBQUFnSSxFQTFHQSxHQUFBMkIsTUFDQUMsRUFBQSxtQkFBQXpMLFNBQUFBLE9BQ0E4QixFQUFBLG1CQUFBakQsV0FBQUEsU0FDQTZNLEVBQUE1SixHQUFBQSxFQUFBNUIsZ0JBQ0FPLEVBQUFnTCxFQUFBLFlBQUFBLEVBQUEsYUFDQUUsRUFBQWxMLEVBQUEsU0FBQW1MLEdBQ0EsUUFBQW5MLEVBQUFKLEtBQUFvTCxFQUFBRyxHQUFBaEssU0FDQSxXQUNBLE9BQUEsR0FFQWtKLEVBQUFVLEVBQUEsVUFBQSxXQUNBLEdBQUFuQyxHQUFBcUMsRUFBQSxZQUFBcEMsRUFBQW1DLEVBQUEsVUFDQSxPQUFBbkMsR0FBQUQsRUFBQUMsRUFBQUQsR0FFQTJCLEVBQUFRLEVBQUEsVUFBQSxXQUNBLEdBQUFuQyxHQUFBcUMsRUFBQSxhQUFBcEMsRUFBQW1DLEVBQUEsV0FDQSxPQUFBbkMsR0FBQUQsRUFBQUMsRUFBQUQsRUFvSUEsT0E1SEFtQyxHQUFBLEdBQUFHLEVBT0FILEVBQUEsV0FBQS9LLEVBQUEsV0FFQSxNQUFBQSxHQUFBb0wsTUFBQUosRUFBQUssWUFDQSxXQUVBLFVBVUFOLEVBQUEsU0FBQVgsRUFPQVcsRUFBQSxRQUFBLFdBQ0EsTUFBQUMsR0FBQU0sYUFBQUwsRUFBQU0sWUFRQVIsRUFBQSxRQUFBLFdBQ0EsTUFBQUMsR0FBQXhMLGFBQUF5TCxFQUFBdkwsV0E2QkFxTCxFQUFBLFVBQUFILEVBZ0JBRyxFQUFBLE9BQUFELEVBU0FDLEVBQUEsSUFBQSxTQUFBL0MsRUFBQTBDLEdBQ0EsR0FBQWMsR0FBQVosRUFBQTVDLEVBQUEwQyxFQUNBLFNBQUFjLEdBQUFBLEVBQUFDLE9BQUEsR0FBQUQsRUFBQUUsTUFBQXJCLEtBVUFVLEVBQUEsSUFBQSxTQUFBL0MsRUFBQTBDLEdBQ0EsR0FBQWMsR0FBQVosRUFBQTVDLEVBQUEwQyxFQUNBLFNBQUFjLEdBQUFBLEVBQUFHLFFBQUEsR0FBQUgsRUFBQUksS0FBQXJCLEtBVUFRLEVBQUEsV0FBQSxTQUFBL0MsRUFBQTBDLEdBR0EsR0FBQWMsR0FBQVosRUFBQTVDLEVBQUEwQyxFQUNBLFNBQUFjLEdBQUFBLEVBQUFHLFFBQUEsR0FBQUgsRUFBQUMsT0FBQSxHQUFBRCxFQUFBSSxLQUFBckIsS0FBQWlCLEVBQUFFLE1BQUFyQixLQUdBVSxJQUVBLFdBQ0EsR0FBQWMsR0FBQUMsRUFBQUMsRUFBQXBMLEVBQUFxTCxFQUNBQyxFQUFBLFNBQUFDLEVBQUFDLEdBQUEsTUFBQSxZQUFBLE1BQUFELEdBQUFkLE1BQUFlLEVBQUFkLGFBQ0FlLEtBQUF2SixTQUFBLFNBQUF3SixHQUFBLElBQUEsR0FBQXROLEdBQUEsRUFBQXVOLEVBQUF2QyxLQUFBN0ssT0FBQW9OLEVBQUF2TixFQUFBQSxJQUFBLEdBQUFBLElBQUFnTCxPQUFBQSxLQUFBaEwsS0FBQXNOLEVBQUEsTUFBQXROLEVBQUEsT0FBQSxHQUVBK00sR0FBQSxXQUNBLFFBQUFBLE1BNkNBLE1BM0NBQSxHQUFBUyxVQUFBQyxPQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQUMsQ0FDQSxLQUFBRCxJQUFBRCxHQUNBRSxFQUFBRixFQUFBQyxHQUNBLE1BQUFGLEVBQUFFLEtBQ0FGLEVBQUFFLEdBQUFDLEVBR0EsT0FBQUgsSUFHQVgsRUFBQVMsVUFBQU0sU0FBQSxTQUFBQyxHQUNBLE1BQUEsaUVBQUF0SixLQUFBc0osSUFHQWhCLEVBQUFTLFVBQUFRLFNBQUEsU0FBQUMsRUFBQUMsRUFBQWYsR0FDQSxNQUFBLE9BQUFjLEVBQUFySixpQkFDQXFKLEVBQUFySixpQkFBQXNKLEVBQUFmLEdBQUEsR0FDQSxNQUFBYyxFQUFBcEosWUFDQW9KLEVBQUFwSixZQUFBLEtBQUFxSixFQUFBZixHQUVBYyxFQUFBQyxHQUFBZixHQUlBSixFQUFBUyxVQUFBVyxZQUFBLFNBQUFGLEVBQUFDLEVBQUFmLEdBQ0EsTUFBQSxPQUFBYyxFQUFBRyxvQkFDQUgsRUFBQUcsb0JBQUFGLEVBQUFmLEdBQUEsR0FDQSxNQUFBYyxFQUFBSSxZQUNBSixFQUFBSSxZQUFBLEtBQUFILEVBQUFmLFNBRUFjLEdBQUFDLElBSUFuQixFQUFBUyxVQUFBYyxZQUFBLFdBQ0EsTUFBQSxlQUFBOU4sUUFDQUEsT0FBQThOLFlBRUFqUCxTQUFBcUIsZ0JBQUE2TixjQUlBeEIsS0FJQUMsRUFBQWhDLEtBQUFnQyxTQUFBaEMsS0FBQXdELGFBQUF4QixFQUFBLFdBQ0EsUUFBQUEsS0FDQWhDLEtBQUF5RCxRQUNBekQsS0FBQTBELFVBNEJBLE1BekJBMUIsR0FBQVEsVUFBQW1CLElBQUEsU0FBQWYsR0FDQSxHQUFBNU4sR0FBQXNOLEVBQUFzQixFQUFBQyxFQUFBQyxDQUVBLEtBREFBLEVBQUE5RCxLQUFBeUQsS0FDQXpPLEVBQUE0TyxFQUFBLEVBQUFDLEVBQUFDLEVBQUEzTyxPQUFBME8sRUFBQUQsRUFBQTVPLElBQUE0TyxFQUVBLEdBREF0QixFQUFBd0IsRUFBQTlPLEdBQ0FzTixJQUFBTSxFQUNBLE1BQUE1QyxNQUFBMEQsT0FBQTFPLElBS0FnTixFQUFBUSxVQUFBdUIsSUFBQSxTQUFBbkIsRUFBQUMsR0FDQSxHQUFBN04sR0FBQXNOLEVBQUFzQixFQUFBQyxFQUFBQyxDQUVBLEtBREFBLEVBQUE5RCxLQUFBeUQsS0FDQXpPLEVBQUE0TyxFQUFBLEVBQUFDLEVBQUFDLEVBQUEzTyxPQUFBME8sRUFBQUQsRUFBQTVPLElBQUE0TyxFQUVBLEdBREF0QixFQUFBd0IsRUFBQTlPLEdBQ0FzTixJQUFBTSxFQUVBLFlBREE1QyxLQUFBMEQsT0FBQTFPLEdBQUE2TixFQUtBLE9BREE3QyxNQUFBeUQsS0FBQTNHLEtBQUE4RixHQUNBNUMsS0FBQTBELE9BQUE1RyxLQUFBK0YsSUFHQWIsTUFJQUYsRUFBQTlCLEtBQUE4QixrQkFBQTlCLEtBQUFnRSx3QkFBQWhFLEtBQUFpRSxzQkFBQW5DLEVBQUEsV0FDQSxRQUFBQSxLQUNBLG1CQUFBcE4sVUFBQSxPQUFBQSxTQUNBQSxRQUFBOEosS0FBQSxzREFFQSxtQkFBQTlKLFVBQUEsT0FBQUEsU0FDQUEsUUFBQThKLEtBQUEsc0ZBUUEsTUFKQXNELEdBQUFvQyxjQUFBLEVBRUFwQyxFQUFBVSxVQUFBMkIsUUFBQSxhQUVBckMsTUFJQWxMLEVBQUFvSixLQUFBcEosa0JBQUEsU0FBQXFILEdBYUEsTUFaQStCLE1BQUFvRSxpQkFBQSxTQUFBQyxHQUNBLEdBQUFQLEVBU0EsT0FSQSxVQUFBTyxJQUNBQSxFQUFBLGNBRUFwQyxFQUFBeEksS0FBQTRLLElBQ0FBLEVBQUFwSyxRQUFBZ0ksRUFBQSxTQUFBdEMsRUFBQTJFLEdBQ0EsTUFBQUEsR0FBQWpNLGlCQUdBLE9BQUF5TCxFQUFBN0YsRUFBQXBILGNBQUFpTixFQUFBTyxHQUFBLFNBQUEsTUFFQXJFLE1BR0FpQyxFQUFBLGtCQUVBakMsS0FBQXVFLElBQUEsV0FVQSxRQUFBQSxHQUFBeE0sR0FDQSxNQUFBQSxJQUNBQSxNQUVBaUksS0FBQXdFLGVBQUF0QyxFQUFBbEMsS0FBQXdFLGVBQUF4RSxNQUNBQSxLQUFBeUUsY0FBQXZDLEVBQUFsQyxLQUFBeUUsY0FBQXpFLE1BQ0FBLEtBQUEwRSxNQUFBeEMsRUFBQWxDLEtBQUEwRSxNQUFBMUUsTUFDQUEsS0FBQTJFLFVBQUEsRUFDQTNFLEtBQUE0RSxPQUFBNUUsS0FBQTZFLE9BQUFwQyxPQUFBMUssRUFBQWlJLEtBQUEyQyxVQUNBM0MsS0FBQThFLG1CQUFBLEdBQUE5QyxHQXNUQSxNQXhVQXVDLEdBQUEvQixVQUFBRyxVQUNBb0MsU0FBQSxNQUNBQyxhQUFBLFdBQ0FDLE9BQUEsRUFDQUMsUUFBQSxFQUNBQyxNQUFBLEVBQ0FDLFNBQUEsTUFlQWIsRUFBQS9CLFVBQUE2QyxLQUFBLFdBQ0EsR0FBQXZCLEVBT0EsT0FOQTlELE1BQUFySSxRQUFBbkMsT0FBQW5CLFNBQUFxQixnQkFDQSxpQkFBQW9PLEVBQUF6UCxTQUFBcUYsYUFBQSxhQUFBb0ssRUFDQTlELEtBQUEwRSxRQUVBMUUsS0FBQTZFLE9BQUE3QixTQUFBM08sU0FBQSxtQkFBQTJMLEtBQUEwRSxPQUVBMUUsS0FBQXNGLGFBR0FmLEVBQUEvQixVQUFBa0MsTUFBQSxXQUNBLEdBQUFhLEdBQUEzQixFQUFBQyxFQUFBQyxDQXNCQSxJQXJCQTlELEtBQUF3RixTQUFBLEVBQ0F4RixLQUFBeUYsTUFBQSxXQUNBLEdBQUE3QixHQUFBQyxFQUFBQyxFQUFBNEIsQ0FHQSxLQUZBNUIsRUFBQTlELEtBQUFySSxRQUFBZ08saUJBQUEsSUFBQTNGLEtBQUE0RSxPQUFBRyxVQUNBVyxLQUNBOUIsRUFBQSxFQUFBQyxFQUFBQyxFQUFBM08sT0FBQTBPLEVBQUFELEVBQUFBLElBQ0EyQixFQUFBekIsRUFBQUYsR0FDQThCLEVBQUE1SSxLQUFBeUksRUFFQSxPQUFBRyxJQUNBN1AsS0FBQW1LLE1BQ0FBLEtBQUE0RixJQUFBLFdBQ0EsR0FBQWhDLEdBQUFDLEVBQUFDLEVBQUE0QixDQUdBLEtBRkE1QixFQUFBOUQsS0FBQXlGLE1BQ0FDLEtBQ0E5QixFQUFBLEVBQUFDLEVBQUFDLEVBQUEzTyxPQUFBME8sRUFBQUQsRUFBQUEsSUFDQTJCLEVBQUF6QixFQUFBRixHQUNBOEIsRUFBQTVJLEtBQUF5SSxFQUVBLE9BQUFHLElBQ0E3UCxLQUFBbUssTUFDQUEsS0FBQXlGLE1BQUF0USxPQUNBLEdBQUE2SyxLQUFBNkYsV0FDQTdGLEtBQUE4RixpQkFHQSxLQURBaEMsRUFBQTlELEtBQUF5RixNQUNBN0IsRUFBQSxFQUFBQyxFQUFBQyxFQUFBM08sT0FBQTBPLEVBQUFELEVBQUFBLElBQ0EyQixFQUFBekIsRUFBQUYsR0FDQTVELEtBQUErRixXQUFBUixHQUFBLEVBU0EsT0FMQXZGLE1BQUE2RixhQUNBN0YsS0FBQTZFLE9BQUE3QixTQUFBeE4sT0FBQSxTQUFBd0ssS0FBQXlFLGVBQ0F6RSxLQUFBNkUsT0FBQTdCLFNBQUF4TixPQUFBLFNBQUF3SyxLQUFBeUUsZUFDQXpFLEtBQUFnRyxTQUFBNVEsWUFBQTRLLEtBQUF3RSxlQUFBLEtBRUF4RSxLQUFBNEUsT0FBQU8sS0FDQSxHQUFBckQsR0FBQSxTQUFBbUUsR0FDQSxNQUFBLFVBQUFDLEdBQ0EsR0FBQUMsR0FBQUMsRUFBQUMsRUFBQUMsRUFBQVosQ0FFQSxLQURBQSxLQUNBVyxFQUFBLEVBQUFDLEVBQUFKLEVBQUEvUSxPQUFBbVIsRUFBQUQsRUFBQUEsSUFDQUQsRUFBQUYsRUFBQUcsR0FDQVgsRUFBQTVJLEtBQUEsV0FDQSxHQUFBeUosR0FBQUMsRUFBQUMsRUFBQUMsQ0FHQSxLQUZBRCxFQUFBTCxFQUFBTyxlQUNBRCxLQUNBSCxFQUFBLEVBQUFDLEVBQUFDLEVBQUF0UixPQUFBcVIsRUFBQUQsRUFBQUEsSUFDQUosRUFBQU0sRUFBQUYsR0FDQUcsRUFBQTVKLEtBQUFrRCxLQUFBNEcsT0FBQVQsR0FFQSxPQUFBTyxJQUNBN1EsS0FBQW9RLEdBRUEsT0FBQVAsS0FFQTFGLE9BQUFtRSxRQUFBOVAsU0FBQXdHLE1BQ0FnTSxXQUFBLEVBQ0FDLFNBQUEsSUF0QkEsUUEyQkF2QyxFQUFBL0IsVUFBQXVFLEtBQUEsV0FJQSxNQUhBL0csTUFBQXdGLFNBQUEsRUFDQXhGLEtBQUE2RSxPQUFBMUIsWUFBQTNOLE9BQUEsU0FBQXdLLEtBQUF5RSxlQUNBekUsS0FBQTZFLE9BQUExQixZQUFBM04sT0FBQSxTQUFBd0ssS0FBQXlFLGVBQ0EsTUFBQXpFLEtBQUFnRyxTQUNBck0sY0FBQXFHLEtBQUFnRyxVQURBLFFBS0F6QixFQUFBL0IsVUFBQXdFLEtBQUEsV0FDQSxNQUFBbEYsR0FBQW9DLGFBQ0FsRSxLQUFBNEcsT0FBQTVHLEtBQUFySSxTQURBLFFBS0E0TSxFQUFBL0IsVUFBQW9FLE9BQUEsU0FBQWpQLEdBQ0EsR0FBQTROLEdBQUEzQixFQUFBQyxFQUFBQyxFQUFBNEIsQ0FJQSxJQUhBLE1BQUEvTixJQUNBQSxFQUFBcUksS0FBQXJJLFNBRUEsSUFBQUEsRUFBQTNCLFNBQUEsQ0FNQSxJQUhBMkIsRUFBQUEsRUFBQWpCLFlBQUFpQixFQUNBbU0sRUFBQW5NLEVBQUFnTyxpQkFBQSxJQUFBM0YsS0FBQTRFLE9BQUFHLFVBQ0FXLEtBQ0E5QixFQUFBLEVBQUFDLEVBQUFDLEVBQUEzTyxPQUFBME8sRUFBQUQsRUFBQUEsSUFDQTJCLEVBQUF6QixFQUFBRixHQUNBdkIsRUFBQXhNLEtBQUFtSyxLQUFBNEYsSUFBQUwsR0FBQSxHQUNBdkYsS0FBQXlGLE1BQUEzSSxLQUFBeUksR0FDQXZGLEtBQUE0RixJQUFBOUksS0FBQXlJLEdBQ0F2RixLQUFBd0YsU0FBQXhGLEtBQUE2RixXQUNBN0YsS0FBQThGLGFBRUE5RixLQUFBK0YsV0FBQVIsR0FBQSxHQUVBRyxFQUFBNUksS0FBQWtELEtBQUEyRSxVQUFBLElBRUFlLEVBQUE1SSxLQUFBLE9BR0EsT0FBQTRJLEtBR0FuQixFQUFBL0IsVUFBQXlFLEtBQUEsU0FBQTFCLEdBR0EsTUFGQXZGLE1BQUErRixXQUFBUixHQUNBQSxFQUFBclEsVUFBQSxHQUFBcVEsRUFBQXJRLFVBQUEsSUFBQThLLEtBQUE0RSxPQUFBSSxhQUNBLE1BQUFoRixLQUFBNEUsT0FBQVEsU0FDQXBGLEtBQUE0RSxPQUFBUSxTQUFBRyxHQURBLFFBS0FoQixFQUFBL0IsVUFBQXVELFdBQUEsU0FBQVIsRUFBQTJCLEdBQ0EsR0FBQUMsR0FBQUMsRUFBQUMsQ0FJQSxPQUhBRCxHQUFBN0IsRUFBQTlKLGFBQUEscUJBQ0EwTCxFQUFBNUIsRUFBQTlKLGFBQUEsa0JBQ0E0TCxFQUFBOUIsRUFBQTlKLGFBQUEsc0JBQ0F1RSxLQUFBc0gsUUFBQSxTQUFBckIsR0FDQSxNQUFBLFlBQ0EsTUFBQUEsR0FBQXNCLFlBQUFoQyxFQUFBMkIsRUFBQUUsRUFBQUQsRUFBQUUsS0FFQXJILFFBR0F1RSxFQUFBL0IsVUFBQThFLFFBQUEsV0FDQSxNQUFBLHlCQUFBOVIsUUFDQSxTQUFBNFAsR0FDQSxNQUFBNVAsUUFBQWdTLHNCQUFBcEMsSUFHQSxTQUFBQSxHQUNBLE1BQUFBLFNBS0FiLEVBQUEvQixVQUFBc0QsV0FBQSxXQUNBLEdBQUFQLEdBQUEzQixFQUFBQyxFQUFBQyxFQUFBNEIsQ0FHQSxLQUZBNUIsRUFBQTlELEtBQUF5RixNQUNBQyxLQUNBOUIsRUFBQSxFQUFBQyxFQUFBQyxFQUFBM08sT0FBQTBPLEVBQUFELEVBQUFBLElBQ0EyQixFQUFBekIsRUFBQUYsR0FDQThCLEVBQUE1SSxLQUFBeUksRUFBQW5QLE1BQUFxUixXQUFBLFVBRUEsT0FBQS9CLElBR0FuQixFQUFBL0IsVUFBQStFLFlBQUEsU0FBQWhDLEVBQUEyQixFQUFBRSxFQUFBRCxFQUFBRSxHQXVCQSxNQXRCQUgsSUFDQWxILEtBQUEwSCxtQkFBQW5DLEdBRUFBLEVBQUFuUCxNQUFBcVIsV0FBQVAsRUFBQSxTQUFBLFVBQ0FFLEdBQ0FwSCxLQUFBMkgsVUFBQXBDLEVBQUFuUCxPQUNBd1Isa0JBQUFSLElBR0FELEdBQ0FuSCxLQUFBMkgsVUFBQXBDLEVBQUFuUCxPQUNBeVIsZUFBQVYsSUFHQUUsR0FDQXJILEtBQUEySCxVQUFBcEMsRUFBQW5QLE9BQ0EwUix3QkFBQVQsSUFHQXJILEtBQUEySCxVQUFBcEMsRUFBQW5QLE9BQ0EyUixjQUFBYixFQUFBLE9BQUFsSCxLQUFBZ0ksb0JBQUF6QyxLQUVBQSxHQUdBaEIsRUFBQS9CLFVBQUF5RixTQUFBLE1BQUEsVUFFQTFELEVBQUEvQixVQUFBbUYsVUFBQSxTQUFBMUUsRUFBQWlGLEdBQ0EsR0FBQS9ILEdBQUEwQyxFQUFBc0YsRUFBQXpDLENBQ0FBLEtBQ0EsS0FBQXZGLElBQUErSCxHQUNBckYsRUFBQXFGLEVBQUEvSCxHQUNBOEMsRUFBQSxHQUFBOUMsR0FBQTBDLEVBQ0E2QyxFQUFBNUksS0FBQSxXQUNBLEdBQUE4RyxHQUFBQyxFQUFBQyxFQUFBNEMsQ0FHQSxLQUZBNUMsRUFBQTlELEtBQUFpSSxRQUNBdkIsS0FDQTlDLEVBQUEsRUFBQUMsRUFBQUMsRUFBQTNPLE9BQUEwTyxFQUFBRCxFQUFBQSxJQUNBdUUsRUFBQXJFLEVBQUFGLEdBQ0E4QyxFQUFBNUosS0FBQW1HLEVBQUEsR0FBQWtGLEVBQUFoSSxFQUFBaUksT0FBQSxHQUFBL1AsY0FBQThILEVBQUE3QixPQUFBLElBQUF1RSxFQUVBLE9BQUE2RCxJQUNBN1EsS0FBQW1LLE1BRUEsT0FBQTBGLElBR0FuQixFQUFBL0IsVUFBQTZGLFVBQUEsU0FBQXBGLEVBQUFxRixHQUNBLEdBQUFDLEdBQUFuUyxFQUFBK1IsRUFBQXZFLEVBQUFDLEVBQUFDLENBSUEsS0FIQTFOLEVBQUFRLEVBQUFxTSxHQUNBc0YsRUFBQW5TLEVBQUFvUyxvQkFBQUYsR0FDQXhFLEVBQUE5RCxLQUFBaUksUUFDQXJFLEVBQUEsRUFBQUMsRUFBQUMsRUFBQTNPLE9BQUEwTyxFQUFBRCxFQUFBQSxJQUNBdUUsRUFBQXJFLEVBQUFGLEdBQ0EyRSxFQUFBQSxHQUFBblMsRUFBQW9TLG9CQUFBLElBQUFMLEVBQUEsSUFBQUcsRUFFQSxPQUFBQyxJQUdBaEUsRUFBQS9CLFVBQUF1RixjQUFBLFNBQUF4QyxHQUNBLEdBQUF3QyxFQUNBLEtBQ0FBLEVBQUEvSCxLQUFBcUksVUFBQTlDLEVBQUEsa0JBQUF0TyxRQUNBLE1BQUF3UixHQUNBVixFQUFBblIsRUFBQTJPLEdBQUFuQixpQkFBQSxrQkFFQSxNQUFBLFNBQUEyRCxFQUNBLEdBRUFBLEdBSUF4RCxFQUFBL0IsVUFBQWtGLG1CQUFBLFNBQUFuQyxHQUNBLE1BQUF2RixNQUFBOEUsbUJBQUFmLElBQUF3QixFQUFBdkYsS0FBQStILGNBQUF4QyxLQUdBaEIsRUFBQS9CLFVBQUF3RixvQkFBQSxTQUFBekMsR0FDQSxNQUFBdkYsTUFBQThFLG1CQUFBbkIsSUFBQTRCLElBR0FoQixFQUFBL0IsVUFBQWlDLGNBQUEsV0FDQSxNQUFBekUsTUFBQTJFLFVBQUEsR0FHQUosRUFBQS9CLFVBQUFnQyxlQUFBLFdBQ0EsR0FBQWUsRUFDQSxRQUFBdkYsS0FBQTJFLFdBQ0EzRSxLQUFBMkUsVUFBQSxFQUNBM0UsS0FBQXlGLE1BQUEsV0FDQSxHQUFBN0IsR0FBQUMsRUFBQUMsRUFBQTRCLENBR0EsS0FGQTVCLEVBQUE5RCxLQUFBeUYsTUFDQUMsS0FDQTlCLEVBQUEsRUFBQUMsRUFBQUMsRUFBQTNPLE9BQUEwTyxFQUFBRCxFQUFBQSxJQUNBMkIsRUFBQXpCLEVBQUFGLEdBQ0EsSUFHQTVELEtBQUEwSSxVQUFBbkQsR0FDQXZGLEtBQUFpSCxLQUFBMUIsR0FHQUcsRUFBQTVJLEtBQUF5SSxHQUVBLE9BQUFHLElBQ0E3UCxLQUFBbUssTUFDQUEsS0FBQXlGLE1BQUF0USxRQUFBNkssS0FBQTRFLE9BQUFPLE1BbkJBLE9Bb0JBbkYsS0FBQStHLFFBS0F4QyxFQUFBL0IsVUFBQW1HLFVBQUEsU0FBQWhSLEdBRUEsSUFEQSxHQUFBa0ssR0FDQSxTQUFBbEssRUFBQWdSLFdBQ0FoUixFQUFBQSxFQUFBakIsVUFHQSxLQURBbUwsRUFBQWxLLEVBQUFnUixVQUNBaFIsRUFBQUEsRUFBQWlSLGNBQ0EvRyxHQUFBbEssRUFBQWdSLFNBRUEsT0FBQTlHLElBR0EwQyxFQUFBL0IsVUFBQWtHLFVBQUEsU0FBQW5ELEdBQ0EsR0FBQTNELEdBQUFxRCxFQUFBcEQsRUFBQWdILEVBQUFDLENBTUEsT0FMQTdELEdBQUFNLEVBQUE5SixhQUFBLG9CQUFBdUUsS0FBQTRFLE9BQUFLLE9BQ0E2RCxFQUFBdFQsT0FBQUMsWUFDQW9ULEVBQUFDLEVBQUFDLEtBQUFDLElBQUFoSixLQUFBckksUUFBQTRMLGFBQUF2RCxLQUFBNkUsT0FBQXZCLGVBQUEyQixFQUNBcEQsRUFBQTdCLEtBQUEySSxVQUFBcEQsR0FDQTNELEVBQUFDLEVBQUEwRCxFQUFBaEMsYUFDQXNGLEdBQUFoSCxHQUFBRCxHQUFBa0gsR0FHQXZFLEVBQUEvQixVQUFBcUMsS0FBQSxXQUNBLE1BQUEsT0FBQTdFLEtBQUFpSixNQUFBakosS0FBQWlKLE1BQUFqSixLQUFBaUosTUFBQSxHQUFBbEgsSUFHQXdDLEVBQUEvQixVQUFBcUQsU0FBQSxXQUNBLE9BQUE3RixLQUFBNEUsT0FBQU0sUUFBQWxGLEtBQUE2RSxPQUFBL0IsU0FBQW9HLFVBQUFDLFlBR0E1RSxNQUlBMU8sS0FBQW1LLE9Gem1CQSxHQUFBdUUsTUFBQWMsT0FFQTdQLE9BQUFvRSxpQkFBQSxPQUFBLFdBQ0EsR0FBQXdQLEdBQUEvVSxTQUFBeUIsZUFBQSxNQUdBVCx1QkFBQStULEdBRUFuVixxQkFHQXVCLE9BQUE2VCxTQUFBLFdBQ0FoVSxzQkFBQStULEdBQ0FuVix3QkFFQSIsImZpbGUiOiJhbGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBTaXRlIGNvZGVcbiAqL1xubmV3IFdPVygpLmluaXQoKTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgdmFyIHRvcE5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmF2XCIpO1xuICBcblxuICBjaGFuZ2VCYWNrZ3JvdW5kQ29sb3IodG9wTmF2KTtcbiAgXG4gIENhcm91c2VsSW5WaWV3cG9ydCgpXG4gIFxuICAvLyBPbiBzY3JvbGwgYWN0aW9uc1xuICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICBjaGFuZ2VCYWNrZ3JvdW5kQ29sb3IodG9wTmF2KTtcbiAgICBDYXJvdXNlbEluVmlld3BvcnQoKTtcbiAgfVxufSwgZmFsc2UpXG5cbmZ1bmN0aW9uIENhcm91c2VsSW5WaWV3cG9ydCgpIHtcbiAgXG4gIHZhciBxb3V0ZXMgPSBnZXRDaGlsZHJlbk9mKCdxdW90ZXMnKSxcbiAgICAgIHF1b3RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5xdW90ZS1wcm9ncmVzc1wiKTtcbiAgICAgIFxuICBpZiAodmVyZ2UuaW5WaWV3cG9ydChxdW90ZSkpIHtcbiAgICBDYXJvdXNlbChxb3V0ZXMsIDE1MDAwLCAwKTtcbiAgICBjb25zb2xlLmxvZyh2ZXJnZS5pblZpZXdwb3J0KHF1b3RlKSlcbiAgfSBcbn1cblxuZnVuY3Rpb24gQ2Fyb3VzZWwoZSxzLGMsbSxpKSB7XG4gIHZhciBtID0gZS5sZW5ndGgtMSxcbiAgICAgIGMgPSBjfHwwO1xuICAgICAgXG4gIFxuICBmdW5jdGlvbiBmKCkge1xuICAgIGZvcihpPW07fmk7aS0tKWVbaV0uY2xhc3NOYW1lPWk9PWMgPyBcInRcIjpcIlwiO2M9KytjJShtKzEpO1xuICB9IFxuICBmKCk7XG4gIHNldEludGVydmFsKGYscyk7XG59XG5cbmZ1bmN0aW9uIGNoYW5nZUJhY2tncm91bmRDb2xvcihpZCkge1xuICB2YXIgeSA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICBpZiAoeSA+IDIwKSB7XG4gICAgaWQuY2xhc3NOYW1lID0gXCJmaXhlZFwiOyBcbiAgfSBlbHNlIHsgICAgICBcbiAgICBpZC5jbGFzc05hbWUgPSBcIlwiOyAgICAgIFxuICB9XG59XG5cbmZ1bmN0aW9uIGdldENoaWxkcmVuT2YoaWQpIHsgXG4gIHJldHVybiBbXS5maWx0ZXIuY2FsbChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuY2hpbGROb2RlcywgZnVuY3Rpb24oeSkge1xuICAgIHJldHVybiAoeS5ub2RlVHlwZSA9PT0gMSlcbiAgfSk7IFxufTsiLCIvKiEgUGljdHVyZWZpbGwgLSB2Mi4yLjAgLSAyMDE0LTEwLTMwXG4qIGh0dHA6Ly9zY290dGplaGwuZ2l0aHViLmlvL3BpY3R1cmVmaWxsXG4qIENvcHlyaWdodCAoYykgMjAxNCBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRqZWhsL3BpY3R1cmVmaWxsL2Jsb2IvbWFzdGVyL0F1dGhvcnMudHh0OyBMaWNlbnNlZCBNSVQgKi9cbi8qISBtYXRjaE1lZGlhKCkgcG9seWZpbGwgLSBUZXN0IGEgQ1NTIG1lZGlhIHR5cGUvcXVlcnkgaW4gSlMuIEF1dGhvcnMgJiBjb3B5cmlnaHQgKGMpIDIwMTI6IFNjb3R0IEplaGwsIFBhdWwgSXJpc2gsIE5pY2hvbGFzIFpha2FzLCBEYXZpZCBLbmlnaHQuIER1YWwgTUlUL0JTRCBsaWNlbnNlICovXG5cbndpbmRvdy5tYXRjaE1lZGlhIHx8ICh3aW5kb3cubWF0Y2hNZWRpYSA9IGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAvLyBGb3IgYnJvd3NlcnMgdGhhdCBzdXBwb3J0IG1hdGNoTWVkaXVtIGFwaSBzdWNoIGFzIElFIDkgYW5kIHdlYmtpdFxuICB2YXIgc3R5bGVNZWRpYSA9ICh3aW5kb3cuc3R5bGVNZWRpYSB8fCB3aW5kb3cubWVkaWEpO1xuXG4gIC8vIEZvciB0aG9zZSB0aGF0IGRvbid0IHN1cHBvcnQgbWF0Y2hNZWRpdW1cbiAgaWYgKCFzdHlsZU1lZGlhKSB7XG4gICAgdmFyIHN0eWxlICAgICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKSxcbiAgICAgIHNjcmlwdCAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdLFxuICAgICAgaW5mbyAgICAgICAgPSBudWxsO1xuXG4gICAgc3R5bGUudHlwZSAgPSAndGV4dC9jc3MnO1xuICAgIHN0eWxlLmlkICAgID0gJ21hdGNobWVkaWFqcy10ZXN0JztcblxuICAgIHNjcmlwdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzdHlsZSwgc2NyaXB0KTtcblxuICAgIC8vICdzdHlsZS5jdXJyZW50U3R5bGUnIGlzIHVzZWQgYnkgSUUgPD0gOCBhbmQgJ3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlJyBmb3IgYWxsIG90aGVyIGJyb3dzZXJzXG4gICAgaW5mbyA9ICgnZ2V0Q29tcHV0ZWRTdHlsZScgaW4gd2luZG93KSAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShzdHlsZSwgbnVsbCkgfHwgc3R5bGUuY3VycmVudFN0eWxlO1xuXG4gICAgc3R5bGVNZWRpYSA9IHtcbiAgICAgIG1hdGNoTWVkaXVtOiBmdW5jdGlvbihtZWRpYSkge1xuICAgICAgICB2YXIgdGV4dCA9ICdAbWVkaWEgJyArIG1lZGlhICsgJ3sgI21hdGNobWVkaWFqcy10ZXN0IHsgd2lkdGg6IDFweDsgfSB9JztcblxuICAgICAgICAvLyAnc3R5bGUuc3R5bGVTaGVldCcgaXMgdXNlZCBieSBJRSA8PSA4IGFuZCAnc3R5bGUudGV4dENvbnRlbnQnIGZvciBhbGwgb3RoZXIgYnJvd3NlcnNcbiAgICAgICAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICAgICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSB0ZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRlc3QgaWYgbWVkaWEgcXVlcnkgaXMgdHJ1ZSBvciBmYWxzZVxuICAgICAgICByZXR1cm4gaW5mby53aWR0aCA9PT0gJzFweCc7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbihtZWRpYSkge1xuICAgIHJldHVybiB7XG4gICAgICBtYXRjaGVzOiBzdHlsZU1lZGlhLm1hdGNoTWVkaXVtKG1lZGlhIHx8ICdhbGwnKSxcbiAgICAgIG1lZGlhOiBtZWRpYSB8fCAnYWxsJ1xuICAgIH07XG4gIH07XG59KCkpO1xuLyohIFBpY3R1cmVmaWxsIC0gUmVzcG9uc2l2ZSBJbWFnZXMgdGhhdCB3b3JrIHRvZGF5LlxuKiAgQXV0aG9yOiBTY290dCBKZWhsLCBGaWxhbWVudCBHcm91cCwgMjAxMiAoIG5ldyBwcm9wb3NhbCBpbXBsZW1lbnRlZCBieSBTaGF3biBKYW5zZXBhciApXG4qICBMaWNlbnNlOiBNSVQvR1BMdjJcbiogIFNwZWM6IGh0dHA6Ly9waWN0dXJlLnJlc3BvbnNpdmVpbWFnZXMub3JnL1xuKi9cbihmdW5jdGlvbiggdywgZG9jLCBpbWFnZSApIHtcbiAgLy8gRW5hYmxlIHN0cmljdCBtb2RlXG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8vIElmIHBpY3R1cmUgaXMgc3VwcG9ydGVkLCB3ZWxsLCB0aGF0J3MgYXdlc29tZS4gTGV0J3MgZ2V0IG91dHRhIGhlcmUuLi5cbiAgaWYgKCB3LkhUTUxQaWN0dXJlRWxlbWVudCApIHtcbiAgICB3LnBpY3R1cmVmaWxsID0gZnVuY3Rpb24oKSB7IH07XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gSFRNTCBzaGltfHYgaXQgZm9yIG9sZCBJRSAoSUU5IHdpbGwgc3RpbGwgbmVlZCB0aGUgSFRNTCB2aWRlbyB0YWcgd29ya2Fyb3VuZClcbiAgZG9jLmNyZWF0ZUVsZW1lbnQoIFwicGljdHVyZVwiICk7XG5cbiAgLy8gbG9jYWwgb2JqZWN0IGZvciBtZXRob2QgcmVmZXJlbmNlcyBhbmQgdGVzdGluZyBleHBvc3VyZVxuICB2YXIgcGYgPSB7fTtcblxuICAvLyBuYW1lc3BhY2VcbiAgcGYubnMgPSBcInBpY3R1cmVmaWxsXCI7XG5cbiAgLy8gc3Jjc2V0IHN1cHBvcnQgdGVzdFxuICAoZnVuY3Rpb24oKSB7XG4gICAgcGYuc3Jjc2V0U3VwcG9ydGVkID0gXCJzcmNzZXRcIiBpbiBpbWFnZTtcbiAgICBwZi5zaXplc1N1cHBvcnRlZCA9IFwic2l6ZXNcIiBpbiBpbWFnZTtcbiAgfSkoKTtcblxuICAvLyBqdXN0IGEgc3RyaW5nIHRyaW0gd29ya2Fyb3VuZFxuICBwZi50cmltID0gZnVuY3Rpb24oIHN0ciApIHtcbiAgICByZXR1cm4gc3RyLnRyaW0gPyBzdHIudHJpbSgpIDogc3RyLnJlcGxhY2UoIC9eXFxzK3xcXHMrJC9nLCBcIlwiICk7XG4gIH07XG5cbiAgLy8ganVzdCBhIHN0cmluZyBlbmRzV2l0aCB3b3JrYXJvdW5kXG4gIHBmLmVuZHNXaXRoID0gZnVuY3Rpb24oIHN0ciwgc3VmZml4ICkge1xuICAgIHJldHVybiBzdHIuZW5kc1dpdGggPyBzdHIuZW5kc1dpdGgoIHN1ZmZpeCApIDogc3RyLmluZGV4T2YoIHN1ZmZpeCwgc3RyLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGggKSAhPT0gLTE7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNob3J0Y3V0IG1ldGhvZCBmb3IgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYmFwcHNlYy9zcGVjcy9taXhlZGNvbnRlbnQvI3Jlc3RyaWN0cy1taXhlZC1jb250ZW50ICggZm9yIGVhc3kgb3ZlcnJpZGluZyBpbiB0ZXN0cyApXG4gICAqL1xuICBwZi5yZXN0cmljdHNNaXhlZENvbnRlbnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gXCJodHRwczpcIjtcbiAgfTtcbiAgLyoqXG4gICAqIFNob3J0Y3V0IG1ldGhvZCBmb3IgbWF0Y2hNZWRpYSAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxuICAgKi9cblxuICBwZi5tYXRjaGVzTWVkaWEgPSBmdW5jdGlvbiggbWVkaWEgKSB7XG4gICAgcmV0dXJuIHcubWF0Y2hNZWRpYSAmJiB3Lm1hdGNoTWVkaWEoIG1lZGlhICkubWF0Y2hlcztcbiAgfTtcblxuICAvLyBTaG9ydGN1dCBtZXRob2QgZm9yIGBkZXZpY2VQaXhlbFJhdGlvYCAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxuICBwZi5nZXREcHIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKCB3LmRldmljZVBpeGVsUmF0aW8gfHwgMSApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgd2lkdGggaW4gY3NzIHBpeGVsIHZhbHVlIGZyb20gYSBcImxlbmd0aFwiIHZhbHVlXG4gICAqIGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzcy12YWx1ZXMtMy8jbGVuZ3RoLXZhbHVlXG4gICAqL1xuICBwZi5nZXRXaWR0aEZyb21MZW5ndGggPSBmdW5jdGlvbiggbGVuZ3RoICkge1xuICAgIC8vIElmIGEgbGVuZ3RoIGlzIHNwZWNpZmllZCBhbmQgZG9lc27igJl0IGNvbnRhaW4gYSBwZXJjZW50YWdlLCBhbmQgaXQgaXMgZ3JlYXRlciB0aGFuIDAgb3IgdXNpbmcgYGNhbGNgLCB1c2UgaXQuIEVsc2UsIHVzZSB0aGUgYDEwMHZ3YCBkZWZhdWx0LlxuICAgIGxlbmd0aCA9IGxlbmd0aCAmJiBsZW5ndGguaW5kZXhPZiggXCIlXCIgKSA+IC0xID09PSBmYWxzZSAmJiAoIHBhcnNlRmxvYXQoIGxlbmd0aCApID4gMCB8fCBsZW5ndGguaW5kZXhPZiggXCJjYWxjKFwiICkgPiAtMSApID8gbGVuZ3RoIDogXCIxMDB2d1wiO1xuXG4gICAgLyoqXG4gICAgICogSWYgbGVuZ3RoIGlzIHNwZWNpZmllZCBpbiAgYHZ3YCB1bml0cywgdXNlIGAlYCBpbnN0ZWFkIHNpbmNlIHRoZSBkaXYgd2XigJlyZSBtZWFzdXJpbmdcbiAgICAgKiBpcyBpbmplY3RlZCBhdCB0aGUgdG9wIG9mIHRoZSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIFRPRE86IG1heWJlIHdlIHNob3VsZCBwdXQgdGhpcyBiZWhpbmQgYSBmZWF0dXJlIHRlc3QgZm9yIGB2d2A/XG4gICAgICovXG4gICAgbGVuZ3RoID0gbGVuZ3RoLnJlcGxhY2UoIFwidndcIiwgXCIlXCIgKTtcblxuICAgIC8vIENyZWF0ZSBhIGNhY2hlZCBlbGVtZW50IGZvciBnZXR0aW5nIGxlbmd0aCB2YWx1ZSB3aWR0aHNcbiAgICBpZiAoICFwZi5sZW5ndGhFbCApIHtcbiAgICAgIHBmLmxlbmd0aEVsID0gZG9jLmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcblxuICAgICAgLy8gUG9zaXRpb25pbmcgc3R5bGVzIGhlbHAgcHJldmVudCBwYWRkaW5nL21hcmdpbi93aWR0aCBvbiBgaHRtbGAgb3IgYGJvZHlgIGZyb20gdGhyb3dpbmcgY2FsY3VsYXRpb25zIG9mZi5cbiAgICAgIHBmLmxlbmd0aEVsLnN0eWxlLmNzc1RleHQgPSBcImJvcmRlcjowO2Rpc3BsYXk6YmxvY2s7Zm9udC1zaXplOjFlbTtsZWZ0OjA7bWFyZ2luOjA7cGFkZGluZzowO3Bvc2l0aW9uOmFic29sdXRlO3Zpc2liaWxpdHk6aGlkZGVuXCI7XG4gICAgfVxuXG4gICAgcGYubGVuZ3RoRWwuc3R5bGUud2lkdGggPSBsZW5ndGg7XG5cbiAgICBkb2MuYm9keS5hcHBlbmRDaGlsZChwZi5sZW5ndGhFbCk7XG5cbiAgICAvLyBBZGQgYSBjbGFzcywgc28gdGhhdCBldmVyeW9uZSBrbm93cyB3aGVyZSB0aGlzIGVsZW1lbnQgY29tZXMgZnJvbVxuICAgIHBmLmxlbmd0aEVsLmNsYXNzTmFtZSA9IFwiaGVscGVyLWZyb20tcGljdHVyZWZpbGwtanNcIjtcblxuICAgIGlmICggcGYubGVuZ3RoRWwub2Zmc2V0V2lkdGggPD0gMCApIHtcbiAgICAgIC8vIFNvbWV0aGluZyBoYXMgZ29uZSB3cm9uZy4gYGNhbGMoKWAgaXMgaW4gdXNlIGFuZCB1bnN1cHBvcnRlZCwgbW9zdCBsaWtlbHkuIERlZmF1bHQgdG8gYDEwMHZ3YCAoYDEwMCVgLCBmb3IgYnJvYWRlciBzdXBwb3J0Lik6XG4gICAgICBwZi5sZW5ndGhFbC5zdHlsZS53aWR0aCA9IGRvYy5kb2N1bWVudEVsZW1lbnQub2Zmc2V0V2lkdGggKyBcInB4XCI7XG4gICAgfVxuXG4gICAgdmFyIG9mZnNldFdpZHRoID0gcGYubGVuZ3RoRWwub2Zmc2V0V2lkdGg7XG5cbiAgICBkb2MuYm9keS5yZW1vdmVDaGlsZCggcGYubGVuZ3RoRWwgKTtcblxuICAgIHJldHVybiBvZmZzZXRXaWR0aDtcbiAgfTtcblxuICAvLyBjb250YWluZXIgb2Ygc3VwcG9ydGVkIG1pbWUgdHlwZXMgdGhhdCBvbmUgbWlnaHQgbmVlZCB0byBxdWFsaWZ5IGJlZm9yZSB1c2luZ1xuICBwZi50eXBlcyA9ICB7fTtcblxuICAvLyBBZGQgc3VwcG9ydCBmb3Igc3RhbmRhcmQgbWltZSB0eXBlc1xuICBwZi50eXBlc1sgXCJpbWFnZS9qcGVnXCIgXSA9IHRydWU7XG4gIHBmLnR5cGVzWyBcImltYWdlL2dpZlwiIF0gPSB0cnVlO1xuICBwZi50eXBlc1sgXCJpbWFnZS9wbmdcIiBdID0gdHJ1ZTtcblxuICAvLyB0ZXN0IHN2ZyBzdXBwb3J0XG4gIHBmLnR5cGVzWyBcImltYWdlL3N2Zyt4bWxcIiBdID0gZG9jLmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoXCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0ltYWdlXCIsIFwiMS4xXCIpO1xuXG4gIC8vIHRlc3Qgd2VicCBzdXBwb3J0LCBvbmx5IHdoZW4gdGhlIG1hcmt1cCBjYWxscyBmb3IgaXRcbiAgcGYudHlwZXNbIFwiaW1hZ2Uvd2VicFwiIF0gPSBmdW5jdGlvbigpIHtcbiAgICAvLyBiYXNlZCBvbiBNb2Rlcm5penIncyBsb3NzbGVzcyBpbWctd2VicCB0ZXN0XG4gICAgLy8gbm90ZTogYXN5bmNocm9ub3VzXG4gICAgdmFyIHR5cGUgPSBcImltYWdlL3dlYnBcIjtcblxuICAgIGltYWdlLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIHBmLnR5cGVzWyB0eXBlIF0gPSBmYWxzZTtcbiAgICAgIHBpY3R1cmVmaWxsKCk7XG4gICAgfTtcbiAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHBmLnR5cGVzWyB0eXBlIF0gPSBpbWFnZS53aWR0aCA9PT0gMTtcbiAgICAgIHBpY3R1cmVmaWxsKCk7XG4gICAgfTtcbiAgICBpbWFnZS5zcmMgPSBcImRhdGE6aW1hZ2Uvd2VicDtiYXNlNjQsVWtsR1JoNEFBQUJYUlVKUVZsQTRUQkVBQUFBdkFBQUFBQWZRLy83M3YvK0JpT2gvQUFBPVwiO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUYWtlcyBhIHNvdXJjZSBlbGVtZW50IGFuZCBjaGVja3MgaWYgaXRzIHR5cGUgYXR0cmlidXRlIGlzIHByZXNlbnQgYW5kIGlmIHNvLCBzdXBwb3J0ZWRcbiAgICogTm90ZTogZm9yIHR5cGUgdGVzdHMgdGhhdCByZXF1aXJlIGEgYXN5bmMgbG9naWMsXG4gICAqIHlvdSBjYW4gZGVmaW5lIHRoZW0gYXMgYSBmdW5jdGlvbiB0aGF0J2xsIHJ1biBvbmx5IGlmIHRoYXQgdHlwZSBuZWVkcyB0byBiZSB0ZXN0ZWQuIEp1c3QgbWFrZSB0aGUgdGVzdCBmdW5jdGlvbiBjYWxsIHBpY3R1cmVmaWxsIGFnYWluIHdoZW4gaXQgaXMgY29tcGxldGUuXG4gICAqIHNlZSB0aGUgYXN5bmMgd2VicCB0ZXN0IGFib3ZlIGZvciBleGFtcGxlXG4gICAqL1xuICBwZi52ZXJpZnlUeXBlU3VwcG9ydCA9IGZ1bmN0aW9uKCBzb3VyY2UgKSB7XG4gICAgdmFyIHR5cGUgPSBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcInR5cGVcIiApO1xuICAgIC8vIGlmIHR5cGUgYXR0cmlidXRlIGV4aXN0cywgcmV0dXJuIHRlc3QgcmVzdWx0LCBvdGhlcndpc2UgcmV0dXJuIHRydWVcbiAgICBpZiAoIHR5cGUgPT09IG51bGwgfHwgdHlwZSA9PT0gXCJcIiApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpZiB0aGUgdHlwZSB0ZXN0IGlzIGEgZnVuY3Rpb24sIHJ1biBpdCBhbmQgcmV0dXJuIFwicGVuZGluZ1wiIHN0YXR1cy4gVGhlIGZ1bmN0aW9uIHdpbGwgcmVydW4gcGljdHVyZWZpbGwgb24gcGVuZGluZyBlbGVtZW50cyBvbmNlIGZpbmlzaGVkLlxuICAgICAgaWYgKCB0eXBlb2YoIHBmLnR5cGVzWyB0eXBlIF0gKSA9PT0gXCJmdW5jdGlvblwiICkge1xuICAgICAgICBwZi50eXBlc1sgdHlwZSBdKCk7XG4gICAgICAgIHJldHVybiBcInBlbmRpbmdcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwZi50eXBlc1sgdHlwZSBdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBQYXJzZXMgYW4gaW5kaXZpZHVhbCBgc2l6ZWAgYW5kIHJldHVybnMgdGhlIGxlbmd0aCwgYW5kIG9wdGlvbmFsIG1lZGlhIHF1ZXJ5XG4gIHBmLnBhcnNlU2l6ZSA9IGZ1bmN0aW9uKCBzb3VyY2VTaXplU3RyICkge1xuICAgIHZhciBtYXRjaCA9IC8oXFwoW14pXStcXCkpP1xccyooLispL2cuZXhlYyggc291cmNlU2l6ZVN0ciApO1xuICAgIHJldHVybiB7XG4gICAgICBtZWRpYTogbWF0Y2ggJiYgbWF0Y2hbMV0sXG4gICAgICBsZW5ndGg6IG1hdGNoICYmIG1hdGNoWzJdXG4gICAgfTtcbiAgfTtcblxuICAvLyBUYWtlcyBhIHN0cmluZyBvZiBzaXplcyBhbmQgcmV0dXJucyB0aGUgd2lkdGggaW4gcGl4ZWxzIGFzIGEgbnVtYmVyXG4gIHBmLmZpbmRXaWR0aEZyb21Tb3VyY2VTaXplID0gZnVuY3Rpb24oIHNvdXJjZVNpemVMaXN0U3RyICkge1xuICAgIC8vIFNwbGl0IHVwIHNvdXJjZSBzaXplIGxpc3QsIGllICggbWF4LXdpZHRoOiAzMGVtICkgMTAwJSwgKCBtYXgtd2lkdGg6IDUwZW0gKSA1MCUsIDMzJVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIChtaW4td2lkdGg6MzBlbSkgY2FsYygzMCUgLSAxNXB4KVxuICAgIHZhciBzb3VyY2VTaXplTGlzdCA9IHBmLnRyaW0oIHNvdXJjZVNpemVMaXN0U3RyICkuc3BsaXQoIC9cXHMqLFxccyovICksXG4gICAgICB3aW5uaW5nTGVuZ3RoO1xuXG4gICAgZm9yICggdmFyIGkgPSAwLCBsZW4gPSBzb3VyY2VTaXplTGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgIC8vIE1hdGNoIDxtZWRpYS1jb25kaXRpb24+PyBsZW5ndGgsIGllICggbWluLXdpZHRoOiA1MGVtICkgMTAwJVxuICAgICAgdmFyIHNvdXJjZVNpemUgPSBzb3VyY2VTaXplTGlzdFsgaSBdLFxuICAgICAgICAvLyBTcGxpdCBcIiggbWluLXdpZHRoOiA1MGVtICkgMTAwJVwiIGludG8gc2VwYXJhdGUgc3RyaW5nc1xuICAgICAgICBwYXJzZWRTaXplID0gcGYucGFyc2VTaXplKCBzb3VyY2VTaXplICksXG4gICAgICAgIGxlbmd0aCA9IHBhcnNlZFNpemUubGVuZ3RoLFxuICAgICAgICBtZWRpYSA9IHBhcnNlZFNpemUubWVkaWE7XG5cbiAgICAgIGlmICggIWxlbmd0aCApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoICFtZWRpYSB8fCBwZi5tYXRjaGVzTWVkaWEoIG1lZGlhICkgKSB7XG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIG1lZGlhIHF1ZXJ5IG9yIGl0IG1hdGNoZXMsIGNob29zZSB0aGlzIGFzIG91ciB3aW5uaW5nIGxlbmd0aFxuICAgICAgICAvLyBhbmQgZW5kIGFsZ29yaXRobVxuICAgICAgICB3aW5uaW5nTGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBwYXNzIHRoZSBsZW5ndGggdG8gYSBtZXRob2QgdGhhdCBjYW4gcHJvcGVybHkgZGV0ZXJtaW5lIGxlbmd0aFxuICAgIC8vIGluIHBpeGVscyBiYXNlZCBvbiB0aGVzZSBmb3JtYXRzOiBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MtdmFsdWVzLTMvI2xlbmd0aC12YWx1ZVxuICAgIHJldHVybiBwZi5nZXRXaWR0aEZyb21MZW5ndGgoIHdpbm5pbmdMZW5ndGggKTtcbiAgfTtcblxuICBwZi5wYXJzZVNyY3NldCA9IGZ1bmN0aW9uKCBzcmNzZXQgKSB7XG4gICAgLyoqXG4gICAgICogQSBsb3Qgb2YgdGhpcyB3YXMgcHVsbGVkIGZyb20gQm9yaXMgU211c+KAmSBwYXJzZXIgZm9yIHRoZSBub3ctZGVmdW5jdCBXSEFUV0cgYHNyY3NldGBcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vYm9yaXNtdXMvc3Jjc2V0LXBvbHlmaWxsL2Jsb2IvbWFzdGVyL2pzL3NyY3NldC1pbmZvLmpzXG4gICAgICpcbiAgICAgKiAxLiBMZXQgaW5wdXQgKGBzcmNzZXRgKSBiZSB0aGUgdmFsdWUgcGFzc2VkIHRvIHRoaXMgYWxnb3JpdGhtLlxuICAgICAqIDIuIExldCBwb3NpdGlvbiBiZSBhIHBvaW50ZXIgaW50byBpbnB1dCwgaW5pdGlhbGx5IHBvaW50aW5nIGF0IHRoZSBzdGFydCBvZiB0aGUgc3RyaW5nLlxuICAgICAqIDMuIExldCByYXcgY2FuZGlkYXRlcyBiZSBhbiBpbml0aWFsbHkgZW1wdHkgb3JkZXJlZCBsaXN0IG9mIFVSTHMgd2l0aCBhc3NvY2lhdGVkXG4gICAgICogICAgdW5wYXJzZWQgZGVzY3JpcHRvcnMuIFRoZSBvcmRlciBvZiBlbnRyaWVzIGluIHRoZSBsaXN0IGlzIHRoZSBvcmRlciBpbiB3aGljaCBlbnRyaWVzXG4gICAgICogICAgYXJlIGFkZGVkIHRvIHRoZSBsaXN0LlxuICAgICAqL1xuICAgIHZhciBjYW5kaWRhdGVzID0gW107XG5cbiAgICB3aGlsZSAoIHNyY3NldCAhPT0gXCJcIiApIHtcbiAgICAgIHNyY3NldCA9IHNyY3NldC5yZXBsYWNlKCAvXlxccysvZywgXCJcIiApO1xuXG4gICAgICAvLyA1LiBDb2xsZWN0IGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyB0aGF0IGFyZSBub3Qgc3BhY2UgY2hhcmFjdGVycywgYW5kIGxldCB0aGF0IGJlIHVybC5cbiAgICAgIHZhciBwb3MgPSBzcmNzZXQuc2VhcmNoKC9cXHMvZyksXG4gICAgICAgIHVybCwgZGVzY3JpcHRvciA9IG51bGw7XG5cbiAgICAgIGlmICggcG9zICE9PSAtMSApIHtcbiAgICAgICAgdXJsID0gc3Jjc2V0LnNsaWNlKCAwLCBwb3MgKTtcblxuICAgICAgICB2YXIgbGFzdCA9IHVybC5zbGljZSgtMSk7XG5cbiAgICAgICAgLy8gNi4gSWYgdXJsIGVuZHMgd2l0aCBhIFUrMDAyQyBDT01NQSBjaGFyYWN0ZXIgKCwpLCByZW1vdmUgdGhhdCBjaGFyYWN0ZXIgZnJvbSB1cmxcbiAgICAgICAgLy8gYW5kIGxldCBkZXNjcmlwdG9ycyBiZSB0aGUgZW1wdHkgc3RyaW5nLiBPdGhlcndpc2UsIGZvbGxvdyB0aGVzZSBzdWJzdGVwc1xuICAgICAgICAvLyA2LjEuIElmIHVybCBpcyBlbXB0eSwgdGhlbiBqdW1wIHRvIHRoZSBzdGVwIGxhYmVsZWQgZGVzY3JpcHRvciBwYXJzZXIuXG5cbiAgICAgICAgaWYgKCBsYXN0ID09PSBcIixcIiB8fCB1cmwgPT09IFwiXCIgKSB7XG4gICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoIC8sKyQvLCBcIlwiICk7XG4gICAgICAgICAgZGVzY3JpcHRvciA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgc3Jjc2V0ID0gc3Jjc2V0LnNsaWNlKCBwb3MgKyAxICk7XG5cbiAgICAgICAgLy8gNi4yLiBDb2xsZWN0IGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyB0aGF0IGFyZSBub3QgVSswMDJDIENPTU1BIGNoYXJhY3RlcnMgKCwpLCBhbmRcbiAgICAgICAgLy8gbGV0IHRoYXQgYmUgZGVzY3JpcHRvcnMuXG4gICAgICAgIGlmICggZGVzY3JpcHRvciA9PT0gbnVsbCApIHtcbiAgICAgICAgICB2YXIgZGVzY3BvcyA9IHNyY3NldC5pbmRleE9mKCBcIixcIiApO1xuICAgICAgICAgIGlmICggZGVzY3BvcyAhPT0gLTEgKSB7XG4gICAgICAgICAgICBkZXNjcmlwdG9yID0gc3Jjc2V0LnNsaWNlKCAwLCBkZXNjcG9zICk7XG4gICAgICAgICAgICBzcmNzZXQgPSBzcmNzZXQuc2xpY2UoIGRlc2Nwb3MgKyAxICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlc2NyaXB0b3IgPSBzcmNzZXQ7XG4gICAgICAgICAgICBzcmNzZXQgPSBcIlwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXJsID0gc3Jjc2V0O1xuICAgICAgICBzcmNzZXQgPSBcIlwiO1xuICAgICAgfVxuXG4gICAgICAvLyA3LiBBZGQgdXJsIHRvIHJhdyBjYW5kaWRhdGVzLCBhc3NvY2lhdGVkIHdpdGggZGVzY3JpcHRvcnMuXG4gICAgICBpZiAoIHVybCB8fCBkZXNjcmlwdG9yICkge1xuICAgICAgICBjYW5kaWRhdGVzLnB1c2goe1xuICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgIGRlc2NyaXB0b3I6IGRlc2NyaXB0b3JcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjYW5kaWRhdGVzO1xuICB9O1xuXG4gIHBmLnBhcnNlRGVzY3JpcHRvciA9IGZ1bmN0aW9uKCBkZXNjcmlwdG9yLCBzaXplc2F0dHIgKSB7XG4gICAgLy8gMTEuIERlc2NyaXB0b3IgcGFyc2VyOiBMZXQgY2FuZGlkYXRlcyBiZSBhbiBpbml0aWFsbHkgZW1wdHkgc291cmNlIHNldC4gVGhlIG9yZGVyIG9mIGVudHJpZXMgaW4gdGhlIGxpc3RcbiAgICAvLyBpcyB0aGUgb3JkZXIgaW4gd2hpY2ggZW50cmllcyBhcmUgYWRkZWQgdG8gdGhlIGxpc3QuXG4gICAgdmFyIHNpemVzID0gc2l6ZXNhdHRyIHx8IFwiMTAwdndcIixcbiAgICAgIHNpemVEZXNjcmlwdG9yID0gZGVzY3JpcHRvciAmJiBkZXNjcmlwdG9yLnJlcGxhY2UoIC8oXlxccyt8XFxzKyQpL2csIFwiXCIgKSxcbiAgICAgIHdpZHRoSW5Dc3NQaXhlbHMgPSBwZi5maW5kV2lkdGhGcm9tU291cmNlU2l6ZSggc2l6ZXMgKSxcbiAgICAgIHJlc0NhbmRpZGF0ZTtcblxuICAgICAgaWYgKCBzaXplRGVzY3JpcHRvciApIHtcbiAgICAgICAgdmFyIHNwbGl0RGVzY3JpcHRvciA9IHNpemVEZXNjcmlwdG9yLnNwbGl0KFwiIFwiKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gc3BsaXREZXNjcmlwdG9yLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdmFyIGN1cnIgPSBzcGxpdERlc2NyaXB0b3JbIGkgXSxcbiAgICAgICAgICAgIGxhc3RjaGFyID0gY3VyciAmJiBjdXJyLnNsaWNlKCBjdXJyLmxlbmd0aCAtIDEgKTtcblxuICAgICAgICAgIGlmICggKCBsYXN0Y2hhciA9PT0gXCJoXCIgfHwgbGFzdGNoYXIgPT09IFwid1wiICkgJiYgIXBmLnNpemVzU3VwcG9ydGVkICkge1xuICAgICAgICAgICAgcmVzQ2FuZGlkYXRlID0gcGFyc2VGbG9hdCggKCBwYXJzZUludCggY3VyciwgMTAgKSAvIHdpZHRoSW5Dc3NQaXhlbHMgKSApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIGxhc3RjaGFyID09PSBcInhcIiApIHtcbiAgICAgICAgICAgIHZhciByZXMgPSBjdXJyICYmIHBhcnNlRmxvYXQoIGN1cnIsIDEwICk7XG4gICAgICAgICAgICByZXNDYW5kaWRhdGUgPSByZXMgJiYgIWlzTmFOKCByZXMgKSA/IHJlcyA6IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgcmV0dXJuIHJlc0NhbmRpZGF0ZSB8fCAxO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUYWtlcyBhIHNyY3NldCBpbiB0aGUgZm9ybSBvZiB1cmwvXG4gICAqIGV4LiBcImltYWdlcy9waWMtbWVkaXVtLnBuZyAxeCwgaW1hZ2VzL3BpYy1tZWRpdW0tMngucG5nIDJ4XCIgb3JcbiAgICogICAgIFwiaW1hZ2VzL3BpYy1tZWRpdW0ucG5nIDQwMHcsIGltYWdlcy9waWMtbWVkaXVtLTJ4LnBuZyA4MDB3XCIgb3JcbiAgICogICAgIFwiaW1hZ2VzL3BpYy1zbWFsbC5wbmdcIlxuICAgKiBHZXQgYW4gYXJyYXkgb2YgaW1hZ2UgY2FuZGlkYXRlcyBpbiB0aGUgZm9ybSBvZlxuICAgKiAgICAgIHt1cmw6IFwiL2Zvby9iYXIucG5nXCIsIHJlc29sdXRpb246IDF9XG4gICAqIHdoZXJlIHJlc29sdXRpb24gaXMgaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy0zLyNyZXNvbHV0aW9uLXZhbHVlXG4gICAqIElmIHNpemVzIGlzIHNwZWNpZmllZCwgcmVzb2x1dGlvbiBpcyBjYWxjdWxhdGVkXG4gICAqL1xuICBwZi5nZXRDYW5kaWRhdGVzRnJvbVNvdXJjZVNldCA9IGZ1bmN0aW9uKCBzcmNzZXQsIHNpemVzICkge1xuICAgIHZhciBjYW5kaWRhdGVzID0gcGYucGFyc2VTcmNzZXQoIHNyY3NldCApLFxuICAgICAgZm9ybWF0dGVkQ2FuZGlkYXRlcyA9IFtdO1xuXG4gICAgZm9yICggdmFyIGkgPSAwLCBsZW4gPSBjYW5kaWRhdGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xuICAgICAgdmFyIGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbIGkgXTtcblxuICAgICAgZm9ybWF0dGVkQ2FuZGlkYXRlcy5wdXNoKHtcbiAgICAgICAgdXJsOiBjYW5kaWRhdGUudXJsLFxuICAgICAgICByZXNvbHV0aW9uOiBwZi5wYXJzZURlc2NyaXB0b3IoIGNhbmRpZGF0ZS5kZXNjcmlwdG9yLCBzaXplcyApXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGZvcm1hdHRlZENhbmRpZGF0ZXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIGlmIGl0J3MgYW4gaW1nIGVsZW1lbnQgYW5kIGl0IGhhcyBhIHNyY3NldCBwcm9wZXJ0eSxcbiAgICogd2UgbmVlZCB0byByZW1vdmUgdGhlIGF0dHJpYnV0ZSBzbyB3ZSBjYW4gbWFuaXB1bGF0ZSBzcmNcbiAgICogKHRoZSBwcm9wZXJ0eSdzIGV4aXN0ZW5jZSBpbmZlcnMgbmF0aXZlIHNyY3NldCBzdXBwb3J0LCBhbmQgYSBzcmNzZXQtc3VwcG9ydGluZyBicm93c2VyIHdpbGwgcHJpb3JpdGl6ZSBzcmNzZXQncyB2YWx1ZSBvdmVyIG91ciB3aW5uaW5nIHBpY3R1cmUgY2FuZGlkYXRlKVxuICAgKiB0aGlzIG1vdmVzIHNyY3NldCdzIHZhbHVlIHRvIG1lbW9yeSBmb3IgbGF0ZXIgdXNlIGFuZCByZW1vdmVzIHRoZSBhdHRyXG4gICAqL1xuICBwZi5kb2RnZVNyY3NldCA9IGZ1bmN0aW9uKCBpbWcgKSB7XG4gICAgaWYgKCBpbWcuc3Jjc2V0ICkge1xuICAgICAgaW1nWyBwZi5ucyBdLnNyY3NldCA9IGltZy5zcmNzZXQ7XG4gICAgICBpbWcucmVtb3ZlQXR0cmlidXRlKCBcInNyY3NldFwiICk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEFjY2VwdCBhIHNvdXJjZSBvciBpbWcgZWxlbWVudCBhbmQgcHJvY2VzcyBpdHMgc3Jjc2V0IGFuZCBzaXplcyBhdHRyc1xuICBwZi5wcm9jZXNzU291cmNlU2V0ID0gZnVuY3Rpb24oIGVsICkge1xuICAgIHZhciBzcmNzZXQgPSBlbC5nZXRBdHRyaWJ1dGUoIFwic3Jjc2V0XCIgKSxcbiAgICAgIHNpemVzID0gZWwuZ2V0QXR0cmlidXRlKCBcInNpemVzXCIgKSxcbiAgICAgIGNhbmRpZGF0ZXMgPSBbXTtcblxuICAgIC8vIGlmIGl0J3MgYW4gaW1nIGVsZW1lbnQsIHVzZSB0aGUgY2FjaGVkIHNyY3NldCBwcm9wZXJ0eSAoZGVmaW5lZCBvciBub3QpXG4gICAgaWYgKCBlbC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIklNR1wiICYmIGVsWyBwZi5ucyBdICYmIGVsWyBwZi5ucyBdLnNyY3NldCApIHtcbiAgICAgIHNyY3NldCA9IGVsWyBwZi5ucyBdLnNyY3NldDtcbiAgICB9XG5cbiAgICBpZiAoIHNyY3NldCApIHtcbiAgICAgIGNhbmRpZGF0ZXMgPSBwZi5nZXRDYW5kaWRhdGVzRnJvbVNvdXJjZVNldCggc3Jjc2V0LCBzaXplcyApO1xuICAgIH1cbiAgICByZXR1cm4gY2FuZGlkYXRlcztcbiAgfTtcblxuICBwZi5hcHBseUJlc3RDYW5kaWRhdGUgPSBmdW5jdGlvbiggY2FuZGlkYXRlcywgcGljSW1nICkge1xuICAgIHZhciBjYW5kaWRhdGUsXG4gICAgICBsZW5ndGgsXG4gICAgICBiZXN0Q2FuZGlkYXRlO1xuXG4gICAgY2FuZGlkYXRlcy5zb3J0KCBwZi5hc2NlbmRpbmdTb3J0ICk7XG5cbiAgICBsZW5ndGggPSBjYW5kaWRhdGVzLmxlbmd0aDtcbiAgICBiZXN0Q2FuZGlkYXRlID0gY2FuZGlkYXRlc1sgbGVuZ3RoIC0gMSBdO1xuXG4gICAgZm9yICggdmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgICBjYW5kaWRhdGUgPSBjYW5kaWRhdGVzWyBpIF07XG4gICAgICBpZiAoIGNhbmRpZGF0ZS5yZXNvbHV0aW9uID49IHBmLmdldERwcigpICkge1xuICAgICAgICBiZXN0Q2FuZGlkYXRlID0gY2FuZGlkYXRlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIGJlc3RDYW5kaWRhdGUgJiYgIXBmLmVuZHNXaXRoKCBwaWNJbWcuc3JjLCBiZXN0Q2FuZGlkYXRlLnVybCApICkge1xuICAgICAgaWYgKCBwZi5yZXN0cmljdHNNaXhlZENvbnRlbnQoKSAmJiBiZXN0Q2FuZGlkYXRlLnVybC5zdWJzdHIoMCwgXCJodHRwOlwiLmxlbmd0aCkudG9Mb3dlckNhc2UoKSA9PT0gXCJodHRwOlwiICkge1xuICAgICAgICBpZiAoIHR5cGVvZiBjb25zb2xlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCBcIkJsb2NrZWQgbWl4ZWQgY29udGVudCBpbWFnZSBcIiArIGJlc3RDYW5kaWRhdGUudXJsICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBpY0ltZy5zcmMgPSBiZXN0Q2FuZGlkYXRlLnVybDtcbiAgICAgICAgLy8gY3VycmVudFNyYyBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5IHRvIG1hdGNoXG4gICAgICAgIC8vIGh0dHA6Ly9waWN0dXJlLnJlc3BvbnNpdmVpbWFnZXMub3JnLyN0aGUtaW1nLWVsZW1lbnRcbiAgICAgICAgcGljSW1nLmN1cnJlbnRTcmMgPSBwaWNJbWcuc3JjO1xuXG4gICAgICAgIHZhciBzdHlsZSA9IHBpY0ltZy5zdHlsZSB8fCB7fSxcbiAgICAgICAgICBXZWJraXRCYWNrZmFjZVZpc2liaWxpdHkgPSBcIndlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eVwiIGluIHN0eWxlLFxuICAgICAgICAgIGN1cnJlbnRab29tID0gc3R5bGUuem9vbTtcblxuICAgICAgICBpZiAoV2Via2l0QmFja2ZhY2VWaXNpYmlsaXR5KSB7IC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL3Njb3R0amVobC9waWN0dXJlZmlsbC9pc3N1ZXMvMzMyXG4gICAgICAgICAgc3R5bGUuem9vbSA9IFwiLjk5OVwiO1xuXG4gICAgICAgICAgV2Via2l0QmFja2ZhY2VWaXNpYmlsaXR5ID0gcGljSW1nLm9mZnNldFdpZHRoO1xuXG4gICAgICAgICAgc3R5bGUuem9vbSA9IGN1cnJlbnRab29tO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHBmLmFzY2VuZGluZ1NvcnQgPSBmdW5jdGlvbiggYSwgYiApIHtcbiAgICByZXR1cm4gYS5yZXNvbHV0aW9uIC0gYi5yZXNvbHV0aW9uO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbiBJRTksIDxzb3VyY2U+IGVsZW1lbnRzIGdldCByZW1vdmVkIGlmIHRoZXkgYXJlbid0IGNoaWxkcmVuIG9mXG4gICAqIHZpZGVvIGVsZW1lbnRzLiBUaHVzLCB3ZSBjb25kaXRpb25hbGx5IHdyYXAgc291cmNlIGVsZW1lbnRzXG4gICAqIHVzaW5nIDwhLS1baWYgSUUgOV0+PHZpZGVvIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48IVtlbmRpZl0tLT5cbiAgICogYW5kIG11c3QgYWNjb3VudCBmb3IgdGhhdCBoZXJlIGJ5IG1vdmluZyB0aG9zZSBzb3VyY2UgZWxlbWVudHNcbiAgICogYmFjayBpbnRvIHRoZSBwaWN0dXJlIGVsZW1lbnQuXG4gICAqL1xuICBwZi5yZW1vdmVWaWRlb1NoaW0gPSBmdW5jdGlvbiggcGljdHVyZSApIHtcbiAgICB2YXIgdmlkZW9zID0gcGljdHVyZS5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJ2aWRlb1wiICk7XG4gICAgaWYgKCB2aWRlb3MubGVuZ3RoICkge1xuICAgICAgdmFyIHZpZGVvID0gdmlkZW9zWyAwIF0sXG4gICAgICAgIHZzb3VyY2VzID0gdmlkZW8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwic291cmNlXCIgKTtcbiAgICAgIHdoaWxlICggdnNvdXJjZXMubGVuZ3RoICkge1xuICAgICAgICBwaWN0dXJlLmluc2VydEJlZm9yZSggdnNvdXJjZXNbIDAgXSwgdmlkZW8gKTtcbiAgICAgIH1cbiAgICAgIC8vIFJlbW92ZSB0aGUgdmlkZW8gZWxlbWVudCBvbmNlIHdlJ3JlIGZpbmlzaGVkIHJlbW92aW5nIGl0cyBjaGlsZHJlblxuICAgICAgdmlkZW8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggdmlkZW8gKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEZpbmQgYWxsIGBpbWdgIGVsZW1lbnRzLCBhbmQgYWRkIHRoZW0gdG8gdGhlIGNhbmRpZGF0ZSBsaXN0IGlmIHRoZXkgaGF2ZVxuICAgKiBhIGBwaWN0dXJlYCBwYXJlbnQsIGEgYHNpemVzYCBhdHRyaWJ1dGUgaW4gYmFzaWMgYHNyY3NldGAgc3VwcG9ydGluZyBicm93c2VycyxcbiAgICogYSBgc3Jjc2V0YCBhdHRyaWJ1dGUgYXQgYWxsLCBhbmQgdGhleSBoYXZlbuKAmXQgYmVlbiBldmFsdWF0ZWQgYWxyZWFkeS5cbiAgICovXG4gIHBmLmdldEFsbEVsZW1lbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVsZW1zID0gW10sXG4gICAgICBpbWdzID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcImltZ1wiICk7XG5cbiAgICBmb3IgKCB2YXIgaCA9IDAsIGxlbiA9IGltZ3MubGVuZ3RoOyBoIDwgbGVuOyBoKysgKSB7XG4gICAgICB2YXIgY3VyckltZyA9IGltZ3NbIGggXTtcblxuICAgICAgaWYgKCBjdXJySW1nLnBhcmVudE5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJQSUNUVVJFXCIgfHxcbiAgICAgICggY3VyckltZy5nZXRBdHRyaWJ1dGUoIFwic3Jjc2V0XCIgKSAhPT0gbnVsbCApIHx8IGN1cnJJbWdbIHBmLm5zIF0gJiYgY3VyckltZ1sgcGYubnMgXS5zcmNzZXQgIT09IG51bGwgKSB7XG4gICAgICAgIGVsZW1zLnB1c2goIGN1cnJJbWcgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVsZW1zO1xuICB9O1xuXG4gIHBmLmdldE1hdGNoID0gZnVuY3Rpb24oIGltZywgcGljdHVyZSApIHtcbiAgICB2YXIgc291cmNlcyA9IHBpY3R1cmUuY2hpbGROb2RlcyxcbiAgICAgIG1hdGNoO1xuXG4gICAgLy8gR28gdGhyb3VnaCBlYWNoIGNoaWxkLCBhbmQgaWYgdGhleSBoYXZlIG1lZGlhIHF1ZXJpZXMsIGV2YWx1YXRlIHRoZW1cbiAgICBmb3IgKCB2YXIgaiA9IDAsIHNsZW4gPSBzb3VyY2VzLmxlbmd0aDsgaiA8IHNsZW47IGorKyApIHtcbiAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzWyBqIF07XG5cbiAgICAgIC8vIGlnbm9yZSBub24tZWxlbWVudCBub2Rlc1xuICAgICAgaWYgKCBzb3VyY2Uubm9kZVR5cGUgIT09IDEgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBIaXR0aW5nIHRoZSBgaW1nYCBlbGVtZW50IHRoYXQgc3RhcnRlZCBldmVyeXRoaW5nIHN0b3BzIHRoZSBzZWFyY2ggZm9yIGBzb3VyY2VzYC5cbiAgICAgIC8vIElmIG5vIHByZXZpb3VzIGBzb3VyY2VgIG1hdGNoZXMsIHRoZSBgaW1nYCBpdHNlbGYgaXMgZXZhbHVhdGVkIGxhdGVyLlxuICAgICAgaWYgKCBzb3VyY2UgPT09IGltZyApIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgfVxuXG4gICAgICAvLyBpZ25vcmUgbm9uLWBzb3VyY2VgIG5vZGVzXG4gICAgICBpZiAoIHNvdXJjZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpICE9PSBcIlNPVVJDRVwiICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIGlmIGl0J3MgYSBzb3VyY2UgZWxlbWVudCB0aGF0IGhhcyB0aGUgYHNyY2AgcHJvcGVydHkgc2V0LCB0aHJvdyBhIHdhcm5pbmcgaW4gdGhlIGNvbnNvbGVcbiAgICAgIGlmICggc291cmNlLmdldEF0dHJpYnV0ZSggXCJzcmNcIiApICE9PSBudWxsICYmIHR5cGVvZiBjb25zb2xlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIlRoZSBgc3JjYCBhdHRyaWJ1dGUgaXMgaW52YWxpZCBvbiBgcGljdHVyZWAgYHNvdXJjZWAgZWxlbWVudDsgaW5zdGVhZCwgdXNlIGBzcmNzZXRgLlwiKTtcbiAgICAgIH1cblxuICAgICAgdmFyIG1lZGlhID0gc291cmNlLmdldEF0dHJpYnV0ZSggXCJtZWRpYVwiICk7XG5cbiAgICAgIC8vIGlmIHNvdXJjZSBkb2VzIG5vdCBoYXZlIGEgc3Jjc2V0IGF0dHJpYnV0ZSwgc2tpcFxuICAgICAgaWYgKCAhc291cmNlLmdldEF0dHJpYnV0ZSggXCJzcmNzZXRcIiApICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gaWYgdGhlcmUncyBubyBtZWRpYSBzcGVjaWZpZWQsIE9SIHcubWF0Y2hNZWRpYSBpcyBzdXBwb3J0ZWRcbiAgICAgIGlmICggKCAhbWVkaWEgfHwgcGYubWF0Y2hlc01lZGlhKCBtZWRpYSApICkgKSB7XG4gICAgICAgIHZhciB0eXBlU3VwcG9ydGVkID0gcGYudmVyaWZ5VHlwZVN1cHBvcnQoIHNvdXJjZSApO1xuXG4gICAgICAgIGlmICggdHlwZVN1cHBvcnRlZCA9PT0gdHJ1ZSApIHtcbiAgICAgICAgICBtYXRjaCA9IHNvdXJjZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBlbHNlIGlmICggdHlwZVN1cHBvcnRlZCA9PT0gXCJwZW5kaW5nXCIgKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hdGNoO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHBpY3R1cmVmaWxsKCBvcHQgKSB7XG4gICAgdmFyIGVsZW1lbnRzLFxuICAgICAgZWxlbWVudCxcbiAgICAgIHBhcmVudCxcbiAgICAgIGZpcnN0TWF0Y2gsXG4gICAgICBjYW5kaWRhdGVzLFxuICAgICAgb3B0aW9ucyA9IG9wdCB8fCB7fTtcblxuICAgIGVsZW1lbnRzID0gb3B0aW9ucy5lbGVtZW50cyB8fCBwZi5nZXRBbGxFbGVtZW50cygpO1xuXG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBlbGVtZW50c1xuICAgIGZvciAoIHZhciBpID0gMCwgcGxlbiA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IHBsZW47IGkrKyApIHtcbiAgICAgIGVsZW1lbnQgPSBlbGVtZW50c1sgaSBdO1xuICAgICAgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgZmlyc3RNYXRjaCA9IHVuZGVmaW5lZDtcbiAgICAgIGNhbmRpZGF0ZXMgPSB1bmRlZmluZWQ7XG5cbiAgICAgIC8vIGltbWVkaWF0ZWx5IHNraXAgbm9uLWBpbWdgIG5vZGVzXG4gICAgICBpZiAoIGVsZW1lbnQubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPT0gXCJJTUdcIiApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4cGFuZG8gZm9yIGNhY2hpbmcgZGF0YSBvbiB0aGUgaW1nXG4gICAgICBpZiAoICFlbGVtZW50WyBwZi5ucyBdICkge1xuICAgICAgICBlbGVtZW50WyBwZi5ucyBdID0ge307XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHRoZSBlbGVtZW50IGhhcyBhbHJlYWR5IGJlZW4gZXZhbHVhdGVkLCBza2lwIGl0IHVubGVzc1xuICAgICAgLy8gYG9wdGlvbnMucmVldmFsdWF0ZWAgaXMgc2V0IHRvIHRydWUgKCB0aGlzLCBmb3IgZXhhbXBsZSxcbiAgICAgIC8vIGlzIHNldCB0byB0cnVlIHdoZW4gcnVubmluZyBgcGljdHVyZWZpbGxgIG9uIGByZXNpemVgICkuXG4gICAgICBpZiAoICFvcHRpb25zLnJlZXZhbHVhdGUgJiYgZWxlbWVudFsgcGYubnMgXS5ldmFsdWF0ZWQgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBpZiBgaW1nYCBpcyBpbiBhIGBwaWN0dXJlYCBlbGVtZW50XG4gICAgICBpZiAoIHBhcmVudC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIlBJQ1RVUkVcIiApIHtcblxuICAgICAgICAvLyBJRTkgdmlkZW8gd29ya2Fyb3VuZFxuICAgICAgICBwZi5yZW1vdmVWaWRlb1NoaW0oIHBhcmVudCApO1xuXG4gICAgICAgIC8vIHJldHVybiB0aGUgZmlyc3QgbWF0Y2ggd2hpY2ggbWlnaHQgdW5kZWZpbmVkXG4gICAgICAgIC8vIHJldHVybnMgZmFsc2UgaWYgdGhlcmUgaXMgYSBwZW5kaW5nIHNvdXJjZVxuICAgICAgICAvLyBUT0RPIHRoZSByZXR1cm4gdHlwZSBoZXJlIGlzIGJydXRhbCwgY2xlYW51cFxuICAgICAgICBmaXJzdE1hdGNoID0gcGYuZ2V0TWF0Y2goIGVsZW1lbnQsIHBhcmVudCApO1xuXG4gICAgICAgIC8vIGlmIGFueSBzb3VyY2VzIGFyZSBwZW5kaW5nIGluIHRoaXMgcGljdHVyZSBkdWUgdG8gYXN5bmMgdHlwZSB0ZXN0KHMpXG4gICAgICAgIC8vIHJlbW92ZSB0aGUgZXZhbHVhdGVkIGF0dHIgYW5kIHNraXAgZm9yIG5vdyAoIHRoZSBwZW5kaW5nIHRlc3Qgd2lsbFxuICAgICAgICAvLyByZXJ1biBwaWN0dXJlZmlsbCBvbiB0aGlzIGVsZW1lbnQgd2hlbiBjb21wbGV0ZSlcbiAgICAgICAgaWYgKCBmaXJzdE1hdGNoID09PSBmYWxzZSApIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmlyc3RNYXRjaCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLy8gQ2FjaGUgYW5kIHJlbW92ZSBgc3Jjc2V0YCBpZiBwcmVzZW50IGFuZCB3ZeKAmXJlIGdvaW5nIHRvIGJlIGRvaW5nIGBwaWN0dXJlYC9gc3Jjc2V0YC9gc2l6ZXNgIHBvbHlmaWxsaW5nIHRvIGl0LlxuICAgICAgaWYgKCBwYXJlbnQubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJQSUNUVVJFXCIgfHxcbiAgICAgICggZWxlbWVudC5zcmNzZXQgJiYgIXBmLnNyY3NldFN1cHBvcnRlZCApIHx8XG4gICAgICAoICFwZi5zaXplc1N1cHBvcnRlZCAmJiAoIGVsZW1lbnQuc3Jjc2V0ICYmIGVsZW1lbnQuc3Jjc2V0LmluZGV4T2YoXCJ3XCIpID4gLTEgKSApICkge1xuICAgICAgICBwZi5kb2RnZVNyY3NldCggZWxlbWVudCApO1xuICAgICAgfVxuXG4gICAgICBpZiAoIGZpcnN0TWF0Y2ggKSB7XG4gICAgICAgIGNhbmRpZGF0ZXMgPSBwZi5wcm9jZXNzU291cmNlU2V0KCBmaXJzdE1hdGNoICk7XG4gICAgICAgIHBmLmFwcGx5QmVzdENhbmRpZGF0ZSggY2FuZGlkYXRlcywgZWxlbWVudCApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm8gc291cmNlcyBtYXRjaGVkLCBzbyB3ZeKAmXJlIGRvd24gdG8gcHJvY2Vzc2luZyB0aGUgaW5uZXIgYGltZ2AgYXMgYSBzb3VyY2UuXG4gICAgICAgIGNhbmRpZGF0ZXMgPSBwZi5wcm9jZXNzU291cmNlU2V0KCBlbGVtZW50ICk7XG5cbiAgICAgICAgaWYgKCBlbGVtZW50LnNyY3NldCA9PT0gdW5kZWZpbmVkIHx8IGVsZW1lbnRbIHBmLm5zIF0uc3Jjc2V0ICkge1xuICAgICAgICAgIC8vIEVpdGhlciBgc3Jjc2V0YCBpcyBjb21wbGV0ZWx5IHVuc3VwcG9ydGVkLCBvciB3ZSBuZWVkIHRvIHBvbHlmaWxsIGBzaXplc2AgZnVuY3Rpb25hbGl0eS5cbiAgICAgICAgICBwZi5hcHBseUJlc3RDYW5kaWRhdGUoIGNhbmRpZGF0ZXMsIGVsZW1lbnQgKTtcbiAgICAgICAgfSAvLyBFbHNlLCByZXNvbHV0aW9uLW9ubHkgYHNyY3NldGAgaXMgc3VwcG9ydGVkIG5hdGl2ZWx5LlxuICAgICAgfVxuXG4gICAgICAvLyBzZXQgZXZhbHVhdGVkIHRvIHRydWUgdG8gYXZvaWQgdW5uZWNlc3NhcnkgcmVwYXJzaW5nXG4gICAgICBlbGVtZW50WyBwZi5ucyBdLmV2YWx1YXRlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgcGljdHVyZSBwb2x5ZmlsbCBieSBwb2xsaW5nIHRoZSBkb2N1bWVudCBhbmQgcnVubmluZ1xuICAgKiB0aGUgcG9seWZpbGwgZXZlcnkgMjUwbXMgdW50aWwgdGhlIGRvY3VtZW50IGlzIHJlYWR5LlxuICAgKiBBbHNvIGF0dGFjaGVzIHBpY3R1cmVmaWxsIG9uIHJlc2l6ZVxuICAgKi9cbiAgZnVuY3Rpb24gcnVuUGljdHVyZWZpbGwoKSB7XG4gICAgcGljdHVyZWZpbGwoKTtcbiAgICB2YXIgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCBmdW5jdGlvbigpIHtcbiAgICAgIC8vIFdoZW4gdGhlIGRvY3VtZW50IGhhcyBmaW5pc2hlZCBsb2FkaW5nLCBzdG9wIGNoZWNraW5nIGZvciBuZXcgaW1hZ2VzXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZGVkL2RvbXJlYWR5L2Jsb2IvbWFzdGVyL3JlYWR5LmpzI0wxNVxuICAgICAgcGljdHVyZWZpbGwoKTtcbiAgICAgIGlmICggL15sb2FkZWR8Xml8XmMvLnRlc3QoIGRvYy5yZWFkeVN0YXRlICkgKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoIGludGVydmFsSWQgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0sIDI1MCApO1xuXG4gICAgZnVuY3Rpb24gY2hlY2tSZXNpemUoKSB7XG4gICAgICB2YXIgcmVzaXplVGhyb3R0bGU7XG5cbiAgICAgIGlmICggIXcuX3BpY3R1cmVmaWxsV29ya2luZyApIHtcbiAgICAgICAgdy5fcGljdHVyZWZpbGxXb3JraW5nID0gdHJ1ZTtcbiAgICAgICAgdy5jbGVhclRpbWVvdXQoIHJlc2l6ZVRocm90dGxlICk7XG4gICAgICAgIHJlc2l6ZVRocm90dGxlID0gdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBwaWN0dXJlZmlsbCh7IHJlZXZhbHVhdGU6IHRydWUgfSk7XG4gICAgICAgICAgdy5fcGljdHVyZWZpbGxXb3JraW5nID0gZmFsc2U7XG4gICAgICAgIH0sIDYwICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCB3LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG4gICAgICB3LmFkZEV2ZW50TGlzdGVuZXIoIFwicmVzaXplXCIsIGNoZWNrUmVzaXplLCBmYWxzZSApO1xuICAgIH0gZWxzZSBpZiAoIHcuYXR0YWNoRXZlbnQgKSB7XG4gICAgICB3LmF0dGFjaEV2ZW50KCBcIm9ucmVzaXplXCIsIGNoZWNrUmVzaXplICk7XG4gICAgfVxuICB9XG5cbiAgcnVuUGljdHVyZWZpbGwoKTtcblxuICAvKiBleHBvc2UgbWV0aG9kcyBmb3IgdGVzdGluZyAqL1xuICBwaWN0dXJlZmlsbC5fID0gcGY7XG5cbiAgLyogZXhwb3NlIHBpY3R1cmVmaWxsICovXG4gIGlmICggdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIgKSB7XG4gICAgLy8gQ29tbW9uSlMsIGp1c3QgZXhwb3J0XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBwaWN0dXJlZmlsbDtcbiAgfSBlbHNlIGlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XG4gICAgLy8gQU1EIHN1cHBvcnRcbiAgICBkZWZpbmUoIGZ1bmN0aW9uKCkgeyByZXR1cm4gcGljdHVyZWZpbGw7IH0gKTtcbiAgfSBlbHNlIGlmICggdHlwZW9mIHcgPT09IFwib2JqZWN0XCIgKSB7XG4gICAgLy8gSWYgbm8gQU1EIGFuZCB3ZSBhcmUgaW4gdGhlIGJyb3dzZXIsIGF0dGFjaCB0byB3aW5kb3dcbiAgICB3LnBpY3R1cmVmaWxsID0gcGljdHVyZWZpbGw7XG4gIH1cblxufSApKCB0aGlzLCB0aGlzLmRvY3VtZW50LCBuZXcgdGhpcy5JbWFnZSgpICk7XG4iLCIvKiFcbiAqIHZlcmdlIDEuOS4xKzIwMTQwMjEzMDgwM1xuICogaHR0cHM6Ly9naXRodWIuY29tL3J5YW52ZS92ZXJnZVxuICogTUlUIExpY2Vuc2UgMjAxMyBSeWFuIFZhbiBFdHRlblxuICovXG5cbihmdW5jdGlvbihyb290LCBuYW1lLCBtYWtlKSB7XG4gIGlmICh0eXBlb2YgbW9kdWxlICE9ICd1bmRlZmluZWQnICYmIG1vZHVsZVsnZXhwb3J0cyddKSBtb2R1bGVbJ2V4cG9ydHMnXSA9IG1ha2UoKTtcbiAgZWxzZSByb290W25hbWVdID0gbWFrZSgpO1xufSh0aGlzLCAndmVyZ2UnLCBmdW5jdGlvbigpIHtcblxuICB2YXIgeHBvcnRzID0ge31cbiAgICAsIHdpbiA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93XG4gICAgLCBkb2MgPSB0eXBlb2YgZG9jdW1lbnQgIT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnRcbiAgICAsIGRvY0VsZW0gPSBkb2MgJiYgZG9jLmRvY3VtZW50RWxlbWVudFxuICAgICwgbWF0Y2hNZWRpYSA9IHdpblsnbWF0Y2hNZWRpYSddIHx8IHdpblsnbXNNYXRjaE1lZGlhJ11cbiAgICAsIG1xID0gbWF0Y2hNZWRpYSA/IGZ1bmN0aW9uKHEpIHtcbiAgICAgICAgcmV0dXJuICEhbWF0Y2hNZWRpYS5jYWxsKHdpbiwgcSkubWF0Y2hlcztcbiAgICAgIH0gOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICwgdmlld3BvcnRXID0geHBvcnRzWyd2aWV3cG9ydFcnXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYSA9IGRvY0VsZW1bJ2NsaWVudFdpZHRoJ10sIGIgPSB3aW5bJ2lubmVyV2lkdGgnXTtcbiAgICAgICAgcmV0dXJuIGEgPCBiID8gYiA6IGE7XG4gICAgICB9XG4gICAgLCB2aWV3cG9ydEggPSB4cG9ydHNbJ3ZpZXdwb3J0SCddID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhID0gZG9jRWxlbVsnY2xpZW50SGVpZ2h0J10sIGIgPSB3aW5bJ2lubmVySGVpZ2h0J107XG4gICAgICAgIHJldHVybiBhIDwgYiA/IGIgOiBhO1xuICAgICAgfTtcblxuICAvKipcbiAgICogVGVzdCBpZiBhIG1lZGlhIHF1ZXJ5IGlzIGFjdGl2ZS4gTGlrZSBNb2Rlcm5penIubXFcbiAgICogQHNpbmNlIDEuNi4wXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICB4cG9ydHNbJ21xJ10gPSBtcTtcblxuICAvKipcbiAgICogTm9ybWFsaXplZCBtYXRjaE1lZGlhXG4gICAqIEBzaW5jZSAxLjYuMFxuICAgKiBAcmV0dXJuIHtNZWRpYVF1ZXJ5TGlzdHxPYmplY3R9XG4gICAqL1xuICB4cG9ydHNbJ21hdGNoTWVkaWEnXSA9IG1hdGNoTWVkaWEgPyBmdW5jdGlvbigpIHtcbiAgICAvLyBtYXRjaE1lZGlhIG11c3QgYmUgYmluZGVkIHRvIHdpbmRvd1xuICAgIHJldHVybiBtYXRjaE1lZGlhLmFwcGx5KHdpbiwgYXJndW1lbnRzKTtcbiAgfSA6IGZ1bmN0aW9uKCkge1xuICAgIC8vIEdyYWNlZnVsbHkgZGVncmFkZSB0byBwbGFpbiBvYmplY3RcbiAgICByZXR1cm4ge307XG4gIH07XG5cbiAgLyoqXG4gICAqIEBzaW5jZSAxLjguMFxuICAgKiBAcmV0dXJuIHt7d2lkdGg6bnVtYmVyLCBoZWlnaHQ6bnVtYmVyfX1cbiAgICovXG4gIGZ1bmN0aW9uIHZpZXdwb3J0KCkge1xuICAgIHJldHVybiB7J3dpZHRoJzp2aWV3cG9ydFcoKSwgJ2hlaWdodCc6dmlld3BvcnRIKCl9O1xuICB9XG4gIHhwb3J0c1sndmlld3BvcnQnXSA9IHZpZXdwb3J0O1xuXG4gIC8qKlxuICAgKiBDcm9zcy1icm93c2VyIHdpbmRvdy5zY3JvbGxYXG4gICAqIEBzaW5jZSAxLjAuMFxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB4cG9ydHNbJ3Njcm9sbFgnXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB3aW4ucGFnZVhPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxMZWZ0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcm9zcy1icm93c2VyIHdpbmRvdy5zY3JvbGxZXG4gICAqIEBzaW5jZSAxLjAuMFxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB4cG9ydHNbJ3Njcm9sbFknXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB3aW4ucGFnZVlPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxUb3A7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7e3RvcDpudW1iZXIsIHJpZ2h0Om51bWJlciwgYm90dG9tOm51bWJlciwgbGVmdDpudW1iZXJ9fSBjb29yZHNcbiAgICogQHBhcmFtIHtudW1iZXI9fSBjdXNoaW9uIGFkanVzdG1lbnRcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZnVuY3Rpb24gY2FsaWJyYXRlKGNvb3JkcywgY3VzaGlvbikge1xuICAgIHZhciBvID0ge307XG4gICAgY3VzaGlvbiA9ICtjdXNoaW9uIHx8IDA7XG4gICAgb1snd2lkdGgnXSA9IChvWydyaWdodCddID0gY29vcmRzWydyaWdodCddICsgY3VzaGlvbikgLSAob1snbGVmdCddID0gY29vcmRzWydsZWZ0J10gLSBjdXNoaW9uKTtcbiAgICBvWydoZWlnaHQnXSA9IChvWydib3R0b20nXSA9IGNvb3Jkc1snYm90dG9tJ10gKyBjdXNoaW9uKSAtIChvWyd0b3AnXSA9IGNvb3Jkc1sndG9wJ10gLSBjdXNoaW9uKTtcbiAgICByZXR1cm4gbztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcm9zcy1icm93c2VyIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IHBsdXMgb3B0aW9uYWwgY3VzaGlvbi5cbiAgICogQ29vcmRzIGFyZSByZWxhdGl2ZSB0byB0aGUgdG9wLWxlZnQgY29ybmVyIG9mIHRoZSB2aWV3cG9ydC5cbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsIGVsZW1lbnQgb3Igc3RhY2sgKHVzZXMgZmlyc3QgaXRlbSlcbiAgICogQHBhcmFtIHtudW1iZXI9fSBjdXNoaW9uICsvLSBwaXhlbCBhZGp1c3RtZW50IGFtb3VudFxuICAgKiBAcmV0dXJuIHtPYmplY3R8Ym9vbGVhbn1cbiAgICovXG4gIGZ1bmN0aW9uIHJlY3RhbmdsZShlbCwgY3VzaGlvbikge1xuICAgIGVsID0gZWwgJiYgIWVsLm5vZGVUeXBlID8gZWxbMF0gOiBlbDtcbiAgICBpZiAoIWVsIHx8IDEgIT09IGVsLm5vZGVUeXBlKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGNhbGlicmF0ZShlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgY3VzaGlvbik7XG4gIH1cbiAgeHBvcnRzWydyZWN0YW5nbGUnXSA9IHJlY3RhbmdsZTtcblxuICAvKipcbiAgICogR2V0IHRoZSB2aWV3cG9ydCBhc3BlY3QgcmF0aW8gKG9yIHRoZSBhc3BlY3QgcmF0aW8gb2YgYW4gb2JqZWN0IG9yIGVsZW1lbnQpXG4gICAqIEBzaW5jZSAxLjcuMFxuICAgKiBAcGFyYW0geyhFbGVtZW50fE9iamVjdCk9fSBvIG9wdGlvbmFsIG9iamVjdCB3aXRoIHdpZHRoL2hlaWdodCBwcm9wcyBvciBtZXRob2RzXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogQGxpbmsgaHR0cDovL3czLm9yZy9UUi9jc3MzLW1lZGlhcXVlcmllcy8jb3JpZW50YXRpb25cbiAgICovXG4gIGZ1bmN0aW9uIGFzcGVjdChvKSB7XG4gICAgbyA9IG51bGwgPT0gbyA/IHZpZXdwb3J0KCkgOiAxID09PSBvLm5vZGVUeXBlID8gcmVjdGFuZ2xlKG8pIDogbztcbiAgICB2YXIgaCA9IG9bJ2hlaWdodCddLCB3ID0gb1snd2lkdGgnXTtcbiAgICBoID0gdHlwZW9mIGggPT0gJ2Z1bmN0aW9uJyA/IGguY2FsbChvKSA6IGg7XG4gICAgdyA9IHR5cGVvZiB3ID09ICdmdW5jdGlvbicgPyB3LmNhbGwobykgOiB3O1xuICAgIHJldHVybiB3L2g7XG4gIH1cbiAgeHBvcnRzWydhc3BlY3QnXSA9IGFzcGVjdDtcblxuICAvKipcbiAgICogVGVzdCBpZiBhbiBlbGVtZW50IGlzIGluIHRoZSBzYW1lIHgtYXhpcyBzZWN0aW9uIGFzIHRoZSB2aWV3cG9ydC5cbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gY3VzaGlvblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgeHBvcnRzWydpblgnXSA9IGZ1bmN0aW9uKGVsLCBjdXNoaW9uKSB7XG4gICAgdmFyIHIgPSByZWN0YW5nbGUoZWwsIGN1c2hpb24pO1xuICAgIHJldHVybiAhIXIgJiYgci5yaWdodCA+PSAwICYmIHIubGVmdCA8PSB2aWV3cG9ydFcoKTtcbiAgfTtcblxuICAvKipcbiAgICogVGVzdCBpZiBhbiBlbGVtZW50IGlzIGluIHRoZSBzYW1lIHktYXhpcyBzZWN0aW9uIGFzIHRoZSB2aWV3cG9ydC5cbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gY3VzaGlvblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgeHBvcnRzWydpblknXSA9IGZ1bmN0aW9uKGVsLCBjdXNoaW9uKSB7XG4gICAgdmFyIHIgPSByZWN0YW5nbGUoZWwsIGN1c2hpb24pO1xuICAgIHJldHVybiAhIXIgJiYgci5ib3R0b20gPj0gMCAmJiByLnRvcCA8PSB2aWV3cG9ydEgoKTtcbiAgfTtcblxuICAvKipcbiAgICogVGVzdCBpZiBhbiBlbGVtZW50IGlzIGluIHRoZSB2aWV3cG9ydC5cbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gY3VzaGlvblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgeHBvcnRzWydpblZpZXdwb3J0J10gPSBmdW5jdGlvbihlbCwgY3VzaGlvbikge1xuICAgIC8vIEVxdWl2IHRvIGBpblgoZWwsIGN1c2hpb24pICYmIGluWShlbCwgY3VzaGlvbilgIGJ1dCBqdXN0IG1hbnVhbGx5IGRvIGJvdGhcbiAgICAvLyB0byBhdm9pZCBjYWxsaW5nIHJlY3RhbmdsZSgpIHR3aWNlLiBJdCBnemlwcyBqdXN0IGFzIHNtYWxsIGxpa2UgdGhpcy5cbiAgICB2YXIgciA9IHJlY3RhbmdsZShlbCwgY3VzaGlvbik7XG4gICAgcmV0dXJuICEhciAmJiByLmJvdHRvbSA+PSAwICYmIHIucmlnaHQgPj0gMCAmJiByLnRvcCA8PSB2aWV3cG9ydEgoKSAmJiByLmxlZnQgPD0gdmlld3BvcnRXKCk7XG4gIH07XG5cbiAgcmV0dXJuIHhwb3J0cztcbn0pKTtcbihmdW5jdGlvbigpIHtcbiAgdmFyIE11dGF0aW9uT2JzZXJ2ZXIsIFV0aWwsIFdlYWtNYXAsIGdldENvbXB1dGVkU3R5bGUsIGdldENvbXB1dGVkU3R5bGVSWCxcbiAgICBfX2JpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxuICAgIF9faW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9O1xuXG4gIFV0aWwgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gVXRpbCgpIHt9XG5cbiAgICBVdGlsLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbihjdXN0b20sIGRlZmF1bHRzKSB7XG4gICAgICB2YXIga2V5LCB2YWx1ZTtcbiAgICAgIGZvciAoa2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICAgIHZhbHVlID0gZGVmYXVsdHNba2V5XTtcbiAgICAgICAgaWYgKGN1c3RvbVtrZXldID09IG51bGwpIHtcbiAgICAgICAgICBjdXN0b21ba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VzdG9tO1xuICAgIH07XG5cbiAgICBVdGlsLnByb3RvdHlwZS5pc01vYmlsZSA9IGZ1bmN0aW9uKGFnZW50KSB7XG4gICAgICByZXR1cm4gL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KGFnZW50KTtcbiAgICB9O1xuXG4gICAgVXRpbC5wcm90b3R5cGUuYWRkRXZlbnQgPSBmdW5jdGlvbihlbGVtLCBldmVudCwgZm4pIHtcbiAgICAgIGlmIChlbGVtLmFkZEV2ZW50TGlzdGVuZXIgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZWxlbS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmIChlbGVtLmF0dGFjaEV2ZW50ICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGVsZW0uYXR0YWNoRXZlbnQoXCJvblwiICsgZXZlbnQsIGZuKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBlbGVtW2V2ZW50XSA9IGZuO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBVdGlsLnByb3RvdHlwZS5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uKGVsZW0sIGV2ZW50LCBmbikge1xuICAgICAgaWYgKGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGZuLCBmYWxzZSk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW0uZGV0YWNoRXZlbnQgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZWxlbS5kZXRhY2hFdmVudChcIm9uXCIgKyBldmVudCwgZm4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlbGV0ZSBlbGVtW2V2ZW50XTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVXRpbC5wcm90b3R5cGUuaW5uZXJIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgnaW5uZXJIZWlnaHQnIGluIHdpbmRvdykge1xuICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBVdGlsO1xuXG4gIH0pKCk7XG5cbiAgV2Vha01hcCA9IHRoaXMuV2Vha01hcCB8fCB0aGlzLk1veldlYWtNYXAgfHwgKFdlYWtNYXAgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gV2Vha01hcCgpIHtcbiAgICAgIHRoaXMua2V5cyA9IFtdO1xuICAgICAgdGhpcy52YWx1ZXMgPSBbXTtcbiAgICB9XG5cbiAgICBXZWFrTWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBpLCBpdGVtLCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgIF9yZWYgPSB0aGlzLmtleXM7XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBpdGVtID0gX3JlZltpXTtcbiAgICAgICAgaWYgKGl0ZW0gPT09IGtleSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlc1tpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBXZWFrTWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICB2YXIgaSwgaXRlbSwgX2ksIF9sZW4sIF9yZWY7XG4gICAgICBfcmVmID0gdGhpcy5rZXlzO1xuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgaXRlbSA9IF9yZWZbaV07XG4gICAgICAgIGlmIChpdGVtID09PSBrZXkpIHtcbiAgICAgICAgICB0aGlzLnZhbHVlc1tpXSA9IHZhbHVlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5rZXlzLnB1c2goa2V5KTtcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFdlYWtNYXA7XG5cbiAgfSkoKSk7XG5cbiAgTXV0YXRpb25PYnNlcnZlciA9IHRoaXMuTXV0YXRpb25PYnNlcnZlciB8fCB0aGlzLldlYmtpdE11dGF0aW9uT2JzZXJ2ZXIgfHwgdGhpcy5Nb3pNdXRhdGlvbk9ic2VydmVyIHx8IChNdXRhdGlvbk9ic2VydmVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIE11dGF0aW9uT2JzZXJ2ZXIoKSB7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ011dGF0aW9uT2JzZXJ2ZXIgaXMgbm90IHN1cHBvcnRlZCBieSB5b3VyIGJyb3dzZXIuJyk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1dPVy5qcyBjYW5ub3QgZGV0ZWN0IGRvbSBtdXRhdGlvbnMsIHBsZWFzZSBjYWxsIC5zeW5jKCkgYWZ0ZXIgbG9hZGluZyBuZXcgY29udGVudC4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBNdXRhdGlvbk9ic2VydmVyLm5vdFN1cHBvcnRlZCA9IHRydWU7XG5cbiAgICBNdXRhdGlvbk9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24oKSB7fTtcblxuICAgIHJldHVybiBNdXRhdGlvbk9ic2VydmVyO1xuXG4gIH0pKCkpO1xuXG4gIGdldENvbXB1dGVkU3R5bGUgPSB0aGlzLmdldENvbXB1dGVkU3R5bGUgfHwgZnVuY3Rpb24oZWwsIHBzZXVkbykge1xuICAgIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIHZhciBfcmVmO1xuICAgICAgaWYgKHByb3AgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgcHJvcCA9ICdzdHlsZUZsb2F0JztcbiAgICAgIH1cbiAgICAgIGlmIChnZXRDb21wdXRlZFN0eWxlUlgudGVzdChwcm9wKSkge1xuICAgICAgICBwcm9wLnJlcGxhY2UoZ2V0Q29tcHV0ZWRTdHlsZVJYLCBmdW5jdGlvbihfLCBfY2hhcikge1xuICAgICAgICAgIHJldHVybiBfY2hhci50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoKF9yZWYgPSBlbC5jdXJyZW50U3R5bGUpICE9IG51bGwgPyBfcmVmW3Byb3BdIDogdm9pZCAwKSB8fCBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgZ2V0Q29tcHV0ZWRTdHlsZVJYID0gLyhcXC0oW2Etel0pezF9KS9nO1xuXG4gIHRoaXMuV09XID0gKGZ1bmN0aW9uKCkge1xuICAgIFdPVy5wcm90b3R5cGUuZGVmYXVsdHMgPSB7XG4gICAgICBib3hDbGFzczogJ3dvdycsXG4gICAgICBhbmltYXRlQ2xhc3M6ICdhbmltYXRlZCcsXG4gICAgICBvZmZzZXQ6IDAsXG4gICAgICBtb2JpbGU6IHRydWUsXG4gICAgICBsaXZlOiB0cnVlLFxuICAgICAgY2FsbGJhY2s6IG51bGxcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gV09XKG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgdGhpcy5zY3JvbGxDYWxsYmFjayA9IF9fYmluZCh0aGlzLnNjcm9sbENhbGxiYWNrLCB0aGlzKTtcbiAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlciA9IF9fYmluZCh0aGlzLnNjcm9sbEhhbmRsZXIsIHRoaXMpO1xuICAgICAgdGhpcy5zdGFydCA9IF9fYmluZCh0aGlzLnN0YXJ0LCB0aGlzKTtcbiAgICAgIHRoaXMuc2Nyb2xsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5jb25maWcgPSB0aGlzLnV0aWwoKS5leHRlbmQob3B0aW9ucywgdGhpcy5kZWZhdWx0cyk7XG4gICAgICB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG4gICAgfVxuXG4gICAgV09XLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3JlZjtcbiAgICAgIHRoaXMuZWxlbWVudCA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICBpZiAoKF9yZWYgPSBkb2N1bWVudC5yZWFkeVN0YXRlKSA9PT0gXCJpbnRlcmFjdGl2ZVwiIHx8IF9yZWYgPT09IFwiY29tcGxldGVcIikge1xuICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudChkb2N1bWVudCwgJ0RPTUNvbnRlbnRMb2FkZWQnLCB0aGlzLnN0YXJ0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmZpbmlzaGVkID0gW107XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBib3gsIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmJveGVzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgICBfcmVmID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIgKyB0aGlzLmNvbmZpZy5ib3hDbGFzcyk7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIGJveCA9IF9yZWZbX2ldO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goYm94KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5hbGwgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZWYgPSB0aGlzLmJveGVzO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICBib3ggPSBfcmVmW19pXTtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKGJveCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgIGlmICh0aGlzLmJveGVzLmxlbmd0aCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCgpKSB7XG4gICAgICAgICAgdGhpcy5yZXNldFN0eWxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3JlZiA9IHRoaXMuYm94ZXM7XG4gICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICBib3ggPSBfcmVmW19pXTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTdHlsZShib3gsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKCkpIHtcbiAgICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQod2luZG93LCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQod2luZG93LCAncmVzaXplJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMuc2Nyb2xsQ2FsbGJhY2ssIDUwKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5saXZlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25PYnNlcnZlcigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVjb3Jkcykge1xuICAgICAgICAgICAgdmFyIG5vZGUsIHJlY29yZCwgX2osIF9sZW4xLCBfcmVzdWx0cztcbiAgICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSByZWNvcmRzLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgICAgICByZWNvcmQgPSByZWNvcmRzW19qXTtcbiAgICAgICAgICAgICAgX3Jlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9rLCBfbGVuMiwgX3JlZjEsIF9yZXN1bHRzMTtcbiAgICAgICAgICAgICAgICBfcmVmMSA9IHJlY29yZC5hZGRlZE5vZGVzIHx8IFtdO1xuICAgICAgICAgICAgICAgIF9yZXN1bHRzMSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAoX2sgPSAwLCBfbGVuMiA9IF9yZWYxLmxlbmd0aDsgX2sgPCBfbGVuMjsgX2srKykge1xuICAgICAgICAgICAgICAgICAgbm9kZSA9IF9yZWYxW19rXTtcbiAgICAgICAgICAgICAgICAgIF9yZXN1bHRzMS5wdXNoKHRoaXMuZG9TeW5jKG5vZGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHRzMTtcbiAgICAgICAgICAgICAgfSkuY2FsbChfdGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pKHRoaXMpKS5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgdGhpcy51dGlsKCkucmVtb3ZlRXZlbnQod2luZG93LCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgIHRoaXMudXRpbCgpLnJlbW92ZUV2ZW50KHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XG4gICAgICBpZiAodGhpcy5pbnRlcnZhbCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnN5bmMgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICBpZiAoTXV0YXRpb25PYnNlcnZlci5ub3RTdXBwb3J0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9TeW5jKHRoaXMuZWxlbWVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuZG9TeW5jID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgdmFyIGJveCwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgaWYgKGVsZW1lbnQgPT0gbnVsbCkge1xuICAgICAgICBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgfVxuICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgIT09IDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSB8fCBlbGVtZW50O1xuICAgICAgX3JlZiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIHRoaXMuY29uZmlnLmJveENsYXNzKTtcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgYm94ID0gX3JlZltfaV07XG4gICAgICAgIGlmIChfX2luZGV4T2YuY2FsbCh0aGlzLmFsbCwgYm94KSA8IDApIHtcbiAgICAgICAgICB0aGlzLmJveGVzLnB1c2goYm94KTtcbiAgICAgICAgICB0aGlzLmFsbC5wdXNoKGJveCk7XG4gICAgICAgICAgaWYgKHRoaXMuc3RvcHBlZCB8fCB0aGlzLmRpc2FibGVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTdHlsZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5U3R5bGUoYm94LCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLnNjcm9sbGVkID0gdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaCh2b2lkIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgdGhpcy5hcHBseVN0eWxlKGJveCk7XG4gICAgICBib3guY2xhc3NOYW1lID0gXCJcIiArIGJveC5jbGFzc05hbWUgKyBcIiBcIiArIHRoaXMuY29uZmlnLmFuaW1hdGVDbGFzcztcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5jYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5jYWxsYmFjayhib3gpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmFwcGx5U3R5bGUgPSBmdW5jdGlvbihib3gsIGhpZGRlbikge1xuICAgICAgdmFyIGRlbGF5LCBkdXJhdGlvbiwgaXRlcmF0aW9uO1xuICAgICAgZHVyYXRpb24gPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1kdXJhdGlvbicpO1xuICAgICAgZGVsYXkgPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1kZWxheScpO1xuICAgICAgaXRlcmF0aW9uID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctaXRlcmF0aW9uJyk7XG4gICAgICByZXR1cm4gdGhpcy5hbmltYXRlKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmN1c3RvbVN0eWxlKGJveCwgaGlkZGVuLCBkdXJhdGlvbiwgZGVsYXksIGl0ZXJhdGlvbik7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuYW5pbWF0ZSA9IChmdW5jdGlvbigpIHtcbiAgICAgIGlmICgncmVxdWVzdEFuaW1hdGlvbkZyYW1lJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSkoKTtcblxuICAgIFdPVy5wcm90b3R5cGUucmVzZXRTdHlsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJveCwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgX3JlZiA9IHRoaXMuYm94ZXM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGJveCA9IF9yZWZbX2ldO1xuICAgICAgICBfcmVzdWx0cy5wdXNoKGJveC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5jdXN0b21TdHlsZSA9IGZ1bmN0aW9uKGJveCwgaGlkZGVuLCBkdXJhdGlvbiwgZGVsYXksIGl0ZXJhdGlvbikge1xuICAgICAgaWYgKGhpZGRlbikge1xuICAgICAgICB0aGlzLmNhY2hlQW5pbWF0aW9uTmFtZShib3gpO1xuICAgICAgfVxuICAgICAgYm94LnN0eWxlLnZpc2liaWxpdHkgPSBoaWRkZW4gPyAnaGlkZGVuJyA6ICd2aXNpYmxlJztcbiAgICAgIGlmIChkdXJhdGlvbikge1xuICAgICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcbiAgICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogZHVyYXRpb25cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoZGVsYXkpIHtcbiAgICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XG4gICAgICAgICAgYW5pbWF0aW9uRGVsYXk6IGRlbGF5XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZXJhdGlvbikge1xuICAgICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcbiAgICAgICAgICBhbmltYXRpb25JdGVyYXRpb25Db3VudDogaXRlcmF0aW9uXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XG4gICAgICAgIGFuaW1hdGlvbk5hbWU6IGhpZGRlbiA/ICdub25lJyA6IHRoaXMuY2FjaGVkQW5pbWF0aW9uTmFtZShib3gpXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBib3g7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUudmVuZG9ycyA9IFtcIm1velwiLCBcIndlYmtpdFwiXTtcblxuICAgIFdPVy5wcm90b3R5cGUudmVuZG9yU2V0ID0gZnVuY3Rpb24oZWxlbSwgcHJvcGVydGllcykge1xuICAgICAgdmFyIG5hbWUsIHZhbHVlLCB2ZW5kb3IsIF9yZXN1bHRzO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAobmFtZSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHZhbHVlID0gcHJvcGVydGllc1tuYW1lXTtcbiAgICAgICAgZWxlbVtcIlwiICsgbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgX3Jlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0czE7XG4gICAgICAgICAgX3JlZiA9IHRoaXMudmVuZG9ycztcbiAgICAgICAgICBfcmVzdWx0czEgPSBbXTtcbiAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgIHZlbmRvciA9IF9yZWZbX2ldO1xuICAgICAgICAgICAgX3Jlc3VsdHMxLnB1c2goZWxlbVtcIlwiICsgdmVuZG9yICsgKG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkpICsgKG5hbWUuc3Vic3RyKDEpKV0gPSB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0czE7XG4gICAgICAgIH0pLmNhbGwodGhpcykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnZlbmRvckNTUyA9IGZ1bmN0aW9uKGVsZW0sIHByb3BlcnR5KSB7XG4gICAgICB2YXIgcmVzdWx0LCBzdHlsZSwgdmVuZG9yLCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTtcbiAgICAgIHJlc3VsdCA9IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUocHJvcGVydHkpO1xuICAgICAgX3JlZiA9IHRoaXMudmVuZG9ycztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICB2ZW5kb3IgPSBfcmVmW19pXTtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0IHx8IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUoXCItXCIgKyB2ZW5kb3IgKyBcIi1cIiArIHByb3BlcnR5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuYW5pbWF0aW9uTmFtZSA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgdmFyIGFuaW1hdGlvbk5hbWU7XG4gICAgICB0cnkge1xuICAgICAgICBhbmltYXRpb25OYW1lID0gdGhpcy52ZW5kb3JDU1MoYm94LCAnYW5pbWF0aW9uLW5hbWUnKS5jc3NUZXh0O1xuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgIGFuaW1hdGlvbk5hbWUgPSBnZXRDb21wdXRlZFN0eWxlKGJveCkuZ2V0UHJvcGVydHlWYWx1ZSgnYW5pbWF0aW9uLW5hbWUnKTtcbiAgICAgIH1cbiAgICAgIGlmIChhbmltYXRpb25OYW1lID09PSAnbm9uZScpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFuaW1hdGlvbk5hbWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuY2FjaGVBbmltYXRpb25OYW1lID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICByZXR1cm4gdGhpcy5hbmltYXRpb25OYW1lQ2FjaGUuc2V0KGJveCwgdGhpcy5hbmltYXRpb25OYW1lKGJveCkpO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmNhY2hlZEFuaW1hdGlvbk5hbWUgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgIHJldHVybiB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZS5nZXQoYm94KTtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zY3JvbGxIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5zY3JvbGxlZCA9IHRydWU7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc2Nyb2xsQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBib3g7XG4gICAgICBpZiAodGhpcy5zY3JvbGxlZCkge1xuICAgICAgICB0aGlzLnNjcm9sbGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYm94ZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0cztcbiAgICAgICAgICBfcmVmID0gdGhpcy5ib3hlcztcbiAgICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgYm94ID0gX3JlZltfaV07XG4gICAgICAgICAgICBpZiAoIShib3gpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKGJveCkpIHtcbiAgICAgICAgICAgICAgdGhpcy5zaG93KGJveCk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3Jlc3VsdHMucHVzaChib3gpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICAgIGlmICghKHRoaXMuYm94ZXMubGVuZ3RoIHx8IHRoaXMuY29uZmlnLmxpdmUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUub2Zmc2V0VG9wID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgdmFyIHRvcDtcbiAgICAgIHdoaWxlIChlbGVtZW50Lm9mZnNldFRvcCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICB9XG4gICAgICB0b3AgPSBlbGVtZW50Lm9mZnNldFRvcDtcbiAgICAgIHdoaWxlIChlbGVtZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQpIHtcbiAgICAgICAgdG9wICs9IGVsZW1lbnQub2Zmc2V0VG9wO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRvcDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5pc1Zpc2libGUgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgIHZhciBib3R0b20sIG9mZnNldCwgdG9wLCB2aWV3Qm90dG9tLCB2aWV3VG9wO1xuICAgICAgb2Zmc2V0ID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctb2Zmc2V0JykgfHwgdGhpcy5jb25maWcub2Zmc2V0O1xuICAgICAgdmlld1RvcCA9IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgIHZpZXdCb3R0b20gPSB2aWV3VG9wICsgTWF0aC5taW4odGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCwgdGhpcy51dGlsKCkuaW5uZXJIZWlnaHQoKSkgLSBvZmZzZXQ7XG4gICAgICB0b3AgPSB0aGlzLm9mZnNldFRvcChib3gpO1xuICAgICAgYm90dG9tID0gdG9wICsgYm94LmNsaWVudEhlaWdodDtcbiAgICAgIHJldHVybiB0b3AgPD0gdmlld0JvdHRvbSAmJiBib3R0b20gPj0gdmlld1RvcDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS51dGlsID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdXRpbCAhPSBudWxsID8gdGhpcy5fdXRpbCA6IHRoaXMuX3V0aWwgPSBuZXcgVXRpbCgpO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmRpc2FibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuY29uZmlnLm1vYmlsZSAmJiB0aGlzLnV0aWwoKS5pc01vYmlsZShuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFdPVztcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==