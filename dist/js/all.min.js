function changeBackgroundColor(t){var e=window.pageYOffset||document.documentElement.scrollTop;t.className=e>20?"fixed":""}function toggleClass(t,e){if(t&&e){var n=t.className,i=n.indexOf(e);-1==i?n+=" "+e:n=n.substr(0,i)+n.substr(i+e.length),t.className=n}}!function(t,e,n){var i=window.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=n(i):"function"==typeof define&&define.amd?define(function(){return e[t]=n(i)}):e[t]=n(i)}("enquire",this,function(t){"use strict";function e(t,e){var n,i=0,o=t.length;for(i;o>i&&(n=e(t[i],i),n!==!1);i++);}function n(t){return"[object Array]"===Object.prototype.toString.apply(t)}function i(t){return"function"==typeof t}function o(t){this.options=t,!t.deferSetup&&this.setup()}function r(e,n){this.query=e,this.isUnconditional=n,this.handlers=[],this.mql=t(e);var i=this;this.listener=function(t){i.mql=t,i.assess()},this.mql.addListener(this.listener)}function s(){if(!t)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!t("only all").matches}return o.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}},r.prototype={addHandler:function(t){var e=new o(t);this.handlers.push(e),this.matches()&&e.on()},removeHandler:function(t){var n=this.handlers;e(n,function(e,i){return e.equals(t)?(e.destroy(),!n.splice(i,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){e(this.handlers,function(t){t.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var t=this.matches()?"on":"off";e(this.handlers,function(e){e[t]()})}},s.prototype={register:function(t,o,s){var l=this.queries,a=s&&this.browserIsIncapable;return l[t]||(l[t]=new r(t,a)),i(o)&&(o={match:o}),n(o)||(o=[o]),e(o,function(e){i(e)&&(e={match:e}),l[t].addHandler(e)}),this},unregister:function(t,e){var n=this.queries[t];return n&&(e?n.removeHandler(e):(n.clear(),delete this.queries[t])),this}},new s}),function(t,e){"use strict";function n(t){this.callback=t,this.ticking=!1}function i(e){return e&&"undefined"!=typeof t&&(e===t||e.nodeType)}function o(t){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var e,n,r=t||{};for(n=1;n<arguments.length;n++){var s=arguments[n]||{};for(e in s)r[e]="object"!=typeof r[e]||i(r[e])?r[e]||s[e]:o(r[e],s[e])}return r}function r(t){return t===Object(t)?t:{down:t,up:t}}function s(t,e){e=o(e,s.options),this.lastKnownScrollY=0,this.elem=t,this.debouncer=new n(this.update.bind(this)),this.tolerance=r(e.tolerance),this.classes=e.classes,this.offset=e.offset,this.scroller=e.scroller,this.initialised=!1,this.onPin=e.onPin,this.onUnpin=e.onUnpin,this.onTop=e.onTop,this.onNotTop=e.onNotTop}var l={bind:!!function(){}.bind,classList:"classList"in e.documentElement,rAF:!!(t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame)};t.requestAnimationFrame=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame,n.prototype={constructor:n,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},s.prototype={constructor:s,init:function(){return s.cutsTheMustard?(this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this):void 0},destroy:function(){var t=this.classes;this.initialised=!1,this.elem.classList.remove(t.unpinned,t.pinned,t.top,t.initial),this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var t=this.elem.classList,e=this.classes;(t.contains(e.pinned)||!t.contains(e.unpinned))&&(t.add(e.unpinned),t.remove(e.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var t=this.elem.classList,e=this.classes;t.contains(e.unpinned)&&(t.remove(e.unpinned),t.add(e.pinned),this.onPin&&this.onPin.call(this))},top:function(){var t=this.elem.classList,e=this.classes;t.contains(e.top)||(t.add(e.top),t.remove(e.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var t=this.elem.classList,e=this.classes;t.contains(e.notTop)||(t.add(e.notTop),t.remove(e.top),this.onNotTop&&this.onNotTop.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(e.documentElement||e.body.parentNode||e.body).scrollTop},getViewportHeight:function(){return t.innerHeight||e.documentElement.clientHeight||e.body.clientHeight},getDocumentHeight:function(){var t=e.body,n=e.documentElement;return Math.max(t.scrollHeight,n.scrollHeight,t.offsetHeight,n.offsetHeight,t.clientHeight,n.clientHeight)},getElementHeight:function(t){return Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)},getScrollerHeight:function(){return this.scroller===t||this.scroller===e.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(t){var e=0>t,n=t+this.getViewportHeight()>this.getScrollerHeight();return e||n},toleranceExceeded:function(t,e){return Math.abs(t-this.lastKnownScrollY)>=this.tolerance[e]},shouldUnpin:function(t,e){var n=t>this.lastKnownScrollY,i=t>=this.offset;return n&&i&&e},shouldPin:function(t,e){var n=t<this.lastKnownScrollY,i=t<=this.offset;return n&&e||i},update:function(){var t=this.getScrollY(),e=t>this.lastKnownScrollY?"down":"up",n=this.toleranceExceeded(t,e);this.isOutOfBounds(t)||(t<=this.offset?this.top():this.notTop(),this.shouldUnpin(t,n)?this.unpin():this.shouldPin(t,n)&&this.pin(),this.lastKnownScrollY=t)}},s.options={tolerance:{up:0,down:0},offset:0,scroller:t,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",initial:"headroom"}},s.cutsTheMustard="undefined"!=typeof l&&l.rAF&&l.bind&&l.classList,t.Headroom=s}(window,document),window.matchMedia||(window.matchMedia=function(){"use strict";var t=window.styleMedia||window.media;if(!t){var e=document.createElement("style"),n=document.getElementsByTagName("script")[0],i=null;e.type="text/css",e.id="matchmediajs-test",n.parentNode.insertBefore(e,n),i="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,t={matchMedium:function(t){var n="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=n:e.textContent=n,"1px"===i.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(t,e,n){"use strict";function i(t){var e,n,i,o,s,l=t||{};e=l.elements||r.getAllElements();for(var a=0,c=e.length;c>a;a++)if(n=e[a],i=n.parentNode,o=void 0,s=void 0,"IMG"===n.nodeName.toUpperCase()&&(n[r.ns]||(n[r.ns]={}),l.reevaluate||!n[r.ns].evaluated)){if("PICTURE"===i.nodeName.toUpperCase()){if(r.removeVideoShim(i),o=r.getMatch(n,i),o===!1)continue}else o=void 0;("PICTURE"===i.nodeName.toUpperCase()||n.srcset&&!r.srcsetSupported||!r.sizesSupported&&n.srcset&&n.srcset.indexOf("w")>-1)&&r.dodgeSrcset(n),o?(s=r.processSourceSet(o),r.applyBestCandidate(s,n)):(s=r.processSourceSet(n),(void 0===n.srcset||n[r.ns].srcset)&&r.applyBestCandidate(s,n)),n[r.ns].evaluated=!0}}function o(){function n(){var e;t._picturefillWorking||(t._picturefillWorking=!0,t.clearTimeout(e),e=t.setTimeout(function(){i({reevaluate:!0}),t._picturefillWorking=!1},60))}i();var o=setInterval(function(){return i(),/^loaded|^i|^c/.test(e.readyState)?void clearInterval(o):void 0},250);t.addEventListener?t.addEventListener("resize",n,!1):t.attachEvent&&t.attachEvent("onresize",n)}if(t.HTMLPictureElement)return void(t.picturefill=function(){});e.createElement("picture");var r={};r.ns="picturefill",function(){r.srcsetSupported="srcset"in n,r.sizesSupported="sizes"in n}(),r.trim=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},r.endsWith=function(t,e){return t.endsWith?t.endsWith(e):-1!==t.indexOf(e,t.length-e.length)},r.restrictsMixedContent=function(){return"https:"===t.location.protocol},r.matchesMedia=function(e){return t.matchMedia&&t.matchMedia(e).matches},r.getDpr=function(){return t.devicePixelRatio||1},r.getWidthFromLength=function(t){t=t&&t.indexOf("%")>-1==!1&&(parseFloat(t)>0||t.indexOf("calc(")>-1)?t:"100vw",t=t.replace("vw","%"),r.lengthEl||(r.lengthEl=e.createElement("div"),r.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden"),r.lengthEl.style.width=t,e.body.appendChild(r.lengthEl),r.lengthEl.className="helper-from-picturefill-js",r.lengthEl.offsetWidth<=0&&(r.lengthEl.style.width=e.documentElement.offsetWidth+"px");var n=r.lengthEl.offsetWidth;return e.body.removeChild(r.lengthEl),n},r.types={},r.types["image/jpeg"]=!0,r.types["image/gif"]=!0,r.types["image/png"]=!0,r.types["image/svg+xml"]=e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),r.types["image/webp"]=function(){var t="image/webp";n.onerror=function(){r.types[t]=!1,i()},n.onload=function(){r.types[t]=1===n.width,i()},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="},r.verifyTypeSupport=function(t){var e=t.getAttribute("type");return null===e||""===e?!0:"function"==typeof r.types[e]?(r.types[e](),"pending"):r.types[e]},r.parseSize=function(t){var e=/(\([^)]+\))?\s*(.+)/g.exec(t);return{media:e&&e[1],length:e&&e[2]}},r.findWidthFromSourceSize=function(t){for(var e,n=r.trim(t).split(/\s*,\s*/),i=0,o=n.length;o>i;i++){var s=n[i],l=r.parseSize(s),a=l.length,c=l.media;if(a&&(!c||r.matchesMedia(c))){e=a;break}}return r.getWidthFromLength(e)},r.parseSrcset=function(t){for(var e=[];""!==t;){t=t.replace(/^\s+/g,"");var n,i=t.search(/\s/g),o=null;if(-1!==i){n=t.slice(0,i);var r=n.slice(-1);if((","===r||""===n)&&(n=n.replace(/,+$/,""),o=""),t=t.slice(i+1),null===o){var s=t.indexOf(",");-1!==s?(o=t.slice(0,s),t=t.slice(s+1)):(o=t,t="")}}else n=t,t="";(n||o)&&e.push({url:n,descriptor:o})}return e},r.parseDescriptor=function(t,e){var n,i=e||"100vw",o=t&&t.replace(/(^\s+|\s+$)/g,""),s=r.findWidthFromSourceSize(i);if(o)for(var l=o.split(" "),a=l.length-1;a>=0;a--){var c=l[a],u=c&&c.slice(c.length-1);if("h"!==u&&"w"!==u||r.sizesSupported){if("x"===u){var h=c&&parseFloat(c,10);n=h&&!isNaN(h)?h:1}}else n=parseFloat(parseInt(c,10)/s)}return n||1},r.getCandidatesFromSourceSet=function(t,e){for(var n=r.parseSrcset(t),i=[],o=0,s=n.length;s>o;o++){var l=n[o];i.push({url:l.url,resolution:r.parseDescriptor(l.descriptor,e)})}return i},r.dodgeSrcset=function(t){t.srcset&&(t[r.ns].srcset=t.srcset,t.removeAttribute("srcset"))},r.processSourceSet=function(t){var e=t.getAttribute("srcset"),n=t.getAttribute("sizes"),i=[];return"IMG"===t.nodeName.toUpperCase()&&t[r.ns]&&t[r.ns].srcset&&(e=t[r.ns].srcset),e&&(i=r.getCandidatesFromSourceSet(e,n)),i},r.applyBestCandidate=function(t,e){var n,i,o;t.sort(r.ascendingSort),i=t.length,o=t[i-1];for(var s=0;i>s;s++)if(n=t[s],n.resolution>=r.getDpr()){o=n;break}if(o&&!r.endsWith(e.src,o.url))if(r.restrictsMixedContent()&&"http:"===o.url.substr(0,"http:".length).toLowerCase())void 0!==typeof console&&console.warn("Blocked mixed content image "+o.url);else{e.src=o.url,e.currentSrc=e.src;var l=e.style||{},a="webkitBackfaceVisibility"in l,c=l.zoom;a&&(l.zoom=".999",a=e.offsetWidth,l.zoom=c)}},r.ascendingSort=function(t,e){return t.resolution-e.resolution},r.removeVideoShim=function(t){var e=t.getElementsByTagName("video");if(e.length){for(var n=e[0],i=n.getElementsByTagName("source");i.length;)t.insertBefore(i[0],n);n.parentNode.removeChild(n)}},r.getAllElements=function(){for(var t=[],n=e.getElementsByTagName("img"),i=0,o=n.length;o>i;i++){var s=n[i];("PICTURE"===s.parentNode.nodeName.toUpperCase()||null!==s.getAttribute("srcset")||s[r.ns]&&null!==s[r.ns].srcset)&&t.push(s)}return t},r.getMatch=function(t,e){for(var n,i=e.childNodes,o=0,s=i.length;s>o;o++){var l=i[o];if(1===l.nodeType){if(l===t)return n;if("SOURCE"===l.nodeName.toUpperCase()){null!==l.getAttribute("src")&&void 0!==typeof console&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var a=l.getAttribute("media");if(l.getAttribute("srcset")&&(!a||r.matchesMedia(a))){var c=r.verifyTypeSupport(l);if(c===!0){n=l;break}if("pending"===c)return!1}}}}return n},o(),i._=r,"object"==typeof module&&"object"==typeof module.exports?module.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):"object"==typeof t&&(t.picturefill=i)}(this,this.document,new this.Image),function(t,e,n){"undefined"!=typeof module&&module.exports?module.exports=n():t[e]=n()}(this,"verge",function(){function t(){return{width:u(),height:h()}}function e(t,e){var n={};return e=+e||0,n.width=(n.right=t.right+e)-(n.left=t.left-e),n.height=(n.bottom=t.bottom+e)-(n.top=t.top-e),n}function n(t,n){return t=t&&!t.nodeType?t[0]:t,t&&1===t.nodeType?e(t.getBoundingClientRect(),n):!1}function i(e){e=null==e?t():1===e.nodeType?n(e):e;var i=e.height,o=e.width;return i="function"==typeof i?i.call(e):i,o="function"==typeof o?o.call(e):o,o/i}var o={},r="undefined"!=typeof window&&window,s="undefined"!=typeof document&&document,l=s&&s.documentElement,a=r.matchMedia||r.msMatchMedia,c=a?function(t){return!!a.call(r,t).matches}:function(){return!1},u=o.viewportW=function(){var t=l.clientWidth,e=r.innerWidth;return e>t?e:t},h=o.viewportH=function(){var t=l.clientHeight,e=r.innerHeight;return e>t?e:t};return o.mq=c,o.matchMedia=a?function(){return a.apply(r,arguments)}:function(){return{}},o.viewport=t,o.scrollX=function(){return r.pageXOffset||l.scrollLeft},o.scrollY=function(){return r.pageYOffset||l.scrollTop},o.rectangle=n,o.aspect=i,o.inX=function(t,e){var i=n(t,e);return!!i&&i.right>=0&&i.left<=u()},o.inY=function(t,e){var i=n(t,e);return!!i&&i.bottom>=0&&i.top<=h()},o.inViewport=function(t,e){var i=n(t,e);return!!i&&i.bottom>=0&&i.right>=0&&i.top<=h()&&i.left<=u()},o}),function(){var t,e,n,i,o,r=function(t,e){return function(){return t.apply(e,arguments)}},s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=function(){function t(){}return t.prototype.extend=function(t,e){var n,i;for(n in e)i=e[n],null==t[n]&&(t[n]=i);return t},t.prototype.isMobile=function(t){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)},t.prototype.addEvent=function(t,e,n){return null!=t.addEventListener?t.addEventListener(e,n,!1):null!=t.attachEvent?t.attachEvent("on"+e,n):t[e]=n},t.prototype.removeEvent=function(t,e,n){return null!=t.removeEventListener?t.removeEventListener(e,n,!1):null!=t.detachEvent?t.detachEvent("on"+e,n):delete t[e]},t.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},t}(),n=this.WeakMap||this.MozWeakMap||(n=function(){function t(){this.keys=[],this.values=[]}return t.prototype.get=function(t){var e,n,i,o,r;for(r=this.keys,e=i=0,o=r.length;o>i;e=++i)if(n=r[e],n===t)return this.values[e]},t.prototype.set=function(t,e){var n,i,o,r,s;for(s=this.keys,n=o=0,r=s.length;r>o;n=++o)if(i=s[n],i===t)return void(this.values[n]=e);return this.keys.push(t),this.values.push(e)},t}()),t=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(t=function(){function t(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return t.notSupported=!0,t.prototype.observe=function(){},t}()),i=this.getComputedStyle||function(t){return this.getPropertyValue=function(e){var n;return"float"===e&&(e="styleFloat"),o.test(e)&&e.replace(o,function(t,e){return e.toUpperCase()}),(null!=(n=t.currentStyle)?n[e]:void 0)||null},this},o=/(\-([a-z]){1})/g,this.WOW=function(){function o(t){null==t&&(t={}),this.scrollCallback=r(this.scrollCallback,this),this.scrollHandler=r(this.scrollHandler,this),this.start=r(this.start,this),this.scrolled=!0,this.config=this.util().extend(t,this.defaults),this.animationNameCache=new n}return o.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null},o.prototype.init=function(){var t;return this.element=window.document.documentElement,"interactive"===(t=document.readyState)||"complete"===t?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},o.prototype.start=function(){var e,n,i,o;if(this.stopped=!1,this.boxes=function(){var t,n,i,o;for(i=this.element.querySelectorAll("."+this.config.boxClass),o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(e);return o}.call(this),this.all=function(){var t,n,i,o;for(i=this.boxes,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(e);return o}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(o=this.boxes,n=0,i=o.length;i>n;n++)e=o[n],this.applyStyle(e,!0);return this.disabled()||(this.util().addEvent(window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new t(function(t){return function(e){var n,i,o,r,s;for(s=[],o=0,r=e.length;r>o;o++)i=e[o],s.push(function(){var t,e,o,r;for(o=i.addedNodes||[],r=[],t=0,e=o.length;e>t;t++)n=o[t],r.push(this.doSync(n));return r}.call(t));return s}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},o.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval?clearInterval(this.interval):void 0},o.prototype.sync=function(){return t.notSupported?this.doSync(this.element):void 0},o.prototype.doSync=function(t){var e,n,i,o,r;if(null==t&&(t=this.element),1===t.nodeType){for(t=t.parentNode||t,o=t.querySelectorAll("."+this.config.boxClass),r=[],n=0,i=o.length;i>n;n++)e=o[n],s.call(this.all,e)<0?(this.boxes.push(e),this.all.push(e),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(e,!0),r.push(this.scrolled=!0)):r.push(void 0);return r}},o.prototype.show=function(t){return this.applyStyle(t),t.className=""+t.className+" "+this.config.animateClass,null!=this.config.callback?this.config.callback(t):void 0},o.prototype.applyStyle=function(t,e){var n,i,o;return i=t.getAttribute("data-wow-duration"),n=t.getAttribute("data-wow-delay"),o=t.getAttribute("data-wow-iteration"),this.animate(function(r){return function(){return r.customStyle(t,e,i,n,o)}}(this))},o.prototype.animate=function(){return"requestAnimationFrame"in window?function(t){return window.requestAnimationFrame(t)}:function(t){return t()}}(),o.prototype.resetStyle=function(){var t,e,n,i,o;for(i=this.boxes,o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(t.style.visibility="visible");return o},o.prototype.customStyle=function(t,e,n,i,o){return e&&this.cacheAnimationName(t),t.style.visibility=e?"hidden":"visible",n&&this.vendorSet(t.style,{animationDuration:n}),i&&this.vendorSet(t.style,{animationDelay:i}),o&&this.vendorSet(t.style,{animationIterationCount:o}),this.vendorSet(t.style,{animationName:e?"none":this.cachedAnimationName(t)}),t},o.prototype.vendors=["moz","webkit"],o.prototype.vendorSet=function(t,e){var n,i,o,r;r=[];for(n in e)i=e[n],t[""+n]=i,r.push(function(){var e,r,s,l;for(s=this.vendors,l=[],e=0,r=s.length;r>e;e++)o=s[e],l.push(t[""+o+n.charAt(0).toUpperCase()+n.substr(1)]=i);return l}.call(this));return r},o.prototype.vendorCSS=function(t,e){var n,o,r,s,l,a;for(o=i(t),n=o.getPropertyCSSValue(e),a=this.vendors,s=0,l=a.length;l>s;s++)r=a[s],n=n||o.getPropertyCSSValue("-"+r+"-"+e);return n},o.prototype.animationName=function(t){var e;try{e=this.vendorCSS(t,"animation-name").cssText}catch(n){e=i(t).getPropertyValue("animation-name")}return"none"===e?"":e},o.prototype.cacheAnimationName=function(t){return this.animationNameCache.set(t,this.animationName(t))},o.prototype.cachedAnimationName=function(t){return this.animationNameCache.get(t)},o.prototype.scrollHandler=function(){return this.scrolled=!0},o.prototype.scrollCallback=function(){var t;return!this.scrolled||(this.scrolled=!1,this.boxes=function(){var e,n,i,o;for(i=this.boxes,o=[],e=0,n=i.length;n>e;e++)t=i[e],t&&(this.isVisible(t)?this.show(t):o.push(t));return o}.call(this),this.boxes.length||this.config.live)?void 0:this.stop()},o.prototype.offsetTop=function(t){for(var e;void 0===t.offsetTop;)t=t.parentNode;for(e=t.offsetTop;t=t.offsetParent;)e+=t.offsetTop;return e},o.prototype.isVisible=function(t){var e,n,i,o,r;return n=t.getAttribute("data-wow-offset")||this.config.offset,r=window.pageYOffset,o=r+Math.min(this.element.clientHeight,this.util().innerHeight())-n,i=this.offsetTop(t),e=i+t.clientHeight,o>=i&&e>=r},o.prototype.util=function(){return null!=this._util?this._util:this._util=new e},o.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},o}()}.call(this),(new WOW).init(),window.addEventListener("load",function(){function t(){toggleClass(document.getElementById("mobile-menu"),"show")}var e=document.querySelector(".nav"),n=(document.getElementById("menu"),new Headroom(e,{offset:40,tolerance:10}));n.init(),document.getElementById("menu-toggle").addEventListener("click",function(){toggleClass(document.getElementById("mobile-menu"),"show")}),enquire.register("screen and (max-width:767px)",{match:function(){var e=document.getElementById("mobile-menu");e.addEventListener("click",t,!1);var n=document.querySelector(".arkdes-img"),i=n.parentNode;i.insertBefore(n,i.firstChild)},unmatch:function(){toggleClass(document.getElementById("mobile-menu"),"show");var e=document.getElementById("mobile-menu");e.removeEventListener("click",t,!1);var n=document.querySelector(".arkdes-txt"),i=n.parentNode;i.insertBefore(n,i.firstChild)}}),window.onscroll=function(){}},!1);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJlbnF1aXJlLmpzIiwiaGVhZHJvb20uanMiLCJwaWN0dXJlZmlsbC5qcyIsIndvdy5qcyJdLCJuYW1lcyI6WyJjaGFuZ2VCYWNrZ3JvdW5kQ29sb3IiLCJlbCIsInkiLCJ3aW5kb3ciLCJwYWdlWU9mZnNldCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsVG9wIiwiY2xhc3NOYW1lIiwidG9nZ2xlQ2xhc3MiLCJlbGVtZW50IiwiY2xhc3NTdHJpbmciLCJuYW1lSW5kZXgiLCJpbmRleE9mIiwic3Vic3RyIiwibGVuZ3RoIiwibmFtZSIsImNvbnRleHQiLCJmYWN0b3J5IiwibWF0Y2hNZWRpYSIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwiZWFjaCIsImNvbGxlY3Rpb24iLCJmbiIsImNvbnQiLCJpIiwiaXNBcnJheSIsInRhcmdldCIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiYXBwbHkiLCJpc0Z1bmN0aW9uIiwiUXVlcnlIYW5kbGVyIiwib3B0aW9ucyIsImRlZmVyU2V0dXAiLCJzZXR1cCIsIk1lZGlhUXVlcnkiLCJxdWVyeSIsImlzVW5jb25kaXRpb25hbCIsImhhbmRsZXJzIiwibXFsIiwic2VsZiIsImxpc3RlbmVyIiwiYXNzZXNzIiwiYWRkTGlzdGVuZXIiLCJNZWRpYVF1ZXJ5RGlzcGF0Y2giLCJFcnJvciIsInF1ZXJpZXMiLCJicm93c2VySXNJbmNhcGFibGUiLCJtYXRjaGVzIiwiaW5pdGlhbGlzZWQiLCJvbiIsIm1hdGNoIiwib2ZmIiwidW5tYXRjaCIsImRlc3Ryb3kiLCJlcXVhbHMiLCJhZGRIYW5kbGVyIiwiaGFuZGxlciIsInFoIiwicHVzaCIsInJlbW92ZUhhbmRsZXIiLCJoIiwic3BsaWNlIiwiY2xlYXIiLCJyZW1vdmVMaXN0ZW5lciIsImFjdGlvbiIsInJlZ2lzdGVyIiwicSIsInNob3VsZERlZ3JhZGUiLCJ1bnJlZ2lzdGVyIiwiRGVib3VuY2VyIiwiY2FsbGJhY2siLCJ0aWNraW5nIiwiaXNET01FbGVtZW50Iiwib2JqIiwibm9kZVR5cGUiLCJleHRlbmQiLCJvYmplY3QiLCJhcmd1bWVudHMiLCJrZXkiLCJyZXN1bHQiLCJyZXBsYWNlbWVudCIsIm5vcm1hbGl6ZVRvbGVyYW5jZSIsInQiLCJkb3duIiwidXAiLCJIZWFkcm9vbSIsImVsZW0iLCJsYXN0S25vd25TY3JvbGxZIiwiZGVib3VuY2VyIiwidXBkYXRlIiwiYmluZCIsInRvbGVyYW5jZSIsImNsYXNzZXMiLCJvZmZzZXQiLCJzY3JvbGxlciIsIm9uUGluIiwib25VbnBpbiIsIm9uVG9wIiwib25Ob3RUb3AiLCJmZWF0dXJlcyIsImNsYXNzTGlzdCIsInJBRiIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNvbnN0cnVjdG9yIiwicmVxdWVzdFRpY2siLCJyYWZDYWxsYmFjayIsImhhbmRsZUV2ZW50IiwiaW5pdCIsImN1dHNUaGVNdXN0YXJkIiwiYWRkIiwiaW5pdGlhbCIsInNldFRpbWVvdXQiLCJhdHRhY2hFdmVudCIsInJlbW92ZSIsInVucGlubmVkIiwicGlubmVkIiwidG9wIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldFNjcm9sbFkiLCJhZGRFdmVudExpc3RlbmVyIiwidW5waW4iLCJjb250YWlucyIsImNhbGwiLCJwaW4iLCJub3RUb3AiLCJ1bmRlZmluZWQiLCJib2R5IiwicGFyZW50Tm9kZSIsImdldFZpZXdwb3J0SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJnZXREb2N1bWVudEhlaWdodCIsIk1hdGgiLCJtYXgiLCJzY3JvbGxIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJnZXRFbGVtZW50SGVpZ2h0IiwiZWxtIiwiZ2V0U2Nyb2xsZXJIZWlnaHQiLCJpc091dE9mQm91bmRzIiwiY3VycmVudFNjcm9sbFkiLCJwYXN0VG9wIiwicGFzdEJvdHRvbSIsInRvbGVyYW5jZUV4Y2VlZGVkIiwiZGlyZWN0aW9uIiwiYWJzIiwic2hvdWxkVW5waW4iLCJzY3JvbGxpbmdEb3duIiwicGFzdE9mZnNldCIsInNob3VsZFBpbiIsInNjcm9sbGluZ1VwIiwic2Nyb2xsRGlyZWN0aW9uIiwic3R5bGVNZWRpYSIsIm1lZGlhIiwic3R5bGUiLCJjcmVhdGVFbGVtZW50Iiwic2NyaXB0IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpbmZvIiwidHlwZSIsImlkIiwiaW5zZXJ0QmVmb3JlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImN1cnJlbnRTdHlsZSIsIm1hdGNoTWVkaXVtIiwidGV4dCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwidGV4dENvbnRlbnQiLCJ3aWR0aCIsInciLCJkb2MiLCJpbWFnZSIsInBpY3R1cmVmaWxsIiwib3B0IiwiZWxlbWVudHMiLCJwYXJlbnQiLCJmaXJzdE1hdGNoIiwiY2FuZGlkYXRlcyIsInBmIiwiZ2V0QWxsRWxlbWVudHMiLCJwbGVuIiwibm9kZU5hbWUiLCJ0b1VwcGVyQ2FzZSIsIm5zIiwicmVldmFsdWF0ZSIsImV2YWx1YXRlZCIsInJlbW92ZVZpZGVvU2hpbSIsImdldE1hdGNoIiwic3Jjc2V0Iiwic3Jjc2V0U3VwcG9ydGVkIiwic2l6ZXNTdXBwb3J0ZWQiLCJkb2RnZVNyY3NldCIsInByb2Nlc3NTb3VyY2VTZXQiLCJhcHBseUJlc3RDYW5kaWRhdGUiLCJydW5QaWN0dXJlZmlsbCIsImNoZWNrUmVzaXplIiwicmVzaXplVGhyb3R0bGUiLCJfcGljdHVyZWZpbGxXb3JraW5nIiwiY2xlYXJUaW1lb3V0IiwiaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwidGVzdCIsInJlYWR5U3RhdGUiLCJjbGVhckludGVydmFsIiwiSFRNTFBpY3R1cmVFbGVtZW50IiwidHJpbSIsInN0ciIsInJlcGxhY2UiLCJlbmRzV2l0aCIsInN1ZmZpeCIsInJlc3RyaWN0c01peGVkQ29udGVudCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJtYXRjaGVzTWVkaWEiLCJnZXREcHIiLCJkZXZpY2VQaXhlbFJhdGlvIiwiZ2V0V2lkdGhGcm9tTGVuZ3RoIiwicGFyc2VGbG9hdCIsImxlbmd0aEVsIiwiYXBwZW5kQ2hpbGQiLCJvZmZzZXRXaWR0aCIsInJlbW92ZUNoaWxkIiwidHlwZXMiLCJpbXBsZW1lbnRhdGlvbiIsImhhc0ZlYXR1cmUiLCJvbmVycm9yIiwib25sb2FkIiwic3JjIiwidmVyaWZ5VHlwZVN1cHBvcnQiLCJzb3VyY2UiLCJnZXRBdHRyaWJ1dGUiLCJwYXJzZVNpemUiLCJzb3VyY2VTaXplU3RyIiwiZXhlYyIsImZpbmRXaWR0aEZyb21Tb3VyY2VTaXplIiwic291cmNlU2l6ZUxpc3RTdHIiLCJ3aW5uaW5nTGVuZ3RoIiwic291cmNlU2l6ZUxpc3QiLCJzcGxpdCIsImxlbiIsInNvdXJjZVNpemUiLCJwYXJzZWRTaXplIiwicGFyc2VTcmNzZXQiLCJ1cmwiLCJwb3MiLCJzZWFyY2giLCJkZXNjcmlwdG9yIiwic2xpY2UiLCJsYXN0IiwiZGVzY3BvcyIsInBhcnNlRGVzY3JpcHRvciIsInNpemVzYXR0ciIsInJlc0NhbmRpZGF0ZSIsInNpemVzIiwic2l6ZURlc2NyaXB0b3IiLCJ3aWR0aEluQ3NzUGl4ZWxzIiwic3BsaXREZXNjcmlwdG9yIiwiY3VyciIsImxhc3RjaGFyIiwicmVzIiwiaXNOYU4iLCJwYXJzZUludCIsImdldENhbmRpZGF0ZXNGcm9tU291cmNlU2V0IiwiZm9ybWF0dGVkQ2FuZGlkYXRlcyIsImNhbmRpZGF0ZSIsInJlc29sdXRpb24iLCJpbWciLCJyZW1vdmVBdHRyaWJ1dGUiLCJwaWNJbWciLCJiZXN0Q2FuZGlkYXRlIiwic29ydCIsImFzY2VuZGluZ1NvcnQiLCJ0b0xvd2VyQ2FzZSIsImNvbnNvbGUiLCJ3YXJuIiwiY3VycmVudFNyYyIsIldlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSIsImN1cnJlbnRab29tIiwiem9vbSIsImEiLCJiIiwicGljdHVyZSIsInZpZGVvcyIsInZpZGVvIiwidnNvdXJjZXMiLCJlbGVtcyIsImltZ3MiLCJjdXJySW1nIiwic291cmNlcyIsImNoaWxkTm9kZXMiLCJqIiwic2xlbiIsInR5cGVTdXBwb3J0ZWQiLCJfIiwiSW1hZ2UiLCJyb290IiwibWFrZSIsInZpZXdwb3J0Iiwidmlld3BvcnRXIiwiaGVpZ2h0Iiwidmlld3BvcnRIIiwiY2FsaWJyYXRlIiwiY29vcmRzIiwiY3VzaGlvbiIsIm8iLCJyZWN0YW5nbGUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhc3BlY3QiLCJ4cG9ydHMiLCJ3aW4iLCJkb2NFbGVtIiwibXEiLCJwYWdlWE9mZnNldCIsInNjcm9sbExlZnQiLCJyIiwicmlnaHQiLCJsZWZ0IiwiYm90dG9tIiwiTXV0YXRpb25PYnNlcnZlciIsIlV0aWwiLCJXZWFrTWFwIiwiZ2V0Q29tcHV0ZWRTdHlsZVJYIiwiX19iaW5kIiwibWUiLCJfX2luZGV4T2YiLCJpdGVtIiwibCIsImN1c3RvbSIsImRlZmF1bHRzIiwidmFsdWUiLCJpc01vYmlsZSIsImFnZW50IiwiYWRkRXZlbnQiLCJldmVudCIsInJlbW92ZUV2ZW50IiwiZGV0YWNoRXZlbnQiLCJNb3pXZWFrTWFwIiwia2V5cyIsInZhbHVlcyIsImdldCIsIl9pIiwiX2xlbiIsIl9yZWYiLCJzZXQiLCJXZWJraXRNdXRhdGlvbk9ic2VydmVyIiwiTW96TXV0YXRpb25PYnNlcnZlciIsIm5vdFN1cHBvcnRlZCIsIm9ic2VydmUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwicHJvcCIsIl9jaGFyIiwiV09XIiwic2Nyb2xsQ2FsbGJhY2siLCJzY3JvbGxIYW5kbGVyIiwic3RhcnQiLCJzY3JvbGxlZCIsImNvbmZpZyIsInV0aWwiLCJhbmltYXRpb25OYW1lQ2FjaGUiLCJib3hDbGFzcyIsImFuaW1hdGVDbGFzcyIsIm1vYmlsZSIsImxpdmUiLCJmaW5pc2hlZCIsImJveCIsInN0b3BwZWQiLCJib3hlcyIsIl9yZXN1bHRzIiwicXVlcnlTZWxlY3RvckFsbCIsImFsbCIsImRpc2FibGVkIiwicmVzZXRTdHlsZSIsImFwcGx5U3R5bGUiLCJpbnRlcnZhbCIsIl90aGlzIiwicmVjb3JkcyIsIm5vZGUiLCJyZWNvcmQiLCJfaiIsIl9sZW4xIiwiX2siLCJfbGVuMiIsIl9yZWYxIiwiX3Jlc3VsdHMxIiwiYWRkZWROb2RlcyIsImRvU3luYyIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJzdG9wIiwic3luYyIsInNob3ciLCJoaWRkZW4iLCJkZWxheSIsImR1cmF0aW9uIiwiaXRlcmF0aW9uIiwiYW5pbWF0ZSIsImN1c3RvbVN0eWxlIiwidmlzaWJpbGl0eSIsImNhY2hlQW5pbWF0aW9uTmFtZSIsInZlbmRvclNldCIsImFuaW1hdGlvbkR1cmF0aW9uIiwiYW5pbWF0aW9uRGVsYXkiLCJhbmltYXRpb25JdGVyYXRpb25Db3VudCIsImFuaW1hdGlvbk5hbWUiLCJjYWNoZWRBbmltYXRpb25OYW1lIiwidmVuZG9ycyIsInByb3BlcnRpZXMiLCJ2ZW5kb3IiLCJjaGFyQXQiLCJ2ZW5kb3JDU1MiLCJwcm9wZXJ0eSIsImdldFByb3BlcnR5Q1NTVmFsdWUiLCJfZXJyb3IiLCJpc1Zpc2libGUiLCJvZmZzZXRUb3AiLCJvZmZzZXRQYXJlbnQiLCJ2aWV3Qm90dG9tIiwidmlld1RvcCIsIm1pbiIsIl91dGlsIiwibmF2aWdhdG9yIiwidXNlckFnZW50Iiwic2hvd01lbnUiLCJnZXRFbGVtZW50QnlJZCIsInRvcE5hdiIsInF1ZXJ5U2VsZWN0b3IiLCJoZWFkcm9vbSIsImVucXVpcmUiLCJtb2JpbGVNZW51IiwiYXJrZGVzSW1nIiwiZmlyc3RDaGlsZCIsIm9uc2Nyb2xsIl0sIm1hcHBpbmdzIjoiQUF3REEsUUFBQUEsdUJBQUFDLEdBQ0EsR0FBQUMsR0FBQUMsT0FBQUMsYUFBQUMsU0FBQUMsZ0JBQUFDLFNBRUFOLEdBQUFPLFVBREFOLEVBQUEsR0FDQSxRQUVBLEdBSUEsUUFBQU8sYUFBQUMsRUFBQUYsR0FDQSxHQUFBRSxHQUFBRixFQUFBLENBR0EsR0FBQUcsR0FBQUQsRUFBQUYsVUFBQUksRUFBQUQsRUFBQUUsUUFBQUwsRUFDQSxLQUFBSSxFQUNBRCxHQUFBLElBQUFILEVBR0FHLEVBQUFBLEVBQUFHLE9BQUEsRUFBQUYsR0FBQUQsRUFBQUcsT0FBQUYsRUFBQUosRUFBQU8sUUFFQUwsRUFBQUYsVUFBQUcsSUN0RUEsU0FBQUssRUFBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBaEIsT0FBQWdCLFVBRUEsb0JBQUFDLFNBQUFBLE9BQUFDLFFBQ0FELE9BQUFDLFFBQUFILEVBQUFDLEdBRUEsa0JBQUFHLFNBQUFBLE9BQUFDLElBQ0FELE9BQUEsV0FDQSxNQUFBTCxHQUFBRCxHQUFBRSxFQUFBQyxLQUlBRixFQUFBRCxHQUFBRSxFQUFBQyxJQUVBLFVBQUFLLEtBQUEsU0FBQUwsR0FFQSxZQVNBLFNBQUFNLEdBQUFDLEVBQUFDLEdBQ0EsR0FFQUMsR0FGQUMsRUFBQSxFQUNBZCxFQUFBVyxFQUFBWCxNQUdBLEtBQUFjLEVBQUFkLEVBQUFjLElBQ0FELEVBQUFELEVBQUFELEVBQUFHLEdBQUFBLEdBQ0FELEtBQUEsR0FGQUMsTUFjQSxRQUFBQyxHQUFBQyxHQUNBLE1BQUEsbUJBQUFDLE9BQUFDLFVBQUFDLFNBQUFDLE1BQUFKLEdBU0EsUUFBQUssR0FBQUwsR0FDQSxNQUFBLGtCQUFBQSxHQWFBLFFBQUFNLEdBQUFDLEdBQ0FkLEtBQUFjLFFBQUFBLEdBQ0FBLEVBQUFDLFlBQUFmLEtBQUFnQixRQWdFQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUNBbkIsS0FBQWtCLE1BQUFBLEVBQ0FsQixLQUFBbUIsZ0JBQUFBLEVBQ0FuQixLQUFBb0IsWUFDQXBCLEtBQUFxQixJQUFBMUIsRUFBQXVCLEVBRUEsSUFBQUksR0FBQXRCLElBQ0FBLE1BQUF1QixTQUFBLFNBQUFGLEdBQ0FDLEVBQUFELElBQUFBLEVBQ0FDLEVBQUFFLFVBRUF4QixLQUFBcUIsSUFBQUksWUFBQXpCLEtBQUF1QixVQXdFQSxRQUFBRyxLQUNBLElBQUEvQixFQUNBLEtBQUEsSUFBQWdDLE9BQUEsNkRBR0EzQixNQUFBNEIsV0FDQTVCLEtBQUE2QixvQkFBQWxDLEVBQUEsWUFBQW1DLFFBZ0VBLE1Bdk5BakIsR0FBQUosV0FPQU8sTUFBQSxXQUNBaEIsS0FBQWMsUUFBQUUsT0FDQWhCLEtBQUFjLFFBQUFFLFFBRUFoQixLQUFBK0IsYUFBQSxHQVFBQyxHQUFBLFlBQ0FoQyxLQUFBK0IsYUFBQS9CLEtBQUFnQixRQUNBaEIsS0FBQWMsUUFBQW1CLE9BQUFqQyxLQUFBYyxRQUFBbUIsU0FRQUMsSUFBQSxXQUNBbEMsS0FBQWMsUUFBQXFCLFNBQUFuQyxLQUFBYyxRQUFBcUIsV0FTQUMsUUFBQSxXQUNBcEMsS0FBQWMsUUFBQXNCLFFBQUFwQyxLQUFBYyxRQUFBc0IsVUFBQXBDLEtBQUFrQyxPQVVBRyxPQUFBLFNBQUE5QixHQUNBLE1BQUFQLE1BQUFjLFVBQUFQLEdBQUFQLEtBQUFjLFFBQUFtQixRQUFBMUIsSUF3QkFVLEVBQUFSLFdBV0E2QixXQUFBLFNBQUFDLEdBQ0EsR0FBQUMsR0FBQSxHQUFBM0IsR0FBQTBCLEVBQ0F2QyxNQUFBb0IsU0FBQXFCLEtBQUFELEdBRUF4QyxLQUFBOEIsV0FBQVUsRUFBQVIsTUFRQVUsY0FBQSxTQUFBSCxHQUNBLEdBQUFuQixHQUFBcEIsS0FBQW9CLFFBQ0FuQixHQUFBbUIsRUFBQSxTQUFBdUIsRUFBQXRDLEdBQ0EsTUFBQXNDLEdBQUFOLE9BQUFFLElBQ0FJLEVBQUFQLFdBQ0FoQixFQUFBd0IsT0FBQXZDLEVBQUEsSUFGQSxVQVlBeUIsUUFBQSxXQUNBLE1BQUE5QixNQUFBcUIsSUFBQVMsU0FBQTlCLEtBQUFtQixpQkFNQTBCLE1BQUEsV0FDQTVDLEVBQUFELEtBQUFvQixTQUFBLFNBQUFtQixHQUNBQSxFQUFBSCxZQUVBcEMsS0FBQXFCLElBQUF5QixlQUFBOUMsS0FBQXVCLFVBQ0F2QixLQUFBb0IsU0FBQTdCLE9BQUEsR0FNQWlDLE9BQUEsV0FDQSxHQUFBdUIsR0FBQS9DLEtBQUE4QixVQUFBLEtBQUEsS0FFQTdCLEdBQUFELEtBQUFvQixTQUFBLFNBQUFtQixHQUNBQSxFQUFBUSxTQW1CQXJCLEVBQUFqQixXQWFBdUMsU0FBQSxTQUFBQyxFQUFBbkMsRUFBQW9DLEdBQ0EsR0FBQXRCLEdBQUE1QixLQUFBNEIsUUFDQVQsRUFBQStCLEdBQUFsRCxLQUFBNkIsa0JBb0JBLE9BbEJBRCxHQUFBcUIsS0FDQXJCLEVBQUFxQixHQUFBLEdBQUFoQyxHQUFBZ0MsRUFBQTlCLElBSUFQLEVBQUFFLEtBQ0FBLEdBQUFtQixNQUFBbkIsSUFFQVIsRUFBQVEsS0FDQUEsR0FBQUEsSUFFQWIsRUFBQWEsRUFBQSxTQUFBeUIsR0FDQTNCLEVBQUEyQixLQUNBQSxHQUFBTixNQUFBTSxJQUVBWCxFQUFBcUIsR0FBQVgsV0FBQUMsS0FHQXZDLE1BU0FtRCxXQUFBLFNBQUFGLEVBQUFWLEdBQ0EsR0FBQXJCLEdBQUFsQixLQUFBNEIsUUFBQXFCLEVBWUEsT0FWQS9CLEtBQ0FxQixFQUNBckIsRUFBQXdCLGNBQUFILElBR0FyQixFQUFBMkIsY0FDQTdDLE1BQUE0QixRQUFBcUIsS0FJQWpELE9BSUEsR0FBQTBCLEtDL1JBLFNBQUEvQyxFQUFBRSxHQUVBLFlBZ0JBLFNBQUF1RSxHQUFBQyxHQUNBckQsS0FBQXFELFNBQUFBLEVBQ0FyRCxLQUFBc0QsU0FBQSxFQXFDQSxRQUFBQyxHQUFBQyxHQUNBLE1BQUFBLElBQUEsbUJBQUE3RSxLQUFBNkUsSUFBQTdFLEdBQUE2RSxFQUFBQyxVQU1BLFFBQUFDLEdBQUFDLEdBQ0EsR0FBQUMsVUFBQXJFLFFBQUEsRUFDQSxLQUFBLElBQUFvQyxPQUFBLHVDQUdBLElBQ0FrQyxHQUNBeEQsRUFGQXlELEVBQUFILEtBSUEsS0FBQXRELEVBQUEsRUFBQUEsRUFBQXVELFVBQUFyRSxPQUFBYyxJQUFBLENBQ0EsR0FBQTBELEdBQUFILFVBQUF2RCxNQUVBLEtBQUF3RCxJQUFBRSxHQU1BRCxFQUFBRCxHQUpBLGdCQUFBQyxHQUFBRCxJQUFBTixFQUFBTyxFQUFBRCxJQUlBQyxFQUFBRCxJQUFBRSxFQUFBRixHQUhBSCxFQUFBSSxFQUFBRCxHQUFBRSxFQUFBRixJQVFBLE1BQUFDLEdBTUEsUUFBQUUsR0FBQUMsR0FDQSxNQUFBQSxLQUFBekQsT0FBQXlELEdBQUFBLEdBQUFDLEtBQUFELEVBQUFFLEdBQUFGLEdBV0EsUUFBQUcsR0FBQUMsRUFBQXZELEdBQ0FBLEVBQUE0QyxFQUFBNUMsRUFBQXNELEVBQUF0RCxTQUVBZCxLQUFBc0UsaUJBQUEsRUFDQXRFLEtBQUFxRSxLQUFBQSxFQUNBckUsS0FBQXVFLFVBQUEsR0FBQW5CLEdBQUFwRCxLQUFBd0UsT0FBQUMsS0FBQXpFLE9BQ0FBLEtBQUEwRSxVQUFBVixFQUFBbEQsRUFBQTRELFdBQ0ExRSxLQUFBMkUsUUFBQTdELEVBQUE2RCxRQUNBM0UsS0FBQTRFLE9BQUE5RCxFQUFBOEQsT0FDQTVFLEtBQUE2RSxTQUFBL0QsRUFBQStELFNBQ0E3RSxLQUFBK0IsYUFBQSxFQUNBL0IsS0FBQThFLE1BQUFoRSxFQUFBZ0UsTUFDQTlFLEtBQUErRSxRQUFBakUsRUFBQWlFLFFBQ0EvRSxLQUFBZ0YsTUFBQWxFLEVBQUFrRSxNQUNBaEYsS0FBQWlGLFNBQUFuRSxFQUFBbUUsU0FqSEEsR0FBQUMsSUFDQVQsT0FBQSxhQUFBLEtBQ0FVLFVBQUEsYUFBQXRHLEdBQUFDLGdCQUNBc0csT0FBQXpHLEVBQUEwRyx1QkFBQTFHLEVBQUEyRyw2QkFBQTNHLEVBQUE0RywwQkFFQTVHLEdBQUEwRyxzQkFBQTFHLEVBQUEwRyx1QkFBQTFHLEVBQUEyRyw2QkFBQTNHLEVBQUE0Ryx5QkFXQW5DLEVBQUEzQyxXQUNBK0UsWUFBQXBDLEVBTUFvQixPQUFBLFdBQ0F4RSxLQUFBcUQsVUFBQXJELEtBQUFxRCxXQUNBckQsS0FBQXNELFNBQUEsR0FPQW1DLFlBQUEsV0FDQXpGLEtBQUFzRCxVQUNBK0Isc0JBQUFyRixLQUFBMEYsY0FBQTFGLEtBQUEwRixZQUFBMUYsS0FBQXdFLE9BQUFDLEtBQUF6RSxRQUNBQSxLQUFBc0QsU0FBQSxJQU9BcUMsWUFBQSxXQUNBM0YsS0FBQXlGLGdCQXdFQXJCLEVBQUEzRCxXQUNBK0UsWUFBQXBCLEVBS0F3QixLQUFBLFdBQ0EsTUFBQXhCLEdBQUF5QixnQkFJQTdGLEtBQUFxRSxLQUFBYyxVQUFBVyxJQUFBOUYsS0FBQTJFLFFBQUFvQixTQUlBQyxXQUFBaEcsS0FBQWlHLFlBQUF4QixLQUFBekUsTUFBQSxLQUVBQSxNQVZBLFFBZ0JBb0MsUUFBQSxXQUNBLEdBQUF1QyxHQUFBM0UsS0FBQTJFLE9BRUEzRSxNQUFBK0IsYUFBQSxFQUNBL0IsS0FBQXFFLEtBQUFjLFVBQUFlLE9BQUF2QixFQUFBd0IsU0FBQXhCLEVBQUF5QixPQUFBekIsRUFBQTBCLElBQUExQixFQUFBb0IsU0FDQS9GLEtBQUE2RSxTQUFBeUIsb0JBQUEsU0FBQXRHLEtBQUF1RSxXQUFBLElBT0EwQixZQUFBLFdBQ0FqRyxLQUFBK0IsY0FDQS9CLEtBQUFzRSxpQkFBQXRFLEtBQUF1RyxhQUNBdkcsS0FBQStCLGFBQUEsRUFDQS9CLEtBQUE2RSxTQUFBMkIsaUJBQUEsU0FBQXhHLEtBQUF1RSxXQUFBLEdBRUF2RSxLQUFBdUUsVUFBQW9CLGdCQU9BYyxNQUFBLFdBQ0EsR0FBQXRCLEdBQUFuRixLQUFBcUUsS0FBQWMsVUFDQVIsRUFBQTNFLEtBQUEyRSxTQUVBUSxFQUFBdUIsU0FBQS9CLEVBQUF5QixVQUFBakIsRUFBQXVCLFNBQUEvQixFQUFBd0IsYUFDQWhCLEVBQUFXLElBQUFuQixFQUFBd0IsVUFDQWhCLEVBQUFlLE9BQUF2QixFQUFBeUIsUUFDQXBHLEtBQUErRSxTQUFBL0UsS0FBQStFLFFBQUE0QixLQUFBM0csUUFPQTRHLElBQUEsV0FDQSxHQUFBekIsR0FBQW5GLEtBQUFxRSxLQUFBYyxVQUNBUixFQUFBM0UsS0FBQTJFLE9BRUFRLEdBQUF1QixTQUFBL0IsRUFBQXdCLFlBQ0FoQixFQUFBZSxPQUFBdkIsRUFBQXdCLFVBQ0FoQixFQUFBVyxJQUFBbkIsRUFBQXlCLFFBQ0FwRyxLQUFBOEUsT0FBQTlFLEtBQUE4RSxNQUFBNkIsS0FBQTNHLFFBT0FxRyxJQUFBLFdBQ0EsR0FBQWxCLEdBQUFuRixLQUFBcUUsS0FBQWMsVUFDQVIsRUFBQTNFLEtBQUEyRSxPQUVBUSxHQUFBdUIsU0FBQS9CLEVBQUEwQixPQUNBbEIsRUFBQVcsSUFBQW5CLEVBQUEwQixLQUNBbEIsRUFBQWUsT0FBQXZCLEVBQUFrQyxRQUNBN0csS0FBQWdGLE9BQUFoRixLQUFBZ0YsTUFBQTJCLEtBQUEzRyxRQU9BNkcsT0FBQSxXQUNBLEdBQUExQixHQUFBbkYsS0FBQXFFLEtBQUFjLFVBQ0FSLEVBQUEzRSxLQUFBMkUsT0FFQVEsR0FBQXVCLFNBQUEvQixFQUFBa0MsVUFDQTFCLEVBQUFXLElBQUFuQixFQUFBa0MsUUFDQTFCLEVBQUFlLE9BQUF2QixFQUFBMEIsS0FDQXJHLEtBQUFpRixVQUFBakYsS0FBQWlGLFNBQUEwQixLQUFBM0csUUFTQXVHLFdBQUEsV0FDQSxNQUFBTyxVQUFBOUcsS0FBQTZFLFNBQUFqRyxZQUNBb0IsS0FBQTZFLFNBQUFqRyxZQUNBa0ksU0FBQTlHLEtBQUE2RSxTQUFBOUYsVUFDQWlCLEtBQUE2RSxTQUFBOUYsV0FDQUYsRUFBQUMsaUJBQUFELEVBQUFrSSxLQUFBQyxZQUFBbkksRUFBQWtJLE1BQUFoSSxXQVFBa0ksa0JBQUEsV0FDQSxNQUFBdEksR0FBQXVJLGFBQ0FySSxFQUFBQyxnQkFBQXFJLGNBQ0F0SSxFQUFBa0ksS0FBQUksY0FRQUMsa0JBQUEsV0FDQSxHQUFBTCxHQUFBbEksRUFBQWtJLEtBQ0FqSSxFQUFBRCxFQUFBQyxlQUVBLE9BQUF1SSxNQUFBQyxJQUNBUCxFQUFBUSxhQUFBekksRUFBQXlJLGFBQ0FSLEVBQUFTLGFBQUExSSxFQUFBMEksYUFDQVQsRUFBQUksYUFBQXJJLEVBQUFxSSxlQVNBTSxpQkFBQSxTQUFBQyxHQUNBLE1BQUFMLE1BQUFDLElBQ0FJLEVBQUFILGFBQ0FHLEVBQUFGLGFBQ0FFLEVBQUFQLGVBUUFRLGtCQUFBLFdBQ0EsTUFBQTNILE1BQUE2RSxXQUFBbEcsR0FBQXFCLEtBQUE2RSxXQUFBaEcsRUFBQWtJLEtBQ0EvRyxLQUFBb0gsb0JBQ0FwSCxLQUFBeUgsaUJBQUF6SCxLQUFBNkUsV0FRQStDLGNBQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFBLEVBQUFELEVBQ0FFLEVBQUFGLEVBQUE3SCxLQUFBaUgsb0JBQUFqSCxLQUFBMkgsbUJBRUEsT0FBQUcsSUFBQUMsR0FRQUMsa0JBQUEsU0FBQUgsRUFBQUksR0FDQSxNQUFBWixNQUFBYSxJQUFBTCxFQUFBN0gsS0FBQXNFLG1CQUFBdEUsS0FBQTBFLFVBQUF1RCxJQVNBRSxZQUFBLFNBQUFOLEVBQUFHLEdBQ0EsR0FBQUksR0FBQVAsRUFBQTdILEtBQUFzRSxpQkFDQStELEVBQUFSLEdBQUE3SCxLQUFBNEUsTUFFQSxPQUFBd0QsSUFBQUMsR0FBQUwsR0FTQU0sVUFBQSxTQUFBVCxFQUFBRyxHQUNBLEdBQUFPLEdBQUFWLEVBQUE3SCxLQUFBc0UsaUJBQ0ErRCxFQUFBUixHQUFBN0gsS0FBQTRFLE1BRUEsT0FBQTJELElBQUFQLEdBQUFLLEdBTUE3RCxPQUFBLFdBQ0EsR0FBQXFELEdBQUE3SCxLQUFBdUcsYUFDQWlDLEVBQUFYLEVBQUE3SCxLQUFBc0UsaUJBQUEsT0FBQSxLQUNBMEQsRUFBQWhJLEtBQUFnSSxrQkFBQUgsRUFBQVcsRUFFQXhJLE1BQUE0SCxjQUFBQyxLQUlBQSxHQUFBN0gsS0FBQTRFLE9BQ0E1RSxLQUFBcUcsTUFFQXJHLEtBQUE2RyxTQUdBN0csS0FBQW1JLFlBQUFOLEVBQUFHLEdBQ0FoSSxLQUFBeUcsUUFFQXpHLEtBQUFzSSxVQUFBVCxFQUFBRyxJQUNBaEksS0FBQTRHLE1BR0E1RyxLQUFBc0UsaUJBQUF1RCxLQU9BekQsRUFBQXRELFNBQ0E0RCxXQUNBUCxHQUFBLEVBQ0FELEtBQUEsR0FFQVUsT0FBQSxFQUNBQyxTQUFBbEcsRUFDQWdHLFNBQ0F5QixPQUFBLG1CQUNBRCxTQUFBLHFCQUNBRSxJQUFBLGdCQUNBUSxPQUFBLG9CQUNBZCxRQUFBLGFBR0EzQixFQUFBeUIsZUFBQSxtQkFBQVgsSUFBQUEsRUFBQUUsS0FBQUYsRUFBQVQsTUFBQVMsRUFBQUMsVUFFQXhHLEVBQUF5RixTQUFBQSxHQUVBekYsT0FBQUUsVUNoWUFGLE9BQUFnQixhQUFBaEIsT0FBQWdCLFdBQUEsV0FDQSxZQUdBLElBQUE4SSxHQUFBOUosT0FBQThKLFlBQUE5SixPQUFBK0osS0FHQSxLQUFBRCxFQUFBLENBQ0EsR0FBQUUsR0FBQTlKLFNBQUErSixjQUFBLFNBQ0FDLEVBQUFoSyxTQUFBaUsscUJBQUEsVUFBQSxHQUNBQyxFQUFBLElBRUFKLEdBQUFLLEtBQUEsV0FDQUwsRUFBQU0sR0FBQSxvQkFFQUosRUFBQTdCLFdBQUFrQyxhQUFBUCxFQUFBRSxHQUdBRSxFQUFBLG9CQUFBcEssU0FBQUEsT0FBQXdLLGlCQUFBUixFQUFBLE9BQUFBLEVBQUFTLGFBRUFYLEdBQ0FZLFlBQUEsU0FBQVgsR0FDQSxHQUFBWSxHQUFBLFVBQUFaLEVBQUEsd0NBVUEsT0FQQUMsR0FBQVksV0FDQVosRUFBQVksV0FBQUMsUUFBQUYsRUFFQVgsRUFBQWMsWUFBQUgsRUFJQSxRQUFBUCxFQUFBVyxRQUtBLE1BQUEsVUFBQWhCLEdBQ0EsT0FDQTVHLFFBQUEyRyxFQUFBWSxZQUFBWCxHQUFBLE9BQ0FBLE1BQUFBLEdBQUEsWUFTQSxTQUFBaUIsRUFBQUMsRUFBQUMsR0FFQSxZQW9kQSxTQUFBQyxHQUFBQyxHQUNBLEdBQUFDLEdBQ0E5SyxFQUNBK0ssRUFDQUMsRUFDQUMsRUFDQXJKLEVBQUFpSixLQUVBQyxHQUFBbEosRUFBQWtKLFVBQUFJLEVBQUFDLGdCQUdBLEtBQUEsR0FBQWhLLEdBQUEsRUFBQWlLLEVBQUFOLEVBQUF6SyxPQUFBK0ssRUFBQWpLLEVBQUFBLElBT0EsR0FOQW5CLEVBQUE4SyxFQUFBM0osR0FDQTRKLEVBQUEvSyxFQUFBOEgsV0FDQWtELEVBQUFwRCxPQUNBcUQsRUFBQXJELE9BR0EsUUFBQTVILEVBQUFxTCxTQUFBQyxnQkFLQXRMLEVBQUFrTCxFQUFBSyxNQUNBdkwsRUFBQWtMLEVBQUFLLFFBTUEzSixFQUFBNEosYUFBQXhMLEVBQUFrTCxFQUFBSyxJQUFBRSxXQUFBLENBS0EsR0FBQSxZQUFBVixFQUFBTSxTQUFBQyxlQWFBLEdBVkFKLEVBQUFRLGdCQUFBWCxHQUtBQyxFQUFBRSxFQUFBUyxTQUFBM0wsRUFBQStLLEdBS0FDLEtBQUEsRUFDQSxhQUdBQSxHQUFBcEQsUUFJQSxZQUFBbUQsRUFBQU0sU0FBQUMsZUFDQXRMLEVBQUE0TCxTQUFBVixFQUFBVyxrQkFDQVgsRUFBQVksZ0JBQUE5TCxFQUFBNEwsUUFBQTVMLEVBQUE0TCxPQUFBekwsUUFBQSxLQUFBLEtBQ0ErSyxFQUFBYSxZQUFBL0wsR0FHQWdMLEdBQ0FDLEVBQUFDLEVBQUFjLGlCQUFBaEIsR0FDQUUsRUFBQWUsbUJBQUFoQixFQUFBakwsS0FHQWlMLEVBQUFDLEVBQUFjLGlCQUFBaE0sSUFFQTRILFNBQUE1SCxFQUFBNEwsUUFBQTVMLEVBQUFrTCxFQUFBSyxJQUFBSyxTQUVBVixFQUFBZSxtQkFBQWhCLEVBQUFqTCxJQUtBQSxFQUFBa0wsRUFBQUssSUFBQUUsV0FBQSxHQVNBLFFBQUFTLEtBWUEsUUFBQUMsS0FDQSxHQUFBQyxFQUVBM0IsR0FBQTRCLHNCQUNBNUIsRUFBQTRCLHFCQUFBLEVBQ0E1QixFQUFBNkIsYUFBQUYsR0FDQUEsRUFBQTNCLEVBQUEzRCxXQUFBLFdBQ0E4RCxHQUFBWSxZQUFBLElBQ0FmLEVBQUE0QixxQkFBQSxHQUNBLEtBcEJBekIsR0FDQSxJQUFBMkIsR0FBQUMsWUFBQSxXQUlBLE1BREE1QixLQUNBLGdCQUFBNkIsS0FBQS9CLEVBQUFnQyxnQkFDQUMsZUFBQUosR0FEQSxRQUlBLElBZUE5QixHQUFBbkQsaUJBQ0FtRCxFQUFBbkQsaUJBQUEsU0FBQTZFLEdBQUEsR0FDQTFCLEVBQUExRCxhQUNBMEQsRUFBQTFELFlBQUEsV0FBQW9GLEdBbGtCQSxHQUFBMUIsRUFBQW1DLG1CQUVBLFlBREFuQyxFQUFBRyxZQUFBLGFBS0FGLEdBQUFoQixjQUFBLFVBR0EsSUFBQXdCLEtBR0FBLEdBQUFLLEdBQUEsY0FHQSxXQUNBTCxFQUFBVyxnQkFBQSxVQUFBbEIsR0FDQU8sRUFBQVksZUFBQSxTQUFBbkIsTUFJQU8sRUFBQTJCLEtBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBRCxLQUFBQyxFQUFBRCxPQUFBQyxFQUFBQyxRQUFBLGFBQUEsS0FJQTdCLEVBQUE4QixTQUFBLFNBQUFGLEVBQUFHLEdBQ0EsTUFBQUgsR0FBQUUsU0FBQUYsRUFBQUUsU0FBQUMsR0FBQSxLQUFBSCxFQUFBM00sUUFBQThNLEVBQUFILEVBQUF6TSxPQUFBNE0sRUFBQTVNLFNBTUE2SyxFQUFBZ0Msc0JBQUEsV0FDQSxNQUFBLFdBQUF6QyxFQUFBMEMsU0FBQUMsVUFNQWxDLEVBQUFtQyxhQUFBLFNBQUE3RCxHQUNBLE1BQUFpQixHQUFBaEssWUFBQWdLLEVBQUFoSyxXQUFBK0ksR0FBQTVHLFNBSUFzSSxFQUFBb0MsT0FBQSxXQUNBLE1BQUE3QyxHQUFBOEMsa0JBQUEsR0FPQXJDLEVBQUFzQyxtQkFBQSxTQUFBbk4sR0FFQUEsRUFBQUEsR0FBQUEsRUFBQUYsUUFBQSxLQUFBLEtBQUEsSUFBQXNOLFdBQUFwTixHQUFBLEdBQUFBLEVBQUFGLFFBQUEsU0FBQSxJQUFBRSxFQUFBLFFBUUFBLEVBQUFBLEVBQUEwTSxRQUFBLEtBQUEsS0FHQTdCLEVBQUF3QyxXQUNBeEMsRUFBQXdDLFNBQUFoRCxFQUFBaEIsY0FBQSxPQUdBd0IsRUFBQXdDLFNBQUFqRSxNQUFBYSxRQUFBLHNHQUdBWSxFQUFBd0MsU0FBQWpFLE1BQUFlLE1BQUFuSyxFQUVBcUssRUFBQTdDLEtBQUE4RixZQUFBekMsRUFBQXdDLFVBR0F4QyxFQUFBd0MsU0FBQTVOLFVBQUEsNkJBRUFvTCxFQUFBd0MsU0FBQUUsYUFBQSxJQUVBMUMsRUFBQXdDLFNBQUFqRSxNQUFBZSxNQUFBRSxFQUFBOUssZ0JBQUFnTyxZQUFBLEtBR0EsSUFBQUEsR0FBQTFDLEVBQUF3QyxTQUFBRSxXQUlBLE9BRkFsRCxHQUFBN0MsS0FBQWdHLFlBQUEzQyxFQUFBd0MsVUFFQUUsR0FJQTFDLEVBQUE0QyxTQUdBNUMsRUFBQTRDLE1BQUEsZUFBQSxFQUNBNUMsRUFBQTRDLE1BQUEsY0FBQSxFQUNBNUMsRUFBQTRDLE1BQUEsY0FBQSxFQUdBNUMsRUFBQTRDLE1BQUEsaUJBQUFwRCxFQUFBcUQsZUFBQUMsV0FBQSwyQ0FBQSxPQUdBOUMsRUFBQTRDLE1BQUEsY0FBQSxXQUdBLEdBQUFoRSxHQUFBLFlBRUFhLEdBQUFzRCxRQUFBLFdBQ0EvQyxFQUFBNEMsTUFBQWhFLElBQUEsRUFDQWMsS0FFQUQsRUFBQXVELE9BQUEsV0FDQWhELEVBQUE0QyxNQUFBaEUsR0FBQSxJQUFBYSxFQUFBSCxNQUNBSSxLQUVBRCxFQUFBd0QsSUFBQSwrRUFTQWpELEVBQUFrRCxrQkFBQSxTQUFBQyxHQUNBLEdBQUF2RSxHQUFBdUUsRUFBQUMsYUFBQSxPQUVBLE9BQUEsUUFBQXhFLEdBQUEsS0FBQUEsR0FDQSxFQUdBLGtCQUFBb0IsR0FBQTRDLE1BQUFoRSxJQUNBb0IsRUFBQTRDLE1BQUFoRSxLQUNBLFdBRUFvQixFQUFBNEMsTUFBQWhFLElBTUFvQixFQUFBcUQsVUFBQSxTQUFBQyxHQUNBLEdBQUF6TCxHQUFBLHVCQUFBMEwsS0FBQUQsRUFDQSxRQUNBaEYsTUFBQXpHLEdBQUFBLEVBQUEsR0FDQTFDLE9BQUEwQyxHQUFBQSxFQUFBLEtBS0FtSSxFQUFBd0Qsd0JBQUEsU0FBQUMsR0FNQSxJQUFBLEdBRkFDLEdBREFDLEVBQUEzRCxFQUFBMkIsS0FBQThCLEdBQUFHLE1BQUEsV0FHQTNOLEVBQUEsRUFBQTROLEVBQUFGLEVBQUF4TyxPQUFBME8sRUFBQTVOLEVBQUFBLElBQUEsQ0FFQSxHQUFBNk4sR0FBQUgsRUFBQTFOLEdBRUE4TixFQUFBL0QsRUFBQXFELFVBQUFTLEdBQ0EzTyxFQUFBNE8sRUFBQTVPLE9BQ0FtSixFQUFBeUYsRUFBQXpGLEtBRUEsSUFBQW5KLEtBR0FtSixHQUFBMEIsRUFBQW1DLGFBQUE3RCxJQUFBLENBR0FvRixFQUFBdk8sQ0FDQSxRQU1BLE1BQUE2SyxHQUFBc0MsbUJBQUFvQixJQUdBMUQsRUFBQWdFLFlBQUEsU0FBQXRELEdBYUEsSUFGQSxHQUFBWCxNQUVBLEtBQUFXLEdBQUEsQ0FDQUEsRUFBQUEsRUFBQW1CLFFBQUEsUUFBQSxHQUdBLElBQ0FvQyxHQURBQyxFQUFBeEQsRUFBQXlELE9BQUEsT0FDQUMsRUFBQSxJQUVBLElBQUEsS0FBQUYsRUFBQSxDQUNBRCxFQUFBdkQsRUFBQTJELE1BQUEsRUFBQUgsRUFFQSxJQUFBSSxHQUFBTCxFQUFBSSxNQUFBLEdBY0EsS0FSQSxNQUFBQyxHQUFBLEtBQUFMLEtBQ0FBLEVBQUFBLEVBQUFwQyxRQUFBLE1BQUEsSUFDQXVDLEVBQUEsSUFFQTFELEVBQUFBLEVBQUEyRCxNQUFBSCxFQUFBLEdBSUEsT0FBQUUsRUFBQSxDQUNBLEdBQUFHLEdBQUE3RCxFQUFBekwsUUFBQSxJQUNBLE1BQUFzUCxHQUNBSCxFQUFBMUQsRUFBQTJELE1BQUEsRUFBQUUsR0FDQTdELEVBQUFBLEVBQUEyRCxNQUFBRSxFQUFBLEtBRUFILEVBQUExRCxFQUNBQSxFQUFBLFNBSUF1RCxHQUFBdkQsRUFDQUEsRUFBQSxJQUlBdUQsR0FBQUcsSUFDQXJFLEVBQUExSCxNQUNBNEwsSUFBQUEsRUFDQUcsV0FBQUEsSUFJQSxNQUFBckUsSUFHQUMsRUFBQXdFLGdCQUFBLFNBQUFKLEVBQUFLLEdBR0EsR0FHQUMsR0FIQUMsRUFBQUYsR0FBQSxRQUNBRyxFQUFBUixHQUFBQSxFQUFBdkMsUUFBQSxlQUFBLElBQ0FnRCxFQUFBN0UsRUFBQXdELHdCQUFBbUIsRUFHQSxJQUFBQyxFQUdBLElBQUEsR0FGQUUsR0FBQUYsRUFBQWhCLE1BQUEsS0FFQTNOLEVBQUE2TyxFQUFBM1AsT0FBQSxFQUFBYyxHQUFBLEVBQUFBLElBQUEsQ0FDQSxHQUFBOE8sR0FBQUQsRUFBQTdPLEdBQ0ErTyxFQUFBRCxHQUFBQSxFQUFBVixNQUFBVSxFQUFBNVAsT0FBQSxFQUVBLElBQUEsTUFBQTZQLEdBQUEsTUFBQUEsR0FBQWhGLEVBQUFZLGdCQUVBLEdBQUEsTUFBQW9FLEVBQUEsQ0FDQSxHQUFBQyxHQUFBRixHQUFBeEMsV0FBQXdDLEVBQUEsR0FDQUwsR0FBQU8sSUFBQUMsTUFBQUQsR0FBQUEsRUFBQSxPQUhBUCxHQUFBbkMsV0FBQTRDLFNBQUFKLEVBQUEsSUFBQUYsR0FPQSxNQUFBSCxJQUFBLEdBYUExRSxFQUFBb0YsMkJBQUEsU0FBQTFFLEVBQUFpRSxHQUlBLElBQUEsR0FIQTVFLEdBQUFDLEVBQUFnRSxZQUFBdEQsR0FDQTJFLEtBRUFwUCxFQUFBLEVBQUE0TixFQUFBOUQsRUFBQTVLLE9BQUEwTyxFQUFBNU4sRUFBQUEsSUFBQSxDQUNBLEdBQUFxUCxHQUFBdkYsRUFBQTlKLEVBRUFvUCxHQUFBaE4sTUFDQTRMLElBQUFxQixFQUFBckIsSUFDQXNCLFdBQUF2RixFQUFBd0UsZ0JBQUFjLEVBQUFsQixXQUFBTyxLQUdBLE1BQUFVLElBU0FyRixFQUFBYSxZQUFBLFNBQUEyRSxHQUNBQSxFQUFBOUUsU0FDQThFLEVBQUF4RixFQUFBSyxJQUFBSyxPQUFBOEUsRUFBQTlFLE9BQ0E4RSxFQUFBQyxnQkFBQSxZQUtBekYsRUFBQWMsaUJBQUEsU0FBQXpNLEdBQ0EsR0FBQXFNLEdBQUFyTSxFQUFBK08sYUFBQSxVQUNBdUIsRUFBQXRRLEVBQUErTyxhQUFBLFNBQ0FyRCxJQVVBLE9BUEEsUUFBQTFMLEVBQUE4TCxTQUFBQyxlQUFBL0wsRUFBQTJMLEVBQUFLLEtBQUFoTSxFQUFBMkwsRUFBQUssSUFBQUssU0FDQUEsRUFBQXJNLEVBQUEyTCxFQUFBSyxJQUFBSyxRQUdBQSxJQUNBWCxFQUFBQyxFQUFBb0YsMkJBQUExRSxFQUFBaUUsSUFFQTVFLEdBR0FDLEVBQUFlLG1CQUFBLFNBQUFoQixFQUFBMkYsR0FDQSxHQUFBSixHQUNBblEsRUFDQXdRLENBRUE1RixHQUFBNkYsS0FBQTVGLEVBQUE2RixlQUVBMVEsRUFBQTRLLEVBQUE1SyxPQUNBd1EsRUFBQTVGLEVBQUE1SyxFQUFBLEVBRUEsS0FBQSxHQUFBYyxHQUFBLEVBQUFkLEVBQUFjLEVBQUFBLElBRUEsR0FEQXFQLEVBQUF2RixFQUFBOUosR0FDQXFQLEVBQUFDLFlBQUF2RixFQUFBb0MsU0FBQSxDQUNBdUQsRUFBQUwsQ0FDQSxPQUlBLEdBQUFLLElBQUEzRixFQUFBOEIsU0FBQTRELEVBQUF6QyxJQUFBMEMsRUFBQTFCLEtBQ0EsR0FBQWpFLEVBQUFnQyx5QkFBQSxVQUFBMkQsRUFBQTFCLElBQUEvTyxPQUFBLEVBQUEsUUFBQUMsUUFBQTJRLGNBQ0FwSixlQUFBcUosVUFDQUEsUUFBQUMsS0FBQSwrQkFBQUwsRUFBQTFCLFNBRUEsQ0FDQXlCLEVBQUF6QyxJQUFBMEMsRUFBQTFCLElBR0F5QixFQUFBTyxXQUFBUCxFQUFBekMsR0FFQSxJQUFBMUUsR0FBQW1ILEVBQUFuSCxVQUNBMkgsRUFBQSw0QkFBQTNILEdBQ0E0SCxFQUFBNUgsRUFBQTZILElBRUFGLEtBQ0EzSCxFQUFBNkgsS0FBQSxPQUVBRixFQUFBUixFQUFBaEQsWUFFQW5FLEVBQUE2SCxLQUFBRCxLQU1BbkcsRUFBQTZGLGNBQUEsU0FBQVEsRUFBQUMsR0FDQSxNQUFBRCxHQUFBZCxXQUFBZSxFQUFBZixZQVVBdkYsRUFBQVEsZ0JBQUEsU0FBQStGLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQTdILHFCQUFBLFFBQ0EsSUFBQThILEVBQUFyUixPQUFBLENBR0EsSUFGQSxHQUFBc1IsR0FBQUQsRUFBQSxHQUNBRSxFQUFBRCxFQUFBL0gscUJBQUEsVUFDQWdJLEVBQUF2UixRQUNBb1IsRUFBQXpILGFBQUE0SCxFQUFBLEdBQUFELEVBR0FBLEdBQUE3SixXQUFBK0YsWUFBQThELEtBU0F6RyxFQUFBQyxlQUFBLFdBSUEsSUFBQSxHQUhBMEcsTUFDQUMsRUFBQXBILEVBQUFkLHFCQUFBLE9BRUFuRyxFQUFBLEVBQUFzTCxFQUFBK0MsRUFBQXpSLE9BQUEwTyxFQUFBdEwsRUFBQUEsSUFBQSxDQUNBLEdBQUFzTyxHQUFBRCxFQUFBck8sSUFFQSxZQUFBc08sRUFBQWpLLFdBQUF1RCxTQUFBQyxlQUNBLE9BQUF5RyxFQUFBekQsYUFBQSxXQUFBeUQsRUFBQTdHLEVBQUFLLEtBQUEsT0FBQXdHLEVBQUE3RyxFQUFBSyxJQUFBSyxTQUNBaUcsRUFBQXRPLEtBQUF3TyxHQUdBLE1BQUFGLElBR0EzRyxFQUFBUyxTQUFBLFNBQUErRSxFQUFBZSxHQUtBLElBQUEsR0FIQTFPLEdBREFpUCxFQUFBUCxFQUFBUSxXQUlBQyxFQUFBLEVBQUFDLEVBQUFILEVBQUEzUixPQUFBOFIsRUFBQUQsRUFBQUEsSUFBQSxDQUNBLEdBQUE3RCxHQUFBMkQsRUFBQUUsRUFHQSxJQUFBLElBQUE3RCxFQUFBOUosU0FBQSxDQU1BLEdBQUE4SixJQUFBcUMsRUFDQSxNQUFBM04sRUFJQSxJQUFBLFdBQUFzTCxFQUFBaEQsU0FBQUMsY0FBQSxDQUlBLE9BQUErQyxFQUFBQyxhQUFBLFFBQUExRyxlQUFBcUosVUFDQUEsUUFBQUMsS0FBQSx1RkFHQSxJQUFBMUgsR0FBQTZFLEVBQUFDLGFBQUEsUUFHQSxJQUFBRCxFQUFBQyxhQUFBLGFBS0E5RSxHQUFBMEIsRUFBQW1DLGFBQUE3RCxJQUFBLENBQ0EsR0FBQTRJLEdBQUFsSCxFQUFBa0Qsa0JBQUFDLEVBRUEsSUFBQStELEtBQUEsRUFBQSxDQUNBclAsRUFBQXNMLENBQ0EsT0FDQSxHQUFBLFlBQUErRCxFQUNBLE9BQUEsS0FLQSxNQUFBclAsSUF3SEFtSixJQUdBdEIsRUFBQXlILEVBQUFuSCxFQUdBLGdCQUFBeEssU0FBQSxnQkFBQUEsUUFBQUMsUUFFQUQsT0FBQUMsUUFBQWlLLEVBQ0Esa0JBQUFoSyxTQUFBQSxPQUFBQyxJQUVBRCxPQUFBLFdBQUEsTUFBQWdLLEtBQ0EsZ0JBQUFILEtBRUFBLEVBQUFHLFlBQUFBLElBR0E5SixLQUFBQSxLQUFBbkIsU0FBQSxHQUFBbUIsTUFBQXdSLE9DNW9CQSxTQUFBQyxFQUFBalMsRUFBQWtTLEdBQ0EsbUJBQUE5UixTQUFBQSxPQUFBLFFBQUFBLE9BQUEsUUFBQThSLElBQ0FELEVBQUFqUyxHQUFBa1MsS0FDQTFSLEtBQUEsUUFBQSxXQTZDQSxRQUFBMlIsS0FDQSxPQUFBakksTUFBQWtJLElBQUFDLE9BQUFDLEtBMkJBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsS0FJQSxPQUhBRCxJQUFBQSxHQUFBLEVBQ0FDLEVBQUEsT0FBQUEsRUFBQSxNQUFBRixFQUFBLE1BQUFDLElBQUFDLEVBQUEsS0FBQUYsRUFBQSxLQUFBQyxHQUNBQyxFQUFBLFFBQUFBLEVBQUEsT0FBQUYsRUFBQSxPQUFBQyxJQUFBQyxFQUFBLElBQUFGLEVBQUEsSUFBQUMsR0FDQUMsRUFXQSxRQUFBQyxHQUFBMVQsRUFBQXdULEdBRUEsTUFEQXhULEdBQUFBLElBQUFBLEVBQUFnRixTQUFBaEYsRUFBQSxHQUFBQSxFQUNBQSxHQUFBLElBQUFBLEVBQUFnRixTQUNBc08sRUFBQXRULEVBQUEyVCx3QkFBQUgsSUFEQSxFQVlBLFFBQUFJLEdBQUFILEdBQ0FBLEVBQUEsTUFBQUEsRUFBQVAsSUFBQSxJQUFBTyxFQUFBek8sU0FBQTBPLEVBQUFELEdBQUFBLENBQ0EsSUFBQXZQLEdBQUF1UCxFQUFBLE9BQUF2SSxFQUFBdUksRUFBQSxLQUdBLE9BRkF2UCxHQUFBLGtCQUFBQSxHQUFBQSxFQUFBZ0UsS0FBQXVMLEdBQUF2UCxFQUNBZ0gsRUFBQSxrQkFBQUEsR0FBQUEsRUFBQWhELEtBQUF1TCxHQUFBdkksRUFDQUEsRUFBQWhILEVBMUdBLEdBQUEyUCxNQUNBQyxFQUFBLG1CQUFBNVQsU0FBQUEsT0FDQWlMLEVBQUEsbUJBQUEvSyxXQUFBQSxTQUNBMlQsRUFBQTVJLEdBQUFBLEVBQUE5SyxnQkFDQWEsRUFBQTRTLEVBQUEsWUFBQUEsRUFBQSxhQUNBRSxFQUFBOVMsRUFBQSxTQUFBc0QsR0FDQSxRQUFBdEQsRUFBQWdILEtBQUE0TCxFQUFBdFAsR0FBQW5CLFNBQ0EsV0FDQSxPQUFBLEdBRUE4UCxFQUFBVSxFQUFBLFVBQUEsV0FDQSxHQUFBN0IsR0FBQStCLEVBQUEsWUFBQTlCLEVBQUE2QixFQUFBLFVBQ0EsT0FBQTdCLEdBQUFELEVBQUFDLEVBQUFELEdBRUFxQixFQUFBUSxFQUFBLFVBQUEsV0FDQSxHQUFBN0IsR0FBQStCLEVBQUEsYUFBQTlCLEVBQUE2QixFQUFBLFdBQ0EsT0FBQTdCLEdBQUFELEVBQUFDLEVBQUFELEVBb0lBLE9BNUhBNkIsR0FBQSxHQUFBRyxFQU9BSCxFQUFBLFdBQUEzUyxFQUFBLFdBRUEsTUFBQUEsR0FBQWdCLE1BQUE0UixFQUFBM08sWUFDQSxXQUVBLFVBVUEwTyxFQUFBLFNBQUFYLEVBT0FXLEVBQUEsUUFBQSxXQUNBLE1BQUFDLEdBQUFHLGFBQUFGLEVBQUFHLFlBUUFMLEVBQUEsUUFBQSxXQUNBLE1BQUFDLEdBQUEzVCxhQUFBNFQsRUFBQXpULFdBNkJBdVQsRUFBQSxVQUFBSCxFQWdCQUcsRUFBQSxPQUFBRCxFQVNBQyxFQUFBLElBQUEsU0FBQTdULEVBQUF3VCxHQUNBLEdBQUFXLEdBQUFULEVBQUExVCxFQUFBd1QsRUFDQSxTQUFBVyxHQUFBQSxFQUFBQyxPQUFBLEdBQUFELEVBQUFFLE1BQUFsQixLQVVBVSxFQUFBLElBQUEsU0FBQTdULEVBQUF3VCxHQUNBLEdBQUFXLEdBQUFULEVBQUExVCxFQUFBd1QsRUFDQSxTQUFBVyxHQUFBQSxFQUFBRyxRQUFBLEdBQUFILEVBQUF2TSxLQUFBeUwsS0FVQVEsRUFBQSxXQUFBLFNBQUE3VCxFQUFBd1QsR0FHQSxHQUFBVyxHQUFBVCxFQUFBMVQsRUFBQXdULEVBQ0EsU0FBQVcsR0FBQUEsRUFBQUcsUUFBQSxHQUFBSCxFQUFBQyxPQUFBLEdBQUFELEVBQUF2TSxLQUFBeUwsS0FBQWMsRUFBQUUsTUFBQWxCLEtBR0FVLElBRUEsV0FDQSxHQUFBVSxHQUFBQyxFQUFBQyxFQUFBL0osRUFBQWdLLEVBQ0FDLEVBQUEsU0FBQWpULEVBQUFrVCxHQUFBLE1BQUEsWUFBQSxNQUFBbFQsR0FBQVEsTUFBQTBTLEVBQUF6UCxhQUNBMFAsS0FBQWpVLFNBQUEsU0FBQWtVLEdBQUEsSUFBQSxHQUFBbFQsR0FBQSxFQUFBbVQsRUFBQXhULEtBQUFULE9BQUFpVSxFQUFBblQsRUFBQUEsSUFBQSxHQUFBQSxJQUFBTCxPQUFBQSxLQUFBSyxLQUFBa1QsRUFBQSxNQUFBbFQsRUFBQSxPQUFBLEdBRUE0UyxHQUFBLFdBQ0EsUUFBQUEsTUE2Q0EsTUEzQ0FBLEdBQUF4UyxVQUFBaUQsT0FBQSxTQUFBK1AsRUFBQUMsR0FDQSxHQUFBN1AsR0FBQThQLENBQ0EsS0FBQTlQLElBQUE2UCxHQUNBQyxFQUFBRCxFQUFBN1AsR0FDQSxNQUFBNFAsRUFBQTVQLEtBQ0E0UCxFQUFBNVAsR0FBQThQLEVBR0EsT0FBQUYsSUFHQVIsRUFBQXhTLFVBQUFtVCxTQUFBLFNBQUFDLEdBQ0EsTUFBQSxpRUFBQWxJLEtBQUFrSSxJQUdBWixFQUFBeFMsVUFBQXFULFNBQUEsU0FBQXpQLEVBQUEwUCxFQUFBNVQsR0FDQSxNQUFBLE9BQUFrRSxFQUFBbUMsaUJBQ0FuQyxFQUFBbUMsaUJBQUF1TixFQUFBNVQsR0FBQSxHQUNBLE1BQUFrRSxFQUFBNEIsWUFDQTVCLEVBQUE0QixZQUFBLEtBQUE4TixFQUFBNVQsR0FFQWtFLEVBQUEwUCxHQUFBNVQsR0FJQThTLEVBQUF4UyxVQUFBdVQsWUFBQSxTQUFBM1AsRUFBQTBQLEVBQUE1VCxHQUNBLE1BQUEsT0FBQWtFLEVBQUFpQyxvQkFDQWpDLEVBQUFpQyxvQkFBQXlOLEVBQUE1VCxHQUFBLEdBQ0EsTUFBQWtFLEVBQUE0UCxZQUNBNVAsRUFBQTRQLFlBQUEsS0FBQUYsRUFBQTVULFNBRUFrRSxHQUFBMFAsSUFJQWQsRUFBQXhTLFVBQUF5RyxZQUFBLFdBQ0EsTUFBQSxlQUFBdkksUUFDQUEsT0FBQXVJLFlBRUFySSxTQUFBQyxnQkFBQXFJLGNBSUE4TCxLQUlBQyxFQUFBbFQsS0FBQWtULFNBQUFsVCxLQUFBa1UsYUFBQWhCLEVBQUEsV0FDQSxRQUFBQSxLQUNBbFQsS0FBQW1VLFFBQ0FuVSxLQUFBb1UsVUE0QkEsTUF6QkFsQixHQUFBelMsVUFBQTRULElBQUEsU0FBQXhRLEdBQ0EsR0FBQXhELEdBQUFrVCxFQUFBZSxFQUFBQyxFQUFBQyxDQUVBLEtBREFBLEVBQUF4VSxLQUFBbVUsS0FDQTlULEVBQUFpVSxFQUFBLEVBQUFDLEVBQUFDLEVBQUFqVixPQUFBZ1YsRUFBQUQsRUFBQWpVLElBQUFpVSxFQUVBLEdBREFmLEVBQUFpQixFQUFBblUsR0FDQWtULElBQUExUCxFQUNBLE1BQUE3RCxNQUFBb1UsT0FBQS9ULElBS0E2UyxFQUFBelMsVUFBQWdVLElBQUEsU0FBQTVRLEVBQUE4UCxHQUNBLEdBQUF0VCxHQUFBa1QsRUFBQWUsRUFBQUMsRUFBQUMsQ0FFQSxLQURBQSxFQUFBeFUsS0FBQW1VLEtBQ0E5VCxFQUFBaVUsRUFBQSxFQUFBQyxFQUFBQyxFQUFBalYsT0FBQWdWLEVBQUFELEVBQUFqVSxJQUFBaVUsRUFFQSxHQURBZixFQUFBaUIsRUFBQW5VLEdBQ0FrVCxJQUFBMVAsRUFFQSxZQURBN0QsS0FBQW9VLE9BQUEvVCxHQUFBc1QsRUFLQSxPQURBM1QsTUFBQW1VLEtBQUExUixLQUFBb0IsR0FDQTdELEtBQUFvVSxPQUFBM1IsS0FBQWtSLElBR0FULE1BSUFGLEVBQUFoVCxLQUFBZ1Qsa0JBQUFoVCxLQUFBMFUsd0JBQUExVSxLQUFBMlUsc0JBQUEzQixFQUFBLFdBQ0EsUUFBQUEsS0FDQSxtQkFBQTdDLFVBQUEsT0FBQUEsU0FDQUEsUUFBQUMsS0FBQSxzREFFQSxtQkFBQUQsVUFBQSxPQUFBQSxTQUNBQSxRQUFBQyxLQUFBLHNGQVFBLE1BSkE0QyxHQUFBNEIsY0FBQSxFQUVBNUIsRUFBQXZTLFVBQUFvVSxRQUFBLGFBRUE3QixNQUlBN0osRUFBQW5KLEtBQUFtSixrQkFBQSxTQUFBMUssR0FhQSxNQVpBdUIsTUFBQThVLGlCQUFBLFNBQUFDLEdBQ0EsR0FBQVAsRUFTQSxPQVJBLFVBQUFPLElBQ0FBLEVBQUEsY0FFQTVCLEVBQUF4SCxLQUFBb0osSUFDQUEsRUFBQTlJLFFBQUFrSCxFQUFBLFNBQUE1QixFQUFBeUQsR0FDQSxNQUFBQSxHQUFBeEssaUJBR0EsT0FBQWdLLEVBQUEvVixFQUFBMkssY0FBQW9MLEVBQUFPLEdBQUEsU0FBQSxNQUVBL1UsTUFHQW1ULEVBQUEsa0JBRUFuVCxLQUFBaVYsSUFBQSxXQVVBLFFBQUFBLEdBQUFuVSxHQUNBLE1BQUFBLElBQ0FBLE1BRUFkLEtBQUFrVixlQUFBOUIsRUFBQXBULEtBQUFrVixlQUFBbFYsTUFDQUEsS0FBQW1WLGNBQUEvQixFQUFBcFQsS0FBQW1WLGNBQUFuVixNQUNBQSxLQUFBb1YsTUFBQWhDLEVBQUFwVCxLQUFBb1YsTUFBQXBWLE1BQ0FBLEtBQUFxVixVQUFBLEVBQ0FyVixLQUFBc1YsT0FBQXRWLEtBQUF1VixPQUFBN1IsT0FBQTVDLEVBQUFkLEtBQUEwVCxVQUNBMVQsS0FBQXdWLG1CQUFBLEdBQUF0QyxHQXNUQSxNQXhVQStCLEdBQUF4VSxVQUFBaVQsVUFDQStCLFNBQUEsTUFDQUMsYUFBQSxXQUNBOVEsT0FBQSxFQUNBK1EsUUFBQSxFQUNBQyxNQUFBLEVBQ0F2UyxTQUFBLE1BZUE0UixFQUFBeFUsVUFBQW1GLEtBQUEsV0FDQSxHQUFBNE8sRUFPQSxPQU5BeFUsTUFBQWQsUUFBQVAsT0FBQUUsU0FBQUMsZ0JBQ0EsaUJBQUEwVixFQUFBM1YsU0FBQStNLGFBQUEsYUFBQTRJLEVBQ0F4VSxLQUFBb1YsUUFFQXBWLEtBQUF1VixPQUFBekIsU0FBQWpWLFNBQUEsbUJBQUFtQixLQUFBb1YsT0FFQXBWLEtBQUE2VixhQUdBWixFQUFBeFUsVUFBQTJVLE1BQUEsV0FDQSxHQUFBVSxHQUFBeEIsRUFBQUMsRUFBQUMsQ0FzQkEsSUFyQkF4VSxLQUFBK1YsU0FBQSxFQUNBL1YsS0FBQWdXLE1BQUEsV0FDQSxHQUFBMUIsR0FBQUMsRUFBQUMsRUFBQXlCLENBR0EsS0FGQXpCLEVBQUF4VSxLQUFBZCxRQUFBZ1gsaUJBQUEsSUFBQWxXLEtBQUFzVixPQUFBRyxVQUNBUSxLQUNBM0IsRUFBQSxFQUFBQyxFQUFBQyxFQUFBalYsT0FBQWdWLEVBQUFELEVBQUFBLElBQ0F3QixFQUFBdEIsRUFBQUYsR0FDQTJCLEVBQUF4VCxLQUFBcVQsRUFFQSxPQUFBRyxJQUNBdFAsS0FBQTNHLE1BQ0FBLEtBQUFtVyxJQUFBLFdBQ0EsR0FBQTdCLEdBQUFDLEVBQUFDLEVBQUF5QixDQUdBLEtBRkF6QixFQUFBeFUsS0FBQWdXLE1BQ0FDLEtBQ0EzQixFQUFBLEVBQUFDLEVBQUFDLEVBQUFqVixPQUFBZ1YsRUFBQUQsRUFBQUEsSUFDQXdCLEVBQUF0QixFQUFBRixHQUNBMkIsRUFBQXhULEtBQUFxVCxFQUVBLE9BQUFHLElBQ0F0UCxLQUFBM0csTUFDQUEsS0FBQWdXLE1BQUF6VyxPQUNBLEdBQUFTLEtBQUFvVyxXQUNBcFcsS0FBQXFXLGlCQUdBLEtBREE3QixFQUFBeFUsS0FBQWdXLE1BQ0ExQixFQUFBLEVBQUFDLEVBQUFDLEVBQUFqVixPQUFBZ1YsRUFBQUQsRUFBQUEsSUFDQXdCLEVBQUF0QixFQUFBRixHQUNBdFUsS0FBQXNXLFdBQUFSLEdBQUEsRUFTQSxPQUxBOVYsTUFBQW9XLGFBQ0FwVyxLQUFBdVYsT0FBQXpCLFNBQUFuVixPQUFBLFNBQUFxQixLQUFBbVYsZUFDQW5WLEtBQUF1VixPQUFBekIsU0FBQW5WLE9BQUEsU0FBQXFCLEtBQUFtVixlQUNBblYsS0FBQXVXLFNBQUE3SyxZQUFBMUwsS0FBQWtWLGVBQUEsS0FFQWxWLEtBQUFzVixPQUFBTSxLQUNBLEdBQUE1QyxHQUFBLFNBQUF3RCxHQUNBLE1BQUEsVUFBQUMsR0FDQSxHQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxFQUFBWixDQUVBLEtBREFBLEtBQ0FXLEVBQUEsRUFBQUMsRUFBQUosRUFBQWxYLE9BQUFzWCxFQUFBRCxFQUFBQSxJQUNBRCxFQUFBRixFQUFBRyxHQUNBWCxFQUFBeFQsS0FBQSxXQUNBLEdBQUFxVSxHQUFBQyxFQUFBQyxFQUFBQyxDQUdBLEtBRkFELEVBQUFMLEVBQUFPLGVBQ0FELEtBQ0FILEVBQUEsRUFBQUMsRUFBQUMsRUFBQXpYLE9BQUF3WCxFQUFBRCxFQUFBQSxJQUNBSixFQUFBTSxFQUFBRixHQUNBRyxFQUFBeFUsS0FBQXpDLEtBQUFtWCxPQUFBVCxHQUVBLE9BQUFPLElBQ0F0USxLQUFBNlAsR0FFQSxPQUFBUCxLQUVBalcsT0FBQTZVLFFBQUFoVyxTQUFBa0ksTUFDQXFRLFdBQUEsRUFDQUMsU0FBQSxJQXRCQSxRQTJCQXBDLEVBQUF4VSxVQUFBNlcsS0FBQSxXQUlBLE1BSEF0WCxNQUFBK1YsU0FBQSxFQUNBL1YsS0FBQXVWLE9BQUF2QixZQUFBclYsT0FBQSxTQUFBcUIsS0FBQW1WLGVBQ0FuVixLQUFBdVYsT0FBQXZCLFlBQUFyVixPQUFBLFNBQUFxQixLQUFBbVYsZUFDQSxNQUFBblYsS0FBQXVXLFNBQ0ExSyxjQUFBN0wsS0FBQXVXLFVBREEsUUFLQXRCLEVBQUF4VSxVQUFBOFcsS0FBQSxXQUNBLE1BQUF2RSxHQUFBNEIsYUFDQTVVLEtBQUFtWCxPQUFBblgsS0FBQWQsU0FEQSxRQUtBK1YsRUFBQXhVLFVBQUEwVyxPQUFBLFNBQUFqWSxHQUNBLEdBQUE0VyxHQUFBeEIsRUFBQUMsRUFBQUMsRUFBQXlCLENBSUEsSUFIQSxNQUFBL1csSUFDQUEsRUFBQWMsS0FBQWQsU0FFQSxJQUFBQSxFQUFBdUUsU0FBQSxDQU1BLElBSEF2RSxFQUFBQSxFQUFBOEgsWUFBQTlILEVBQ0FzVixFQUFBdFYsRUFBQWdYLGlCQUFBLElBQUFsVyxLQUFBc1YsT0FBQUcsVUFDQVEsS0FDQTNCLEVBQUEsRUFBQUMsRUFBQUMsRUFBQWpWLE9BQUFnVixFQUFBRCxFQUFBQSxJQUNBd0IsRUFBQXRCLEVBQUFGLEdBQ0FoQixFQUFBM00sS0FBQTNHLEtBQUFtVyxJQUFBTCxHQUFBLEdBQ0E5VixLQUFBZ1csTUFBQXZULEtBQUFxVCxHQUNBOVYsS0FBQW1XLElBQUExVCxLQUFBcVQsR0FDQTlWLEtBQUErVixTQUFBL1YsS0FBQW9XLFdBQ0FwVyxLQUFBcVcsYUFFQXJXLEtBQUFzVyxXQUFBUixHQUFBLEdBRUFHLEVBQUF4VCxLQUFBekMsS0FBQXFWLFVBQUEsSUFFQVksRUFBQXhULEtBQUEsT0FHQSxPQUFBd1QsS0FHQWhCLEVBQUF4VSxVQUFBK1csS0FBQSxTQUFBMUIsR0FHQSxNQUZBOVYsTUFBQXNXLFdBQUFSLEdBQ0FBLEVBQUE5VyxVQUFBLEdBQUE4VyxFQUFBOVcsVUFBQSxJQUFBZ0IsS0FBQXNWLE9BQUFJLGFBQ0EsTUFBQTFWLEtBQUFzVixPQUFBalMsU0FDQXJELEtBQUFzVixPQUFBalMsU0FBQXlTLEdBREEsUUFLQWIsRUFBQXhVLFVBQUE2VixXQUFBLFNBQUFSLEVBQUEyQixHQUNBLEdBQUFDLEdBQUFDLEVBQUFDLENBSUEsT0FIQUQsR0FBQTdCLEVBQUF0SSxhQUFBLHFCQUNBa0ssRUFBQTVCLEVBQUF0SSxhQUFBLGtCQUNBb0ssRUFBQTlCLEVBQUF0SSxhQUFBLHNCQUNBeE4sS0FBQTZYLFFBQUEsU0FBQXJCLEdBQ0EsTUFBQSxZQUNBLE1BQUFBLEdBQUFzQixZQUFBaEMsRUFBQTJCLEVBQUFFLEVBQUFELEVBQUFFLEtBRUE1WCxRQUdBaVYsRUFBQXhVLFVBQUFvWCxRQUFBLFdBQ0EsTUFBQSx5QkFBQWxaLFFBQ0EsU0FBQTBFLEdBQ0EsTUFBQTFFLFFBQUEwRyxzQkFBQWhDLElBR0EsU0FBQUEsR0FDQSxNQUFBQSxTQUtBNFIsRUFBQXhVLFVBQUE0VixXQUFBLFdBQ0EsR0FBQVAsR0FBQXhCLEVBQUFDLEVBQUFDLEVBQUF5QixDQUdBLEtBRkF6QixFQUFBeFUsS0FBQWdXLE1BQ0FDLEtBQ0EzQixFQUFBLEVBQUFDLEVBQUFDLEVBQUFqVixPQUFBZ1YsRUFBQUQsRUFBQUEsSUFDQXdCLEVBQUF0QixFQUFBRixHQUNBMkIsRUFBQXhULEtBQUFxVCxFQUFBbk4sTUFBQW9QLFdBQUEsVUFFQSxPQUFBOUIsSUFHQWhCLEVBQUF4VSxVQUFBcVgsWUFBQSxTQUFBaEMsRUFBQTJCLEVBQUFFLEVBQUFELEVBQUFFLEdBdUJBLE1BdEJBSCxJQUNBelgsS0FBQWdZLG1CQUFBbEMsR0FFQUEsRUFBQW5OLE1BQUFvUCxXQUFBTixFQUFBLFNBQUEsVUFDQUUsR0FDQTNYLEtBQUFpWSxVQUFBbkMsRUFBQW5OLE9BQ0F1UCxrQkFBQVAsSUFHQUQsR0FDQTFYLEtBQUFpWSxVQUFBbkMsRUFBQW5OLE9BQ0F3UCxlQUFBVCxJQUdBRSxHQUNBNVgsS0FBQWlZLFVBQUFuQyxFQUFBbk4sT0FDQXlQLHdCQUFBUixJQUdBNVgsS0FBQWlZLFVBQUFuQyxFQUFBbk4sT0FDQTBQLGNBQUFaLEVBQUEsT0FBQXpYLEtBQUFzWSxvQkFBQXhDLEtBRUFBLEdBR0FiLEVBQUF4VSxVQUFBOFgsU0FBQSxNQUFBLFVBRUF0RCxFQUFBeFUsVUFBQXdYLFVBQUEsU0FBQTVULEVBQUFtVSxHQUNBLEdBQUFoWixHQUFBbVUsRUFBQThFLEVBQUF4QyxDQUNBQSxLQUNBLEtBQUF6VyxJQUFBZ1osR0FDQTdFLEVBQUE2RSxFQUFBaFosR0FDQTZFLEVBQUEsR0FBQTdFLEdBQUFtVSxFQUNBc0MsRUFBQXhULEtBQUEsV0FDQSxHQUFBNlIsR0FBQUMsRUFBQUMsRUFBQXlDLENBR0EsS0FGQXpDLEVBQUF4VSxLQUFBdVksUUFDQXRCLEtBQ0EzQyxFQUFBLEVBQUFDLEVBQUFDLEVBQUFqVixPQUFBZ1YsRUFBQUQsRUFBQUEsSUFDQW1FLEVBQUFqRSxFQUFBRixHQUNBMkMsRUFBQXhVLEtBQUE0QixFQUFBLEdBQUFvVSxFQUFBalosRUFBQWtaLE9BQUEsR0FBQWxPLGNBQUFoTCxFQUFBRixPQUFBLElBQUFxVSxFQUVBLE9BQUFzRCxJQUNBdFEsS0FBQTNHLE1BRUEsT0FBQWlXLElBR0FoQixFQUFBeFUsVUFBQWtZLFVBQUEsU0FBQXRVLEVBQUF1VSxHQUNBLEdBQUE5VSxHQUFBNkUsRUFBQThQLEVBQUFuRSxFQUFBQyxFQUFBQyxDQUlBLEtBSEE3TCxFQUFBUSxFQUFBOUUsR0FDQVAsRUFBQTZFLEVBQUFrUSxvQkFBQUQsR0FDQXBFLEVBQUF4VSxLQUFBdVksUUFDQWpFLEVBQUEsRUFBQUMsRUFBQUMsRUFBQWpWLE9BQUFnVixFQUFBRCxFQUFBQSxJQUNBbUUsRUFBQWpFLEVBQUFGLEdBQ0F4USxFQUFBQSxHQUFBNkUsRUFBQWtRLG9CQUFBLElBQUFKLEVBQUEsSUFBQUcsRUFFQSxPQUFBOVUsSUFHQW1SLEVBQUF4VSxVQUFBNFgsY0FBQSxTQUFBdkMsR0FDQSxHQUFBdUMsRUFDQSxLQUNBQSxFQUFBclksS0FBQTJZLFVBQUE3QyxFQUFBLGtCQUFBdE0sUUFDQSxNQUFBc1AsR0FDQVQsRUFBQWxQLEVBQUEyTSxHQUFBaEIsaUJBQUEsa0JBRUEsTUFBQSxTQUFBdUQsRUFDQSxHQUVBQSxHQUlBcEQsRUFBQXhVLFVBQUF1WCxtQkFBQSxTQUFBbEMsR0FDQSxNQUFBOVYsTUFBQXdWLG1CQUFBZixJQUFBcUIsRUFBQTlWLEtBQUFxWSxjQUFBdkMsS0FHQWIsRUFBQXhVLFVBQUE2WCxvQkFBQSxTQUFBeEMsR0FDQSxNQUFBOVYsTUFBQXdWLG1CQUFBbkIsSUFBQXlCLElBR0FiLEVBQUF4VSxVQUFBMFUsY0FBQSxXQUNBLE1BQUFuVixNQUFBcVYsVUFBQSxHQUdBSixFQUFBeFUsVUFBQXlVLGVBQUEsV0FDQSxHQUFBWSxFQUNBLFFBQUE5VixLQUFBcVYsV0FDQXJWLEtBQUFxVixVQUFBLEVBQ0FyVixLQUFBZ1csTUFBQSxXQUNBLEdBQUExQixHQUFBQyxFQUFBQyxFQUFBeUIsQ0FHQSxLQUZBekIsRUFBQXhVLEtBQUFnVyxNQUNBQyxLQUNBM0IsRUFBQSxFQUFBQyxFQUFBQyxFQUFBalYsT0FBQWdWLEVBQUFELEVBQUFBLElBQ0F3QixFQUFBdEIsRUFBQUYsR0FDQSxJQUdBdFUsS0FBQStZLFVBQUFqRCxHQUNBOVYsS0FBQXdYLEtBQUExQixHQUdBRyxFQUFBeFQsS0FBQXFULEdBRUEsT0FBQUcsSUFDQXRQLEtBQUEzRyxNQUNBQSxLQUFBZ1csTUFBQXpXLFFBQUFTLEtBQUFzVixPQUFBTSxNQW5CQSxPQW9CQTVWLEtBQUFzWCxRQUtBckMsRUFBQXhVLFVBQUF1WSxVQUFBLFNBQUE5WixHQUVBLElBREEsR0FBQW1ILEdBQ0EsU0FBQW5ILEVBQUE4WixXQUNBOVosRUFBQUEsRUFBQThILFVBR0EsS0FEQVgsRUFBQW5ILEVBQUE4WixVQUNBOVosRUFBQUEsRUFBQStaLGNBQ0E1UyxHQUFBbkgsRUFBQThaLFNBRUEsT0FBQTNTLElBR0E0TyxFQUFBeFUsVUFBQXNZLFVBQUEsU0FBQWpELEdBQ0EsR0FBQS9DLEdBQUFuTyxFQUFBeUIsRUFBQTZTLEVBQUFDLENBTUEsT0FMQXZVLEdBQUFrUixFQUFBdEksYUFBQSxvQkFBQXhOLEtBQUFzVixPQUFBMVEsT0FDQXVVLEVBQUF4YSxPQUFBQyxZQUNBc2EsRUFBQUMsRUFBQTlSLEtBQUErUixJQUFBcFosS0FBQWQsUUFBQWlJLGFBQUFuSCxLQUFBdVYsT0FBQXJPLGVBQUF0QyxFQUNBeUIsRUFBQXJHLEtBQUFnWixVQUFBbEQsR0FDQS9DLEVBQUExTSxFQUFBeVAsRUFBQTNPLGFBQ0ErUixHQUFBN1MsR0FBQTBNLEdBQUFvRyxHQUdBbEUsRUFBQXhVLFVBQUE4VSxLQUFBLFdBQ0EsTUFBQSxPQUFBdlYsS0FBQXFaLE1BQUFyWixLQUFBcVosTUFBQXJaLEtBQUFxWixNQUFBLEdBQUFwRyxJQUdBZ0MsRUFBQXhVLFVBQUEyVixTQUFBLFdBQ0EsT0FBQXBXLEtBQUFzVixPQUFBSyxRQUFBM1YsS0FBQXVWLE9BQUEzQixTQUFBMEYsVUFBQUMsWUFHQXRFLE1BSUF0TyxLQUFBM0csT0p6bUJBLEdBQUFpVixNQUFBclAsT0FFQWpILE9BQUE2SCxpQkFBQSxPQUFBLFdBeUNBLFFBQUFnVCxLQUNBdmEsWUFBQUosU0FBQTRhLGVBQUEsZUFBQSxRQXpDQSxHQUFBQyxHQUFBN2EsU0FBQThhLGNBQUEsUUFJQUMsR0FIQS9hLFNBQUE0YSxlQUFBLFFBR0EsR0FBQXJWLFVBQUFzVixHQUVBOVUsT0FBQSxHQUVBRixVQUFBLEtBR0FrVixHQUFBaFUsT0FJQS9HLFNBQUE0YSxlQUFBLGVBQUFqVCxpQkFBQSxRQUFBLFdBQ0F2SCxZQUFBSixTQUFBNGEsZUFBQSxlQUFBLFVBS0FJLFFBQUE3VyxTQUFBLGdDQUNBZixNQUFBLFdBQ0EsR0FBQTZYLEdBQUFqYixTQUFBNGEsZUFBQSxjQUNBSyxHQUFBdFQsaUJBQUEsUUFBQWdULEdBQUEsRUFFQSxJQUFBTyxHQUFBbGIsU0FBQThhLGNBQUEsZUFDQTFQLEVBQUE4UCxFQUFBL1MsVUFDQWlELEdBQUFmLGFBQUE2USxFQUFBOVAsRUFBQStQLGFBRUE3WCxRQUFBLFdBQ0FsRCxZQUFBSixTQUFBNGEsZUFBQSxlQUFBLE9BQ0EsSUFBQUssR0FBQWpiLFNBQUE0YSxlQUFBLGNBQ0FLLEdBQUF4VCxvQkFBQSxRQUFBa1QsR0FBQSxFQUNBLElBQUFPLEdBQUFsYixTQUFBOGEsY0FBQSxlQUNBMVAsRUFBQThQLEVBQUEvUyxVQUNBaUQsR0FBQWYsYUFBQTZRLEVBQUE5UCxFQUFBK1AsZUFRQXJiLE9BQUFzYixTQUFBLGVBR0EiLCJmaWxlIjoiYWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogU2l0ZSBjb2RlXG4gKi9cbm5ldyBXT1coKS5pbml0KCk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcbiAgdmFyIHRvcE5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2XCIpO1xuICB2YXIgbWVudVRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVudVwiKVxuICBcbiAgLy8gY29uc3RydWN0IGFuIGluc3RhbmNlIG9mIEhlYWRyb29tLCBwYXNzaW5nIHRoZSBlbGVtZW50XG4gIHZhciBoZWFkcm9vbSAgPSBuZXcgSGVhZHJvb20odG9wTmF2LCB7XG4gLy8gdmVydGljYWwgb2Zmc2V0IGluIHB4IGJlZm9yZSBlbGVtZW50IGlzIGZpcnN0IHVucGlubmVkXG4gICAgb2Zmc2V0IDogNDAsXG4gICAgLy8gc2Nyb2xsIHRvbGVyYW5jZSBpbiBweCBiZWZvcmUgc3RhdGUgY2hhbmdlc1xuICAgIHRvbGVyYW5jZSA6IDEwLFxuICB9KTtcbiAgLy8gaW5pdGlhbGlzZVxuICBoZWFkcm9vbS5pbml0KCk7IFxuICBcbiAgLy8gY2hhbmdlQmFja2dyb3VuZENvbG9yKHRvcE5hdik7XG4gIFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lbnUtdG9nZ2xlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICB0b2dnbGVDbGFzcyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9iaWxlLW1lbnUnKSwgJ3Nob3cnKTtcbiAgfSk7XG5cbiAgXG4gIFxuICBlbnF1aXJlLnJlZ2lzdGVyKFwic2NyZWVuIGFuZCAobWF4LXdpZHRoOjc2N3B4KVwiLCB7XG4gICAgbWF0Y2ggOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtb2JpbGVNZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2JpbGUtbWVudVwiKTtcbiAgICAgIG1vYmlsZU1lbnUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dNZW51LCBmYWxzZSk7XG4gICAgICBcbiAgICAgIHZhciBhcmtkZXNJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFya2Rlcy1pbWdcIik7XG4gICAgICB2YXIgcGFyZW50ID0gYXJrZGVzSW1nLnBhcmVudE5vZGU7XG4gICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGFya2Rlc0ltZywgcGFyZW50LmZpcnN0Q2hpbGQpO1xuICAgIH0sXG4gICAgdW5tYXRjaCA6IGZ1bmN0aW9uKCkge1xuICAgICAgdG9nZ2xlQ2xhc3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vYmlsZS1tZW51JyksICdzaG93Jyk7ICBcbiAgICAgIHZhciBtb2JpbGVNZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2JpbGUtbWVudVwiKTtcbiAgICAgIG1vYmlsZU1lbnUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dNZW51LCBmYWxzZSk7XG4gICAgICB2YXIgYXJrZGVzSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hcmtkZXMtdHh0XCIpO1xuICAgICAgdmFyIHBhcmVudCA9IGFya2Rlc0ltZy5wYXJlbnROb2RlO1xuICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShhcmtkZXNJbWcsIHBhcmVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gIH0pO1xuICBcbiAgZnVuY3Rpb24gc2hvd01lbnUoKSB7XG4gICAgdG9nZ2xlQ2xhc3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vYmlsZS1tZW51JyksICdzaG93Jyk7XG4gIH0gXG4gIC8vIE9uIHNjcm9sbCBhY3Rpb25zXG4gIHdpbmRvdy5vbnNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIGNoYW5nZUJhY2tncm91bmRDb2xvcih0b3BOYXYpO1xuICB9XG59LCBmYWxzZSk7XG5cblxuZnVuY3Rpb24gY2hhbmdlQmFja2dyb3VuZENvbG9yKGVsKSB7XG4gIHZhciB5ID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gIGlmICh5ID4gMjApIHtcbiAgICBlbC5jbGFzc05hbWUgPSBcImZpeGVkXCI7IFxuICB9IGVsc2UgeyAgICAgIFxuICAgIGVsLmNsYXNzTmFtZSA9IFwiXCI7ICAgICAgXG4gIH1cbn1cblxuZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmICghZWxlbWVudCB8fCAhY2xhc3NOYW1lKXsgXG4gICAgcmV0dXJuOyBcbiAgfSAgXG4gIHZhciBjbGFzc1N0cmluZyA9IGVsZW1lbnQuY2xhc3NOYW1lLCBuYW1lSW5kZXggPSBjbGFzc1N0cmluZy5pbmRleE9mKGNsYXNzTmFtZSk7XG4gIGlmIChuYW1lSW5kZXggPT0gLTEpIHtcbiAgICBjbGFzc1N0cmluZyArPSAnICcgKyBjbGFzc05hbWU7XG4gIH1cbiAgZWxzZSB7XG4gICAgY2xhc3NTdHJpbmcgPSBjbGFzc1N0cmluZy5zdWJzdHIoMCwgbmFtZUluZGV4KSArIGNsYXNzU3RyaW5nLnN1YnN0cihuYW1lSW5kZXgrY2xhc3NOYW1lLmxlbmd0aCk7XG4gIH1cbiAgZWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc1N0cmluZztcbn1cbiIsIi8qIVxuICogZW5xdWlyZS5qcyB2Mi4xLjIgLSBBd2Vzb21lIE1lZGlhIFF1ZXJpZXMgaW4gSmF2YVNjcmlwdFxuICogQ29weXJpZ2h0IChjKSAyMDE0IE5pY2sgV2lsbGlhbXMgLSBodHRwOi8vd2lja3kubmlsbGlhLm1zL2VucXVpcmUuanNcbiAqIExpY2Vuc2U6IE1JVCAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHApXG4gKi9cblxuOyhmdW5jdGlvbiAobmFtZSwgY29udGV4dCwgZmFjdG9yeSkge1xuXHR2YXIgbWF0Y2hNZWRpYSA9IHdpbmRvdy5tYXRjaE1lZGlhO1xuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShtYXRjaE1lZGlhKTtcblx0fVxuXHRlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHRkZWZpbmUoZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gKGNvbnRleHRbbmFtZV0gPSBmYWN0b3J5KG1hdGNoTWVkaWEpKTtcblx0XHR9KTtcblx0fVxuXHRlbHNlIHtcblx0XHRjb250ZXh0W25hbWVdID0gZmFjdG9yeShtYXRjaE1lZGlhKTtcblx0fVxufSgnZW5xdWlyZScsIHRoaXMsIGZ1bmN0aW9uIChtYXRjaE1lZGlhKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG4gICAgLypqc2hpbnQgdW51c2VkOmZhbHNlICovXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBpdGVyYXRpbmcgb3ZlciBhIGNvbGxlY3Rpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIGZuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZWFjaChjb2xsZWN0aW9uLCBmbikge1xuICAgICAgICB2YXIgaSAgICAgID0gMCxcbiAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgICAgY29udDtcblxuICAgICAgICBmb3IoaTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb250ID0gZm4oY29sbGVjdGlvbltpXSwgaSk7XG4gICAgICAgICAgICBpZihjb250ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrOyAvL2FsbG93IGVhcmx5IGV4aXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgd2hldGhlciB0YXJnZXQgb2JqZWN0IGlzIGFuIGFycmF5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IHRoZSBvYmplY3QgdW5kZXIgdGVzdFxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgYXJyYXksIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXJyYXkodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KHRhcmdldCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBkZXRlcm1pbmluZyB3aGV0aGVyIHRhcmdldCBvYmplY3QgaXMgYSBmdW5jdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldCB0aGUgb2JqZWN0IHVuZGVyIHRlc3RcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIGZ1bmN0aW9uLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxlZ2F0ZSB0byBoYW5kbGUgYSBtZWRpYSBxdWVyeSBiZWluZyBtYXRjaGVkIGFuZCB1bm1hdGNoZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9wdGlvbnMubWF0Y2ggY2FsbGJhY2sgZm9yIHdoZW4gdGhlIG1lZGlhIHF1ZXJ5IGlzIG1hdGNoZWRcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbb3B0aW9ucy51bm1hdGNoXSBjYWxsYmFjayBmb3Igd2hlbiB0aGUgbWVkaWEgcXVlcnkgaXMgdW5tYXRjaGVkXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gW29wdGlvbnMuc2V0dXBdIG9uZS10aW1lIGNhbGxiYWNrIHRyaWdnZXJlZCB0aGUgZmlyc3QgdGltZSBhIHF1ZXJ5IGlzIG1hdGNoZWRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRlZmVyU2V0dXA9ZmFsc2VdIHNob3VsZCB0aGUgc2V0dXAgY2FsbGJhY2sgYmUgcnVuIGltbWVkaWF0ZWx5LCByYXRoZXIgdGhhbiBmaXJzdCB0aW1lIHF1ZXJ5IGlzIG1hdGNoZWQ/XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gUXVlcnlIYW5kbGVyKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgIW9wdGlvbnMuZGVmZXJTZXR1cCAmJiB0aGlzLnNldHVwKCk7XG4gICAgfVxuICAgIFF1ZXJ5SGFuZGxlci5wcm90b3R5cGUgPSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNvb3JkaW5hdGVzIHNldHVwIG9mIHRoZSBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgc2V0dXAgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKHRoaXMub3B0aW9ucy5zZXR1cCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zZXR1cCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXNlZCA9IHRydWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNvb3JkaW5hdGVzIHNldHVwIGFuZCB0cmlnZ2VyaW5nIG9mIHRoZSBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb24gOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICF0aGlzLmluaXRpYWxpc2VkICYmIHRoaXMuc2V0dXAoKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5tYXRjaCAmJiB0aGlzLm9wdGlvbnMubWF0Y2goKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29vcmRpbmF0ZXMgdGhlIHVubWF0Y2ggZXZlbnQgZm9yIHRoZSBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb2ZmIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMudW5tYXRjaCAmJiB0aGlzLm9wdGlvbnMudW5tYXRjaCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhIGhhbmRsZXIgaXMgdG8gYmUgZGVzdHJveWVkLlxuICAgICAgICAgKiBkZWxlZ2F0ZXMgdG8gdGhlIGRlc3Ryb3kgb3IgdW5tYXRjaCBjYWxsYmFja3MsIGRlcGVuZGluZyBvbiBhdmFpbGFiaWxpdHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgZGVzdHJveSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRlc3Ryb3kgPyB0aGlzLm9wdGlvbnMuZGVzdHJveSgpIDogdGhpcy5vZmYoKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZGV0ZXJtaW5lcyBlcXVhbGl0eSBieSByZWZlcmVuY2UuXG4gICAgICAgICAqIGlmIG9iamVjdCBpcyBzdXBwbGllZCBjb21wYXJlIG9wdGlvbnMsIGlmIGZ1bmN0aW9uLCBjb21wYXJlIG1hdGNoIGNhbGxiYWNrXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdCB8fCBmdW5jdGlvbn0gW3RhcmdldF0gdGhlIHRhcmdldCBmb3IgY29tcGFyaXNvblxuICAgICAgICAgKi9cbiAgICAgICAgZXF1YWxzIDogZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zID09PSB0YXJnZXQgfHwgdGhpcy5vcHRpb25zLm1hdGNoID09PSB0YXJnZXQ7XG4gICAgICAgIH1cblxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyBhIHNpbmdsZSBtZWRpYSBxdWVyeSwgbWFuYWdlcyBpdCdzIHN0YXRlIGFuZCByZWdpc3RlcmVkIGhhbmRsZXJzIGZvciB0aGlzIHF1ZXJ5XG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgdGhlIG1lZGlhIHF1ZXJ5IHN0cmluZ1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzVW5jb25kaXRpb25hbD1mYWxzZV0gd2hldGhlciB0aGUgbWVkaWEgcXVlcnkgc2hvdWxkIHJ1biByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIGNvbmRpdGlvbnMgYXJlIG1ldC4gUHJpbWFyaWx5IGZvciBoZWxwaW5nIG9sZGVyIGJyb3dzZXJzIGRlYWwgd2l0aCBtb2JpbGUtZmlyc3QgZGVzaWduXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWVkaWFRdWVyeShxdWVyeSwgaXNVbmNvbmRpdGlvbmFsKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICAgICAgdGhpcy5pc1VuY29uZGl0aW9uYWwgPSBpc1VuY29uZGl0aW9uYWw7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5tcWwgPSBtYXRjaE1lZGlhKHF1ZXJ5KTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbihtcWwpIHtcbiAgICAgICAgICAgIHNlbGYubXFsID0gbXFsO1xuICAgICAgICAgICAgc2VsZi5hc3Nlc3MoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tcWwuYWRkTGlzdGVuZXIodGhpcy5saXN0ZW5lcik7XG4gICAgfVxuICAgIE1lZGlhUXVlcnkucHJvdG90eXBlID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhZGQgYSBoYW5kbGVyIGZvciB0aGlzIHF1ZXJ5LCB0cmlnZ2VyaW5nIGlmIGFscmVhZHkgYWN0aXZlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBoYW5kbGVyXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXIubWF0Y2ggY2FsbGJhY2sgZm9yIHdoZW4gcXVlcnkgaXMgYWN0aXZhdGVkXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtoYW5kbGVyLnVubWF0Y2hdIGNhbGxiYWNrIGZvciB3aGVuIHF1ZXJ5IGlzIGRlYWN0aXZhdGVkXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtoYW5kbGVyLnNldHVwXSBjYWxsYmFjayBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbiB3aGVuIGEgcXVlcnkgaGFuZGxlciBpcyByZWdpc3RlcmVkXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2hhbmRsZXIuZGVmZXJTZXR1cD1mYWxzZV0gc2hvdWxkIHRoZSBzZXR1cCBjYWxsYmFjayBiZSBkZWZlcnJlZCB1bnRpbCB0aGUgZmlyc3QgdGltZSB0aGUgaGFuZGxlciBpcyBtYXRjaGVkP1xuICAgICAgICAgKi9cbiAgICAgICAgYWRkSGFuZGxlciA6IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgICAgICAgIHZhciBxaCA9IG5ldyBRdWVyeUhhbmRsZXIoaGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2gocWgpO1xuXG4gICAgICAgICAgICB0aGlzLm1hdGNoZXMoKSAmJiBxaC5vbigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZW1vdmVzIHRoZSBnaXZlbiBoYW5kbGVyIGZyb20gdGhlIGNvbGxlY3Rpb24sIGFuZCBjYWxscyBpdCdzIGRlc3Ryb3kgbWV0aG9kc1xuICAgICAgICAgKiBcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3QgfHwgZnVuY3Rpb259IGhhbmRsZXIgdGhlIGhhbmRsZXIgdG8gcmVtb3ZlXG4gICAgICAgICAqL1xuICAgICAgICByZW1vdmVIYW5kbGVyIDogZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycztcbiAgICAgICAgICAgIGVhY2goaGFuZGxlcnMsIGZ1bmN0aW9uKGgsIGkpIHtcbiAgICAgICAgICAgICAgICBpZihoLmVxdWFscyhoYW5kbGVyKSkge1xuICAgICAgICAgICAgICAgICAgICBoLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFoYW5kbGVycy5zcGxpY2UoaSwxKTsgLy9yZW1vdmUgZnJvbSBhcnJheSBhbmQgZXhpdCBlYWNoIGVhcmx5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZSB3aGV0aGVyIHRoZSBtZWRpYSBxdWVyeSBzaG91bGQgYmUgY29uc2lkZXJlZCBhIG1hdGNoXG4gICAgICAgICAqIFxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIG1lZGlhIHF1ZXJ5IGNhbiBiZSBjb25zaWRlcmVkIGEgbWF0Y2gsIGZhbHNlIG90aGVyd2lzZVxuICAgICAgICAgKi9cbiAgICAgICAgbWF0Y2hlcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubXFsLm1hdGNoZXMgfHwgdGhpcy5pc1VuY29uZGl0aW9uYWw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsZWFycyBhbGwgaGFuZGxlcnMgYW5kIHVuYmluZHMgZXZlbnRzXG4gICAgICAgICAqL1xuICAgICAgICBjbGVhciA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlci5kZXN0cm95KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMubXFsLnJlbW92ZUxpc3RlbmVyKHRoaXMubGlzdGVuZXIpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5sZW5ndGggPSAwOyAvL2NsZWFyIGFycmF5XG4gICAgICAgIH0sXG5cbiAgICAgICAgLypcbiAgICAgICAgICogQXNzZXNzZXMgdGhlIHF1ZXJ5LCB0dXJuaW5nIG9uIGFsbCBoYW5kbGVycyBpZiBpdCBtYXRjaGVzLCB0dXJuaW5nIHRoZW0gb2ZmIGlmIGl0IGRvZXNuJ3QgbWF0Y2hcbiAgICAgICAgICovXG4gICAgICAgIGFzc2VzcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IHRoaXMubWF0Y2hlcygpID8gJ29uJyA6ICdvZmYnO1xuXG4gICAgICAgICAgICBlYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyW2FjdGlvbl0oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbGxvd3MgZm9yIHJlZ2lzdHJhdGlvbiBvZiBxdWVyeSBoYW5kbGVycy5cbiAgICAgKiBNYW5hZ2VzIHRoZSBxdWVyeSBoYW5kbGVyJ3Mgc3RhdGUgYW5kIGlzIHJlc3BvbnNpYmxlIGZvciB3aXJpbmcgdXAgYnJvd3NlciBldmVudHNcbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1lZGlhUXVlcnlEaXNwYXRjaCAoKSB7XG4gICAgICAgIGlmKCFtYXRjaE1lZGlhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21hdGNoTWVkaWEgbm90IHByZXNlbnQsIGxlZ2FjeSBicm93c2VycyByZXF1aXJlIGEgcG9seWZpbGwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucXVlcmllcyA9IHt9O1xuICAgICAgICB0aGlzLmJyb3dzZXJJc0luY2FwYWJsZSA9ICFtYXRjaE1lZGlhKCdvbmx5IGFsbCcpLm1hdGNoZXM7XG4gICAgfVxuXG4gICAgTWVkaWFRdWVyeURpc3BhdGNoLnByb3RvdHlwZSA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXJzIGEgaGFuZGxlciBmb3IgdGhlIGdpdmVuIG1lZGlhIHF1ZXJ5XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBxIHRoZSBtZWRpYSBxdWVyeVxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdCB8fCBBcnJheSB8fCBGdW5jdGlvbn0gb3B0aW9ucyBlaXRoZXIgYSBzaW5nbGUgcXVlcnkgaGFuZGxlciBvYmplY3QsIGEgZnVuY3Rpb24sIG9yIGFuIGFycmF5IG9mIHF1ZXJ5IGhhbmRsZXJzXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9wdGlvbnMubWF0Y2ggZmlyZWQgd2hlbiBxdWVyeSBtYXRjaGVkXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtvcHRpb25zLnVubWF0Y2hdIGZpcmVkIHdoZW4gYSBxdWVyeSBpcyBubyBsb25nZXIgbWF0Y2hlZFxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbb3B0aW9ucy5zZXR1cF0gZmlyZWQgd2hlbiBoYW5kbGVyIGZpcnN0IHRyaWdnZXJlZFxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRlZmVyU2V0dXA9ZmFsc2VdIHdoZXRoZXIgc2V0dXAgc2hvdWxkIGJlIHJ1biBpbW1lZGlhdGVseSBvciBkZWZlcnJlZCB1bnRpbCBxdWVyeSBpcyBmaXJzdCBtYXRjaGVkXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Nob3VsZERlZ3JhZGU9ZmFsc2VdIHdoZXRoZXIgdGhpcyBwYXJ0aWN1bGFyIG1lZGlhIHF1ZXJ5IHNob3VsZCBhbHdheXMgcnVuIG9uIGluY2FwYWJsZSBicm93c2Vyc1xuICAgICAgICAgKi9cbiAgICAgICAgcmVnaXN0ZXIgOiBmdW5jdGlvbihxLCBvcHRpb25zLCBzaG91bGREZWdyYWRlKSB7XG4gICAgICAgICAgICB2YXIgcXVlcmllcyAgICAgICAgID0gdGhpcy5xdWVyaWVzLFxuICAgICAgICAgICAgICAgIGlzVW5jb25kaXRpb25hbCA9IHNob3VsZERlZ3JhZGUgJiYgdGhpcy5icm93c2VySXNJbmNhcGFibGU7XG5cbiAgICAgICAgICAgIGlmKCFxdWVyaWVzW3FdKSB7XG4gICAgICAgICAgICAgICAgcXVlcmllc1txXSA9IG5ldyBNZWRpYVF1ZXJ5KHEsIGlzVW5jb25kaXRpb25hbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vbm9ybWFsaXNlIHRvIG9iamVjdCBpbiBhbiBhcnJheVxuICAgICAgICAgICAgaWYoaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7IG1hdGNoIDogb3B0aW9ucyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIWlzQXJyYXkob3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gW29wdGlvbnNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWFjaChvcHRpb25zLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlciA9IHsgbWF0Y2ggOiBoYW5kbGVyIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHF1ZXJpZXNbcV0uYWRkSGFuZGxlcihoYW5kbGVyKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdW5yZWdpc3RlcnMgYSBxdWVyeSBhbmQgYWxsIGl0J3MgaGFuZGxlcnMsIG9yIGEgc3BlY2lmaWMgaGFuZGxlciBmb3IgYSBxdWVyeVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcSB0aGUgbWVkaWEgcXVlcnkgdG8gdGFyZ2V0XG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0IHx8IGZ1bmN0aW9ufSBbaGFuZGxlcl0gc3BlY2lmaWMgaGFuZGxlciB0byB1bnJlZ2lzdGVyXG4gICAgICAgICAqL1xuICAgICAgICB1bnJlZ2lzdGVyIDogZnVuY3Rpb24ocSwgaGFuZGxlcikge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5xdWVyaWVzW3FdO1xuXG4gICAgICAgICAgICBpZihxdWVyeSkge1xuICAgICAgICAgICAgICAgIGlmKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkucmVtb3ZlSGFuZGxlcihoYW5kbGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5LmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXJpZXNbcV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgIH07XG5cblx0cmV0dXJuIG5ldyBNZWRpYVF1ZXJ5RGlzcGF0Y2goKTtcblxufSkpOyIsIi8qIVxuICogaGVhZHJvb20uanMgdjAuNy4wIC0gR2l2ZSB5b3VyIHBhZ2Ugc29tZSBoZWFkcm9vbS4gSGlkZSB5b3VyIGhlYWRlciB1bnRpbCB5b3UgbmVlZCBpdFxuICogQ29weXJpZ2h0IChjKSAyMDE0IE5pY2sgV2lsbGlhbXMgLSBodHRwOi8vd2lja3kubmlsbGlhLm1zL2hlYWRyb29tLmpzXG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuXG4oZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICAvKiBleHBvcnRlZCBmZWF0dXJlcyAqL1xuICBcbiAgdmFyIGZlYXR1cmVzID0ge1xuICAgIGJpbmQgOiAhIShmdW5jdGlvbigpe30uYmluZCksXG4gICAgY2xhc3NMaXN0IDogJ2NsYXNzTGlzdCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuICAgIHJBRiA6ICEhKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lKVxuICB9O1xuICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gIFxuICAvKipcbiAgICogSGFuZGxlcyBkZWJvdW5jaW5nIG9mIGV2ZW50cyB2aWEgcmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAqIEBzZWUgaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvc3BlZWQvYW5pbWF0aW9ucy9cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGhhbmRsZSB3aGljaGV2ZXIgZXZlbnRcbiAgICovXG4gIGZ1bmN0aW9uIERlYm91bmNlciAoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy50aWNraW5nID0gZmFsc2U7XG4gIH1cbiAgRGVib3VuY2VyLnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvciA6IERlYm91bmNlcixcbiAgXG4gICAgLyoqXG4gICAgICogZGlzcGF0Y2hlcyB0aGUgZXZlbnQgdG8gdGhlIHN1cHBsaWVkIGNhbGxiYWNrXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB1cGRhdGUgOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuY2FsbGJhY2sgJiYgdGhpcy5jYWxsYmFjaygpO1xuICAgICAgdGhpcy50aWNraW5nID0gZmFsc2U7XG4gICAgfSxcbiAgXG4gICAgLyoqXG4gICAgICogZW5zdXJlcyBldmVudHMgZG9uJ3QgZ2V0IHN0YWNrZWRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHJlcXVlc3RUaWNrIDogZnVuY3Rpb24oKSB7XG4gICAgICBpZighdGhpcy50aWNraW5nKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJhZkNhbGxiYWNrIHx8ICh0aGlzLnJhZkNhbGxiYWNrID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKSkpO1xuICAgICAgICB0aGlzLnRpY2tpbmcgPSB0cnVlO1xuICAgICAgfVxuICAgIH0sXG4gIFxuICAgIC8qKlxuICAgICAqIEF0dGFjaCB0aGlzIGFzIHRoZSBldmVudCBsaXN0ZW5lcnNcbiAgICAgKi9cbiAgICBoYW5kbGVFdmVudCA6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5yZXF1ZXN0VGljaygpO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIENoZWNrIGlmIG9iamVjdCBpcyBwYXJ0IG9mIHRoZSBET01cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogZWxlbWVudCB0byBjaGVja1xuICAgKi9cbiAgZnVuY3Rpb24gaXNET01FbGVtZW50KG9iaikge1xuICAgIHJldHVybiBvYmogJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgKG9iaiA9PT0gd2luZG93IHx8IG9iai5ub2RlVHlwZSk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGV4dGVuZGluZyBvYmplY3RzXG4gICAqL1xuICBmdW5jdGlvbiBleHRlbmQgKG9iamVjdCAvKiwgb2JqZWN0TiAuLi4gKi8pIHtcbiAgICBpZihhcmd1bWVudHMubGVuZ3RoIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBhcmd1bWVudHMgaW4gZXh0ZW5kIGZ1bmN0aW9uJyk7XG4gICAgfVxuICBcbiAgICB2YXIgcmVzdWx0ID0gb2JqZWN0IHx8IHt9LFxuICAgICAgICBrZXksXG4gICAgICAgIGk7XG4gIFxuICAgIGZvciAoaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciByZXBsYWNlbWVudCA9IGFyZ3VtZW50c1tpXSB8fCB7fTtcbiAgXG4gICAgICBmb3IgKGtleSBpbiByZXBsYWNlbWVudCkge1xuICAgICAgICAvLyBSZWN1cnNlIGludG8gb2JqZWN0IGV4Y2VwdCBpZiB0aGUgb2JqZWN0IGlzIGEgRE9NIGVsZW1lbnRcbiAgICAgICAgaWYodHlwZW9mIHJlc3VsdFtrZXldID09PSAnb2JqZWN0JyAmJiAhIGlzRE9NRWxlbWVudChyZXN1bHRba2V5XSkpIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IGV4dGVuZChyZXN1bHRba2V5XSwgcmVwbGFjZW1lbnRba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSByZXN1bHRba2V5XSB8fCByZXBsYWNlbWVudFtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICBcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIFxuICAvKipcbiAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBub3JtYWxpemluZyB0b2xlcmFuY2Ugb3B0aW9uIHRvIG9iamVjdCBmb3JtYXRcbiAgICovXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVRvbGVyYW5jZSAodCkge1xuICAgIHJldHVybiB0ID09PSBPYmplY3QodCkgPyB0IDogeyBkb3duIDogdCwgdXAgOiB0IH07XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBVSSBlbmhhbmNlbWVudCBmb3IgZml4ZWQgaGVhZGVycy5cbiAgICogSGlkZXMgaGVhZGVyIHdoZW4gc2Nyb2xsaW5nIGRvd25cbiAgICogU2hvd3MgaGVhZGVyIHdoZW4gc2Nyb2xsaW5nIHVwXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW0gdGhlIGhlYWRlciBlbGVtZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIG9wdGlvbnMgZm9yIHRoZSB3aWRnZXRcbiAgICovXG4gIGZ1bmN0aW9uIEhlYWRyb29tIChlbGVtLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IGV4dGVuZChvcHRpb25zLCBIZWFkcm9vbS5vcHRpb25zKTtcbiAgXG4gICAgdGhpcy5sYXN0S25vd25TY3JvbGxZID0gMDtcbiAgICB0aGlzLmVsZW0gICAgICAgICAgICAgPSBlbGVtO1xuICAgIHRoaXMuZGVib3VuY2VyICAgICAgICA9IG5ldyBEZWJvdW5jZXIodGhpcy51cGRhdGUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy50b2xlcmFuY2UgICAgICAgID0gbm9ybWFsaXplVG9sZXJhbmNlKG9wdGlvbnMudG9sZXJhbmNlKTtcbiAgICB0aGlzLmNsYXNzZXMgICAgICAgICAgPSBvcHRpb25zLmNsYXNzZXM7XG4gICAgdGhpcy5vZmZzZXQgICAgICAgICAgID0gb3B0aW9ucy5vZmZzZXQ7XG4gICAgdGhpcy5zY3JvbGxlciAgICAgICAgID0gb3B0aW9ucy5zY3JvbGxlcjtcbiAgICB0aGlzLmluaXRpYWxpc2VkICAgICAgPSBmYWxzZTtcbiAgICB0aGlzLm9uUGluICAgICAgICAgICAgPSBvcHRpb25zLm9uUGluO1xuICAgIHRoaXMub25VbnBpbiAgICAgICAgICA9IG9wdGlvbnMub25VbnBpbjtcbiAgICB0aGlzLm9uVG9wICAgICAgICAgICAgPSBvcHRpb25zLm9uVG9wO1xuICAgIHRoaXMub25Ob3RUb3AgICAgICAgICA9IG9wdGlvbnMub25Ob3RUb3A7XG4gIH1cbiAgSGVhZHJvb20ucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yIDogSGVhZHJvb20sXG4gIFxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpc2VzIHRoZSB3aWRnZXRcbiAgICAgKi9cbiAgICBpbml0IDogZnVuY3Rpb24oKSB7XG4gICAgICBpZighSGVhZHJvb20uY3V0c1RoZU11c3RhcmQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICBcbiAgICAgIHRoaXMuZWxlbS5jbGFzc0xpc3QuYWRkKHRoaXMuY2xhc3Nlcy5pbml0aWFsKTtcbiAgXG4gICAgICAvLyBkZWZlciBldmVudCByZWdpc3RyYXRpb24gdG8gaGFuZGxlIGJyb3dzZXIgXG4gICAgICAvLyBwb3RlbnRpYWxseSByZXN0b3JpbmcgcHJldmlvdXMgc2Nyb2xsIHBvc2l0aW9uXG4gICAgICBzZXRUaW1lb3V0KHRoaXMuYXR0YWNoRXZlbnQuYmluZCh0aGlzKSwgMTAwKTtcbiAgXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICBcbiAgICAvKipcbiAgICAgKiBVbmF0dGFjaGVzIGV2ZW50cyBhbmQgcmVtb3ZlcyBhbnkgY2xhc3NlcyB0aGF0IHdlcmUgYWRkZWRcbiAgICAgKi9cbiAgICBkZXN0cm95IDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2xhc3NlcyA9IHRoaXMuY2xhc3NlcztcbiAgXG4gICAgICB0aGlzLmluaXRpYWxpc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmVsZW0uY2xhc3NMaXN0LnJlbW92ZShjbGFzc2VzLnVucGlubmVkLCBjbGFzc2VzLnBpbm5lZCwgY2xhc3Nlcy50b3AsIGNsYXNzZXMuaW5pdGlhbCk7XG4gICAgICB0aGlzLnNjcm9sbGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuZGVib3VuY2VyLCBmYWxzZSk7XG4gICAgfSxcbiAgXG4gICAgLyoqXG4gICAgICogQXR0YWNoZXMgdGhlIHNjcm9sbCBldmVudFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgYXR0YWNoRXZlbnQgOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmKCF0aGlzLmluaXRpYWxpc2VkKXtcbiAgICAgICAgdGhpcy5sYXN0S25vd25TY3JvbGxZID0gdGhpcy5nZXRTY3JvbGxZKCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGlzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnNjcm9sbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuZGVib3VuY2VyLCBmYWxzZSk7XG4gIFxuICAgICAgICB0aGlzLmRlYm91bmNlci5oYW5kbGVFdmVudCgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogVW5waW5zIHRoZSBoZWFkZXIgaWYgaXQncyBjdXJyZW50bHkgcGlubmVkXG4gICAgICovXG4gICAgdW5waW4gOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjbGFzc0xpc3QgPSB0aGlzLmVsZW0uY2xhc3NMaXN0LFxuICAgICAgICBjbGFzc2VzID0gdGhpcy5jbGFzc2VzO1xuICAgICAgXG4gICAgICBpZihjbGFzc0xpc3QuY29udGFpbnMoY2xhc3Nlcy5waW5uZWQpIHx8ICFjbGFzc0xpc3QuY29udGFpbnMoY2xhc3Nlcy51bnBpbm5lZCkpIHtcbiAgICAgICAgY2xhc3NMaXN0LmFkZChjbGFzc2VzLnVucGlubmVkKTtcbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShjbGFzc2VzLnBpbm5lZCk7XG4gICAgICAgIHRoaXMub25VbnBpbiAmJiB0aGlzLm9uVW5waW4uY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICAvKipcbiAgICAgKiBQaW5zIHRoZSBoZWFkZXIgaWYgaXQncyBjdXJyZW50bHkgdW5waW5uZWRcbiAgICAgKi9cbiAgICBwaW4gOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjbGFzc0xpc3QgPSB0aGlzLmVsZW0uY2xhc3NMaXN0LFxuICAgICAgICBjbGFzc2VzID0gdGhpcy5jbGFzc2VzO1xuICAgICAgXG4gICAgICBpZihjbGFzc0xpc3QuY29udGFpbnMoY2xhc3Nlcy51bnBpbm5lZCkpIHtcbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShjbGFzc2VzLnVucGlubmVkKTtcbiAgICAgICAgY2xhc3NMaXN0LmFkZChjbGFzc2VzLnBpbm5lZCk7XG4gICAgICAgIHRoaXMub25QaW4gJiYgdGhpcy5vblBpbi5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gIFxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHRvcCBzdGF0ZXNcbiAgICAgKi9cbiAgICB0b3AgOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjbGFzc0xpc3QgPSB0aGlzLmVsZW0uY2xhc3NMaXN0LFxuICAgICAgICBjbGFzc2VzID0gdGhpcy5jbGFzc2VzO1xuICAgICAgXG4gICAgICBpZighY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzZXMudG9wKSkge1xuICAgICAgICBjbGFzc0xpc3QuYWRkKGNsYXNzZXMudG9wKTtcbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShjbGFzc2VzLm5vdFRvcCk7XG4gICAgICAgIHRoaXMub25Ub3AgJiYgdGhpcy5vblRvcC5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gIFxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIG5vdCB0b3Agc3RhdGVcbiAgICAgKi9cbiAgICBub3RUb3AgOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjbGFzc0xpc3QgPSB0aGlzLmVsZW0uY2xhc3NMaXN0LFxuICAgICAgICBjbGFzc2VzID0gdGhpcy5jbGFzc2VzO1xuICAgICAgXG4gICAgICBpZighY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzZXMubm90VG9wKSkge1xuICAgICAgICBjbGFzc0xpc3QuYWRkKGNsYXNzZXMubm90VG9wKTtcbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShjbGFzc2VzLnRvcCk7XG4gICAgICAgIHRoaXMub25Ob3RUb3AgJiYgdGhpcy5vbk5vdFRvcC5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gIFxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIFkgc2Nyb2xsIHBvc2l0aW9uXG4gICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93LnNjcm9sbFlcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IHBpeGVscyB0aGUgcGFnZSBoYXMgc2Nyb2xsZWQgYWxvbmcgdGhlIFktYXhpc1xuICAgICAqL1xuICAgIGdldFNjcm9sbFkgOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAodGhpcy5zY3JvbGxlci5wYWdlWU9mZnNldCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICA/IHRoaXMuc2Nyb2xsZXIucGFnZVlPZmZzZXRcbiAgICAgICAgOiAodGhpcy5zY3JvbGxlci5zY3JvbGxUb3AgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICA/IHRoaXMuc2Nyb2xsZXIuc2Nyb2xsVG9wXG4gICAgICAgICAgOiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZSB8fCBkb2N1bWVudC5ib2R5KS5zY3JvbGxUb3A7XG4gICAgfSxcbiAgXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSB2aWV3cG9ydFxuICAgICAqIEBzZWUgaHR0cDovL2FuZHlsYW5ndG9uLmNvLnVrL2Jsb2cvZGV2ZWxvcG1lbnQvZ2V0LXZpZXdwb3J0LXNpemUtd2lkdGgtYW5kLWhlaWdodC1qYXZhc2NyaXB0XG4gICAgICogQHJldHVybiB7aW50fSB0aGUgaGVpZ2h0IG9mIHRoZSB2aWV3cG9ydCBpbiBwaXhlbHNcbiAgICAgKi9cbiAgICBnZXRWaWV3cG9ydEhlaWdodCA6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICAgICAgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodFxuICAgICAgICB8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDtcbiAgICB9LFxuICBcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBoZWlnaHQgb2YgdGhlIGRvY3VtZW50XG4gICAgICogQHNlZSBodHRwOi8vamFtZXMucGFkb2xzZXkuY29tL2phdmFzY3JpcHQvZ2V0LWRvY3VtZW50LWhlaWdodC1jcm9zcy1icm93c2VyL1xuICAgICAqIEByZXR1cm4ge2ludH0gdGhlIGhlaWdodCBvZiB0aGUgZG9jdW1lbnQgaW4gcGl4ZWxzXG4gICAgICovXG4gICAgZ2V0RG9jdW1lbnRIZWlnaHQgOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHksXG4gICAgICAgIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICBcbiAgICAgIHJldHVybiBNYXRoLm1heChcbiAgICAgICAgYm9keS5zY3JvbGxIZWlnaHQsIGRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsXG4gICAgICAgIGJvZHkub2Zmc2V0SGVpZ2h0LCBkb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0LFxuICAgICAgICBib2R5LmNsaWVudEhlaWdodCwgZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodFxuICAgICAgKTtcbiAgICB9LFxuICBcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBoZWlnaHQgb2YgdGhlIERPTSBlbGVtZW50XG4gICAgICogQHBhcmFtICB7T2JqZWN0fSAgZWxtIHRoZSBlbGVtZW50IHRvIGNhbGN1bGF0ZSB0aGUgaGVpZ2h0IG9mIHdoaWNoXG4gICAgICogQHJldHVybiB7aW50fSAgICAgdGhlIGhlaWdodCBvZiB0aGUgZWxlbWVudCBpbiBwaXhlbHNcbiAgICAgKi9cbiAgICBnZXRFbGVtZW50SGVpZ2h0IDogZnVuY3Rpb24gKGVsbSkge1xuICAgICAgcmV0dXJuIE1hdGgubWF4KFxuICAgICAgICBlbG0uc2Nyb2xsSGVpZ2h0LFxuICAgICAgICBlbG0ub2Zmc2V0SGVpZ2h0LFxuICAgICAgICBlbG0uY2xpZW50SGVpZ2h0XG4gICAgICApO1xuICAgIH0sXG4gIFxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGhlaWdodCBvZiB0aGUgc2Nyb2xsZXIgZWxlbWVudFxuICAgICAqIEByZXR1cm4ge2ludH0gdGhlIGhlaWdodCBvZiB0aGUgc2Nyb2xsZXIgZWxlbWVudCBpbiBwaXhlbHNcbiAgICAgKi9cbiAgICBnZXRTY3JvbGxlckhlaWdodCA6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAodGhpcy5zY3JvbGxlciA9PT0gd2luZG93IHx8IHRoaXMuc2Nyb2xsZXIgPT09IGRvY3VtZW50LmJvZHkpXG4gICAgICAgID8gdGhpcy5nZXREb2N1bWVudEhlaWdodCgpXG4gICAgICAgIDogdGhpcy5nZXRFbGVtZW50SGVpZ2h0KHRoaXMuc2Nyb2xsZXIpO1xuICAgIH0sXG4gIFxuICAgIC8qKlxuICAgICAqIGRldGVybWluZXMgaWYgdGhlIHNjcm9sbCBwb3NpdGlvbiBpcyBvdXRzaWRlIG9mIGRvY3VtZW50IGJvdW5kYXJpZXNcbiAgICAgKiBAcGFyYW0gIHtpbnR9ICBjdXJyZW50U2Nyb2xsWSB0aGUgY3VycmVudCB5IHNjcm9sbCBwb3NpdGlvblxuICAgICAqIEByZXR1cm4ge2Jvb2x9IHRydWUgaWYgb3V0IG9mIGJvdW5kcywgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgaXNPdXRPZkJvdW5kcyA6IGZ1bmN0aW9uIChjdXJyZW50U2Nyb2xsWSkge1xuICAgICAgdmFyIHBhc3RUb3AgID0gY3VycmVudFNjcm9sbFkgPCAwLFxuICAgICAgICBwYXN0Qm90dG9tID0gY3VycmVudFNjcm9sbFkgKyB0aGlzLmdldFZpZXdwb3J0SGVpZ2h0KCkgPiB0aGlzLmdldFNjcm9sbGVySGVpZ2h0KCk7XG4gICAgICBcbiAgICAgIHJldHVybiBwYXN0VG9wIHx8IHBhc3RCb3R0b207XG4gICAgfSxcbiAgXG4gICAgLyoqXG4gICAgICogZGV0ZXJtaW5lcyBpZiB0aGUgdG9sZXJhbmNlIGhhcyBiZWVuIGV4Y2VlZGVkXG4gICAgICogQHBhcmFtICB7aW50fSBjdXJyZW50U2Nyb2xsWSB0aGUgY3VycmVudCBzY3JvbGwgeSBwb3NpdGlvblxuICAgICAqIEByZXR1cm4ge2Jvb2x9IHRydWUgaWYgdG9sZXJhbmNlIGV4Y2VlZGVkLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICB0b2xlcmFuY2VFeGNlZWRlZCA6IGZ1bmN0aW9uIChjdXJyZW50U2Nyb2xsWSwgZGlyZWN0aW9uKSB7XG4gICAgICByZXR1cm4gTWF0aC5hYnMoY3VycmVudFNjcm9sbFktdGhpcy5sYXN0S25vd25TY3JvbGxZKSA+PSB0aGlzLnRvbGVyYW5jZVtkaXJlY3Rpb25dO1xuICAgIH0sXG4gIFxuICAgIC8qKlxuICAgICAqIGRldGVybWluZSBpZiBpdCBpcyBhcHByb3ByaWF0ZSB0byB1bnBpblxuICAgICAqIEBwYXJhbSAge2ludH0gY3VycmVudFNjcm9sbFkgdGhlIGN1cnJlbnQgeSBzY3JvbGwgcG9zaXRpb25cbiAgICAgKiBAcGFyYW0gIHtib29sfSB0b2xlcmFuY2VFeGNlZWRlZCBoYXMgdGhlIHRvbGVyYW5jZSBiZWVuIGV4Y2VlZGVkP1xuICAgICAqIEByZXR1cm4ge2Jvb2x9IHRydWUgaWYgc2hvdWxkIHVucGluLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBzaG91bGRVbnBpbiA6IGZ1bmN0aW9uIChjdXJyZW50U2Nyb2xsWSwgdG9sZXJhbmNlRXhjZWVkZWQpIHtcbiAgICAgIHZhciBzY3JvbGxpbmdEb3duID0gY3VycmVudFNjcm9sbFkgPiB0aGlzLmxhc3RLbm93blNjcm9sbFksXG4gICAgICAgIHBhc3RPZmZzZXQgPSBjdXJyZW50U2Nyb2xsWSA+PSB0aGlzLm9mZnNldDtcbiAgXG4gICAgICByZXR1cm4gc2Nyb2xsaW5nRG93biAmJiBwYXN0T2Zmc2V0ICYmIHRvbGVyYW5jZUV4Y2VlZGVkO1xuICAgIH0sXG4gIFxuICAgIC8qKlxuICAgICAqIGRldGVybWluZSBpZiBpdCBpcyBhcHByb3ByaWF0ZSB0byBwaW5cbiAgICAgKiBAcGFyYW0gIHtpbnR9IGN1cnJlbnRTY3JvbGxZIHRoZSBjdXJyZW50IHkgc2Nyb2xsIHBvc2l0aW9uXG4gICAgICogQHBhcmFtICB7Ym9vbH0gdG9sZXJhbmNlRXhjZWVkZWQgaGFzIHRoZSB0b2xlcmFuY2UgYmVlbiBleGNlZWRlZD9cbiAgICAgKiBAcmV0dXJuIHtib29sfSB0cnVlIGlmIHNob3VsZCBwaW4sIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIHNob3VsZFBpbiA6IGZ1bmN0aW9uIChjdXJyZW50U2Nyb2xsWSwgdG9sZXJhbmNlRXhjZWVkZWQpIHtcbiAgICAgIHZhciBzY3JvbGxpbmdVcCAgPSBjdXJyZW50U2Nyb2xsWSA8IHRoaXMubGFzdEtub3duU2Nyb2xsWSxcbiAgICAgICAgcGFzdE9mZnNldCA9IGN1cnJlbnRTY3JvbGxZIDw9IHRoaXMub2Zmc2V0O1xuICBcbiAgICAgIHJldHVybiAoc2Nyb2xsaW5nVXAgJiYgdG9sZXJhbmNlRXhjZWVkZWQpIHx8IHBhc3RPZmZzZXQ7XG4gICAgfSxcbiAgXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB1cGRhdGluZyB0aGUgc3RhdGUgb2YgdGhlIHdpZGdldFxuICAgICAqL1xuICAgIHVwZGF0ZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGN1cnJlbnRTY3JvbGxZICA9IHRoaXMuZ2V0U2Nyb2xsWSgpLFxuICAgICAgICBzY3JvbGxEaXJlY3Rpb24gPSBjdXJyZW50U2Nyb2xsWSA+IHRoaXMubGFzdEtub3duU2Nyb2xsWSA/ICdkb3duJyA6ICd1cCcsXG4gICAgICAgIHRvbGVyYW5jZUV4Y2VlZGVkID0gdGhpcy50b2xlcmFuY2VFeGNlZWRlZChjdXJyZW50U2Nyb2xsWSwgc2Nyb2xsRGlyZWN0aW9uKTtcbiAgXG4gICAgICBpZih0aGlzLmlzT3V0T2ZCb3VuZHMoY3VycmVudFNjcm9sbFkpKSB7IC8vIElnbm9yZSBib3VuY3kgc2Nyb2xsaW5nIGluIE9TWFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgaWYgKGN1cnJlbnRTY3JvbGxZIDw9IHRoaXMub2Zmc2V0ICkge1xuICAgICAgICB0aGlzLnRvcCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ub3RUb3AoKTtcbiAgICAgIH1cbiAgXG4gICAgICBpZih0aGlzLnNob3VsZFVucGluKGN1cnJlbnRTY3JvbGxZLCB0b2xlcmFuY2VFeGNlZWRlZCkpIHtcbiAgICAgICAgdGhpcy51bnBpbigpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZih0aGlzLnNob3VsZFBpbihjdXJyZW50U2Nyb2xsWSwgdG9sZXJhbmNlRXhjZWVkZWQpKSB7XG4gICAgICAgIHRoaXMucGluKCk7XG4gICAgICB9XG4gIFxuICAgICAgdGhpcy5sYXN0S25vd25TY3JvbGxZID0gY3VycmVudFNjcm9sbFk7XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogRGVmYXVsdCBvcHRpb25zXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBIZWFkcm9vbS5vcHRpb25zID0ge1xuICAgIHRvbGVyYW5jZSA6IHtcbiAgICAgIHVwIDogMCxcbiAgICAgIGRvd24gOiAwXG4gICAgfSxcbiAgICBvZmZzZXQgOiAwLFxuICAgIHNjcm9sbGVyOiB3aW5kb3csXG4gICAgY2xhc3NlcyA6IHtcbiAgICAgIHBpbm5lZCA6ICdoZWFkcm9vbS0tcGlubmVkJyxcbiAgICAgIHVucGlubmVkIDogJ2hlYWRyb29tLS11bnBpbm5lZCcsXG4gICAgICB0b3AgOiAnaGVhZHJvb20tLXRvcCcsXG4gICAgICBub3RUb3AgOiAnaGVhZHJvb20tLW5vdC10b3AnLFxuICAgICAgaW5pdGlhbCA6ICdoZWFkcm9vbSdcbiAgICB9XG4gIH07XG4gIEhlYWRyb29tLmN1dHNUaGVNdXN0YXJkID0gdHlwZW9mIGZlYXR1cmVzICE9PSAndW5kZWZpbmVkJyAmJiBmZWF0dXJlcy5yQUYgJiYgZmVhdHVyZXMuYmluZCAmJiBmZWF0dXJlcy5jbGFzc0xpc3Q7XG5cbiAgd2luZG93LkhlYWRyb29tID0gSGVhZHJvb207XG5cbn0od2luZG93LCBkb2N1bWVudCkpOyIsIi8qISBQaWN0dXJlZmlsbCAtIHYyLjIuMCAtIDIwMTQtMTAtMzBcbiogaHR0cDovL3Njb3R0amVobC5naXRodWIuaW8vcGljdHVyZWZpbGxcbiogQ29weXJpZ2h0IChjKSAyMDE0IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvcGljdHVyZWZpbGwvYmxvYi9tYXN0ZXIvQXV0aG9ycy50eHQ7IExpY2Vuc2VkIE1JVCAqL1xuLyohIG1hdGNoTWVkaWEoKSBwb2x5ZmlsbCAtIFRlc3QgYSBDU1MgbWVkaWEgdHlwZS9xdWVyeSBpbiBKUy4gQXV0aG9ycyAmIGNvcHlyaWdodCAoYykgMjAxMjogU2NvdHQgSmVobCwgUGF1bCBJcmlzaCwgTmljaG9sYXMgWmFrYXMsIERhdmlkIEtuaWdodC4gRHVhbCBNSVQvQlNEIGxpY2Vuc2UgKi9cblxud2luZG93Lm1hdGNoTWVkaWEgfHwgKHdpbmRvdy5tYXRjaE1lZGlhID0gZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8vIEZvciBicm93c2VycyB0aGF0IHN1cHBvcnQgbWF0Y2hNZWRpdW0gYXBpIHN1Y2ggYXMgSUUgOSBhbmQgd2Via2l0XG4gIHZhciBzdHlsZU1lZGlhID0gKHdpbmRvdy5zdHlsZU1lZGlhIHx8IHdpbmRvdy5tZWRpYSk7XG5cbiAgLy8gRm9yIHRob3NlIHRoYXQgZG9uJ3Qgc3VwcG9ydCBtYXRjaE1lZGl1bVxuICBpZiAoIXN0eWxlTWVkaWEpIHtcbiAgICB2YXIgc3R5bGUgICAgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpLFxuICAgICAgc2NyaXB0ICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF0sXG4gICAgICBpbmZvICAgICAgICA9IG51bGw7XG5cbiAgICBzdHlsZS50eXBlICA9ICd0ZXh0L2Nzcyc7XG4gICAgc3R5bGUuaWQgICAgPSAnbWF0Y2htZWRpYWpzLXRlc3QnO1xuXG4gICAgc2NyaXB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN0eWxlLCBzY3JpcHQpO1xuXG4gICAgLy8gJ3N0eWxlLmN1cnJlbnRTdHlsZScgaXMgdXNlZCBieSBJRSA8PSA4IGFuZCAnd2luZG93LmdldENvbXB1dGVkU3R5bGUnIGZvciBhbGwgb3RoZXIgYnJvd3NlcnNcbiAgICBpbmZvID0gKCdnZXRDb21wdXRlZFN0eWxlJyBpbiB3aW5kb3cpICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHN0eWxlLCBudWxsKSB8fCBzdHlsZS5jdXJyZW50U3R5bGU7XG5cbiAgICBzdHlsZU1lZGlhID0ge1xuICAgICAgbWF0Y2hNZWRpdW06IGZ1bmN0aW9uKG1lZGlhKSB7XG4gICAgICAgIHZhciB0ZXh0ID0gJ0BtZWRpYSAnICsgbWVkaWEgKyAneyAjbWF0Y2htZWRpYWpzLXRlc3QgeyB3aWR0aDogMXB4OyB9IH0nO1xuXG4gICAgICAgIC8vICdzdHlsZS5zdHlsZVNoZWV0JyBpcyB1c2VkIGJ5IElFIDw9IDggYW5kICdzdHlsZS50ZXh0Q29udGVudCcgZm9yIGFsbCBvdGhlciBicm93c2Vyc1xuICAgICAgICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgICAgICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHRleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGVzdCBpZiBtZWRpYSBxdWVyeSBpcyB0cnVlIG9yIGZhbHNlXG4gICAgICAgIHJldHVybiBpbmZvLndpZHRoID09PSAnMXB4JztcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKG1lZGlhKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1hdGNoZXM6IHN0eWxlTWVkaWEubWF0Y2hNZWRpdW0obWVkaWEgfHwgJ2FsbCcpLFxuICAgICAgbWVkaWE6IG1lZGlhIHx8ICdhbGwnXG4gICAgfTtcbiAgfTtcbn0oKSk7XG4vKiEgUGljdHVyZWZpbGwgLSBSZXNwb25zaXZlIEltYWdlcyB0aGF0IHdvcmsgdG9kYXkuXG4qICBBdXRob3I6IFNjb3R0IEplaGwsIEZpbGFtZW50IEdyb3VwLCAyMDEyICggbmV3IHByb3Bvc2FsIGltcGxlbWVudGVkIGJ5IFNoYXduIEphbnNlcGFyIClcbiogIExpY2Vuc2U6IE1JVC9HUEx2MlxuKiAgU3BlYzogaHR0cDovL3BpY3R1cmUucmVzcG9uc2l2ZWltYWdlcy5vcmcvXG4qL1xuKGZ1bmN0aW9uKCB3LCBkb2MsIGltYWdlICkge1xuICAvLyBFbmFibGUgc3RyaWN0IG1vZGVcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLy8gSWYgcGljdHVyZSBpcyBzdXBwb3J0ZWQsIHdlbGwsIHRoYXQncyBhd2Vzb21lLiBMZXQncyBnZXQgb3V0dGEgaGVyZS4uLlxuICBpZiAoIHcuSFRNTFBpY3R1cmVFbGVtZW50ICkge1xuICAgIHcucGljdHVyZWZpbGwgPSBmdW5jdGlvbigpIHsgfTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBIVE1MIHNoaW18diBpdCBmb3Igb2xkIElFIChJRTkgd2lsbCBzdGlsbCBuZWVkIHRoZSBIVE1MIHZpZGVvIHRhZyB3b3JrYXJvdW5kKVxuICBkb2MuY3JlYXRlRWxlbWVudCggXCJwaWN0dXJlXCIgKTtcblxuICAvLyBsb2NhbCBvYmplY3QgZm9yIG1ldGhvZCByZWZlcmVuY2VzIGFuZCB0ZXN0aW5nIGV4cG9zdXJlXG4gIHZhciBwZiA9IHt9O1xuXG4gIC8vIG5hbWVzcGFjZVxuICBwZi5ucyA9IFwicGljdHVyZWZpbGxcIjtcblxuICAvLyBzcmNzZXQgc3VwcG9ydCB0ZXN0XG4gIChmdW5jdGlvbigpIHtcbiAgICBwZi5zcmNzZXRTdXBwb3J0ZWQgPSBcInNyY3NldFwiIGluIGltYWdlO1xuICAgIHBmLnNpemVzU3VwcG9ydGVkID0gXCJzaXplc1wiIGluIGltYWdlO1xuICB9KSgpO1xuXG4gIC8vIGp1c3QgYSBzdHJpbmcgdHJpbSB3b3JrYXJvdW5kXG4gIHBmLnRyaW0gPSBmdW5jdGlvbiggc3RyICkge1xuICAgIHJldHVybiBzdHIudHJpbSA/IHN0ci50cmltKCkgOiBzdHIucmVwbGFjZSggL15cXHMrfFxccyskL2csIFwiXCIgKTtcbiAgfTtcblxuICAvLyBqdXN0IGEgc3RyaW5nIGVuZHNXaXRoIHdvcmthcm91bmRcbiAgcGYuZW5kc1dpdGggPSBmdW5jdGlvbiggc3RyLCBzdWZmaXggKSB7XG4gICAgcmV0dXJuIHN0ci5lbmRzV2l0aCA/IHN0ci5lbmRzV2l0aCggc3VmZml4ICkgOiBzdHIuaW5kZXhPZiggc3VmZml4LCBzdHIubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCApICE9PSAtMTtcbiAgfTtcblxuICAvKipcbiAgICogU2hvcnRjdXQgbWV0aG9kIGZvciBodHRwczovL3czYy5naXRodWIuaW8vd2ViYXBwc2VjL3NwZWNzL21peGVkY29udGVudC8jcmVzdHJpY3RzLW1peGVkLWNvbnRlbnQgKCBmb3IgZWFzeSBvdmVycmlkaW5nIGluIHRlc3RzIClcbiAgICovXG4gIHBmLnJlc3RyaWN0c01peGVkQ29udGVudCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB3LmxvY2F0aW9uLnByb3RvY29sID09PSBcImh0dHBzOlwiO1xuICB9O1xuICAvKipcbiAgICogU2hvcnRjdXQgbWV0aG9kIGZvciBtYXRjaE1lZGlhICggZm9yIGVhc3kgb3ZlcnJpZGluZyBpbiB0ZXN0cyApXG4gICAqL1xuXG4gIHBmLm1hdGNoZXNNZWRpYSA9IGZ1bmN0aW9uKCBtZWRpYSApIHtcbiAgICByZXR1cm4gdy5tYXRjaE1lZGlhICYmIHcubWF0Y2hNZWRpYSggbWVkaWEgKS5tYXRjaGVzO1xuICB9O1xuXG4gIC8vIFNob3J0Y3V0IG1ldGhvZCBmb3IgYGRldmljZVBpeGVsUmF0aW9gICggZm9yIGVhc3kgb3ZlcnJpZGluZyBpbiB0ZXN0cyApXG4gIHBmLmdldERwciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoIHcuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB3aWR0aCBpbiBjc3MgcGl4ZWwgdmFsdWUgZnJvbSBhIFwibGVuZ3RoXCIgdmFsdWVcbiAgICogaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy0zLyNsZW5ndGgtdmFsdWVcbiAgICovXG4gIHBmLmdldFdpZHRoRnJvbUxlbmd0aCA9IGZ1bmN0aW9uKCBsZW5ndGggKSB7XG4gICAgLy8gSWYgYSBsZW5ndGggaXMgc3BlY2lmaWVkIGFuZCBkb2VzbuKAmXQgY29udGFpbiBhIHBlcmNlbnRhZ2UsIGFuZCBpdCBpcyBncmVhdGVyIHRoYW4gMCBvciB1c2luZyBgY2FsY2AsIHVzZSBpdC4gRWxzZSwgdXNlIHRoZSBgMTAwdndgIGRlZmF1bHQuXG4gICAgbGVuZ3RoID0gbGVuZ3RoICYmIGxlbmd0aC5pbmRleE9mKCBcIiVcIiApID4gLTEgPT09IGZhbHNlICYmICggcGFyc2VGbG9hdCggbGVuZ3RoICkgPiAwIHx8IGxlbmd0aC5pbmRleE9mKCBcImNhbGMoXCIgKSA+IC0xICkgPyBsZW5ndGggOiBcIjEwMHZ3XCI7XG5cbiAgICAvKipcbiAgICAgKiBJZiBsZW5ndGggaXMgc3BlY2lmaWVkIGluICBgdndgIHVuaXRzLCB1c2UgYCVgIGluc3RlYWQgc2luY2UgdGhlIGRpdiB3ZeKAmXJlIG1lYXN1cmluZ1xuICAgICAqIGlzIGluamVjdGVkIGF0IHRoZSB0b3Agb2YgdGhlIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogVE9ETzogbWF5YmUgd2Ugc2hvdWxkIHB1dCB0aGlzIGJlaGluZCBhIGZlYXR1cmUgdGVzdCBmb3IgYHZ3YD9cbiAgICAgKi9cbiAgICBsZW5ndGggPSBsZW5ndGgucmVwbGFjZSggXCJ2d1wiLCBcIiVcIiApO1xuXG4gICAgLy8gQ3JlYXRlIGEgY2FjaGVkIGVsZW1lbnQgZm9yIGdldHRpbmcgbGVuZ3RoIHZhbHVlIHdpZHRoc1xuICAgIGlmICggIXBmLmxlbmd0aEVsICkge1xuICAgICAgcGYubGVuZ3RoRWwgPSBkb2MuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xuXG4gICAgICAvLyBQb3NpdGlvbmluZyBzdHlsZXMgaGVscCBwcmV2ZW50IHBhZGRpbmcvbWFyZ2luL3dpZHRoIG9uIGBodG1sYCBvciBgYm9keWAgZnJvbSB0aHJvd2luZyBjYWxjdWxhdGlvbnMgb2ZmLlxuICAgICAgcGYubGVuZ3RoRWwuc3R5bGUuY3NzVGV4dCA9IFwiYm9yZGVyOjA7ZGlzcGxheTpibG9jaztmb250LXNpemU6MWVtO2xlZnQ6MDttYXJnaW46MDtwYWRkaW5nOjA7cG9zaXRpb246YWJzb2x1dGU7dmlzaWJpbGl0eTpoaWRkZW5cIjtcbiAgICB9XG5cbiAgICBwZi5sZW5ndGhFbC5zdHlsZS53aWR0aCA9IGxlbmd0aDtcblxuICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKHBmLmxlbmd0aEVsKTtcblxuICAgIC8vIEFkZCBhIGNsYXNzLCBzbyB0aGF0IGV2ZXJ5b25lIGtub3dzIHdoZXJlIHRoaXMgZWxlbWVudCBjb21lcyBmcm9tXG4gICAgcGYubGVuZ3RoRWwuY2xhc3NOYW1lID0gXCJoZWxwZXItZnJvbS1waWN0dXJlZmlsbC1qc1wiO1xuXG4gICAgaWYgKCBwZi5sZW5ndGhFbC5vZmZzZXRXaWR0aCA8PSAwICkge1xuICAgICAgLy8gU29tZXRoaW5nIGhhcyBnb25lIHdyb25nLiBgY2FsYygpYCBpcyBpbiB1c2UgYW5kIHVuc3VwcG9ydGVkLCBtb3N0IGxpa2VseS4gRGVmYXVsdCB0byBgMTAwdndgIChgMTAwJWAsIGZvciBicm9hZGVyIHN1cHBvcnQuKTpcbiAgICAgIHBmLmxlbmd0aEVsLnN0eWxlLndpZHRoID0gZG9jLmRvY3VtZW50RWxlbWVudC5vZmZzZXRXaWR0aCArIFwicHhcIjtcbiAgICB9XG5cbiAgICB2YXIgb2Zmc2V0V2lkdGggPSBwZi5sZW5ndGhFbC5vZmZzZXRXaWR0aDtcblxuICAgIGRvYy5ib2R5LnJlbW92ZUNoaWxkKCBwZi5sZW5ndGhFbCApO1xuXG4gICAgcmV0dXJuIG9mZnNldFdpZHRoO1xuICB9O1xuXG4gIC8vIGNvbnRhaW5lciBvZiBzdXBwb3J0ZWQgbWltZSB0eXBlcyB0aGF0IG9uZSBtaWdodCBuZWVkIHRvIHF1YWxpZnkgYmVmb3JlIHVzaW5nXG4gIHBmLnR5cGVzID0gIHt9O1xuXG4gIC8vIEFkZCBzdXBwb3J0IGZvciBzdGFuZGFyZCBtaW1lIHR5cGVzXG4gIHBmLnR5cGVzWyBcImltYWdlL2pwZWdcIiBdID0gdHJ1ZTtcbiAgcGYudHlwZXNbIFwiaW1hZ2UvZ2lmXCIgXSA9IHRydWU7XG4gIHBmLnR5cGVzWyBcImltYWdlL3BuZ1wiIF0gPSB0cnVlO1xuXG4gIC8vIHRlc3Qgc3ZnIHN1cHBvcnRcbiAgcGYudHlwZXNbIFwiaW1hZ2Uvc3ZnK3htbFwiIF0gPSBkb2MuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZShcImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjSW1hZ2VcIiwgXCIxLjFcIik7XG5cbiAgLy8gdGVzdCB3ZWJwIHN1cHBvcnQsIG9ubHkgd2hlbiB0aGUgbWFya3VwIGNhbGxzIGZvciBpdFxuICBwZi50eXBlc1sgXCJpbWFnZS93ZWJwXCIgXSA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIGJhc2VkIG9uIE1vZGVybml6cidzIGxvc3NsZXNzIGltZy13ZWJwIHRlc3RcbiAgICAvLyBub3RlOiBhc3luY2hyb25vdXNcbiAgICB2YXIgdHlwZSA9IFwiaW1hZ2Uvd2VicFwiO1xuXG4gICAgaW1hZ2Uub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcGYudHlwZXNbIHR5cGUgXSA9IGZhbHNlO1xuICAgICAgcGljdHVyZWZpbGwoKTtcbiAgICB9O1xuICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcGYudHlwZXNbIHR5cGUgXSA9IGltYWdlLndpZHRoID09PSAxO1xuICAgICAgcGljdHVyZWZpbGwoKTtcbiAgICB9O1xuICAgIGltYWdlLnNyYyA9IFwiZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCxVa2xHUmg0QUFBQlhSVUpRVmxBNFRCRUFBQUF2QUFBQUFBZlEvLzczdi8rQmlPaC9BQUE9XCI7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRha2VzIGEgc291cmNlIGVsZW1lbnQgYW5kIGNoZWNrcyBpZiBpdHMgdHlwZSBhdHRyaWJ1dGUgaXMgcHJlc2VudCBhbmQgaWYgc28sIHN1cHBvcnRlZFxuICAgKiBOb3RlOiBmb3IgdHlwZSB0ZXN0cyB0aGF0IHJlcXVpcmUgYSBhc3luYyBsb2dpYyxcbiAgICogeW91IGNhbiBkZWZpbmUgdGhlbSBhcyBhIGZ1bmN0aW9uIHRoYXQnbGwgcnVuIG9ubHkgaWYgdGhhdCB0eXBlIG5lZWRzIHRvIGJlIHRlc3RlZC4gSnVzdCBtYWtlIHRoZSB0ZXN0IGZ1bmN0aW9uIGNhbGwgcGljdHVyZWZpbGwgYWdhaW4gd2hlbiBpdCBpcyBjb21wbGV0ZS5cbiAgICogc2VlIHRoZSBhc3luYyB3ZWJwIHRlc3QgYWJvdmUgZm9yIGV4YW1wbGVcbiAgICovXG4gIHBmLnZlcmlmeVR5cGVTdXBwb3J0ID0gZnVuY3Rpb24oIHNvdXJjZSApIHtcbiAgICB2YXIgdHlwZSA9IHNvdXJjZS5nZXRBdHRyaWJ1dGUoIFwidHlwZVwiICk7XG4gICAgLy8gaWYgdHlwZSBhdHRyaWJ1dGUgZXhpc3RzLCByZXR1cm4gdGVzdCByZXN1bHQsIG90aGVyd2lzZSByZXR1cm4gdHJ1ZVxuICAgIGlmICggdHlwZSA9PT0gbnVsbCB8fCB0eXBlID09PSBcIlwiICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGlmIHRoZSB0eXBlIHRlc3QgaXMgYSBmdW5jdGlvbiwgcnVuIGl0IGFuZCByZXR1cm4gXCJwZW5kaW5nXCIgc3RhdHVzLiBUaGUgZnVuY3Rpb24gd2lsbCByZXJ1biBwaWN0dXJlZmlsbCBvbiBwZW5kaW5nIGVsZW1lbnRzIG9uY2UgZmluaXNoZWQuXG4gICAgICBpZiAoIHR5cGVvZiggcGYudHlwZXNbIHR5cGUgXSApID09PSBcImZ1bmN0aW9uXCIgKSB7XG4gICAgICAgIHBmLnR5cGVzWyB0eXBlIF0oKTtcbiAgICAgICAgcmV0dXJuIFwicGVuZGluZ1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBmLnR5cGVzWyB0eXBlIF07XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFBhcnNlcyBhbiBpbmRpdmlkdWFsIGBzaXplYCBhbmQgcmV0dXJucyB0aGUgbGVuZ3RoLCBhbmQgb3B0aW9uYWwgbWVkaWEgcXVlcnlcbiAgcGYucGFyc2VTaXplID0gZnVuY3Rpb24oIHNvdXJjZVNpemVTdHIgKSB7XG4gICAgdmFyIG1hdGNoID0gLyhcXChbXildK1xcKSk/XFxzKiguKykvZy5leGVjKCBzb3VyY2VTaXplU3RyICk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1lZGlhOiBtYXRjaCAmJiBtYXRjaFsxXSxcbiAgICAgIGxlbmd0aDogbWF0Y2ggJiYgbWF0Y2hbMl1cbiAgICB9O1xuICB9O1xuXG4gIC8vIFRha2VzIGEgc3RyaW5nIG9mIHNpemVzIGFuZCByZXR1cm5zIHRoZSB3aWR0aCBpbiBwaXhlbHMgYXMgYSBudW1iZXJcbiAgcGYuZmluZFdpZHRoRnJvbVNvdXJjZVNpemUgPSBmdW5jdGlvbiggc291cmNlU2l6ZUxpc3RTdHIgKSB7XG4gICAgLy8gU3BsaXQgdXAgc291cmNlIHNpemUgbGlzdCwgaWUgKCBtYXgtd2lkdGg6IDMwZW0gKSAxMDAlLCAoIG1heC13aWR0aDogNTBlbSApIDUwJSwgMzMlXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgKG1pbi13aWR0aDozMGVtKSBjYWxjKDMwJSAtIDE1cHgpXG4gICAgdmFyIHNvdXJjZVNpemVMaXN0ID0gcGYudHJpbSggc291cmNlU2l6ZUxpc3RTdHIgKS5zcGxpdCggL1xccyosXFxzKi8gKSxcbiAgICAgIHdpbm5pbmdMZW5ndGg7XG5cbiAgICBmb3IgKCB2YXIgaSA9IDAsIGxlbiA9IHNvdXJjZVNpemVMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xuICAgICAgLy8gTWF0Y2ggPG1lZGlhLWNvbmRpdGlvbj4/IGxlbmd0aCwgaWUgKCBtaW4td2lkdGg6IDUwZW0gKSAxMDAlXG4gICAgICB2YXIgc291cmNlU2l6ZSA9IHNvdXJjZVNpemVMaXN0WyBpIF0sXG4gICAgICAgIC8vIFNwbGl0IFwiKCBtaW4td2lkdGg6IDUwZW0gKSAxMDAlXCIgaW50byBzZXBhcmF0ZSBzdHJpbmdzXG4gICAgICAgIHBhcnNlZFNpemUgPSBwZi5wYXJzZVNpemUoIHNvdXJjZVNpemUgKSxcbiAgICAgICAgbGVuZ3RoID0gcGFyc2VkU2l6ZS5sZW5ndGgsXG4gICAgICAgIG1lZGlhID0gcGFyc2VkU2l6ZS5tZWRpYTtcblxuICAgICAgaWYgKCAhbGVuZ3RoICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICggIW1lZGlhIHx8IHBmLm1hdGNoZXNNZWRpYSggbWVkaWEgKSApIHtcbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gbWVkaWEgcXVlcnkgb3IgaXQgbWF0Y2hlcywgY2hvb3NlIHRoaXMgYXMgb3VyIHdpbm5pbmcgbGVuZ3RoXG4gICAgICAgIC8vIGFuZCBlbmQgYWxnb3JpdGhtXG4gICAgICAgIHdpbm5pbmdMZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHBhc3MgdGhlIGxlbmd0aCB0byBhIG1ldGhvZCB0aGF0IGNhbiBwcm9wZXJseSBkZXRlcm1pbmUgbGVuZ3RoXG4gICAgLy8gaW4gcGl4ZWxzIGJhc2VkIG9uIHRoZXNlIGZvcm1hdHM6IGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzcy12YWx1ZXMtMy8jbGVuZ3RoLXZhbHVlXG4gICAgcmV0dXJuIHBmLmdldFdpZHRoRnJvbUxlbmd0aCggd2lubmluZ0xlbmd0aCApO1xuICB9O1xuXG4gIHBmLnBhcnNlU3Jjc2V0ID0gZnVuY3Rpb24oIHNyY3NldCApIHtcbiAgICAvKipcbiAgICAgKiBBIGxvdCBvZiB0aGlzIHdhcyBwdWxsZWQgZnJvbSBCb3JpcyBTbXVz4oCZIHBhcnNlciBmb3IgdGhlIG5vdy1kZWZ1bmN0IFdIQVRXRyBgc3Jjc2V0YFxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ib3Jpc211cy9zcmNzZXQtcG9seWZpbGwvYmxvYi9tYXN0ZXIvanMvc3Jjc2V0LWluZm8uanNcbiAgICAgKlxuICAgICAqIDEuIExldCBpbnB1dCAoYHNyY3NldGApIGJlIHRoZSB2YWx1ZSBwYXNzZWQgdG8gdGhpcyBhbGdvcml0aG0uXG4gICAgICogMi4gTGV0IHBvc2l0aW9uIGJlIGEgcG9pbnRlciBpbnRvIGlucHV0LCBpbml0aWFsbHkgcG9pbnRpbmcgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzdHJpbmcuXG4gICAgICogMy4gTGV0IHJhdyBjYW5kaWRhdGVzIGJlIGFuIGluaXRpYWxseSBlbXB0eSBvcmRlcmVkIGxpc3Qgb2YgVVJMcyB3aXRoIGFzc29jaWF0ZWRcbiAgICAgKiAgICB1bnBhcnNlZCBkZXNjcmlwdG9ycy4gVGhlIG9yZGVyIG9mIGVudHJpZXMgaW4gdGhlIGxpc3QgaXMgdGhlIG9yZGVyIGluIHdoaWNoIGVudHJpZXNcbiAgICAgKiAgICBhcmUgYWRkZWQgdG8gdGhlIGxpc3QuXG4gICAgICovXG4gICAgdmFyIGNhbmRpZGF0ZXMgPSBbXTtcblxuICAgIHdoaWxlICggc3Jjc2V0ICE9PSBcIlwiICkge1xuICAgICAgc3Jjc2V0ID0gc3Jjc2V0LnJlcGxhY2UoIC9eXFxzKy9nLCBcIlwiICk7XG5cbiAgICAgIC8vIDUuIENvbGxlY3QgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIHRoYXQgYXJlIG5vdCBzcGFjZSBjaGFyYWN0ZXJzLCBhbmQgbGV0IHRoYXQgYmUgdXJsLlxuICAgICAgdmFyIHBvcyA9IHNyY3NldC5zZWFyY2goL1xccy9nKSxcbiAgICAgICAgdXJsLCBkZXNjcmlwdG9yID0gbnVsbDtcblxuICAgICAgaWYgKCBwb3MgIT09IC0xICkge1xuICAgICAgICB1cmwgPSBzcmNzZXQuc2xpY2UoIDAsIHBvcyApO1xuXG4gICAgICAgIHZhciBsYXN0ID0gdXJsLnNsaWNlKC0xKTtcblxuICAgICAgICAvLyA2LiBJZiB1cmwgZW5kcyB3aXRoIGEgVSswMDJDIENPTU1BIGNoYXJhY3RlciAoLCksIHJlbW92ZSB0aGF0IGNoYXJhY3RlciBmcm9tIHVybFxuICAgICAgICAvLyBhbmQgbGV0IGRlc2NyaXB0b3JzIGJlIHRoZSBlbXB0eSBzdHJpbmcuIE90aGVyd2lzZSwgZm9sbG93IHRoZXNlIHN1YnN0ZXBzXG4gICAgICAgIC8vIDYuMS4gSWYgdXJsIGlzIGVtcHR5LCB0aGVuIGp1bXAgdG8gdGhlIHN0ZXAgbGFiZWxlZCBkZXNjcmlwdG9yIHBhcnNlci5cblxuICAgICAgICBpZiAoIGxhc3QgPT09IFwiLFwiIHx8IHVybCA9PT0gXCJcIiApIHtcbiAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSggLywrJC8sIFwiXCIgKTtcbiAgICAgICAgICBkZXNjcmlwdG9yID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBzcmNzZXQgPSBzcmNzZXQuc2xpY2UoIHBvcyArIDEgKTtcblxuICAgICAgICAvLyA2LjIuIENvbGxlY3QgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIHRoYXQgYXJlIG5vdCBVKzAwMkMgQ09NTUEgY2hhcmFjdGVycyAoLCksIGFuZFxuICAgICAgICAvLyBsZXQgdGhhdCBiZSBkZXNjcmlwdG9ycy5cbiAgICAgICAgaWYgKCBkZXNjcmlwdG9yID09PSBudWxsICkge1xuICAgICAgICAgIHZhciBkZXNjcG9zID0gc3Jjc2V0LmluZGV4T2YoIFwiLFwiICk7XG4gICAgICAgICAgaWYgKCBkZXNjcG9zICE9PSAtMSApIHtcbiAgICAgICAgICAgIGRlc2NyaXB0b3IgPSBzcmNzZXQuc2xpY2UoIDAsIGRlc2Nwb3MgKTtcbiAgICAgICAgICAgIHNyY3NldCA9IHNyY3NldC5zbGljZSggZGVzY3BvcyArIDEgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVzY3JpcHRvciA9IHNyY3NldDtcbiAgICAgICAgICAgIHNyY3NldCA9IFwiXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cmwgPSBzcmNzZXQ7XG4gICAgICAgIHNyY3NldCA9IFwiXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIDcuIEFkZCB1cmwgdG8gcmF3IGNhbmRpZGF0ZXMsIGFzc29jaWF0ZWQgd2l0aCBkZXNjcmlwdG9ycy5cbiAgICAgIGlmICggdXJsIHx8IGRlc2NyaXB0b3IgKSB7XG4gICAgICAgIGNhbmRpZGF0ZXMucHVzaCh7XG4gICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgZGVzY3JpcHRvcjogZGVzY3JpcHRvclxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhbmRpZGF0ZXM7XG4gIH07XG5cbiAgcGYucGFyc2VEZXNjcmlwdG9yID0gZnVuY3Rpb24oIGRlc2NyaXB0b3IsIHNpemVzYXR0ciApIHtcbiAgICAvLyAxMS4gRGVzY3JpcHRvciBwYXJzZXI6IExldCBjYW5kaWRhdGVzIGJlIGFuIGluaXRpYWxseSBlbXB0eSBzb3VyY2Ugc2V0LiBUaGUgb3JkZXIgb2YgZW50cmllcyBpbiB0aGUgbGlzdFxuICAgIC8vIGlzIHRoZSBvcmRlciBpbiB3aGljaCBlbnRyaWVzIGFyZSBhZGRlZCB0byB0aGUgbGlzdC5cbiAgICB2YXIgc2l6ZXMgPSBzaXplc2F0dHIgfHwgXCIxMDB2d1wiLFxuICAgICAgc2l6ZURlc2NyaXB0b3IgPSBkZXNjcmlwdG9yICYmIGRlc2NyaXB0b3IucmVwbGFjZSggLyheXFxzK3xcXHMrJCkvZywgXCJcIiApLFxuICAgICAgd2lkdGhJbkNzc1BpeGVscyA9IHBmLmZpbmRXaWR0aEZyb21Tb3VyY2VTaXplKCBzaXplcyApLFxuICAgICAgcmVzQ2FuZGlkYXRlO1xuXG4gICAgICBpZiAoIHNpemVEZXNjcmlwdG9yICkge1xuICAgICAgICB2YXIgc3BsaXREZXNjcmlwdG9yID0gc2l6ZURlc2NyaXB0b3Iuc3BsaXQoXCIgXCIpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBzcGxpdERlc2NyaXB0b3IubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICB2YXIgY3VyciA9IHNwbGl0RGVzY3JpcHRvclsgaSBdLFxuICAgICAgICAgICAgbGFzdGNoYXIgPSBjdXJyICYmIGN1cnIuc2xpY2UoIGN1cnIubGVuZ3RoIC0gMSApO1xuXG4gICAgICAgICAgaWYgKCAoIGxhc3RjaGFyID09PSBcImhcIiB8fCBsYXN0Y2hhciA9PT0gXCJ3XCIgKSAmJiAhcGYuc2l6ZXNTdXBwb3J0ZWQgKSB7XG4gICAgICAgICAgICByZXNDYW5kaWRhdGUgPSBwYXJzZUZsb2F0KCAoIHBhcnNlSW50KCBjdXJyLCAxMCApIC8gd2lkdGhJbkNzc1BpeGVscyApICk7XG4gICAgICAgICAgfSBlbHNlIGlmICggbGFzdGNoYXIgPT09IFwieFwiICkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IGN1cnIgJiYgcGFyc2VGbG9hdCggY3VyciwgMTAgKTtcbiAgICAgICAgICAgIHJlc0NhbmRpZGF0ZSA9IHJlcyAmJiAhaXNOYU4oIHJlcyApID8gcmVzIDogMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICByZXR1cm4gcmVzQ2FuZGlkYXRlIHx8IDE7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRha2VzIGEgc3Jjc2V0IGluIHRoZSBmb3JtIG9mIHVybC9cbiAgICogZXguIFwiaW1hZ2VzL3BpYy1tZWRpdW0ucG5nIDF4LCBpbWFnZXMvcGljLW1lZGl1bS0yeC5wbmcgMnhcIiBvclxuICAgKiAgICAgXCJpbWFnZXMvcGljLW1lZGl1bS5wbmcgNDAwdywgaW1hZ2VzL3BpYy1tZWRpdW0tMngucG5nIDgwMHdcIiBvclxuICAgKiAgICAgXCJpbWFnZXMvcGljLXNtYWxsLnBuZ1wiXG4gICAqIEdldCBhbiBhcnJheSBvZiBpbWFnZSBjYW5kaWRhdGVzIGluIHRoZSBmb3JtIG9mXG4gICAqICAgICAge3VybDogXCIvZm9vL2Jhci5wbmdcIiwgcmVzb2x1dGlvbjogMX1cbiAgICogd2hlcmUgcmVzb2x1dGlvbiBpcyBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MtdmFsdWVzLTMvI3Jlc29sdXRpb24tdmFsdWVcbiAgICogSWYgc2l6ZXMgaXMgc3BlY2lmaWVkLCByZXNvbHV0aW9uIGlzIGNhbGN1bGF0ZWRcbiAgICovXG4gIHBmLmdldENhbmRpZGF0ZXNGcm9tU291cmNlU2V0ID0gZnVuY3Rpb24oIHNyY3NldCwgc2l6ZXMgKSB7XG4gICAgdmFyIGNhbmRpZGF0ZXMgPSBwZi5wYXJzZVNyY3NldCggc3Jjc2V0ICksXG4gICAgICBmb3JtYXR0ZWRDYW5kaWRhdGVzID0gW107XG5cbiAgICBmb3IgKCB2YXIgaSA9IDAsIGxlbiA9IGNhbmRpZGF0ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgICB2YXIgY2FuZGlkYXRlID0gY2FuZGlkYXRlc1sgaSBdO1xuXG4gICAgICBmb3JtYXR0ZWRDYW5kaWRhdGVzLnB1c2goe1xuICAgICAgICB1cmw6IGNhbmRpZGF0ZS51cmwsXG4gICAgICAgIHJlc29sdXRpb246IHBmLnBhcnNlRGVzY3JpcHRvciggY2FuZGlkYXRlLmRlc2NyaXB0b3IsIHNpemVzIClcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0dGVkQ2FuZGlkYXRlcztcbiAgfTtcblxuICAvKipcbiAgICogaWYgaXQncyBhbiBpbWcgZWxlbWVudCBhbmQgaXQgaGFzIGEgc3Jjc2V0IHByb3BlcnR5LFxuICAgKiB3ZSBuZWVkIHRvIHJlbW92ZSB0aGUgYXR0cmlidXRlIHNvIHdlIGNhbiBtYW5pcHVsYXRlIHNyY1xuICAgKiAodGhlIHByb3BlcnR5J3MgZXhpc3RlbmNlIGluZmVycyBuYXRpdmUgc3Jjc2V0IHN1cHBvcnQsIGFuZCBhIHNyY3NldC1zdXBwb3J0aW5nIGJyb3dzZXIgd2lsbCBwcmlvcml0aXplIHNyY3NldCdzIHZhbHVlIG92ZXIgb3VyIHdpbm5pbmcgcGljdHVyZSBjYW5kaWRhdGUpXG4gICAqIHRoaXMgbW92ZXMgc3Jjc2V0J3MgdmFsdWUgdG8gbWVtb3J5IGZvciBsYXRlciB1c2UgYW5kIHJlbW92ZXMgdGhlIGF0dHJcbiAgICovXG4gIHBmLmRvZGdlU3Jjc2V0ID0gZnVuY3Rpb24oIGltZyApIHtcbiAgICBpZiAoIGltZy5zcmNzZXQgKSB7XG4gICAgICBpbWdbIHBmLm5zIF0uc3Jjc2V0ID0gaW1nLnNyY3NldDtcbiAgICAgIGltZy5yZW1vdmVBdHRyaWJ1dGUoIFwic3Jjc2V0XCIgKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQWNjZXB0IGEgc291cmNlIG9yIGltZyBlbGVtZW50IGFuZCBwcm9jZXNzIGl0cyBzcmNzZXQgYW5kIHNpemVzIGF0dHJzXG4gIHBmLnByb2Nlc3NTb3VyY2VTZXQgPSBmdW5jdGlvbiggZWwgKSB7XG4gICAgdmFyIHNyY3NldCA9IGVsLmdldEF0dHJpYnV0ZSggXCJzcmNzZXRcIiApLFxuICAgICAgc2l6ZXMgPSBlbC5nZXRBdHRyaWJ1dGUoIFwic2l6ZXNcIiApLFxuICAgICAgY2FuZGlkYXRlcyA9IFtdO1xuXG4gICAgLy8gaWYgaXQncyBhbiBpbWcgZWxlbWVudCwgdXNlIHRoZSBjYWNoZWQgc3Jjc2V0IHByb3BlcnR5IChkZWZpbmVkIG9yIG5vdClcbiAgICBpZiAoIGVsLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiSU1HXCIgJiYgZWxbIHBmLm5zIF0gJiYgZWxbIHBmLm5zIF0uc3Jjc2V0ICkge1xuICAgICAgc3Jjc2V0ID0gZWxbIHBmLm5zIF0uc3Jjc2V0O1xuICAgIH1cblxuICAgIGlmICggc3Jjc2V0ICkge1xuICAgICAgY2FuZGlkYXRlcyA9IHBmLmdldENhbmRpZGF0ZXNGcm9tU291cmNlU2V0KCBzcmNzZXQsIHNpemVzICk7XG4gICAgfVxuICAgIHJldHVybiBjYW5kaWRhdGVzO1xuICB9O1xuXG4gIHBmLmFwcGx5QmVzdENhbmRpZGF0ZSA9IGZ1bmN0aW9uKCBjYW5kaWRhdGVzLCBwaWNJbWcgKSB7XG4gICAgdmFyIGNhbmRpZGF0ZSxcbiAgICAgIGxlbmd0aCxcbiAgICAgIGJlc3RDYW5kaWRhdGU7XG5cbiAgICBjYW5kaWRhdGVzLnNvcnQoIHBmLmFzY2VuZGluZ1NvcnQgKTtcblxuICAgIGxlbmd0aCA9IGNhbmRpZGF0ZXMubGVuZ3RoO1xuICAgIGJlc3RDYW5kaWRhdGUgPSBjYW5kaWRhdGVzWyBsZW5ndGggLSAxIF07XG5cbiAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyApIHtcbiAgICAgIGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbIGkgXTtcbiAgICAgIGlmICggY2FuZGlkYXRlLnJlc29sdXRpb24gPj0gcGYuZ2V0RHByKCkgKSB7XG4gICAgICAgIGJlc3RDYW5kaWRhdGUgPSBjYW5kaWRhdGU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICggYmVzdENhbmRpZGF0ZSAmJiAhcGYuZW5kc1dpdGgoIHBpY0ltZy5zcmMsIGJlc3RDYW5kaWRhdGUudXJsICkgKSB7XG4gICAgICBpZiAoIHBmLnJlc3RyaWN0c01peGVkQ29udGVudCgpICYmIGJlc3RDYW5kaWRhdGUudXJsLnN1YnN0cigwLCBcImh0dHA6XCIubGVuZ3RoKS50b0xvd2VyQ2FzZSgpID09PSBcImh0dHA6XCIgKSB7XG4gICAgICAgIGlmICggdHlwZW9mIGNvbnNvbGUgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oIFwiQmxvY2tlZCBtaXhlZCBjb250ZW50IGltYWdlIFwiICsgYmVzdENhbmRpZGF0ZS51cmwgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGljSW1nLnNyYyA9IGJlc3RDYW5kaWRhdGUudXJsO1xuICAgICAgICAvLyBjdXJyZW50U3JjIGF0dHJpYnV0ZSBhbmQgcHJvcGVydHkgdG8gbWF0Y2hcbiAgICAgICAgLy8gaHR0cDovL3BpY3R1cmUucmVzcG9uc2l2ZWltYWdlcy5vcmcvI3RoZS1pbWctZWxlbWVudFxuICAgICAgICBwaWNJbWcuY3VycmVudFNyYyA9IHBpY0ltZy5zcmM7XG5cbiAgICAgICAgdmFyIHN0eWxlID0gcGljSW1nLnN0eWxlIHx8IHt9LFxuICAgICAgICAgIFdlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSA9IFwid2Via2l0QmFja2ZhY2VWaXNpYmlsaXR5XCIgaW4gc3R5bGUsXG4gICAgICAgICAgY3VycmVudFpvb20gPSBzdHlsZS56b29tO1xuXG4gICAgICAgIGlmIChXZWJraXRCYWNrZmFjZVZpc2liaWxpdHkpIHsgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRqZWhsL3BpY3R1cmVmaWxsL2lzc3Vlcy8zMzJcbiAgICAgICAgICBzdHlsZS56b29tID0gXCIuOTk5XCI7XG5cbiAgICAgICAgICBXZWJraXRCYWNrZmFjZVZpc2liaWxpdHkgPSBwaWNJbWcub2Zmc2V0V2lkdGg7XG5cbiAgICAgICAgICBzdHlsZS56b29tID0gY3VycmVudFpvb207XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcGYuYXNjZW5kaW5nU29ydCA9IGZ1bmN0aW9uKCBhLCBiICkge1xuICAgIHJldHVybiBhLnJlc29sdXRpb24gLSBiLnJlc29sdXRpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIEluIElFOSwgPHNvdXJjZT4gZWxlbWVudHMgZ2V0IHJlbW92ZWQgaWYgdGhleSBhcmVuJ3QgY2hpbGRyZW4gb2ZcbiAgICogdmlkZW8gZWxlbWVudHMuIFRodXMsIHdlIGNvbmRpdGlvbmFsbHkgd3JhcCBzb3VyY2UgZWxlbWVudHNcbiAgICogdXNpbmcgPCEtLVtpZiBJRSA5XT48dmlkZW8gc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjwhW2VuZGlmXS0tPlxuICAgKiBhbmQgbXVzdCBhY2NvdW50IGZvciB0aGF0IGhlcmUgYnkgbW92aW5nIHRob3NlIHNvdXJjZSBlbGVtZW50c1xuICAgKiBiYWNrIGludG8gdGhlIHBpY3R1cmUgZWxlbWVudC5cbiAgICovXG4gIHBmLnJlbW92ZVZpZGVvU2hpbSA9IGZ1bmN0aW9uKCBwaWN0dXJlICkge1xuICAgIHZhciB2aWRlb3MgPSBwaWN0dXJlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInZpZGVvXCIgKTtcbiAgICBpZiAoIHZpZGVvcy5sZW5ndGggKSB7XG4gICAgICB2YXIgdmlkZW8gPSB2aWRlb3NbIDAgXSxcbiAgICAgICAgdnNvdXJjZXMgPSB2aWRlby5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJzb3VyY2VcIiApO1xuICAgICAgd2hpbGUgKCB2c291cmNlcy5sZW5ndGggKSB7XG4gICAgICAgIHBpY3R1cmUuaW5zZXJ0QmVmb3JlKCB2c291cmNlc1sgMCBdLCB2aWRlbyApO1xuICAgICAgfVxuICAgICAgLy8gUmVtb3ZlIHRoZSB2aWRlbyBlbGVtZW50IG9uY2Ugd2UncmUgZmluaXNoZWQgcmVtb3ZpbmcgaXRzIGNoaWxkcmVuXG4gICAgICB2aWRlby5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCB2aWRlbyApO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRmluZCBhbGwgYGltZ2AgZWxlbWVudHMsIGFuZCBhZGQgdGhlbSB0byB0aGUgY2FuZGlkYXRlIGxpc3QgaWYgdGhleSBoYXZlXG4gICAqIGEgYHBpY3R1cmVgIHBhcmVudCwgYSBgc2l6ZXNgIGF0dHJpYnV0ZSBpbiBiYXNpYyBgc3Jjc2V0YCBzdXBwb3J0aW5nIGJyb3dzZXJzLFxuICAgKiBhIGBzcmNzZXRgIGF0dHJpYnV0ZSBhdCBhbGwsIGFuZCB0aGV5IGhhdmVu4oCZdCBiZWVuIGV2YWx1YXRlZCBhbHJlYWR5LlxuICAgKi9cbiAgcGYuZ2V0QWxsRWxlbWVudHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWxlbXMgPSBbXSxcbiAgICAgIGltZ3MgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwiaW1nXCIgKTtcblxuICAgIGZvciAoIHZhciBoID0gMCwgbGVuID0gaW1ncy5sZW5ndGg7IGggPCBsZW47IGgrKyApIHtcbiAgICAgIHZhciBjdXJySW1nID0gaW1nc1sgaCBdO1xuXG4gICAgICBpZiAoIGN1cnJJbWcucGFyZW50Tm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIlBJQ1RVUkVcIiB8fFxuICAgICAgKCBjdXJySW1nLmdldEF0dHJpYnV0ZSggXCJzcmNzZXRcIiApICE9PSBudWxsICkgfHwgY3VyckltZ1sgcGYubnMgXSAmJiBjdXJySW1nWyBwZi5ucyBdLnNyY3NldCAhPT0gbnVsbCApIHtcbiAgICAgICAgZWxlbXMucHVzaCggY3VyckltZyApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZWxlbXM7XG4gIH07XG5cbiAgcGYuZ2V0TWF0Y2ggPSBmdW5jdGlvbiggaW1nLCBwaWN0dXJlICkge1xuICAgIHZhciBzb3VyY2VzID0gcGljdHVyZS5jaGlsZE5vZGVzLFxuICAgICAgbWF0Y2g7XG5cbiAgICAvLyBHbyB0aHJvdWdoIGVhY2ggY2hpbGQsIGFuZCBpZiB0aGV5IGhhdmUgbWVkaWEgcXVlcmllcywgZXZhbHVhdGUgdGhlbVxuICAgIGZvciAoIHZhciBqID0gMCwgc2xlbiA9IHNvdXJjZXMubGVuZ3RoOyBqIDwgc2xlbjsgaisrICkge1xuICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbIGogXTtcblxuICAgICAgLy8gaWdub3JlIG5vbi1lbGVtZW50IG5vZGVzXG4gICAgICBpZiAoIHNvdXJjZS5ub2RlVHlwZSAhPT0gMSApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEhpdHRpbmcgdGhlIGBpbWdgIGVsZW1lbnQgdGhhdCBzdGFydGVkIGV2ZXJ5dGhpbmcgc3RvcHMgdGhlIHNlYXJjaCBmb3IgYHNvdXJjZXNgLlxuICAgICAgLy8gSWYgbm8gcHJldmlvdXMgYHNvdXJjZWAgbWF0Y2hlcywgdGhlIGBpbWdgIGl0c2VsZiBpcyBldmFsdWF0ZWQgbGF0ZXIuXG4gICAgICBpZiAoIHNvdXJjZSA9PT0gaW1nICkge1xuICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICB9XG5cbiAgICAgIC8vIGlnbm9yZSBub24tYHNvdXJjZWAgbm9kZXNcbiAgICAgIGlmICggc291cmNlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgIT09IFwiU09VUkNFXCIgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy8gaWYgaXQncyBhIHNvdXJjZSBlbGVtZW50IHRoYXQgaGFzIHRoZSBgc3JjYCBwcm9wZXJ0eSBzZXQsIHRocm93IGEgd2FybmluZyBpbiB0aGUgY29uc29sZVxuICAgICAgaWYgKCBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcInNyY1wiICkgIT09IG51bGwgJiYgdHlwZW9mIGNvbnNvbGUgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiVGhlIGBzcmNgIGF0dHJpYnV0ZSBpcyBpbnZhbGlkIG9uIGBwaWN0dXJlYCBgc291cmNlYCBlbGVtZW50OyBpbnN0ZWFkLCB1c2UgYHNyY3NldGAuXCIpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbWVkaWEgPSBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcIm1lZGlhXCIgKTtcblxuICAgICAgLy8gaWYgc291cmNlIGRvZXMgbm90IGhhdmUgYSBzcmNzZXQgYXR0cmlidXRlLCBza2lwXG4gICAgICBpZiAoICFzb3VyY2UuZ2V0QXR0cmlidXRlKCBcInNyY3NldFwiICkgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBpZiB0aGVyZSdzIG5vIG1lZGlhIHNwZWNpZmllZCwgT1Igdy5tYXRjaE1lZGlhIGlzIHN1cHBvcnRlZFxuICAgICAgaWYgKCAoICFtZWRpYSB8fCBwZi5tYXRjaGVzTWVkaWEoIG1lZGlhICkgKSApIHtcbiAgICAgICAgdmFyIHR5cGVTdXBwb3J0ZWQgPSBwZi52ZXJpZnlUeXBlU3VwcG9ydCggc291cmNlICk7XG5cbiAgICAgICAgaWYgKCB0eXBlU3VwcG9ydGVkID09PSB0cnVlICkge1xuICAgICAgICAgIG1hdGNoID0gc291cmNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2UgaWYgKCB0eXBlU3VwcG9ydGVkID09PSBcInBlbmRpbmdcIiApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbWF0Y2g7XG4gIH07XG5cbiAgZnVuY3Rpb24gcGljdHVyZWZpbGwoIG9wdCApIHtcbiAgICB2YXIgZWxlbWVudHMsXG4gICAgICBlbGVtZW50LFxuICAgICAgcGFyZW50LFxuICAgICAgZmlyc3RNYXRjaCxcbiAgICAgIGNhbmRpZGF0ZXMsXG4gICAgICBvcHRpb25zID0gb3B0IHx8IHt9O1xuXG4gICAgZWxlbWVudHMgPSBvcHRpb25zLmVsZW1lbnRzIHx8IHBmLmdldEFsbEVsZW1lbnRzKCk7XG5cbiAgICAvLyBMb29wIHRocm91Z2ggYWxsIGVsZW1lbnRzXG4gICAgZm9yICggdmFyIGkgPSAwLCBwbGVuID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgcGxlbjsgaSsrICkge1xuICAgICAgZWxlbWVudCA9IGVsZW1lbnRzWyBpIF07XG4gICAgICBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICBmaXJzdE1hdGNoID0gdW5kZWZpbmVkO1xuICAgICAgY2FuZGlkYXRlcyA9IHVuZGVmaW5lZDtcblxuICAgICAgLy8gaW1tZWRpYXRlbHkgc2tpcCBub24tYGltZ2Agbm9kZXNcbiAgICAgIGlmICggZWxlbWVudC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpICE9PSBcIklNR1wiICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gZXhwYW5kbyBmb3IgY2FjaGluZyBkYXRhIG9uIHRoZSBpbWdcbiAgICAgIGlmICggIWVsZW1lbnRbIHBmLm5zIF0gKSB7XG4gICAgICAgIGVsZW1lbnRbIHBmLm5zIF0gPSB7fTtcbiAgICAgIH1cblxuICAgICAgLy8gaWYgdGhlIGVsZW1lbnQgaGFzIGFscmVhZHkgYmVlbiBldmFsdWF0ZWQsIHNraXAgaXQgdW5sZXNzXG4gICAgICAvLyBgb3B0aW9ucy5yZWV2YWx1YXRlYCBpcyBzZXQgdG8gdHJ1ZSAoIHRoaXMsIGZvciBleGFtcGxlLFxuICAgICAgLy8gaXMgc2V0IHRvIHRydWUgd2hlbiBydW5uaW5nIGBwaWN0dXJlZmlsbGAgb24gYHJlc2l6ZWAgKS5cbiAgICAgIGlmICggIW9wdGlvbnMucmVldmFsdWF0ZSAmJiBlbGVtZW50WyBwZi5ucyBdLmV2YWx1YXRlZCApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIGBpbWdgIGlzIGluIGEgYHBpY3R1cmVgIGVsZW1lbnRcbiAgICAgIGlmICggcGFyZW50Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiUElDVFVSRVwiICkge1xuXG4gICAgICAgIC8vIElFOSB2aWRlbyB3b3JrYXJvdW5kXG4gICAgICAgIHBmLnJlbW92ZVZpZGVvU2hpbSggcGFyZW50ICk7XG5cbiAgICAgICAgLy8gcmV0dXJuIHRoZSBmaXJzdCBtYXRjaCB3aGljaCBtaWdodCB1bmRlZmluZWRcbiAgICAgICAgLy8gcmV0dXJucyBmYWxzZSBpZiB0aGVyZSBpcyBhIHBlbmRpbmcgc291cmNlXG4gICAgICAgIC8vIFRPRE8gdGhlIHJldHVybiB0eXBlIGhlcmUgaXMgYnJ1dGFsLCBjbGVhbnVwXG4gICAgICAgIGZpcnN0TWF0Y2ggPSBwZi5nZXRNYXRjaCggZWxlbWVudCwgcGFyZW50ICk7XG5cbiAgICAgICAgLy8gaWYgYW55IHNvdXJjZXMgYXJlIHBlbmRpbmcgaW4gdGhpcyBwaWN0dXJlIGR1ZSB0byBhc3luYyB0eXBlIHRlc3QocylcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBldmFsdWF0ZWQgYXR0ciBhbmQgc2tpcCBmb3Igbm93ICggdGhlIHBlbmRpbmcgdGVzdCB3aWxsXG4gICAgICAgIC8vIHJlcnVuIHBpY3R1cmVmaWxsIG9uIHRoaXMgZWxlbWVudCB3aGVuIGNvbXBsZXRlKVxuICAgICAgICBpZiAoIGZpcnN0TWF0Y2ggPT09IGZhbHNlICkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaXJzdE1hdGNoID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICAvLyBDYWNoZSBhbmQgcmVtb3ZlIGBzcmNzZXRgIGlmIHByZXNlbnQgYW5kIHdl4oCZcmUgZ29pbmcgdG8gYmUgZG9pbmcgYHBpY3R1cmVgL2BzcmNzZXRgL2BzaXplc2AgcG9seWZpbGxpbmcgdG8gaXQuXG4gICAgICBpZiAoIHBhcmVudC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIlBJQ1RVUkVcIiB8fFxuICAgICAgKCBlbGVtZW50LnNyY3NldCAmJiAhcGYuc3Jjc2V0U3VwcG9ydGVkICkgfHxcbiAgICAgICggIXBmLnNpemVzU3VwcG9ydGVkICYmICggZWxlbWVudC5zcmNzZXQgJiYgZWxlbWVudC5zcmNzZXQuaW5kZXhPZihcIndcIikgPiAtMSApICkgKSB7XG4gICAgICAgIHBmLmRvZGdlU3Jjc2V0KCBlbGVtZW50ICk7XG4gICAgICB9XG5cbiAgICAgIGlmICggZmlyc3RNYXRjaCApIHtcbiAgICAgICAgY2FuZGlkYXRlcyA9IHBmLnByb2Nlc3NTb3VyY2VTZXQoIGZpcnN0TWF0Y2ggKTtcbiAgICAgICAgcGYuYXBwbHlCZXN0Q2FuZGlkYXRlKCBjYW5kaWRhdGVzLCBlbGVtZW50ICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBObyBzb3VyY2VzIG1hdGNoZWQsIHNvIHdl4oCZcmUgZG93biB0byBwcm9jZXNzaW5nIHRoZSBpbm5lciBgaW1nYCBhcyBhIHNvdXJjZS5cbiAgICAgICAgY2FuZGlkYXRlcyA9IHBmLnByb2Nlc3NTb3VyY2VTZXQoIGVsZW1lbnQgKTtcblxuICAgICAgICBpZiAoIGVsZW1lbnQuc3Jjc2V0ID09PSB1bmRlZmluZWQgfHwgZWxlbWVudFsgcGYubnMgXS5zcmNzZXQgKSB7XG4gICAgICAgICAgLy8gRWl0aGVyIGBzcmNzZXRgIGlzIGNvbXBsZXRlbHkgdW5zdXBwb3J0ZWQsIG9yIHdlIG5lZWQgdG8gcG9seWZpbGwgYHNpemVzYCBmdW5jdGlvbmFsaXR5LlxuICAgICAgICAgIHBmLmFwcGx5QmVzdENhbmRpZGF0ZSggY2FuZGlkYXRlcywgZWxlbWVudCApO1xuICAgICAgICB9IC8vIEVsc2UsIHJlc29sdXRpb24tb25seSBgc3Jjc2V0YCBpcyBzdXBwb3J0ZWQgbmF0aXZlbHkuXG4gICAgICB9XG5cbiAgICAgIC8vIHNldCBldmFsdWF0ZWQgdG8gdHJ1ZSB0byBhdm9pZCB1bm5lY2Vzc2FyeSByZXBhcnNpbmdcbiAgICAgIGVsZW1lbnRbIHBmLm5zIF0uZXZhbHVhdGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCBwaWN0dXJlIHBvbHlmaWxsIGJ5IHBvbGxpbmcgdGhlIGRvY3VtZW50IGFuZCBydW5uaW5nXG4gICAqIHRoZSBwb2x5ZmlsbCBldmVyeSAyNTBtcyB1bnRpbCB0aGUgZG9jdW1lbnQgaXMgcmVhZHkuXG4gICAqIEFsc28gYXR0YWNoZXMgcGljdHVyZWZpbGwgb24gcmVzaXplXG4gICAqL1xuICBmdW5jdGlvbiBydW5QaWN0dXJlZmlsbCgpIHtcbiAgICBwaWN0dXJlZmlsbCgpO1xuICAgIHZhciBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gV2hlbiB0aGUgZG9jdW1lbnQgaGFzIGZpbmlzaGVkIGxvYWRpbmcsIHN0b3AgY2hlY2tpbmcgZm9yIG5ldyBpbWFnZXNcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kZWQvZG9tcmVhZHkvYmxvYi9tYXN0ZXIvcmVhZHkuanMjTDE1XG4gICAgICBwaWN0dXJlZmlsbCgpO1xuICAgICAgaWYgKCAvXmxvYWRlZHxeaXxeYy8udGVzdCggZG9jLnJlYWR5U3RhdGUgKSApIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCggaW50ZXJ2YWxJZCApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSwgMjUwICk7XG5cbiAgICBmdW5jdGlvbiBjaGVja1Jlc2l6ZSgpIHtcbiAgICAgIHZhciByZXNpemVUaHJvdHRsZTtcblxuICAgICAgaWYgKCAhdy5fcGljdHVyZWZpbGxXb3JraW5nICkge1xuICAgICAgICB3Ll9waWN0dXJlZmlsbFdvcmtpbmcgPSB0cnVlO1xuICAgICAgICB3LmNsZWFyVGltZW91dCggcmVzaXplVGhyb3R0bGUgKTtcbiAgICAgICAgcmVzaXplVGhyb3R0bGUgPSB3LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHBpY3R1cmVmaWxsKHsgcmVldmFsdWF0ZTogdHJ1ZSB9KTtcbiAgICAgICAgICB3Ll9waWN0dXJlZmlsbFdvcmtpbmcgPSBmYWxzZTtcbiAgICAgICAgfSwgNjAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIHcuYWRkRXZlbnRMaXN0ZW5lciApIHtcbiAgICAgIHcuYWRkRXZlbnRMaXN0ZW5lciggXCJyZXNpemVcIiwgY2hlY2tSZXNpemUsIGZhbHNlICk7XG4gICAgfSBlbHNlIGlmICggdy5hdHRhY2hFdmVudCApIHtcbiAgICAgIHcuYXR0YWNoRXZlbnQoIFwib25yZXNpemVcIiwgY2hlY2tSZXNpemUgKTtcbiAgICB9XG4gIH1cblxuICBydW5QaWN0dXJlZmlsbCgpO1xuXG4gIC8qIGV4cG9zZSBtZXRob2RzIGZvciB0ZXN0aW5nICovXG4gIHBpY3R1cmVmaWxsLl8gPSBwZjtcblxuICAvKiBleHBvc2UgcGljdHVyZWZpbGwgKi9cbiAgaWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIiApIHtcbiAgICAvLyBDb21tb25KUywganVzdCBleHBvcnRcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHBpY3R1cmVmaWxsO1xuICB9IGVsc2UgaWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcbiAgICAvLyBBTUQgc3VwcG9ydFxuICAgIGRlZmluZSggZnVuY3Rpb24oKSB7IHJldHVybiBwaWN0dXJlZmlsbDsgfSApO1xuICB9IGVsc2UgaWYgKCB0eXBlb2YgdyA9PT0gXCJvYmplY3RcIiApIHtcbiAgICAvLyBJZiBubyBBTUQgYW5kIHdlIGFyZSBpbiB0aGUgYnJvd3NlciwgYXR0YWNoIHRvIHdpbmRvd1xuICAgIHcucGljdHVyZWZpbGwgPSBwaWN0dXJlZmlsbDtcbiAgfVxuXG59ICkoIHRoaXMsIHRoaXMuZG9jdW1lbnQsIG5ldyB0aGlzLkltYWdlKCkgKTtcbiIsIi8qIVxuICogdmVyZ2UgMS45LjErMjAxNDAyMTMwODAzXG4gKiBodHRwczovL2dpdGh1Yi5jb20vcnlhbnZlL3ZlcmdlXG4gKiBNSVQgTGljZW5zZSAyMDEzIFJ5YW4gVmFuIEV0dGVuXG4gKi9cblxuKGZ1bmN0aW9uKHJvb3QsIG5hbWUsIG1ha2UpIHtcbiAgaWYgKHR5cGVvZiBtb2R1bGUgIT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlWydleHBvcnRzJ10pIG1vZHVsZVsnZXhwb3J0cyddID0gbWFrZSgpO1xuICBlbHNlIHJvb3RbbmFtZV0gPSBtYWtlKCk7XG59KHRoaXMsICd2ZXJnZScsIGZ1bmN0aW9uKCkge1xuXG4gIHZhciB4cG9ydHMgPSB7fVxuICAgICwgd2luID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3dcbiAgICAsIGRvYyA9IHR5cGVvZiBkb2N1bWVudCAhPSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudFxuICAgICwgZG9jRWxlbSA9IGRvYyAmJiBkb2MuZG9jdW1lbnRFbGVtZW50XG4gICAgLCBtYXRjaE1lZGlhID0gd2luWydtYXRjaE1lZGlhJ10gfHwgd2luWydtc01hdGNoTWVkaWEnXVxuICAgICwgbXEgPSBtYXRjaE1lZGlhID8gZnVuY3Rpb24ocSkge1xuICAgICAgICByZXR1cm4gISFtYXRjaE1lZGlhLmNhbGwod2luLCBxKS5tYXRjaGVzO1xuICAgICAgfSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgLCB2aWV3cG9ydFcgPSB4cG9ydHNbJ3ZpZXdwb3J0VyddID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhID0gZG9jRWxlbVsnY2xpZW50V2lkdGgnXSwgYiA9IHdpblsnaW5uZXJXaWR0aCddO1xuICAgICAgICByZXR1cm4gYSA8IGIgPyBiIDogYTtcbiAgICAgIH1cbiAgICAsIHZpZXdwb3J0SCA9IHhwb3J0c1sndmlld3BvcnRIJ10gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGEgPSBkb2NFbGVtWydjbGllbnRIZWlnaHQnXSwgYiA9IHdpblsnaW5uZXJIZWlnaHQnXTtcbiAgICAgICAgcmV0dXJuIGEgPCBiID8gYiA6IGE7XG4gICAgICB9O1xuXG4gIC8qKlxuICAgKiBUZXN0IGlmIGEgbWVkaWEgcXVlcnkgaXMgYWN0aXZlLiBMaWtlIE1vZGVybml6ci5tcVxuICAgKiBAc2luY2UgMS42LjBcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHhwb3J0c1snbXEnXSA9IG1xO1xuXG4gIC8qKlxuICAgKiBOb3JtYWxpemVkIG1hdGNoTWVkaWFcbiAgICogQHNpbmNlIDEuNi4wXG4gICAqIEByZXR1cm4ge01lZGlhUXVlcnlMaXN0fE9iamVjdH1cbiAgICovXG4gIHhwb3J0c1snbWF0Y2hNZWRpYSddID0gbWF0Y2hNZWRpYSA/IGZ1bmN0aW9uKCkge1xuICAgIC8vIG1hdGNoTWVkaWEgbXVzdCBiZSBiaW5kZWQgdG8gd2luZG93XG4gICAgcmV0dXJuIG1hdGNoTWVkaWEuYXBwbHkod2luLCBhcmd1bWVudHMpO1xuICB9IDogZnVuY3Rpb24oKSB7XG4gICAgLy8gR3JhY2VmdWxseSBkZWdyYWRlIHRvIHBsYWluIG9iamVjdFxuICAgIHJldHVybiB7fTtcbiAgfTtcblxuICAvKipcbiAgICogQHNpbmNlIDEuOC4wXG4gICAqIEByZXR1cm4ge3t3aWR0aDpudW1iZXIsIGhlaWdodDpudW1iZXJ9fVxuICAgKi9cbiAgZnVuY3Rpb24gdmlld3BvcnQoKSB7XG4gICAgcmV0dXJuIHsnd2lkdGgnOnZpZXdwb3J0VygpLCAnaGVpZ2h0Jzp2aWV3cG9ydEgoKX07XG4gIH1cbiAgeHBvcnRzWyd2aWV3cG9ydCddID0gdmlld3BvcnQ7XG5cbiAgLyoqXG4gICAqIENyb3NzLWJyb3dzZXIgd2luZG93LnNjcm9sbFhcbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIHhwb3J0c1snc2Nyb2xsWCddID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHdpbi5wYWdlWE9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbExlZnQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyb3NzLWJyb3dzZXIgd2luZG93LnNjcm9sbFlcbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIHhwb3J0c1snc2Nyb2xsWSddID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHdpbi5wYWdlWU9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbFRvcDtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHt7dG9wOm51bWJlciwgcmlnaHQ6bnVtYmVyLCBib3R0b206bnVtYmVyLCBsZWZ0Om51bWJlcn19IGNvb3Jkc1xuICAgKiBAcGFyYW0ge251bWJlcj19IGN1c2hpb24gYWRqdXN0bWVudFxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBmdW5jdGlvbiBjYWxpYnJhdGUoY29vcmRzLCBjdXNoaW9uKSB7XG4gICAgdmFyIG8gPSB7fTtcbiAgICBjdXNoaW9uID0gK2N1c2hpb24gfHwgMDtcbiAgICBvWyd3aWR0aCddID0gKG9bJ3JpZ2h0J10gPSBjb29yZHNbJ3JpZ2h0J10gKyBjdXNoaW9uKSAtIChvWydsZWZ0J10gPSBjb29yZHNbJ2xlZnQnXSAtIGN1c2hpb24pO1xuICAgIG9bJ2hlaWdodCddID0gKG9bJ2JvdHRvbSddID0gY29vcmRzWydib3R0b20nXSArIGN1c2hpb24pIC0gKG9bJ3RvcCddID0gY29vcmRzWyd0b3AnXSAtIGN1c2hpb24pO1xuICAgIHJldHVybiBvO1xuICB9XG5cbiAgLyoqXG4gICAqIENyb3NzLWJyb3dzZXIgZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QgcGx1cyBvcHRpb25hbCBjdXNoaW9uLlxuICAgKiBDb29yZHMgYXJlIHJlbGF0aXZlIHRvIHRoZSB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIHZpZXdwb3J0LlxuICAgKiBAc2luY2UgMS4wLjBcbiAgICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWwgZWxlbWVudCBvciBzdGFjayAodXNlcyBmaXJzdCBpdGVtKVxuICAgKiBAcGFyYW0ge251bWJlcj19IGN1c2hpb24gKy8tIHBpeGVsIGFkanVzdG1lbnQgYW1vdW50XG4gICAqIEByZXR1cm4ge09iamVjdHxib29sZWFufVxuICAgKi9cbiAgZnVuY3Rpb24gcmVjdGFuZ2xlKGVsLCBjdXNoaW9uKSB7XG4gICAgZWwgPSBlbCAmJiAhZWwubm9kZVR5cGUgPyBlbFswXSA6IGVsO1xuICAgIGlmICghZWwgfHwgMSAhPT0gZWwubm9kZVR5cGUpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gY2FsaWJyYXRlKGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBjdXNoaW9uKTtcbiAgfVxuICB4cG9ydHNbJ3JlY3RhbmdsZSddID0gcmVjdGFuZ2xlO1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXdwb3J0IGFzcGVjdCByYXRpbyAob3IgdGhlIGFzcGVjdCByYXRpbyBvZiBhbiBvYmplY3Qgb3IgZWxlbWVudClcbiAgICogQHNpbmNlIDEuNy4wXG4gICAqIEBwYXJhbSB7KEVsZW1lbnR8T2JqZWN0KT19IG8gb3B0aW9uYWwgb2JqZWN0IHdpdGggd2lkdGgvaGVpZ2h0IHByb3BzIG9yIG1ldGhvZHNcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiBAbGluayBodHRwOi8vdzMub3JnL1RSL2NzczMtbWVkaWFxdWVyaWVzLyNvcmllbnRhdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gYXNwZWN0KG8pIHtcbiAgICBvID0gbnVsbCA9PSBvID8gdmlld3BvcnQoKSA6IDEgPT09IG8ubm9kZVR5cGUgPyByZWN0YW5nbGUobykgOiBvO1xuICAgIHZhciBoID0gb1snaGVpZ2h0J10sIHcgPSBvWyd3aWR0aCddO1xuICAgIGggPSB0eXBlb2YgaCA9PSAnZnVuY3Rpb24nID8gaC5jYWxsKG8pIDogaDtcbiAgICB3ID0gdHlwZW9mIHcgPT0gJ2Z1bmN0aW9uJyA/IHcuY2FsbChvKSA6IHc7XG4gICAgcmV0dXJuIHcvaDtcbiAgfVxuICB4cG9ydHNbJ2FzcGVjdCddID0gYXNwZWN0O1xuXG4gIC8qKlxuICAgKiBUZXN0IGlmIGFuIGVsZW1lbnQgaXMgaW4gdGhlIHNhbWUgeC1heGlzIHNlY3Rpb24gYXMgdGhlIHZpZXdwb3J0LlxuICAgKiBAc2luY2UgMS4wLjBcbiAgICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxcbiAgICogQHBhcmFtIHtudW1iZXI9fSBjdXNoaW9uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICB4cG9ydHNbJ2luWCddID0gZnVuY3Rpb24oZWwsIGN1c2hpb24pIHtcbiAgICB2YXIgciA9IHJlY3RhbmdsZShlbCwgY3VzaGlvbik7XG4gICAgcmV0dXJuICEhciAmJiByLnJpZ2h0ID49IDAgJiYgci5sZWZ0IDw9IHZpZXdwb3J0VygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUZXN0IGlmIGFuIGVsZW1lbnQgaXMgaW4gdGhlIHNhbWUgeS1heGlzIHNlY3Rpb24gYXMgdGhlIHZpZXdwb3J0LlxuICAgKiBAc2luY2UgMS4wLjBcbiAgICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxcbiAgICogQHBhcmFtIHtudW1iZXI9fSBjdXNoaW9uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICB4cG9ydHNbJ2luWSddID0gZnVuY3Rpb24oZWwsIGN1c2hpb24pIHtcbiAgICB2YXIgciA9IHJlY3RhbmdsZShlbCwgY3VzaGlvbik7XG4gICAgcmV0dXJuICEhciAmJiByLmJvdHRvbSA+PSAwICYmIHIudG9wIDw9IHZpZXdwb3J0SCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUZXN0IGlmIGFuIGVsZW1lbnQgaXMgaW4gdGhlIHZpZXdwb3J0LlxuICAgKiBAc2luY2UgMS4wLjBcbiAgICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxcbiAgICogQHBhcmFtIHtudW1iZXI9fSBjdXNoaW9uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICB4cG9ydHNbJ2luVmlld3BvcnQnXSA9IGZ1bmN0aW9uKGVsLCBjdXNoaW9uKSB7XG4gICAgLy8gRXF1aXYgdG8gYGluWChlbCwgY3VzaGlvbikgJiYgaW5ZKGVsLCBjdXNoaW9uKWAgYnV0IGp1c3QgbWFudWFsbHkgZG8gYm90aFxuICAgIC8vIHRvIGF2b2lkIGNhbGxpbmcgcmVjdGFuZ2xlKCkgdHdpY2UuIEl0IGd6aXBzIGp1c3QgYXMgc21hbGwgbGlrZSB0aGlzLlxuICAgIHZhciByID0gcmVjdGFuZ2xlKGVsLCBjdXNoaW9uKTtcbiAgICByZXR1cm4gISFyICYmIHIuYm90dG9tID49IDAgJiYgci5yaWdodCA+PSAwICYmIHIudG9wIDw9IHZpZXdwb3J0SCgpICYmIHIubGVmdCA8PSB2aWV3cG9ydFcoKTtcbiAgfTtcblxuICByZXR1cm4geHBvcnRzO1xufSkpO1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgTXV0YXRpb25PYnNlcnZlciwgVXRpbCwgV2Vha01hcCwgZ2V0Q29tcHV0ZWRTdHlsZSwgZ2V0Q29tcHV0ZWRTdHlsZVJYLFxuICAgIF9fYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sXG4gICAgX19pbmRleE9mID0gW10uaW5kZXhPZiB8fCBmdW5jdGlvbihpdGVtKSB7IGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsgfSByZXR1cm4gLTE7IH07XG5cbiAgVXRpbCA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBVdGlsKCkge31cblxuICAgIFV0aWwucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uKGN1c3RvbSwgZGVmYXVsdHMpIHtcbiAgICAgIHZhciBrZXksIHZhbHVlO1xuICAgICAgZm9yIChrZXkgaW4gZGVmYXVsdHMpIHtcbiAgICAgICAgdmFsdWUgPSBkZWZhdWx0c1trZXldO1xuICAgICAgICBpZiAoY3VzdG9tW2tleV0gPT0gbnVsbCkge1xuICAgICAgICAgIGN1c3RvbVtrZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXN0b207XG4gICAgfTtcblxuICAgIFV0aWwucHJvdG90eXBlLmlzTW9iaWxlID0gZnVuY3Rpb24oYWdlbnQpIHtcbiAgICAgIHJldHVybiAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QoYWdlbnQpO1xuICAgIH07XG5cbiAgICBVdGlsLnByb3RvdHlwZS5hZGRFdmVudCA9IGZ1bmN0aW9uKGVsZW0sIGV2ZW50LCBmbikge1xuICAgICAgaWYgKGVsZW0uYWRkRXZlbnRMaXN0ZW5lciAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGZuLCBmYWxzZSk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW0uYXR0YWNoRXZlbnQgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZWxlbS5hdHRhY2hFdmVudChcIm9uXCIgKyBldmVudCwgZm4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGVsZW1bZXZlbnRdID0gZm47XG4gICAgICB9XG4gICAgfTtcblxuICAgIFV0aWwucHJvdG90eXBlLnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24oZWxlbSwgZXZlbnQsIGZuKSB7XG4gICAgICBpZiAoZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgZm4sIGZhbHNlKTtcbiAgICAgIH0gZWxzZSBpZiAoZWxlbS5kZXRhY2hFdmVudCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBlbGVtLmRldGFjaEV2ZW50KFwib25cIiArIGV2ZW50LCBmbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVsZXRlIGVsZW1bZXZlbnRdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBVdGlsLnByb3RvdHlwZS5pbm5lckhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCdpbm5lckhlaWdodCcgaW4gd2luZG93KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFV0aWw7XG5cbiAgfSkoKTtcblxuICBXZWFrTWFwID0gdGhpcy5XZWFrTWFwIHx8IHRoaXMuTW96V2Vha01hcCB8fCAoV2Vha01hcCA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBXZWFrTWFwKCkge1xuICAgICAgdGhpcy5rZXlzID0gW107XG4gICAgICB0aGlzLnZhbHVlcyA9IFtdO1xuICAgIH1cblxuICAgIFdlYWtNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgdmFyIGksIGl0ZW0sIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgX3JlZiA9IHRoaXMua2V5cztcbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgIGl0ZW0gPSBfcmVmW2ldO1xuICAgICAgICBpZiAoaXRlbSA9PT0ga2V5KSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW2ldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdlYWtNYXAucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgIHZhciBpLCBpdGVtLCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgIF9yZWYgPSB0aGlzLmtleXM7XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBpdGVtID0gX3JlZltpXTtcbiAgICAgICAgaWYgKGl0ZW0gPT09IGtleSkge1xuICAgICAgICAgIHRoaXMudmFsdWVzW2ldID0gdmFsdWU7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmtleXMucHVzaChrZXkpO1xuICAgICAgcmV0dXJuIHRoaXMudmFsdWVzLnB1c2godmFsdWUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gV2Vha01hcDtcblxuICB9KSgpKTtcblxuICBNdXRhdGlvbk9ic2VydmVyID0gdGhpcy5NdXRhdGlvbk9ic2VydmVyIHx8IHRoaXMuV2Via2l0TXV0YXRpb25PYnNlcnZlciB8fCB0aGlzLk1vek11dGF0aW9uT2JzZXJ2ZXIgfHwgKE11dGF0aW9uT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTXV0YXRpb25PYnNlcnZlciBpcyBub3Qgc3VwcG9ydGVkIGJ5IHlvdXIgYnJvd3Nlci4nKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignV09XLmpzIGNhbm5vdCBkZXRlY3QgZG9tIG11dGF0aW9ucywgcGxlYXNlIGNhbGwgLnN5bmMoKSBhZnRlciBsb2FkaW5nIG5ldyBjb250ZW50LicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIE11dGF0aW9uT2JzZXJ2ZXIubm90U3VwcG9ydGVkID0gdHJ1ZTtcblxuICAgIE11dGF0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgcmV0dXJuIE11dGF0aW9uT2JzZXJ2ZXI7XG5cbiAgfSkoKSk7XG5cbiAgZ2V0Q29tcHV0ZWRTdHlsZSA9IHRoaXMuZ2V0Q29tcHV0ZWRTdHlsZSB8fCBmdW5jdGlvbihlbCwgcHNldWRvKSB7XG4gICAgdGhpcy5nZXRQcm9wZXJ0eVZhbHVlID0gZnVuY3Rpb24ocHJvcCkge1xuICAgICAgdmFyIF9yZWY7XG4gICAgICBpZiAocHJvcCA9PT0gJ2Zsb2F0Jykge1xuICAgICAgICBwcm9wID0gJ3N0eWxlRmxvYXQnO1xuICAgICAgfVxuICAgICAgaWYgKGdldENvbXB1dGVkU3R5bGVSWC50ZXN0KHByb3ApKSB7XG4gICAgICAgIHByb3AucmVwbGFjZShnZXRDb21wdXRlZFN0eWxlUlgsIGZ1bmN0aW9uKF8sIF9jaGFyKSB7XG4gICAgICAgICAgcmV0dXJuIF9jaGFyLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuICgoX3JlZiA9IGVsLmN1cnJlbnRTdHlsZSkgIT0gbnVsbCA/IF9yZWZbcHJvcF0gOiB2b2lkIDApIHx8IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBnZXRDb21wdXRlZFN0eWxlUlggPSAvKFxcLShbYS16XSl7MX0pL2c7XG5cbiAgdGhpcy5XT1cgPSAoZnVuY3Rpb24oKSB7XG4gICAgV09XLnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgICAgIGJveENsYXNzOiAnd293JyxcbiAgICAgIGFuaW1hdGVDbGFzczogJ2FuaW1hdGVkJyxcbiAgICAgIG9mZnNldDogMCxcbiAgICAgIG1vYmlsZTogdHJ1ZSxcbiAgICAgIGxpdmU6IHRydWUsXG4gICAgICBjYWxsYmFjazogbnVsbFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBXT1cob3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICB0aGlzLnNjcm9sbENhbGxiYWNrID0gX19iaW5kKHRoaXMuc2Nyb2xsQ2FsbGJhY2ssIHRoaXMpO1xuICAgICAgdGhpcy5zY3JvbGxIYW5kbGVyID0gX19iaW5kKHRoaXMuc2Nyb2xsSGFuZGxlciwgdGhpcyk7XG4gICAgICB0aGlzLnN0YXJ0ID0gX19iaW5kKHRoaXMuc3RhcnQsIHRoaXMpO1xuICAgICAgdGhpcy5zY3JvbGxlZCA9IHRydWU7XG4gICAgICB0aGlzLmNvbmZpZyA9IHRoaXMudXRpbCgpLmV4dGVuZChvcHRpb25zLCB0aGlzLmRlZmF1bHRzKTtcbiAgICAgIHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbiAgICB9XG5cbiAgICBXT1cucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmO1xuICAgICAgdGhpcy5lbGVtZW50ID0gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgIGlmICgoX3JlZiA9IGRvY3VtZW50LnJlYWR5U3RhdGUpID09PSBcImludGVyYWN0aXZlXCIgfHwgX3JlZiA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudXRpbCgpLmFkZEV2ZW50KGRvY3VtZW50LCAnRE9NQ29udGVudExvYWRlZCcsIHRoaXMuc3RhcnQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZmluaXNoZWQgPSBbXTtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJveCwgX2ksIF9sZW4sIF9yZWY7XG4gICAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuYm94ZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZWYgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIHRoaXMuY29uZmlnLmJveENsYXNzKTtcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgYm94ID0gX3JlZltfaV07XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaChib3gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmFsbCA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0cztcbiAgICAgICAgX3JlZiA9IHRoaXMuYm94ZXM7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIGJveCA9IF9yZWZbX2ldO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goYm94KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgaWYgKHRoaXMuYm94ZXMubGVuZ3RoKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKCkpIHtcbiAgICAgICAgICB0aGlzLnJlc2V0U3R5bGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfcmVmID0gdGhpcy5ib3hlcztcbiAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgIGJveCA9IF9yZWZbX2ldO1xuICAgICAgICAgICAgdGhpcy5hcHBseVN0eWxlKGJveCwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuZGlzYWJsZWQoKSkge1xuICAgICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudCh3aW5kb3csICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICAgICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudCh3aW5kb3csICdyZXNpemUnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5zY3JvbGxDYWxsYmFjaywgNTApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY29uZmlnLmxpdmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhdGlvbk9ic2VydmVyKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyZWNvcmRzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSwgcmVjb3JkLCBfaiwgX2xlbjEsIF9yZXN1bHRzO1xuICAgICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IHJlY29yZHMubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgICAgICAgIHJlY29yZCA9IHJlY29yZHNbX2pdO1xuICAgICAgICAgICAgICBfcmVzdWx0cy5wdXNoKChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2ssIF9sZW4yLCBfcmVmMSwgX3Jlc3VsdHMxO1xuICAgICAgICAgICAgICAgIF9yZWYxID0gcmVjb3JkLmFkZGVkTm9kZXMgfHwgW107XG4gICAgICAgICAgICAgICAgX3Jlc3VsdHMxID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChfayA9IDAsIF9sZW4yID0gX3JlZjEubGVuZ3RoOyBfayA8IF9sZW4yOyBfaysrKSB7XG4gICAgICAgICAgICAgICAgICBub2RlID0gX3JlZjFbX2tdO1xuICAgICAgICAgICAgICAgICAgX3Jlc3VsdHMxLnB1c2godGhpcy5kb1N5bmMobm9kZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gX3Jlc3VsdHMxO1xuICAgICAgICAgICAgICB9KS5jYWxsKF90aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSkodGhpcykpLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xuICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG4gICAgICB0aGlzLnV0aWwoKS5yZW1vdmVFdmVudCh3aW5kb3csICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICAgICAgdGhpcy51dGlsKCkucmVtb3ZlRXZlbnQod2luZG93LCAncmVzaXplJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgIGlmICh0aGlzLmludGVydmFsICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc3luYyA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgIGlmIChNdXRhdGlvbk9ic2VydmVyLm5vdFN1cHBvcnRlZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb1N5bmModGhpcy5lbGVtZW50KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5kb1N5bmMgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICB2YXIgYm94LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICBpZiAoZWxlbWVudCA9PSBudWxsKSB7XG4gICAgICAgIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICB9XG4gICAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSAhPT0gMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlIHx8IGVsZW1lbnQ7XG4gICAgICBfcmVmID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiICsgdGhpcy5jb25maWcuYm94Q2xhc3MpO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBib3ggPSBfcmVmW19pXTtcbiAgICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKHRoaXMuYWxsLCBib3gpIDwgMCkge1xuICAgICAgICAgIHRoaXMuYm94ZXMucHVzaChib3gpO1xuICAgICAgICAgIHRoaXMuYWxsLnB1c2goYm94KTtcbiAgICAgICAgICBpZiAodGhpcy5zdG9wcGVkIHx8IHRoaXMuZGlzYWJsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFN0eWxlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTdHlsZShib3gsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKHRoaXMuc2Nyb2xsZWQgPSB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKHZvaWQgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICB0aGlzLmFwcGx5U3R5bGUoYm94KTtcbiAgICAgIGJveC5jbGFzc05hbWUgPSBcIlwiICsgYm94LmNsYXNzTmFtZSArIFwiIFwiICsgdGhpcy5jb25maWcuYW5pbWF0ZUNsYXNzO1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmNhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmNhbGxiYWNrKGJveCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuYXBwbHlTdHlsZSA9IGZ1bmN0aW9uKGJveCwgaGlkZGVuKSB7XG4gICAgICB2YXIgZGVsYXksIGR1cmF0aW9uLCBpdGVyYXRpb247XG4gICAgICBkdXJhdGlvbiA9IGJveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtd293LWR1cmF0aW9uJyk7XG4gICAgICBkZWxheSA9IGJveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtd293LWRlbGF5Jyk7XG4gICAgICBpdGVyYXRpb24gPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1pdGVyYXRpb24nKTtcbiAgICAgIHJldHVybiB0aGlzLmFuaW1hdGUoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuY3VzdG9tU3R5bGUoYm94LCBoaWRkZW4sIGR1cmF0aW9uLCBkZWxheSwgaXRlcmF0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5hbmltYXRlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCdyZXF1ZXN0QW5pbWF0aW9uRnJhbWUnIGluIHdpbmRvdykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICByZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KSgpO1xuXG4gICAgV09XLnByb3RvdHlwZS5yZXNldFN0eWxlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYm94LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICBfcmVmID0gdGhpcy5ib3hlcztcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgYm94ID0gX3JlZltfaV07XG4gICAgICAgIF9yZXN1bHRzLnB1c2goYm94LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZScpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmN1c3RvbVN0eWxlID0gZnVuY3Rpb24oYm94LCBoaWRkZW4sIGR1cmF0aW9uLCBkZWxheSwgaXRlcmF0aW9uKSB7XG4gICAgICBpZiAoaGlkZGVuKSB7XG4gICAgICAgIHRoaXMuY2FjaGVBbmltYXRpb25OYW1lKGJveCk7XG4gICAgICB9XG4gICAgICBib3guc3R5bGUudmlzaWJpbGl0eSA9IGhpZGRlbiA/ICdoaWRkZW4nIDogJ3Zpc2libGUnO1xuICAgICAgaWYgKGR1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMudmVuZG9yU2V0KGJveC5zdHlsZSwge1xuICAgICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiBkdXJhdGlvblxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWxheSkge1xuICAgICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcbiAgICAgICAgICBhbmltYXRpb25EZWxheTogZGVsYXlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoaXRlcmF0aW9uKSB7XG4gICAgICAgIHRoaXMudmVuZG9yU2V0KGJveC5zdHlsZSwge1xuICAgICAgICAgIGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiBpdGVyYXRpb25cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcbiAgICAgICAgYW5pbWF0aW9uTmFtZTogaGlkZGVuID8gJ25vbmUnIDogdGhpcy5jYWNoZWRBbmltYXRpb25OYW1lKGJveClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGJveDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS52ZW5kb3JzID0gW1wibW96XCIsIFwid2Via2l0XCJdO1xuXG4gICAgV09XLnByb3RvdHlwZS52ZW5kb3JTZXQgPSBmdW5jdGlvbihlbGVtLCBwcm9wZXJ0aWVzKSB7XG4gICAgICB2YXIgbmFtZSwgdmFsdWUsIHZlbmRvciwgX3Jlc3VsdHM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChuYW1lIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgdmFsdWUgPSBwcm9wZXJ0aWVzW25hbWVdO1xuICAgICAgICBlbGVtW1wiXCIgKyBuYW1lXSA9IHZhbHVlO1xuICAgICAgICBfcmVzdWx0cy5wdXNoKChmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzMTtcbiAgICAgICAgICBfcmVmID0gdGhpcy52ZW5kb3JzO1xuICAgICAgICAgIF9yZXN1bHRzMSA9IFtdO1xuICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgdmVuZG9yID0gX3JlZltfaV07XG4gICAgICAgICAgICBfcmVzdWx0czEucHVzaChlbGVtW1wiXCIgKyB2ZW5kb3IgKyAobmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSkgKyAobmFtZS5zdWJzdHIoMSkpXSA9IHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF9yZXN1bHRzMTtcbiAgICAgICAgfSkuY2FsbCh0aGlzKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUudmVuZG9yQ1NTID0gZnVuY3Rpb24oZWxlbSwgcHJvcGVydHkpIHtcbiAgICAgIHZhciByZXN1bHQsIHN0eWxlLCB2ZW5kb3IsIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW0pO1xuICAgICAgcmVzdWx0ID0gc3R5bGUuZ2V0UHJvcGVydHlDU1NWYWx1ZShwcm9wZXJ0eSk7XG4gICAgICBfcmVmID0gdGhpcy52ZW5kb3JzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHZlbmRvciA9IF9yZWZbX2ldO1xuICAgICAgICByZXN1bHQgPSByZXN1bHQgfHwgc3R5bGUuZ2V0UHJvcGVydHlDU1NWYWx1ZShcIi1cIiArIHZlbmRvciArIFwiLVwiICsgcHJvcGVydHkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5hbmltYXRpb25OYW1lID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICB2YXIgYW5pbWF0aW9uTmFtZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGFuaW1hdGlvbk5hbWUgPSB0aGlzLnZlbmRvckNTUyhib3gsICdhbmltYXRpb24tbmFtZScpLmNzc1RleHQ7XG4gICAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgYW5pbWF0aW9uTmFtZSA9IGdldENvbXB1dGVkU3R5bGUoYm94KS5nZXRQcm9wZXJ0eVZhbHVlKCdhbmltYXRpb24tbmFtZScpO1xuICAgICAgfVxuICAgICAgaWYgKGFuaW1hdGlvbk5hbWUgPT09ICdub25lJykge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYW5pbWF0aW9uTmFtZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5jYWNoZUFuaW1hdGlvbk5hbWUgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgIHJldHVybiB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZS5zZXQoYm94LCB0aGlzLmFuaW1hdGlvbk5hbWUoYm94KSk7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuY2FjaGVkQW5pbWF0aW9uTmFtZSA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlLmdldChib3gpO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnNjcm9sbGVkID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zY3JvbGxDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJveDtcbiAgICAgIGlmICh0aGlzLnNjcm9sbGVkKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ib3hlcyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgICAgIF9yZWYgPSB0aGlzLmJveGVzO1xuICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICBib3ggPSBfcmVmW19pXTtcbiAgICAgICAgICAgIGlmICghKGJveCkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUoYm94KSkge1xuICAgICAgICAgICAgICB0aGlzLnNob3coYm94KTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfcmVzdWx0cy5wdXNoKGJveCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKCEodGhpcy5ib3hlcy5sZW5ndGggfHwgdGhpcy5jb25maWcubGl2ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5vZmZzZXRUb3AgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICB2YXIgdG9wO1xuICAgICAgd2hpbGUgKGVsZW1lbnQub2Zmc2V0VG9wID09PSB2b2lkIDApIHtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgIH1cbiAgICAgIHRvcCA9IGVsZW1lbnQub2Zmc2V0VG9wO1xuICAgICAgd2hpbGUgKGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudCkge1xuICAgICAgICB0b3AgKz0gZWxlbWVudC5vZmZzZXRUb3A7XG4gICAgICB9XG4gICAgICByZXR1cm4gdG9wO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmlzVmlzaWJsZSA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgdmFyIGJvdHRvbSwgb2Zmc2V0LCB0b3AsIHZpZXdCb3R0b20sIHZpZXdUb3A7XG4gICAgICBvZmZzZXQgPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1vZmZzZXQnKSB8fCB0aGlzLmNvbmZpZy5vZmZzZXQ7XG4gICAgICB2aWV3VG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgICAgdmlld0JvdHRvbSA9IHZpZXdUb3AgKyBNYXRoLm1pbih0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0LCB0aGlzLnV0aWwoKS5pbm5lckhlaWdodCgpKSAtIG9mZnNldDtcbiAgICAgIHRvcCA9IHRoaXMub2Zmc2V0VG9wKGJveCk7XG4gICAgICBib3R0b20gPSB0b3AgKyBib3guY2xpZW50SGVpZ2h0O1xuICAgICAgcmV0dXJuIHRvcCA8PSB2aWV3Qm90dG9tICYmIGJvdHRvbSA+PSB2aWV3VG9wO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnV0aWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl91dGlsICE9IG51bGwgPyB0aGlzLl91dGlsIDogdGhpcy5fdXRpbCA9IG5ldyBVdGlsKCk7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuZGlzYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5jb25maWcubW9iaWxlICYmIHRoaXMudXRpbCgpLmlzTW9iaWxlKG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gV09XO1xuXG4gIH0pKCk7XG5cbn0pLmNhbGwodGhpcyk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9