function changeBackgroundColor(t){var e=window.pageYOffset||document.documentElement.scrollTop;t.className=e>20?"fixed":""}function toggleClass(t,e){if(t&&e){var n=t.className,i=n.indexOf(e);-1==i?n+=" "+e:n=n.substr(0,i)+n.substr(i+e.length),t.className=n}}!function(t,e,n){var i=window.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=n(i):"function"==typeof define&&define.amd?define(function(){return e[t]=n(i)}):e[t]=n(i)}("enquire",this,function(t){"use strict";function e(t,e){var n,i=0,r=t.length;for(i;r>i&&(n=e(t[i],i),n!==!1);i++);}function n(t){return"[object Array]"===Object.prototype.toString.apply(t)}function i(t){return"function"==typeof t}function r(t){this.options=t,!t.deferSetup&&this.setup()}function o(e,n){this.query=e,this.isUnconditional=n,this.handlers=[],this.mql=t(e);var i=this;this.listener=function(t){i.mql=t,i.assess()},this.mql.addListener(this.listener)}function s(){if(!t)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!t("only all").matches}return r.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}},o.prototype={addHandler:function(t){var e=new r(t);this.handlers.push(e),this.matches()&&e.on()},removeHandler:function(t){var n=this.handlers;e(n,function(e,i){return e.equals(t)?(e.destroy(),!n.splice(i,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){e(this.handlers,function(t){t.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var t=this.matches()?"on":"off";e(this.handlers,function(e){e[t]()})}},s.prototype={register:function(t,r,s){var a=this.queries,l=s&&this.browserIsIncapable;return a[t]||(a[t]=new o(t,l)),i(r)&&(r={match:r}),n(r)||(r=[r]),e(r,function(e){i(e)&&(e={match:e}),a[t].addHandler(e)}),this},unregister:function(t,e){var n=this.queries[t];return n&&(e?n.removeHandler(e):(n.clear(),delete this.queries[t])),this}},new s}),window.matchMedia||(window.matchMedia=function(){"use strict";var t=window.styleMedia||window.media;if(!t){var e=document.createElement("style"),n=document.getElementsByTagName("script")[0],i=null;e.type="text/css",e.id="matchmediajs-test",n.parentNode.insertBefore(e,n),i="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,t={matchMedium:function(t){var n="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=n:e.textContent=n,"1px"===i.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(t,e,n){"use strict";function i(t){var e,n,i,r,s,a=t||{};e=a.elements||o.getAllElements();for(var l=0,u=e.length;u>l;l++)if(n=e[l],i=n.parentNode,r=void 0,s=void 0,"IMG"===n.nodeName.toUpperCase()&&(n[o.ns]||(n[o.ns]={}),a.reevaluate||!n[o.ns].evaluated)){if("PICTURE"===i.nodeName.toUpperCase()){if(o.removeVideoShim(i),r=o.getMatch(n,i),r===!1)continue}else r=void 0;("PICTURE"===i.nodeName.toUpperCase()||n.srcset&&!o.srcsetSupported||!o.sizesSupported&&n.srcset&&n.srcset.indexOf("w")>-1)&&o.dodgeSrcset(n),r?(s=o.processSourceSet(r),o.applyBestCandidate(s,n)):(s=o.processSourceSet(n),(void 0===n.srcset||n[o.ns].srcset)&&o.applyBestCandidate(s,n)),n[o.ns].evaluated=!0}}function r(){function n(){var e;t._picturefillWorking||(t._picturefillWorking=!0,t.clearTimeout(e),e=t.setTimeout(function(){i({reevaluate:!0}),t._picturefillWorking=!1},60))}i();var r=setInterval(function(){return i(),/^loaded|^i|^c/.test(e.readyState)?void clearInterval(r):void 0},250);t.addEventListener?t.addEventListener("resize",n,!1):t.attachEvent&&t.attachEvent("onresize",n)}if(t.HTMLPictureElement)return void(t.picturefill=function(){});e.createElement("picture");var o={};o.ns="picturefill",function(){o.srcsetSupported="srcset"in n,o.sizesSupported="sizes"in n}(),o.trim=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},o.endsWith=function(t,e){return t.endsWith?t.endsWith(e):-1!==t.indexOf(e,t.length-e.length)},o.restrictsMixedContent=function(){return"https:"===t.location.protocol},o.matchesMedia=function(e){return t.matchMedia&&t.matchMedia(e).matches},o.getDpr=function(){return t.devicePixelRatio||1},o.getWidthFromLength=function(t){t=t&&t.indexOf("%")>-1==!1&&(parseFloat(t)>0||t.indexOf("calc(")>-1)?t:"100vw",t=t.replace("vw","%"),o.lengthEl||(o.lengthEl=e.createElement("div"),o.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden"),o.lengthEl.style.width=t,e.body.appendChild(o.lengthEl),o.lengthEl.className="helper-from-picturefill-js",o.lengthEl.offsetWidth<=0&&(o.lengthEl.style.width=e.documentElement.offsetWidth+"px");var n=o.lengthEl.offsetWidth;return e.body.removeChild(o.lengthEl),n},o.types={},o.types["image/jpeg"]=!0,o.types["image/gif"]=!0,o.types["image/png"]=!0,o.types["image/svg+xml"]=e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),o.types["image/webp"]=function(){var t="image/webp";n.onerror=function(){o.types[t]=!1,i()},n.onload=function(){o.types[t]=1===n.width,i()},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="},o.verifyTypeSupport=function(t){var e=t.getAttribute("type");return null===e||""===e?!0:"function"==typeof o.types[e]?(o.types[e](),"pending"):o.types[e]},o.parseSize=function(t){var e=/(\([^)]+\))?\s*(.+)/g.exec(t);return{media:e&&e[1],length:e&&e[2]}},o.findWidthFromSourceSize=function(t){for(var e,n=o.trim(t).split(/\s*,\s*/),i=0,r=n.length;r>i;i++){var s=n[i],a=o.parseSize(s),l=a.length,u=a.media;if(l&&(!u||o.matchesMedia(u))){e=l;break}}return o.getWidthFromLength(e)},o.parseSrcset=function(t){for(var e=[];""!==t;){t=t.replace(/^\s+/g,"");var n,i=t.search(/\s/g),r=null;if(-1!==i){n=t.slice(0,i);var o=n.slice(-1);if((","===o||""===n)&&(n=n.replace(/,+$/,""),r=""),t=t.slice(i+1),null===r){var s=t.indexOf(",");-1!==s?(r=t.slice(0,s),t=t.slice(s+1)):(r=t,t="")}}else n=t,t="";(n||r)&&e.push({url:n,descriptor:r})}return e},o.parseDescriptor=function(t,e){var n,i=e||"100vw",r=t&&t.replace(/(^\s+|\s+$)/g,""),s=o.findWidthFromSourceSize(i);if(r)for(var a=r.split(" "),l=a.length-1;l>=0;l--){var u=a[l],c=u&&u.slice(u.length-1);if("h"!==c&&"w"!==c||o.sizesSupported){if("x"===c){var d=u&&parseFloat(u,10);n=d&&!isNaN(d)?d:1}}else n=parseFloat(parseInt(u,10)/s)}return n||1},o.getCandidatesFromSourceSet=function(t,e){for(var n=o.parseSrcset(t),i=[],r=0,s=n.length;s>r;r++){var a=n[r];i.push({url:a.url,resolution:o.parseDescriptor(a.descriptor,e)})}return i},o.dodgeSrcset=function(t){t.srcset&&(t[o.ns].srcset=t.srcset,t.removeAttribute("srcset"))},o.processSourceSet=function(t){var e=t.getAttribute("srcset"),n=t.getAttribute("sizes"),i=[];return"IMG"===t.nodeName.toUpperCase()&&t[o.ns]&&t[o.ns].srcset&&(e=t[o.ns].srcset),e&&(i=o.getCandidatesFromSourceSet(e,n)),i},o.applyBestCandidate=function(t,e){var n,i,r;t.sort(o.ascendingSort),i=t.length,r=t[i-1];for(var s=0;i>s;s++)if(n=t[s],n.resolution>=o.getDpr()){r=n;break}if(r&&!o.endsWith(e.src,r.url))if(o.restrictsMixedContent()&&"http:"===r.url.substr(0,"http:".length).toLowerCase())void 0!==typeof console&&console.warn("Blocked mixed content image "+r.url);else{e.src=r.url,e.currentSrc=e.src;var a=e.style||{},l="webkitBackfaceVisibility"in a,u=a.zoom;l&&(a.zoom=".999",l=e.offsetWidth,a.zoom=u)}},o.ascendingSort=function(t,e){return t.resolution-e.resolution},o.removeVideoShim=function(t){var e=t.getElementsByTagName("video");if(e.length){for(var n=e[0],i=n.getElementsByTagName("source");i.length;)t.insertBefore(i[0],n);n.parentNode.removeChild(n)}},o.getAllElements=function(){for(var t=[],n=e.getElementsByTagName("img"),i=0,r=n.length;r>i;i++){var s=n[i];("PICTURE"===s.parentNode.nodeName.toUpperCase()||null!==s.getAttribute("srcset")||s[o.ns]&&null!==s[o.ns].srcset)&&t.push(s)}return t},o.getMatch=function(t,e){for(var n,i=e.childNodes,r=0,s=i.length;s>r;r++){var a=i[r];if(1===a.nodeType){if(a===t)return n;if("SOURCE"===a.nodeName.toUpperCase()){null!==a.getAttribute("src")&&void 0!==typeof console&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var l=a.getAttribute("media");if(a.getAttribute("srcset")&&(!l||o.matchesMedia(l))){var u=o.verifyTypeSupport(a);if(u===!0){n=a;break}if("pending"===u)return!1}}}}return n},r(),i._=o,"object"==typeof module&&"object"==typeof module.exports?module.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):"object"==typeof t&&(t.picturefill=i)}(this,this.document,new this.Image),function(t,e,n){"undefined"!=typeof module&&module.exports?module.exports=n():t[e]=n()}(this,"verge",function(){function t(){return{width:c(),height:d()}}function e(t,e){var n={};return e=+e||0,n.width=(n.right=t.right+e)-(n.left=t.left-e),n.height=(n.bottom=t.bottom+e)-(n.top=t.top-e),n}function n(t,n){return t=t&&!t.nodeType?t[0]:t,t&&1===t.nodeType?e(t.getBoundingClientRect(),n):!1}function i(e){e=null==e?t():1===e.nodeType?n(e):e;var i=e.height,r=e.width;return i="function"==typeof i?i.call(e):i,r="function"==typeof r?r.call(e):r,r/i}var r={},o="undefined"!=typeof window&&window,s="undefined"!=typeof document&&document,a=s&&s.documentElement,l=o.matchMedia||o.msMatchMedia,u=l?function(t){return!!l.call(o,t).matches}:function(){return!1},c=r.viewportW=function(){var t=a.clientWidth,e=o.innerWidth;return e>t?e:t},d=r.viewportH=function(){var t=a.clientHeight,e=o.innerHeight;return e>t?e:t};return r.mq=u,r.matchMedia=l?function(){return l.apply(o,arguments)}:function(){return{}},r.viewport=t,r.scrollX=function(){return o.pageXOffset||a.scrollLeft},r.scrollY=function(){return o.pageYOffset||a.scrollTop},r.rectangle=n,r.aspect=i,r.inX=function(t,e){var i=n(t,e);return!!i&&i.right>=0&&i.left<=c()},r.inY=function(t,e){var i=n(t,e);return!!i&&i.bottom>=0&&i.top<=d()},r.inViewport=function(t,e){var i=n(t,e);return!!i&&i.bottom>=0&&i.right>=0&&i.top<=d()&&i.left<=c()},r}),function(){var t,e,n,i,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=function(){function t(){}return t.prototype.extend=function(t,e){var n,i;for(n in e)i=e[n],null==t[n]&&(t[n]=i);return t},t.prototype.isMobile=function(t){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)},t.prototype.addEvent=function(t,e,n){return null!=t.addEventListener?t.addEventListener(e,n,!1):null!=t.attachEvent?t.attachEvent("on"+e,n):t[e]=n},t.prototype.removeEvent=function(t,e,n){return null!=t.removeEventListener?t.removeEventListener(e,n,!1):null!=t.detachEvent?t.detachEvent("on"+e,n):delete t[e]},t.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},t}(),n=this.WeakMap||this.MozWeakMap||(n=function(){function t(){this.keys=[],this.values=[]}return t.prototype.get=function(t){var e,n,i,r,o;for(o=this.keys,e=i=0,r=o.length;r>i;e=++i)if(n=o[e],n===t)return this.values[e]},t.prototype.set=function(t,e){var n,i,r,o,s;for(s=this.keys,n=r=0,o=s.length;o>r;n=++r)if(i=s[n],i===t)return void(this.values[n]=e);return this.keys.push(t),this.values.push(e)},t}()),t=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(t=function(){function t(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return t.notSupported=!0,t.prototype.observe=function(){},t}()),i=this.getComputedStyle||function(t){return this.getPropertyValue=function(e){var n;return"float"===e&&(e="styleFloat"),r.test(e)&&e.replace(r,function(t,e){return e.toUpperCase()}),(null!=(n=t.currentStyle)?n[e]:void 0)||null},this},r=/(\-([a-z]){1})/g,this.WOW=function(){function r(t){null==t&&(t={}),this.scrollCallback=o(this.scrollCallback,this),this.scrollHandler=o(this.scrollHandler,this),this.start=o(this.start,this),this.scrolled=!0,this.config=this.util().extend(t,this.defaults),this.animationNameCache=new n}return r.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null},r.prototype.init=function(){var t;return this.element=window.document.documentElement,"interactive"===(t=document.readyState)||"complete"===t?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},r.prototype.start=function(){var e,n,i,r;if(this.stopped=!1,this.boxes=function(){var t,n,i,r;for(i=this.element.querySelectorAll("."+this.config.boxClass),r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e);return r}.call(this),this.all=function(){var t,n,i,r;for(i=this.boxes,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e);return r}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(r=this.boxes,n=0,i=r.length;i>n;n++)e=r[n],this.applyStyle(e,!0);return this.disabled()||(this.util().addEvent(window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new t(function(t){return function(e){var n,i,r,o,s;for(s=[],r=0,o=e.length;o>r;r++)i=e[r],s.push(function(){var t,e,r,o;for(r=i.addedNodes||[],o=[],t=0,e=r.length;e>t;t++)n=r[t],o.push(this.doSync(n));return o}.call(t));return s}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},r.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval?clearInterval(this.interval):void 0},r.prototype.sync=function(){return t.notSupported?this.doSync(this.element):void 0},r.prototype.doSync=function(t){var e,n,i,r,o;if(null==t&&(t=this.element),1===t.nodeType){for(t=t.parentNode||t,r=t.querySelectorAll("."+this.config.boxClass),o=[],n=0,i=r.length;i>n;n++)e=r[n],s.call(this.all,e)<0?(this.boxes.push(e),this.all.push(e),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(e,!0),o.push(this.scrolled=!0)):o.push(void 0);return o}},r.prototype.show=function(t){return this.applyStyle(t),t.className=""+t.className+" "+this.config.animateClass,null!=this.config.callback?this.config.callback(t):void 0},r.prototype.applyStyle=function(t,e){var n,i,r;return i=t.getAttribute("data-wow-duration"),n=t.getAttribute("data-wow-delay"),r=t.getAttribute("data-wow-iteration"),this.animate(function(o){return function(){return o.customStyle(t,e,i,n,r)}}(this))},r.prototype.animate=function(){return"requestAnimationFrame"in window?function(t){return window.requestAnimationFrame(t)}:function(t){return t()}}(),r.prototype.resetStyle=function(){var t,e,n,i,r;for(i=this.boxes,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.style.visibility="visible");return r},r.prototype.customStyle=function(t,e,n,i,r){return e&&this.cacheAnimationName(t),t.style.visibility=e?"hidden":"visible",n&&this.vendorSet(t.style,{animationDuration:n}),i&&this.vendorSet(t.style,{animationDelay:i}),r&&this.vendorSet(t.style,{animationIterationCount:r}),this.vendorSet(t.style,{animationName:e?"none":this.cachedAnimationName(t)}),t},r.prototype.vendors=["moz","webkit"],r.prototype.vendorSet=function(t,e){var n,i,r,o;o=[];for(n in e)i=e[n],t[""+n]=i,o.push(function(){var e,o,s,a;for(s=this.vendors,a=[],e=0,o=s.length;o>e;e++)r=s[e],a.push(t[""+r+n.charAt(0).toUpperCase()+n.substr(1)]=i);return a}.call(this));return o},r.prototype.vendorCSS=function(t,e){var n,r,o,s,a,l;for(r=i(t),n=r.getPropertyCSSValue(e),l=this.vendors,s=0,a=l.length;a>s;s++)o=l[s],n=n||r.getPropertyCSSValue("-"+o+"-"+e);return n},r.prototype.animationName=function(t){var e;try{e=this.vendorCSS(t,"animation-name").cssText}catch(n){e=i(t).getPropertyValue("animation-name")}return"none"===e?"":e},r.prototype.cacheAnimationName=function(t){return this.animationNameCache.set(t,this.animationName(t))},r.prototype.cachedAnimationName=function(t){return this.animationNameCache.get(t)},r.prototype.scrollHandler=function(){return this.scrolled=!0},r.prototype.scrollCallback=function(){var t;return!this.scrolled||(this.scrolled=!1,this.boxes=function(){var e,n,i,r;for(i=this.boxes,r=[],e=0,n=i.length;n>e;e++)t=i[e],t&&(this.isVisible(t)?this.show(t):r.push(t));return r}.call(this),this.boxes.length||this.config.live)?void 0:this.stop()},r.prototype.offsetTop=function(t){for(var e;void 0===t.offsetTop;)t=t.parentNode;for(e=t.offsetTop;t=t.offsetParent;)e+=t.offsetTop;return e},r.prototype.isVisible=function(t){var e,n,i,r,o;return n=t.getAttribute("data-wow-offset")||this.config.offset,o=window.pageYOffset,r=o+Math.min(this.element.clientHeight,this.util().innerHeight())-n,i=this.offsetTop(t),e=i+t.clientHeight,r>=i&&e>=o},r.prototype.util=function(){return null!=this._util?this._util:this._util=new e},r.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},r}()}.call(this),(new WOW).init(),window.addEventListener("load",function(){function t(){toggleClass(document.getElementById("mobile-menu"),"show")}{var e=document.querySelector(".nav");document.getElementById("menu")}changeBackgroundColor(e),document.getElementById("menu-toggle").addEventListener("click",function(){toggleClass(document.getElementById("mobile-menu"),"show")}),enquire.register("screen and (max-width:767px)",{match:function(){var e=document.getElementById("mobile-menu");e.addEventListener("click",t,!1);var n=document.querySelector(".arkdes-img"),i=n.parentNode;i.insertBefore(n,i.firstChild)},unmatch:function(){var e=document.getElementById("mobile-menu");e.removeEventListener("click",t,!1);var n=document.querySelector(".arkdes-txt"),i=n.parentNode;i.insertBefore(n,i.firstChild)}}),window.onscroll=function(){changeBackgroundColor(e)}},!1);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJlbnF1aXJlLmpzIiwicGljdHVyZWZpbGwuanMiLCJ3b3cuanMiXSwibmFtZXMiOlsiY2hhbmdlQmFja2dyb3VuZENvbG9yIiwiZWwiLCJ5Iiwid2luZG93IiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFRvcCIsImNsYXNzTmFtZSIsInRvZ2dsZUNsYXNzIiwiZWxlbWVudCIsImNsYXNzU3RyaW5nIiwibmFtZUluZGV4IiwiaW5kZXhPZiIsInN1YnN0ciIsImxlbmd0aCIsIm5hbWUiLCJjb250ZXh0IiwiZmFjdG9yeSIsIm1hdGNoTWVkaWEiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsImVhY2giLCJjb2xsZWN0aW9uIiwiZm4iLCJjb250IiwiaSIsImlzQXJyYXkiLCJ0YXJnZXQiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImFwcGx5IiwiaXNGdW5jdGlvbiIsIlF1ZXJ5SGFuZGxlciIsIm9wdGlvbnMiLCJkZWZlclNldHVwIiwic2V0dXAiLCJNZWRpYVF1ZXJ5IiwicXVlcnkiLCJpc1VuY29uZGl0aW9uYWwiLCJoYW5kbGVycyIsIm1xbCIsInNlbGYiLCJsaXN0ZW5lciIsImFzc2VzcyIsImFkZExpc3RlbmVyIiwiTWVkaWFRdWVyeURpc3BhdGNoIiwiRXJyb3IiLCJxdWVyaWVzIiwiYnJvd3NlcklzSW5jYXBhYmxlIiwibWF0Y2hlcyIsImluaXRpYWxpc2VkIiwib24iLCJtYXRjaCIsIm9mZiIsInVubWF0Y2giLCJkZXN0cm95IiwiZXF1YWxzIiwiYWRkSGFuZGxlciIsImhhbmRsZXIiLCJxaCIsInB1c2giLCJyZW1vdmVIYW5kbGVyIiwiaCIsInNwbGljZSIsImNsZWFyIiwicmVtb3ZlTGlzdGVuZXIiLCJhY3Rpb24iLCJyZWdpc3RlciIsInEiLCJzaG91bGREZWdyYWRlIiwidW5yZWdpc3RlciIsInN0eWxlTWVkaWEiLCJtZWRpYSIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsInNjcmlwdCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5mbyIsInR5cGUiLCJpZCIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJnZXRDb21wdXRlZFN0eWxlIiwiY3VycmVudFN0eWxlIiwibWF0Y2hNZWRpdW0iLCJ0ZXh0Iiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJ0ZXh0Q29udGVudCIsIndpZHRoIiwidyIsImRvYyIsImltYWdlIiwicGljdHVyZWZpbGwiLCJvcHQiLCJlbGVtZW50cyIsInBhcmVudCIsImZpcnN0TWF0Y2giLCJjYW5kaWRhdGVzIiwicGYiLCJnZXRBbGxFbGVtZW50cyIsInBsZW4iLCJ1bmRlZmluZWQiLCJub2RlTmFtZSIsInRvVXBwZXJDYXNlIiwibnMiLCJyZWV2YWx1YXRlIiwiZXZhbHVhdGVkIiwicmVtb3ZlVmlkZW9TaGltIiwiZ2V0TWF0Y2giLCJzcmNzZXQiLCJzcmNzZXRTdXBwb3J0ZWQiLCJzaXplc1N1cHBvcnRlZCIsImRvZGdlU3Jjc2V0IiwicHJvY2Vzc1NvdXJjZVNldCIsImFwcGx5QmVzdENhbmRpZGF0ZSIsInJ1blBpY3R1cmVmaWxsIiwiY2hlY2tSZXNpemUiLCJyZXNpemVUaHJvdHRsZSIsIl9waWN0dXJlZmlsbFdvcmtpbmciLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwidGVzdCIsInJlYWR5U3RhdGUiLCJjbGVhckludGVydmFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImF0dGFjaEV2ZW50IiwiSFRNTFBpY3R1cmVFbGVtZW50IiwidHJpbSIsInN0ciIsInJlcGxhY2UiLCJlbmRzV2l0aCIsInN1ZmZpeCIsInJlc3RyaWN0c01peGVkQ29udGVudCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJtYXRjaGVzTWVkaWEiLCJnZXREcHIiLCJkZXZpY2VQaXhlbFJhdGlvIiwiZ2V0V2lkdGhGcm9tTGVuZ3RoIiwicGFyc2VGbG9hdCIsImxlbmd0aEVsIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJyZW1vdmVDaGlsZCIsInR5cGVzIiwiaW1wbGVtZW50YXRpb24iLCJoYXNGZWF0dXJlIiwib25lcnJvciIsIm9ubG9hZCIsInNyYyIsInZlcmlmeVR5cGVTdXBwb3J0Iiwic291cmNlIiwiZ2V0QXR0cmlidXRlIiwicGFyc2VTaXplIiwic291cmNlU2l6ZVN0ciIsImV4ZWMiLCJmaW5kV2lkdGhGcm9tU291cmNlU2l6ZSIsInNvdXJjZVNpemVMaXN0U3RyIiwid2lubmluZ0xlbmd0aCIsInNvdXJjZVNpemVMaXN0Iiwic3BsaXQiLCJsZW4iLCJzb3VyY2VTaXplIiwicGFyc2VkU2l6ZSIsInBhcnNlU3Jjc2V0IiwidXJsIiwicG9zIiwic2VhcmNoIiwiZGVzY3JpcHRvciIsInNsaWNlIiwibGFzdCIsImRlc2Nwb3MiLCJwYXJzZURlc2NyaXB0b3IiLCJzaXplc2F0dHIiLCJyZXNDYW5kaWRhdGUiLCJzaXplcyIsInNpemVEZXNjcmlwdG9yIiwid2lkdGhJbkNzc1BpeGVscyIsInNwbGl0RGVzY3JpcHRvciIsImN1cnIiLCJsYXN0Y2hhciIsInJlcyIsImlzTmFOIiwicGFyc2VJbnQiLCJnZXRDYW5kaWRhdGVzRnJvbVNvdXJjZVNldCIsImZvcm1hdHRlZENhbmRpZGF0ZXMiLCJjYW5kaWRhdGUiLCJyZXNvbHV0aW9uIiwiaW1nIiwicmVtb3ZlQXR0cmlidXRlIiwicGljSW1nIiwiYmVzdENhbmRpZGF0ZSIsInNvcnQiLCJhc2NlbmRpbmdTb3J0IiwidG9Mb3dlckNhc2UiLCJjb25zb2xlIiwid2FybiIsImN1cnJlbnRTcmMiLCJXZWJraXRCYWNrZmFjZVZpc2liaWxpdHkiLCJjdXJyZW50Wm9vbSIsInpvb20iLCJhIiwiYiIsInBpY3R1cmUiLCJ2aWRlb3MiLCJ2aWRlbyIsInZzb3VyY2VzIiwiZWxlbXMiLCJpbWdzIiwiY3VyckltZyIsInNvdXJjZXMiLCJjaGlsZE5vZGVzIiwiaiIsInNsZW4iLCJub2RlVHlwZSIsInR5cGVTdXBwb3J0ZWQiLCJfIiwiSW1hZ2UiLCJyb290IiwibWFrZSIsInZpZXdwb3J0Iiwidmlld3BvcnRXIiwiaGVpZ2h0Iiwidmlld3BvcnRIIiwiY2FsaWJyYXRlIiwiY29vcmRzIiwiY3VzaGlvbiIsIm8iLCJyZWN0YW5nbGUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhc3BlY3QiLCJjYWxsIiwieHBvcnRzIiwid2luIiwiZG9jRWxlbSIsIm1xIiwiYXJndW1lbnRzIiwicGFnZVhPZmZzZXQiLCJzY3JvbGxMZWZ0IiwiciIsInJpZ2h0IiwibGVmdCIsImJvdHRvbSIsInRvcCIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJVdGlsIiwiV2Vha01hcCIsImdldENvbXB1dGVkU3R5bGVSWCIsIl9fYmluZCIsIm1lIiwiX19pbmRleE9mIiwiaXRlbSIsImwiLCJleHRlbmQiLCJjdXN0b20iLCJkZWZhdWx0cyIsImtleSIsInZhbHVlIiwiaXNNb2JpbGUiLCJhZ2VudCIsImFkZEV2ZW50IiwiZWxlbSIsImV2ZW50IiwicmVtb3ZlRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGV0YWNoRXZlbnQiLCJpbm5lckhlaWdodCIsImNsaWVudEhlaWdodCIsIk1veldlYWtNYXAiLCJrZXlzIiwidmFsdWVzIiwiZ2V0IiwiX2kiLCJfbGVuIiwiX3JlZiIsInNldCIsIldlYmtpdE11dGF0aW9uT2JzZXJ2ZXIiLCJNb3pNdXRhdGlvbk9ic2VydmVyIiwibm90U3VwcG9ydGVkIiwib2JzZXJ2ZSIsImdldFByb3BlcnR5VmFsdWUiLCJwcm9wIiwiX2NoYXIiLCJXT1ciLCJzY3JvbGxDYWxsYmFjayIsInNjcm9sbEhhbmRsZXIiLCJzdGFydCIsInNjcm9sbGVkIiwiY29uZmlnIiwidXRpbCIsImFuaW1hdGlvbk5hbWVDYWNoZSIsImJveENsYXNzIiwiYW5pbWF0ZUNsYXNzIiwib2Zmc2V0IiwibW9iaWxlIiwibGl2ZSIsImNhbGxiYWNrIiwiaW5pdCIsImZpbmlzaGVkIiwiYm94Iiwic3RvcHBlZCIsImJveGVzIiwiX3Jlc3VsdHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWxsIiwiZGlzYWJsZWQiLCJyZXNldFN0eWxlIiwiYXBwbHlTdHlsZSIsImludGVydmFsIiwiX3RoaXMiLCJyZWNvcmRzIiwibm9kZSIsInJlY29yZCIsIl9qIiwiX2xlbjEiLCJfayIsIl9sZW4yIiwiX3JlZjEiLCJfcmVzdWx0czEiLCJhZGRlZE5vZGVzIiwiZG9TeW5jIiwiY2hpbGRMaXN0Iiwic3VidHJlZSIsInN0b3AiLCJzeW5jIiwic2hvdyIsImhpZGRlbiIsImRlbGF5IiwiZHVyYXRpb24iLCJpdGVyYXRpb24iLCJhbmltYXRlIiwiY3VzdG9tU3R5bGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ2aXNpYmlsaXR5IiwiY2FjaGVBbmltYXRpb25OYW1lIiwidmVuZG9yU2V0IiwiYW5pbWF0aW9uRHVyYXRpb24iLCJhbmltYXRpb25EZWxheSIsImFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50IiwiYW5pbWF0aW9uTmFtZSIsImNhY2hlZEFuaW1hdGlvbk5hbWUiLCJ2ZW5kb3JzIiwicHJvcGVydGllcyIsInZlbmRvciIsImNoYXJBdCIsInZlbmRvckNTUyIsInByb3BlcnR5IiwicmVzdWx0IiwiZ2V0UHJvcGVydHlDU1NWYWx1ZSIsIl9lcnJvciIsImlzVmlzaWJsZSIsIm9mZnNldFRvcCIsIm9mZnNldFBhcmVudCIsInZpZXdCb3R0b20iLCJ2aWV3VG9wIiwiTWF0aCIsIm1pbiIsIl91dGlsIiwibmF2aWdhdG9yIiwidXNlckFnZW50Iiwic2hvd01lbnUiLCJnZXRFbGVtZW50QnlJZCIsInRvcE5hdiIsInF1ZXJ5U2VsZWN0b3IiLCJlbnF1aXJlIiwibW9iaWxlTWVudSIsImFya2Rlc0ltZyIsImZpcnN0Q2hpbGQiLCJvbnNjcm9sbCJdLCJtYXBwaW5ncyI6IkFBNkNBLFFBQUFBLHVCQUFBQyxHQUNBLEdBQUFDLEdBQUFDLE9BQUFDLGFBQUFDLFNBQUFDLGdCQUFBQyxTQUVBTixHQUFBTyxVQURBTixFQUFBLEdBQ0EsUUFFQSxHQUlBLFFBQUFPLGFBQUFD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QUFDLEdBQUE5VyxTQUFBK1csY0FBQSxPQUNBL1csVUFBQTZXLGVBQUEsUUFFQWxYLHNCQUFBbVgsR0FFQTlXLFNBQUE2VyxlQUFBLGVBQUE5TyxpQkFBQSxRQUFBLFdBQ0EzSCxZQUFBSixTQUFBNlcsZUFBQSxlQUFBLFVBS0FHLFFBQUE3UyxTQUFBLGdDQUNBZixNQUFBLFdBQ0EsR0FBQTZULEdBQUFqWCxTQUFBNlcsZUFBQSxjQUNBSSxHQUFBbFAsaUJBQUEsUUFBQTZPLEdBQUEsRUFFQSxJQUFBTSxHQUFBbFgsU0FBQStXLGNBQUEsZUFDQS9RLEVBQUFrUixFQUFBbFMsVUFDQWdCLEdBQUFmLGFBQUFpUyxFQUFBbFIsRUFBQW1SLGFBRUE3VCxRQUFBLFdBQ0EsR0FBQTJULEdBQUFqWCxTQUFBNlcsZUFBQSxjQUNBSSxHQUFBckcsb0JBQUEsUUFBQWdHLEdBQUEsRUFDQSxJQUFBTSxHQUFBbFgsU0FBQStXLGNBQUEsZUFDQS9RLEVBQUFrUixFQUFBbFMsVUFDQWdCLEdBQUFmLGFBQUFpUyxFQUFBbFIsRUFBQW1SLGVBUUFyWCxPQUFBc1gsU0FBQSxXQUNBelgsc0JBQUFtWCxNQUVBIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIFNpdGUgY29kZVxuICovXG5uZXcgV09XKCkuaW5pdCgpO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oKSB7XG4gIHZhciB0b3BOYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdlwiKTtcbiAgdmFyIG1lbnVUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lbnVcIilcbiAgXG4gIGNoYW5nZUJhY2tncm91bmRDb2xvcih0b3BOYXYpO1xuICBcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZW51LXRvZ2dsZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgdG9nZ2xlQ2xhc3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vYmlsZS1tZW51JyksICdzaG93Jyk7XG4gIH0pO1xuXG4gIFxuICBcbiAgZW5xdWlyZS5yZWdpc3RlcihcInNjcmVlbiBhbmQgKG1heC13aWR0aDo3NjdweClcIiwge1xuICAgIG1hdGNoIDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbW9iaWxlTWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9iaWxlLW1lbnVcIik7XG4gICAgICBtb2JpbGVNZW51LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaG93TWVudSwgZmFsc2UpO1xuICAgICAgXG4gICAgICB2YXIgYXJrZGVzSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hcmtkZXMtaW1nXCIpO1xuICAgICAgdmFyIHBhcmVudCA9IGFya2Rlc0ltZy5wYXJlbnROb2RlO1xuICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShhcmtkZXNJbWcsIHBhcmVudC5maXJzdENoaWxkKTtcbiAgICB9LFxuICAgIHVubWF0Y2ggOiBmdW5jdGlvbigpIHsgICAgXG4gICAgICB2YXIgbW9iaWxlTWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9iaWxlLW1lbnVcIik7XG4gICAgICBtb2JpbGVNZW51LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaG93TWVudSwgZmFsc2UpO1xuICAgICAgdmFyIGFya2Rlc0ltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXJrZGVzLXR4dFwiKTtcbiAgICAgIHZhciBwYXJlbnQgPSBhcmtkZXNJbWcucGFyZW50Tm9kZTtcbiAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoYXJrZGVzSW1nLCBwYXJlbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICB9KTtcbiAgXG4gIGZ1bmN0aW9uIHNob3dNZW51KCkge1xuICAgIHRvZ2dsZUNsYXNzKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2JpbGUtbWVudScpLCAnc2hvdycpO1xuICB9IFxuICAvLyBPbiBzY3JvbGwgYWN0aW9uc1xuICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICBjaGFuZ2VCYWNrZ3JvdW5kQ29sb3IodG9wTmF2KTtcbiAgfVxufSwgZmFsc2UpO1xuXG5cbmZ1bmN0aW9uIGNoYW5nZUJhY2tncm91bmRDb2xvcihlbCkge1xuICB2YXIgeSA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICBpZiAoeSA+IDIwKSB7XG4gICAgZWwuY2xhc3NOYW1lID0gXCJmaXhlZFwiOyBcbiAgfSBlbHNlIHsgICAgICBcbiAgICBlbC5jbGFzc05hbWUgPSBcIlwiOyAgICAgIFxuICB9XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZUNsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICBpZiAoIWVsZW1lbnQgfHwgIWNsYXNzTmFtZSl7IFxuICAgIHJldHVybjsgXG4gIH0gIFxuICB2YXIgY2xhc3NTdHJpbmcgPSBlbGVtZW50LmNsYXNzTmFtZSwgbmFtZUluZGV4ID0gY2xhc3NTdHJpbmcuaW5kZXhPZihjbGFzc05hbWUpO1xuICBpZiAobmFtZUluZGV4ID09IC0xKSB7XG4gICAgY2xhc3NTdHJpbmcgKz0gJyAnICsgY2xhc3NOYW1lO1xuICB9XG4gIGVsc2Uge1xuICAgIGNsYXNzU3RyaW5nID0gY2xhc3NTdHJpbmcuc3Vic3RyKDAsIG5hbWVJbmRleCkgKyBjbGFzc1N0cmluZy5zdWJzdHIobmFtZUluZGV4K2NsYXNzTmFtZS5sZW5ndGgpO1xuICB9XG4gIGVsZW1lbnQuY2xhc3NOYW1lID0gY2xhc3NTdHJpbmc7XG59XG4iLCIvKiFcbiAqIGVucXVpcmUuanMgdjIuMS4yIC0gQXdlc29tZSBNZWRpYSBRdWVyaWVzIGluIEphdmFTY3JpcHRcbiAqIENvcHlyaWdodCAoYykgMjAxNCBOaWNrIFdpbGxpYW1zIC0gaHR0cDovL3dpY2t5Lm5pbGxpYS5tcy9lbnF1aXJlLmpzXG4gKiBMaWNlbnNlOiBNSVQgKGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwKVxuICovXG5cbjsoZnVuY3Rpb24gKG5hbWUsIGNvbnRleHQsIGZhY3RvcnkpIHtcblx0dmFyIG1hdGNoTWVkaWEgPSB3aW5kb3cubWF0Y2hNZWRpYTtcblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkobWF0Y2hNZWRpYSk7XG5cdH1cblx0ZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIChjb250ZXh0W25hbWVdID0gZmFjdG9yeShtYXRjaE1lZGlhKSk7XG5cdFx0fSk7XG5cdH1cblx0ZWxzZSB7XG5cdFx0Y29udGV4dFtuYW1lXSA9IGZhY3RvcnkobWF0Y2hNZWRpYSk7XG5cdH1cbn0oJ2VucXVpcmUnLCB0aGlzLCBmdW5jdGlvbiAobWF0Y2hNZWRpYSkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuICAgIC8qanNoaW50IHVudXNlZDpmYWxzZSAqL1xuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgaXRlcmF0aW5nIG92ZXIgYSBjb2xsZWN0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sbGVjdGlvblxuICAgICAqIEBwYXJhbSBmblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVhY2goY29sbGVjdGlvbiwgZm4pIHtcbiAgICAgICAgdmFyIGkgICAgICA9IDAsXG4gICAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aCxcbiAgICAgICAgICAgIGNvbnQ7XG5cbiAgICAgICAgZm9yKGk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29udCA9IGZuKGNvbGxlY3Rpb25baV0sIGkpO1xuICAgICAgICAgICAgaWYoY29udCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBicmVhazsgLy9hbGxvdyBlYXJseSBleGl0XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGRldGVybWluaW5nIHdoZXRoZXIgdGFyZ2V0IG9iamVjdCBpcyBhbiBhcnJheVxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldCB0aGUgb2JqZWN0IHVuZGVyIHRlc3RcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIGFycmF5LCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0FycmF5KHRhcmdldCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseSh0YXJnZXQpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgd2hldGhlciB0YXJnZXQgb2JqZWN0IGlzIGEgZnVuY3Rpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXQgdGhlIG9iamVjdCB1bmRlciB0ZXN0XG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiBmdW5jdGlvbiwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNGdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0YXJnZXQgPT09ICdmdW5jdGlvbic7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVsZWdhdGUgdG8gaGFuZGxlIGEgbWVkaWEgcXVlcnkgYmVpbmcgbWF0Y2hlZCBhbmQgdW5tYXRjaGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvcHRpb25zLm1hdGNoIGNhbGxiYWNrIGZvciB3aGVuIHRoZSBtZWRpYSBxdWVyeSBpcyBtYXRjaGVkXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gW29wdGlvbnMudW5tYXRjaF0gY2FsbGJhY2sgZm9yIHdoZW4gdGhlIG1lZGlhIHF1ZXJ5IGlzIHVubWF0Y2hlZFxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtvcHRpb25zLnNldHVwXSBvbmUtdGltZSBjYWxsYmFjayB0cmlnZ2VyZWQgdGhlIGZpcnN0IHRpbWUgYSBxdWVyeSBpcyBtYXRjaGVkXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5kZWZlclNldHVwPWZhbHNlXSBzaG91bGQgdGhlIHNldHVwIGNhbGxiYWNrIGJlIHJ1biBpbW1lZGlhdGVseSwgcmF0aGVyIHRoYW4gZmlyc3QgdGltZSBxdWVyeSBpcyBtYXRjaGVkP1xuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFF1ZXJ5SGFuZGxlcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICFvcHRpb25zLmRlZmVyU2V0dXAgJiYgdGhpcy5zZXR1cCgpO1xuICAgIH1cbiAgICBRdWVyeUhhbmRsZXIucHJvdG90eXBlID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjb29yZGluYXRlcyBzZXR1cCBvZiB0aGUgaGFuZGxlclxuICAgICAgICAgKlxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIHNldHVwIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZih0aGlzLm9wdGlvbnMuc2V0dXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuc2V0dXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGlzZWQgPSB0cnVlO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjb29yZGluYXRlcyBzZXR1cCBhbmQgdHJpZ2dlcmluZyBvZiB0aGUgaGFuZGxlclxuICAgICAgICAgKlxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIG9uIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAhdGhpcy5pbml0aWFsaXNlZCAmJiB0aGlzLnNldHVwKCk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMubWF0Y2ggJiYgdGhpcy5vcHRpb25zLm1hdGNoKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNvb3JkaW5hdGVzIHRoZSB1bm1hdGNoIGV2ZW50IGZvciB0aGUgaGFuZGxlclxuICAgICAgICAgKlxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIG9mZiA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnVubWF0Y2ggJiYgdGhpcy5vcHRpb25zLnVubWF0Y2goKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2FsbGVkIHdoZW4gYSBoYW5kbGVyIGlzIHRvIGJlIGRlc3Ryb3llZC5cbiAgICAgICAgICogZGVsZWdhdGVzIHRvIHRoZSBkZXN0cm95IG9yIHVubWF0Y2ggY2FsbGJhY2tzLCBkZXBlbmRpbmcgb24gYXZhaWxhYmlsaXR5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIGRlc3Ryb3kgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kZXN0cm95ID8gdGhpcy5vcHRpb25zLmRlc3Ryb3koKSA6IHRoaXMub2ZmKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGRldGVybWluZXMgZXF1YWxpdHkgYnkgcmVmZXJlbmNlLlxuICAgICAgICAgKiBpZiBvYmplY3QgaXMgc3VwcGxpZWQgY29tcGFyZSBvcHRpb25zLCBpZiBmdW5jdGlvbiwgY29tcGFyZSBtYXRjaCBjYWxsYmFja1xuICAgICAgICAgKlxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHBhcmFtIHtvYmplY3QgfHwgZnVuY3Rpb259IFt0YXJnZXRdIHRoZSB0YXJnZXQgZm9yIGNvbXBhcmlzb25cbiAgICAgICAgICovXG4gICAgICAgIGVxdWFscyA6IGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucyA9PT0gdGFyZ2V0IHx8IHRoaXMub3B0aW9ucy5tYXRjaCA9PT0gdGFyZ2V0O1xuICAgICAgICB9XG5cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudHMgYSBzaW5nbGUgbWVkaWEgcXVlcnksIG1hbmFnZXMgaXQncyBzdGF0ZSBhbmQgcmVnaXN0ZXJlZCBoYW5kbGVycyBmb3IgdGhpcyBxdWVyeVxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5IHRoZSBtZWRpYSBxdWVyeSBzdHJpbmdcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1VuY29uZGl0aW9uYWw9ZmFsc2VdIHdoZXRoZXIgdGhlIG1lZGlhIHF1ZXJ5IHNob3VsZCBydW4gcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoZSBjb25kaXRpb25zIGFyZSBtZXQuIFByaW1hcmlseSBmb3IgaGVscGluZyBvbGRlciBicm93c2VycyBkZWFsIHdpdGggbW9iaWxlLWZpcnN0IGRlc2lnblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1lZGlhUXVlcnkocXVlcnksIGlzVW5jb25kaXRpb25hbCkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gICAgICAgIHRoaXMuaXNVbmNvbmRpdGlvbmFsID0gaXNVbmNvbmRpdGlvbmFsO1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gW107XG4gICAgICAgIHRoaXMubXFsID0gbWF0Y2hNZWRpYShxdWVyeSk7XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24obXFsKSB7XG4gICAgICAgICAgICBzZWxmLm1xbCA9IG1xbDtcbiAgICAgICAgICAgIHNlbGYuYXNzZXNzKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubXFsLmFkZExpc3RlbmVyKHRoaXMubGlzdGVuZXIpO1xuICAgIH1cbiAgICBNZWRpYVF1ZXJ5LnByb3RvdHlwZSA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogYWRkIGEgaGFuZGxlciBmb3IgdGhpcyBxdWVyeSwgdHJpZ2dlcmluZyBpZiBhbHJlYWR5IGFjdGl2ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gaGFuZGxlclxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBoYW5kbGVyLm1hdGNoIGNhbGxiYWNrIGZvciB3aGVuIHF1ZXJ5IGlzIGFjdGl2YXRlZFxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbaGFuZGxlci51bm1hdGNoXSBjYWxsYmFjayBmb3Igd2hlbiBxdWVyeSBpcyBkZWFjdGl2YXRlZFxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbaGFuZGxlci5zZXR1cF0gY2FsbGJhY2sgZm9yIGltbWVkaWF0ZSBleGVjdXRpb24gd2hlbiBhIHF1ZXJ5IGhhbmRsZXIgaXMgcmVnaXN0ZXJlZFxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtoYW5kbGVyLmRlZmVyU2V0dXA9ZmFsc2VdIHNob3VsZCB0aGUgc2V0dXAgY2FsbGJhY2sgYmUgZGVmZXJyZWQgdW50aWwgdGhlIGZpcnN0IHRpbWUgdGhlIGhhbmRsZXIgaXMgbWF0Y2hlZD9cbiAgICAgICAgICovXG4gICAgICAgIGFkZEhhbmRsZXIgOiBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgICAgICB2YXIgcWggPSBuZXcgUXVlcnlIYW5kbGVyKGhhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5wdXNoKHFoKTtcblxuICAgICAgICAgICAgdGhpcy5tYXRjaGVzKCkgJiYgcWgub24oKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmVtb3ZlcyB0aGUgZ2l2ZW4gaGFuZGxlciBmcm9tIHRoZSBjb2xsZWN0aW9uLCBhbmQgY2FsbHMgaXQncyBkZXN0cm95IG1ldGhvZHNcbiAgICAgICAgICogXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0IHx8IGZ1bmN0aW9ufSBoYW5kbGVyIHRoZSBoYW5kbGVyIHRvIHJlbW92ZVxuICAgICAgICAgKi9cbiAgICAgICAgcmVtb3ZlSGFuZGxlciA6IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnM7XG4gICAgICAgICAgICBlYWNoKGhhbmRsZXJzLCBmdW5jdGlvbihoLCBpKSB7XG4gICAgICAgICAgICAgICAgaWYoaC5lcXVhbHMoaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgaC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhaGFuZGxlcnMuc3BsaWNlKGksMSk7IC8vcmVtb3ZlIGZyb20gYXJyYXkgYW5kIGV4aXQgZWFjaCBlYXJseVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgbWVkaWEgcXVlcnkgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYSBtYXRjaFxuICAgICAgICAgKiBcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiBtZWRpYSBxdWVyeSBjYW4gYmUgY29uc2lkZXJlZCBhIG1hdGNoLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgICAgICovXG4gICAgICAgIG1hdGNoZXMgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1xbC5tYXRjaGVzIHx8IHRoaXMuaXNVbmNvbmRpdGlvbmFsO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDbGVhcnMgYWxsIGhhbmRsZXJzIGFuZCB1bmJpbmRzIGV2ZW50c1xuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXIgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGVhY2godGhpcy5oYW5kbGVycywgZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIGhhbmRsZXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm1xbC5yZW1vdmVMaXN0ZW5lcih0aGlzLmxpc3RlbmVyKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMubGVuZ3RoID0gMDsgLy9jbGVhciBhcnJheVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qXG4gICAgICAgICAqIEFzc2Vzc2VzIHRoZSBxdWVyeSwgdHVybmluZyBvbiBhbGwgaGFuZGxlcnMgaWYgaXQgbWF0Y2hlcywgdHVybmluZyB0aGVtIG9mZiBpZiBpdCBkb2Vzbid0IG1hdGNoXG4gICAgICAgICAqL1xuICAgICAgICBhc3Nlc3MgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBhY3Rpb24gPSB0aGlzLm1hdGNoZXMoKSA/ICdvbicgOiAnb2ZmJztcblxuICAgICAgICAgICAgZWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlclthY3Rpb25dKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQWxsb3dzIGZvciByZWdpc3RyYXRpb24gb2YgcXVlcnkgaGFuZGxlcnMuXG4gICAgICogTWFuYWdlcyB0aGUgcXVlcnkgaGFuZGxlcidzIHN0YXRlIGFuZCBpcyByZXNwb25zaWJsZSBmb3Igd2lyaW5nIHVwIGJyb3dzZXIgZXZlbnRzXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNZWRpYVF1ZXJ5RGlzcGF0Y2ggKCkge1xuICAgICAgICBpZighbWF0Y2hNZWRpYSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYXRjaE1lZGlhIG5vdCBwcmVzZW50LCBsZWdhY3kgYnJvd3NlcnMgcmVxdWlyZSBhIHBvbHlmaWxsJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnF1ZXJpZXMgPSB7fTtcbiAgICAgICAgdGhpcy5icm93c2VySXNJbmNhcGFibGUgPSAhbWF0Y2hNZWRpYSgnb25seSBhbGwnKS5tYXRjaGVzO1xuICAgIH1cblxuICAgIE1lZGlhUXVlcnlEaXNwYXRjaC5wcm90b3R5cGUgPSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZ2lzdGVycyBhIGhhbmRsZXIgZm9yIHRoZSBnaXZlbiBtZWRpYSBxdWVyeVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcSB0aGUgbWVkaWEgcXVlcnlcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3QgfHwgQXJyYXkgfHwgRnVuY3Rpb259IG9wdGlvbnMgZWl0aGVyIGEgc2luZ2xlIHF1ZXJ5IGhhbmRsZXIgb2JqZWN0LCBhIGZ1bmN0aW9uLCBvciBhbiBhcnJheSBvZiBxdWVyeSBoYW5kbGVyc1xuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvcHRpb25zLm1hdGNoIGZpcmVkIHdoZW4gcXVlcnkgbWF0Y2hlZFxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbb3B0aW9ucy51bm1hdGNoXSBmaXJlZCB3aGVuIGEgcXVlcnkgaXMgbm8gbG9uZ2VyIG1hdGNoZWRcbiAgICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gW29wdGlvbnMuc2V0dXBdIGZpcmVkIHdoZW4gaGFuZGxlciBmaXJzdCB0cmlnZ2VyZWRcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5kZWZlclNldHVwPWZhbHNlXSB3aGV0aGVyIHNldHVwIHNob3VsZCBiZSBydW4gaW1tZWRpYXRlbHkgb3IgZGVmZXJyZWQgdW50aWwgcXVlcnkgaXMgZmlyc3QgbWF0Y2hlZFxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzaG91bGREZWdyYWRlPWZhbHNlXSB3aGV0aGVyIHRoaXMgcGFydGljdWxhciBtZWRpYSBxdWVyeSBzaG91bGQgYWx3YXlzIHJ1biBvbiBpbmNhcGFibGUgYnJvd3NlcnNcbiAgICAgICAgICovXG4gICAgICAgIHJlZ2lzdGVyIDogZnVuY3Rpb24ocSwgb3B0aW9ucywgc2hvdWxkRGVncmFkZSkge1xuICAgICAgICAgICAgdmFyIHF1ZXJpZXMgICAgICAgICA9IHRoaXMucXVlcmllcyxcbiAgICAgICAgICAgICAgICBpc1VuY29uZGl0aW9uYWwgPSBzaG91bGREZWdyYWRlICYmIHRoaXMuYnJvd3NlcklzSW5jYXBhYmxlO1xuXG4gICAgICAgICAgICBpZighcXVlcmllc1txXSkge1xuICAgICAgICAgICAgICAgIHF1ZXJpZXNbcV0gPSBuZXcgTWVkaWFRdWVyeShxLCBpc1VuY29uZGl0aW9uYWwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL25vcm1hbGlzZSB0byBvYmplY3QgaW4gYW4gYXJyYXlcbiAgICAgICAgICAgIGlmKGlzRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0geyBtYXRjaCA6IG9wdGlvbnMgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCFpc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IFtvcHRpb25zXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVhY2gob3B0aW9ucywgZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIgPSB7IG1hdGNoIDogaGFuZGxlciB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBxdWVyaWVzW3FdLmFkZEhhbmRsZXIoaGFuZGxlcik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHVucmVnaXN0ZXJzIGEgcXVlcnkgYW5kIGFsbCBpdCdzIGhhbmRsZXJzLCBvciBhIHNwZWNpZmljIGhhbmRsZXIgZm9yIGEgcXVlcnlcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHEgdGhlIG1lZGlhIHF1ZXJ5IHRvIHRhcmdldFxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdCB8fCBmdW5jdGlvbn0gW2hhbmRsZXJdIHNwZWNpZmljIGhhbmRsZXIgdG8gdW5yZWdpc3RlclxuICAgICAgICAgKi9cbiAgICAgICAgdW5yZWdpc3RlciA6IGZ1bmN0aW9uKHEsIGhhbmRsZXIpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IHRoaXMucXVlcmllc1txXTtcblxuICAgICAgICAgICAgaWYocXVlcnkpIHtcbiAgICAgICAgICAgICAgICBpZihoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5LnJlbW92ZUhhbmRsZXIoaGFuZGxlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeS5jbGVhcigpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5xdWVyaWVzW3FdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cdHJldHVybiBuZXcgTWVkaWFRdWVyeURpc3BhdGNoKCk7XG5cbn0pKTsiLCIvKiEgUGljdHVyZWZpbGwgLSB2Mi4yLjAgLSAyMDE0LTEwLTMwXG4qIGh0dHA6Ly9zY290dGplaGwuZ2l0aHViLmlvL3BpY3R1cmVmaWxsXG4qIENvcHlyaWdodCAoYykgMjAxNCBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRqZWhsL3BpY3R1cmVmaWxsL2Jsb2IvbWFzdGVyL0F1dGhvcnMudHh0OyBMaWNlbnNlZCBNSVQgKi9cbi8qISBtYXRjaE1lZGlhKCkgcG9seWZpbGwgLSBUZXN0IGEgQ1NTIG1lZGlhIHR5cGUvcXVlcnkgaW4gSlMuIEF1dGhvcnMgJiBjb3B5cmlnaHQgKGMpIDIwMTI6IFNjb3R0IEplaGwsIFBhdWwgSXJpc2gsIE5pY2hvbGFzIFpha2FzLCBEYXZpZCBLbmlnaHQuIER1YWwgTUlUL0JTRCBsaWNlbnNlICovXG5cbndpbmRvdy5tYXRjaE1lZGlhIHx8ICh3aW5kb3cubWF0Y2hNZWRpYSA9IGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAvLyBGb3IgYnJvd3NlcnMgdGhhdCBzdXBwb3J0IG1hdGNoTWVkaXVtIGFwaSBzdWNoIGFzIElFIDkgYW5kIHdlYmtpdFxuICB2YXIgc3R5bGVNZWRpYSA9ICh3aW5kb3cuc3R5bGVNZWRpYSB8fCB3aW5kb3cubWVkaWEpO1xuXG4gIC8vIEZvciB0aG9zZSB0aGF0IGRvbid0IHN1cHBvcnQgbWF0Y2hNZWRpdW1cbiAgaWYgKCFzdHlsZU1lZGlhKSB7XG4gICAgdmFyIHN0eWxlICAgICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKSxcbiAgICAgIHNjcmlwdCAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdLFxuICAgICAgaW5mbyAgICAgICAgPSBudWxsO1xuXG4gICAgc3R5bGUudHlwZSAgPSAndGV4dC9jc3MnO1xuICAgIHN0eWxlLmlkICAgID0gJ21hdGNobWVkaWFqcy10ZXN0JztcblxuICAgIHNjcmlwdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzdHlsZSwgc2NyaXB0KTtcblxuICAgIC8vICdzdHlsZS5jdXJyZW50U3R5bGUnIGlzIHVzZWQgYnkgSUUgPD0gOCBhbmQgJ3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlJyBmb3IgYWxsIG90aGVyIGJyb3dzZXJzXG4gICAgaW5mbyA9ICgnZ2V0Q29tcHV0ZWRTdHlsZScgaW4gd2luZG93KSAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShzdHlsZSwgbnVsbCkgfHwgc3R5bGUuY3VycmVudFN0eWxlO1xuXG4gICAgc3R5bGVNZWRpYSA9IHtcbiAgICAgIG1hdGNoTWVkaXVtOiBmdW5jdGlvbihtZWRpYSkge1xuICAgICAgICB2YXIgdGV4dCA9ICdAbWVkaWEgJyArIG1lZGlhICsgJ3sgI21hdGNobWVkaWFqcy10ZXN0IHsgd2lkdGg6IDFweDsgfSB9JztcblxuICAgICAgICAvLyAnc3R5bGUuc3R5bGVTaGVldCcgaXMgdXNlZCBieSBJRSA8PSA4IGFuZCAnc3R5bGUudGV4dENvbnRlbnQnIGZvciBhbGwgb3RoZXIgYnJvd3NlcnNcbiAgICAgICAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICAgICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSB0ZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRlc3QgaWYgbWVkaWEgcXVlcnkgaXMgdHJ1ZSBvciBmYWxzZVxuICAgICAgICByZXR1cm4gaW5mby53aWR0aCA9PT0gJzFweCc7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbihtZWRpYSkge1xuICAgIHJldHVybiB7XG4gICAgICBtYXRjaGVzOiBzdHlsZU1lZGlhLm1hdGNoTWVkaXVtKG1lZGlhIHx8ICdhbGwnKSxcbiAgICAgIG1lZGlhOiBtZWRpYSB8fCAnYWxsJ1xuICAgIH07XG4gIH07XG59KCkpO1xuLyohIFBpY3R1cmVmaWxsIC0gUmVzcG9uc2l2ZSBJbWFnZXMgdGhhdCB3b3JrIHRvZGF5LlxuKiAgQXV0aG9yOiBTY290dCBKZWhsLCBGaWxhbWVudCBHcm91cCwgMjAxMiAoIG5ldyBwcm9wb3NhbCBpbXBsZW1lbnRlZCBieSBTaGF3biBKYW5zZXBhciApXG4qICBMaWNlbnNlOiBNSVQvR1BMdjJcbiogIFNwZWM6IGh0dHA6Ly9waWN0dXJlLnJlc3BvbnNpdmVpbWFnZXMub3JnL1xuKi9cbihmdW5jdGlvbiggdywgZG9jLCBpbWFnZSApIHtcbiAgLy8gRW5hYmxlIHN0cmljdCBtb2RlXG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8vIElmIHBpY3R1cmUgaXMgc3VwcG9ydGVkLCB3ZWxsLCB0aGF0J3MgYXdlc29tZS4gTGV0J3MgZ2V0IG91dHRhIGhlcmUuLi5cbiAgaWYgKCB3LkhUTUxQaWN0dXJlRWxlbWVudCApIHtcbiAgICB3LnBpY3R1cmVmaWxsID0gZnVuY3Rpb24oKSB7IH07XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gSFRNTCBzaGltfHYgaXQgZm9yIG9sZCBJRSAoSUU5IHdpbGwgc3RpbGwgbmVlZCB0aGUgSFRNTCB2aWRlbyB0YWcgd29ya2Fyb3VuZClcbiAgZG9jLmNyZWF0ZUVsZW1lbnQoIFwicGljdHVyZVwiICk7XG5cbiAgLy8gbG9jYWwgb2JqZWN0IGZvciBtZXRob2QgcmVmZXJlbmNlcyBhbmQgdGVzdGluZyBleHBvc3VyZVxuICB2YXIgcGYgPSB7fTtcblxuICAvLyBuYW1lc3BhY2VcbiAgcGYubnMgPSBcInBpY3R1cmVmaWxsXCI7XG5cbiAgLy8gc3Jjc2V0IHN1cHBvcnQgdGVzdFxuICAoZnVuY3Rpb24oKSB7XG4gICAgcGYuc3Jjc2V0U3VwcG9ydGVkID0gXCJzcmNzZXRcIiBpbiBpbWFnZTtcbiAgICBwZi5zaXplc1N1cHBvcnRlZCA9IFwic2l6ZXNcIiBpbiBpbWFnZTtcbiAgfSkoKTtcblxuICAvLyBqdXN0IGEgc3RyaW5nIHRyaW0gd29ya2Fyb3VuZFxuICBwZi50cmltID0gZnVuY3Rpb24oIHN0ciApIHtcbiAgICByZXR1cm4gc3RyLnRyaW0gPyBzdHIudHJpbSgpIDogc3RyLnJlcGxhY2UoIC9eXFxzK3xcXHMrJC9nLCBcIlwiICk7XG4gIH07XG5cbiAgLy8ganVzdCBhIHN0cmluZyBlbmRzV2l0aCB3b3JrYXJvdW5kXG4gIHBmLmVuZHNXaXRoID0gZnVuY3Rpb24oIHN0ciwgc3VmZml4ICkge1xuICAgIHJldHVybiBzdHIuZW5kc1dpdGggPyBzdHIuZW5kc1dpdGgoIHN1ZmZpeCApIDogc3RyLmluZGV4T2YoIHN1ZmZpeCwgc3RyLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGggKSAhPT0gLTE7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNob3J0Y3V0IG1ldGhvZCBmb3IgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYmFwcHNlYy9zcGVjcy9taXhlZGNvbnRlbnQvI3Jlc3RyaWN0cy1taXhlZC1jb250ZW50ICggZm9yIGVhc3kgb3ZlcnJpZGluZyBpbiB0ZXN0cyApXG4gICAqL1xuICBwZi5yZXN0cmljdHNNaXhlZENvbnRlbnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gXCJodHRwczpcIjtcbiAgfTtcbiAgLyoqXG4gICAqIFNob3J0Y3V0IG1ldGhvZCBmb3IgbWF0Y2hNZWRpYSAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxuICAgKi9cblxuICBwZi5tYXRjaGVzTWVkaWEgPSBmdW5jdGlvbiggbWVkaWEgKSB7XG4gICAgcmV0dXJuIHcubWF0Y2hNZWRpYSAmJiB3Lm1hdGNoTWVkaWEoIG1lZGlhICkubWF0Y2hlcztcbiAgfTtcblxuICAvLyBTaG9ydGN1dCBtZXRob2QgZm9yIGBkZXZpY2VQaXhlbFJhdGlvYCAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxuICBwZi5nZXREcHIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKCB3LmRldmljZVBpeGVsUmF0aW8gfHwgMSApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgd2lkdGggaW4gY3NzIHBpeGVsIHZhbHVlIGZyb20gYSBcImxlbmd0aFwiIHZhbHVlXG4gICAqIGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzcy12YWx1ZXMtMy8jbGVuZ3RoLXZhbHVlXG4gICAqL1xuICBwZi5nZXRXaWR0aEZyb21MZW5ndGggPSBmdW5jdGlvbiggbGVuZ3RoICkge1xuICAgIC8vIElmIGEgbGVuZ3RoIGlzIHNwZWNpZmllZCBhbmQgZG9lc27igJl0IGNvbnRhaW4gYSBwZXJjZW50YWdlLCBhbmQgaXQgaXMgZ3JlYXRlciB0aGFuIDAgb3IgdXNpbmcgYGNhbGNgLCB1c2UgaXQuIEVsc2UsIHVzZSB0aGUgYDEwMHZ3YCBkZWZhdWx0LlxuICAgIGxlbmd0aCA9IGxlbmd0aCAmJiBsZW5ndGguaW5kZXhPZiggXCIlXCIgKSA+IC0xID09PSBmYWxzZSAmJiAoIHBhcnNlRmxvYXQoIGxlbmd0aCApID4gMCB8fCBsZW5ndGguaW5kZXhPZiggXCJjYWxjKFwiICkgPiAtMSApID8gbGVuZ3RoIDogXCIxMDB2d1wiO1xuXG4gICAgLyoqXG4gICAgICogSWYgbGVuZ3RoIGlzIHNwZWNpZmllZCBpbiAgYHZ3YCB1bml0cywgdXNlIGAlYCBpbnN0ZWFkIHNpbmNlIHRoZSBkaXYgd2XigJlyZSBtZWFzdXJpbmdcbiAgICAgKiBpcyBpbmplY3RlZCBhdCB0aGUgdG9wIG9mIHRoZSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIFRPRE86IG1heWJlIHdlIHNob3VsZCBwdXQgdGhpcyBiZWhpbmQgYSBmZWF0dXJlIHRlc3QgZm9yIGB2d2A/XG4gICAgICovXG4gICAgbGVuZ3RoID0gbGVuZ3RoLnJlcGxhY2UoIFwidndcIiwgXCIlXCIgKTtcblxuICAgIC8vIENyZWF0ZSBhIGNhY2hlZCBlbGVtZW50IGZvciBnZXR0aW5nIGxlbmd0aCB2YWx1ZSB3aWR0aHNcbiAgICBpZiAoICFwZi5sZW5ndGhFbCApIHtcbiAgICAgIHBmLmxlbmd0aEVsID0gZG9jLmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcblxuICAgICAgLy8gUG9zaXRpb25pbmcgc3R5bGVzIGhlbHAgcHJldmVudCBwYWRkaW5nL21hcmdpbi93aWR0aCBvbiBgaHRtbGAgb3IgYGJvZHlgIGZyb20gdGhyb3dpbmcgY2FsY3VsYXRpb25zIG9mZi5cbiAgICAgIHBmLmxlbmd0aEVsLnN0eWxlLmNzc1RleHQgPSBcImJvcmRlcjowO2Rpc3BsYXk6YmxvY2s7Zm9udC1zaXplOjFlbTtsZWZ0OjA7bWFyZ2luOjA7cGFkZGluZzowO3Bvc2l0aW9uOmFic29sdXRlO3Zpc2liaWxpdHk6aGlkZGVuXCI7XG4gICAgfVxuXG4gICAgcGYubGVuZ3RoRWwuc3R5bGUud2lkdGggPSBsZW5ndGg7XG5cbiAgICBkb2MuYm9keS5hcHBlbmRDaGlsZChwZi5sZW5ndGhFbCk7XG5cbiAgICAvLyBBZGQgYSBjbGFzcywgc28gdGhhdCBldmVyeW9uZSBrbm93cyB3aGVyZSB0aGlzIGVsZW1lbnQgY29tZXMgZnJvbVxuICAgIHBmLmxlbmd0aEVsLmNsYXNzTmFtZSA9IFwiaGVscGVyLWZyb20tcGljdHVyZWZpbGwtanNcIjtcblxuICAgIGlmICggcGYubGVuZ3RoRWwub2Zmc2V0V2lkdGggPD0gMCApIHtcbiAgICAgIC8vIFNvbWV0aGluZyBoYXMgZ29uZSB3cm9uZy4gYGNhbGMoKWAgaXMgaW4gdXNlIGFuZCB1bnN1cHBvcnRlZCwgbW9zdCBsaWtlbHkuIERlZmF1bHQgdG8gYDEwMHZ3YCAoYDEwMCVgLCBmb3IgYnJvYWRlciBzdXBwb3J0Lik6XG4gICAgICBwZi5sZW5ndGhFbC5zdHlsZS53aWR0aCA9IGRvYy5kb2N1bWVudEVsZW1lbnQub2Zmc2V0V2lkdGggKyBcInB4XCI7XG4gICAgfVxuXG4gICAgdmFyIG9mZnNldFdpZHRoID0gcGYubGVuZ3RoRWwub2Zmc2V0V2lkdGg7XG5cbiAgICBkb2MuYm9keS5yZW1vdmVDaGlsZCggcGYubGVuZ3RoRWwgKTtcblxuICAgIHJldHVybiBvZmZzZXRXaWR0aDtcbiAgfTtcblxuICAvLyBjb250YWluZXIgb2Ygc3VwcG9ydGVkIG1pbWUgdHlwZXMgdGhhdCBvbmUgbWlnaHQgbmVlZCB0byBxdWFsaWZ5IGJlZm9yZSB1c2luZ1xuICBwZi50eXBlcyA9ICB7fTtcblxuICAvLyBBZGQgc3VwcG9ydCBmb3Igc3RhbmRhcmQgbWltZSB0eXBlc1xuICBwZi50eXBlc1sgXCJpbWFnZS9qcGVnXCIgXSA9IHRydWU7XG4gIHBmLnR5cGVzWyBcImltYWdlL2dpZlwiIF0gPSB0cnVlO1xuICBwZi50eXBlc1sgXCJpbWFnZS9wbmdcIiBdID0gdHJ1ZTtcblxuICAvLyB0ZXN0IHN2ZyBzdXBwb3J0XG4gIHBmLnR5cGVzWyBcImltYWdlL3N2Zyt4bWxcIiBdID0gZG9jLmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoXCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0ltYWdlXCIsIFwiMS4xXCIpO1xuXG4gIC8vIHRlc3Qgd2VicCBzdXBwb3J0LCBvbmx5IHdoZW4gdGhlIG1hcmt1cCBjYWxscyBmb3IgaXRcbiAgcGYudHlwZXNbIFwiaW1hZ2Uvd2VicFwiIF0gPSBmdW5jdGlvbigpIHtcbiAgICAvLyBiYXNlZCBvbiBNb2Rlcm5penIncyBsb3NzbGVzcyBpbWctd2VicCB0ZXN0XG4gICAgLy8gbm90ZTogYXN5bmNocm9ub3VzXG4gICAgdmFyIHR5cGUgPSBcImltYWdlL3dlYnBcIjtcblxuICAgIGltYWdlLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIHBmLnR5cGVzWyB0eXBlIF0gPSBmYWxzZTtcbiAgICAgIHBpY3R1cmVmaWxsKCk7XG4gICAgfTtcbiAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHBmLnR5cGVzWyB0eXBlIF0gPSBpbWFnZS53aWR0aCA9PT0gMTtcbiAgICAgIHBpY3R1cmVmaWxsKCk7XG4gICAgfTtcbiAgICBpbWFnZS5zcmMgPSBcImRhdGE6aW1hZ2Uvd2VicDtiYXNlNjQsVWtsR1JoNEFBQUJYUlVKUVZsQTRUQkVBQUFBdkFBQUFBQWZRLy83M3YvK0JpT2gvQUFBPVwiO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUYWtlcyBhIHNvdXJjZSBlbGVtZW50IGFuZCBjaGVja3MgaWYgaXRzIHR5cGUgYXR0cmlidXRlIGlzIHByZXNlbnQgYW5kIGlmIHNvLCBzdXBwb3J0ZWRcbiAgICogTm90ZTogZm9yIHR5cGUgdGVzdHMgdGhhdCByZXF1aXJlIGEgYXN5bmMgbG9naWMsXG4gICAqIHlvdSBjYW4gZGVmaW5lIHRoZW0gYXMgYSBmdW5jdGlvbiB0aGF0J2xsIHJ1biBvbmx5IGlmIHRoYXQgdHlwZSBuZWVkcyB0byBiZSB0ZXN0ZWQuIEp1c3QgbWFrZSB0aGUgdGVzdCBmdW5jdGlvbiBjYWxsIHBpY3R1cmVmaWxsIGFnYWluIHdoZW4gaXQgaXMgY29tcGxldGUuXG4gICAqIHNlZSB0aGUgYXN5bmMgd2VicCB0ZXN0IGFib3ZlIGZvciBleGFtcGxlXG4gICAqL1xuICBwZi52ZXJpZnlUeXBlU3VwcG9ydCA9IGZ1bmN0aW9uKCBzb3VyY2UgKSB7XG4gICAgdmFyIHR5cGUgPSBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcInR5cGVcIiApO1xuICAgIC8vIGlmIHR5cGUgYXR0cmlidXRlIGV4aXN0cywgcmV0dXJuIHRlc3QgcmVzdWx0LCBvdGhlcndpc2UgcmV0dXJuIHRydWVcbiAgICBpZiAoIHR5cGUgPT09IG51bGwgfHwgdHlwZSA9PT0gXCJcIiApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpZiB0aGUgdHlwZSB0ZXN0IGlzIGEgZnVuY3Rpb24sIHJ1biBpdCBhbmQgcmV0dXJuIFwicGVuZGluZ1wiIHN0YXR1cy4gVGhlIGZ1bmN0aW9uIHdpbGwgcmVydW4gcGljdHVyZWZpbGwgb24gcGVuZGluZyBlbGVtZW50cyBvbmNlIGZpbmlzaGVkLlxuICAgICAgaWYgKCB0eXBlb2YoIHBmLnR5cGVzWyB0eXBlIF0gKSA9PT0gXCJmdW5jdGlvblwiICkge1xuICAgICAgICBwZi50eXBlc1sgdHlwZSBdKCk7XG4gICAgICAgIHJldHVybiBcInBlbmRpbmdcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwZi50eXBlc1sgdHlwZSBdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBQYXJzZXMgYW4gaW5kaXZpZHVhbCBgc2l6ZWAgYW5kIHJldHVybnMgdGhlIGxlbmd0aCwgYW5kIG9wdGlvbmFsIG1lZGlhIHF1ZXJ5XG4gIHBmLnBhcnNlU2l6ZSA9IGZ1bmN0aW9uKCBzb3VyY2VTaXplU3RyICkge1xuICAgIHZhciBtYXRjaCA9IC8oXFwoW14pXStcXCkpP1xccyooLispL2cuZXhlYyggc291cmNlU2l6ZVN0ciApO1xuICAgIHJldHVybiB7XG4gICAgICBtZWRpYTogbWF0Y2ggJiYgbWF0Y2hbMV0sXG4gICAgICBsZW5ndGg6IG1hdGNoICYmIG1hdGNoWzJdXG4gICAgfTtcbiAgfTtcblxuICAvLyBUYWtlcyBhIHN0cmluZyBvZiBzaXplcyBhbmQgcmV0dXJucyB0aGUgd2lkdGggaW4gcGl4ZWxzIGFzIGEgbnVtYmVyXG4gIHBmLmZpbmRXaWR0aEZyb21Tb3VyY2VTaXplID0gZnVuY3Rpb24oIHNvdXJjZVNpemVMaXN0U3RyICkge1xuICAgIC8vIFNwbGl0IHVwIHNvdXJjZSBzaXplIGxpc3QsIGllICggbWF4LXdpZHRoOiAzMGVtICkgMTAwJSwgKCBtYXgtd2lkdGg6IDUwZW0gKSA1MCUsIDMzJVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIChtaW4td2lkdGg6MzBlbSkgY2FsYygzMCUgLSAxNXB4KVxuICAgIHZhciBzb3VyY2VTaXplTGlzdCA9IHBmLnRyaW0oIHNvdXJjZVNpemVMaXN0U3RyICkuc3BsaXQoIC9cXHMqLFxccyovICksXG4gICAgICB3aW5uaW5nTGVuZ3RoO1xuXG4gICAgZm9yICggdmFyIGkgPSAwLCBsZW4gPSBzb3VyY2VTaXplTGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgIC8vIE1hdGNoIDxtZWRpYS1jb25kaXRpb24+PyBsZW5ndGgsIGllICggbWluLXdpZHRoOiA1MGVtICkgMTAwJVxuICAgICAgdmFyIHNvdXJjZVNpemUgPSBzb3VyY2VTaXplTGlzdFsgaSBdLFxuICAgICAgICAvLyBTcGxpdCBcIiggbWluLXdpZHRoOiA1MGVtICkgMTAwJVwiIGludG8gc2VwYXJhdGUgc3RyaW5nc1xuICAgICAgICBwYXJzZWRTaXplID0gcGYucGFyc2VTaXplKCBzb3VyY2VTaXplICksXG4gICAgICAgIGxlbmd0aCA9IHBhcnNlZFNpemUubGVuZ3RoLFxuICAgICAgICBtZWRpYSA9IHBhcnNlZFNpemUubWVkaWE7XG5cbiAgICAgIGlmICggIWxlbmd0aCApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoICFtZWRpYSB8fCBwZi5tYXRjaGVzTWVkaWEoIG1lZGlhICkgKSB7XG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIG1lZGlhIHF1ZXJ5IG9yIGl0IG1hdGNoZXMsIGNob29zZSB0aGlzIGFzIG91ciB3aW5uaW5nIGxlbmd0aFxuICAgICAgICAvLyBhbmQgZW5kIGFsZ29yaXRobVxuICAgICAgICB3aW5uaW5nTGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBwYXNzIHRoZSBsZW5ndGggdG8gYSBtZXRob2QgdGhhdCBjYW4gcHJvcGVybHkgZGV0ZXJtaW5lIGxlbmd0aFxuICAgIC8vIGluIHBpeGVscyBiYXNlZCBvbiB0aGVzZSBmb3JtYXRzOiBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MtdmFsdWVzLTMvI2xlbmd0aC12YWx1ZVxuICAgIHJldHVybiBwZi5nZXRXaWR0aEZyb21MZW5ndGgoIHdpbm5pbmdMZW5ndGggKTtcbiAgfTtcblxuICBwZi5wYXJzZVNyY3NldCA9IGZ1bmN0aW9uKCBzcmNzZXQgKSB7XG4gICAgLyoqXG4gICAgICogQSBsb3Qgb2YgdGhpcyB3YXMgcHVsbGVkIGZyb20gQm9yaXMgU211c+KAmSBwYXJzZXIgZm9yIHRoZSBub3ctZGVmdW5jdCBXSEFUV0cgYHNyY3NldGBcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vYm9yaXNtdXMvc3Jjc2V0LXBvbHlmaWxsL2Jsb2IvbWFzdGVyL2pzL3NyY3NldC1pbmZvLmpzXG4gICAgICpcbiAgICAgKiAxLiBMZXQgaW5wdXQgKGBzcmNzZXRgKSBiZSB0aGUgdmFsdWUgcGFzc2VkIHRvIHRoaXMgYWxnb3JpdGhtLlxuICAgICAqIDIuIExldCBwb3NpdGlvbiBiZSBhIHBvaW50ZXIgaW50byBpbnB1dCwgaW5pdGlhbGx5IHBvaW50aW5nIGF0IHRoZSBzdGFydCBvZiB0aGUgc3RyaW5nLlxuICAgICAqIDMuIExldCByYXcgY2FuZGlkYXRlcyBiZSBhbiBpbml0aWFsbHkgZW1wdHkgb3JkZXJlZCBsaXN0IG9mIFVSTHMgd2l0aCBhc3NvY2lhdGVkXG4gICAgICogICAgdW5wYXJzZWQgZGVzY3JpcHRvcnMuIFRoZSBvcmRlciBvZiBlbnRyaWVzIGluIHRoZSBsaXN0IGlzIHRoZSBvcmRlciBpbiB3aGljaCBlbnRyaWVzXG4gICAgICogICAgYXJlIGFkZGVkIHRvIHRoZSBsaXN0LlxuICAgICAqL1xuICAgIHZhciBjYW5kaWRhdGVzID0gW107XG5cbiAgICB3aGlsZSAoIHNyY3NldCAhPT0gXCJcIiApIHtcbiAgICAgIHNyY3NldCA9IHNyY3NldC5yZXBsYWNlKCAvXlxccysvZywgXCJcIiApO1xuXG4gICAgICAvLyA1LiBDb2xsZWN0IGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyB0aGF0IGFyZSBub3Qgc3BhY2UgY2hhcmFjdGVycywgYW5kIGxldCB0aGF0IGJlIHVybC5cbiAgICAgIHZhciBwb3MgPSBzcmNzZXQuc2VhcmNoKC9cXHMvZyksXG4gICAgICAgIHVybCwgZGVzY3JpcHRvciA9IG51bGw7XG5cbiAgICAgIGlmICggcG9zICE9PSAtMSApIHtcbiAgICAgICAgdXJsID0gc3Jjc2V0LnNsaWNlKCAwLCBwb3MgKTtcblxuICAgICAgICB2YXIgbGFzdCA9IHVybC5zbGljZSgtMSk7XG5cbiAgICAgICAgLy8gNi4gSWYgdXJsIGVuZHMgd2l0aCBhIFUrMDAyQyBDT01NQSBjaGFyYWN0ZXIgKCwpLCByZW1vdmUgdGhhdCBjaGFyYWN0ZXIgZnJvbSB1cmxcbiAgICAgICAgLy8gYW5kIGxldCBkZXNjcmlwdG9ycyBiZSB0aGUgZW1wdHkgc3RyaW5nLiBPdGhlcndpc2UsIGZvbGxvdyB0aGVzZSBzdWJzdGVwc1xuICAgICAgICAvLyA2LjEuIElmIHVybCBpcyBlbXB0eSwgdGhlbiBqdW1wIHRvIHRoZSBzdGVwIGxhYmVsZWQgZGVzY3JpcHRvciBwYXJzZXIuXG5cbiAgICAgICAgaWYgKCBsYXN0ID09PSBcIixcIiB8fCB1cmwgPT09IFwiXCIgKSB7XG4gICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoIC8sKyQvLCBcIlwiICk7XG4gICAgICAgICAgZGVzY3JpcHRvciA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgc3Jjc2V0ID0gc3Jjc2V0LnNsaWNlKCBwb3MgKyAxICk7XG5cbiAgICAgICAgLy8gNi4yLiBDb2xsZWN0IGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyB0aGF0IGFyZSBub3QgVSswMDJDIENPTU1BIGNoYXJhY3RlcnMgKCwpLCBhbmRcbiAgICAgICAgLy8gbGV0IHRoYXQgYmUgZGVzY3JpcHRvcnMuXG4gICAgICAgIGlmICggZGVzY3JpcHRvciA9PT0gbnVsbCApIHtcbiAgICAgICAgICB2YXIgZGVzY3BvcyA9IHNyY3NldC5pbmRleE9mKCBcIixcIiApO1xuICAgICAgICAgIGlmICggZGVzY3BvcyAhPT0gLTEgKSB7XG4gICAgICAgICAgICBkZXNjcmlwdG9yID0gc3Jjc2V0LnNsaWNlKCAwLCBkZXNjcG9zICk7XG4gICAgICAgICAgICBzcmNzZXQgPSBzcmNzZXQuc2xpY2UoIGRlc2Nwb3MgKyAxICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlc2NyaXB0b3IgPSBzcmNzZXQ7XG4gICAgICAgICAgICBzcmNzZXQgPSBcIlwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXJsID0gc3Jjc2V0O1xuICAgICAgICBzcmNzZXQgPSBcIlwiO1xuICAgICAgfVxuXG4gICAgICAvLyA3LiBBZGQgdXJsIHRvIHJhdyBjYW5kaWRhdGVzLCBhc3NvY2lhdGVkIHdpdGggZGVzY3JpcHRvcnMuXG4gICAgICBpZiAoIHVybCB8fCBkZXNjcmlwdG9yICkge1xuICAgICAgICBjYW5kaWRhdGVzLnB1c2goe1xuICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgIGRlc2NyaXB0b3I6IGRlc2NyaXB0b3JcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjYW5kaWRhdGVzO1xuICB9O1xuXG4gIHBmLnBhcnNlRGVzY3JpcHRvciA9IGZ1bmN0aW9uKCBkZXNjcmlwdG9yLCBzaXplc2F0dHIgKSB7XG4gICAgLy8gMTEuIERlc2NyaXB0b3IgcGFyc2VyOiBMZXQgY2FuZGlkYXRlcyBiZSBhbiBpbml0aWFsbHkgZW1wdHkgc291cmNlIHNldC4gVGhlIG9yZGVyIG9mIGVudHJpZXMgaW4gdGhlIGxpc3RcbiAgICAvLyBpcyB0aGUgb3JkZXIgaW4gd2hpY2ggZW50cmllcyBhcmUgYWRkZWQgdG8gdGhlIGxpc3QuXG4gICAgdmFyIHNpemVzID0gc2l6ZXNhdHRyIHx8IFwiMTAwdndcIixcbiAgICAgIHNpemVEZXNjcmlwdG9yID0gZGVzY3JpcHRvciAmJiBkZXNjcmlwdG9yLnJlcGxhY2UoIC8oXlxccyt8XFxzKyQpL2csIFwiXCIgKSxcbiAgICAgIHdpZHRoSW5Dc3NQaXhlbHMgPSBwZi5maW5kV2lkdGhGcm9tU291cmNlU2l6ZSggc2l6ZXMgKSxcbiAgICAgIHJlc0NhbmRpZGF0ZTtcblxuICAgICAgaWYgKCBzaXplRGVzY3JpcHRvciApIHtcbiAgICAgICAgdmFyIHNwbGl0RGVzY3JpcHRvciA9IHNpemVEZXNjcmlwdG9yLnNwbGl0KFwiIFwiKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gc3BsaXREZXNjcmlwdG9yLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdmFyIGN1cnIgPSBzcGxpdERlc2NyaXB0b3JbIGkgXSxcbiAgICAgICAgICAgIGxhc3RjaGFyID0gY3VyciAmJiBjdXJyLnNsaWNlKCBjdXJyLmxlbmd0aCAtIDEgKTtcblxuICAgICAgICAgIGlmICggKCBsYXN0Y2hhciA9PT0gXCJoXCIgfHwgbGFzdGNoYXIgPT09IFwid1wiICkgJiYgIXBmLnNpemVzU3VwcG9ydGVkICkge1xuICAgICAgICAgICAgcmVzQ2FuZGlkYXRlID0gcGFyc2VGbG9hdCggKCBwYXJzZUludCggY3VyciwgMTAgKSAvIHdpZHRoSW5Dc3NQaXhlbHMgKSApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIGxhc3RjaGFyID09PSBcInhcIiApIHtcbiAgICAgICAgICAgIHZhciByZXMgPSBjdXJyICYmIHBhcnNlRmxvYXQoIGN1cnIsIDEwICk7XG4gICAgICAgICAgICByZXNDYW5kaWRhdGUgPSByZXMgJiYgIWlzTmFOKCByZXMgKSA/IHJlcyA6IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgcmV0dXJuIHJlc0NhbmRpZGF0ZSB8fCAxO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUYWtlcyBhIHNyY3NldCBpbiB0aGUgZm9ybSBvZiB1cmwvXG4gICAqIGV4LiBcImltYWdlcy9waWMtbWVkaXVtLnBuZyAxeCwgaW1hZ2VzL3BpYy1tZWRpdW0tMngucG5nIDJ4XCIgb3JcbiAgICogICAgIFwiaW1hZ2VzL3BpYy1tZWRpdW0ucG5nIDQwMHcsIGltYWdlcy9waWMtbWVkaXVtLTJ4LnBuZyA4MDB3XCIgb3JcbiAgICogICAgIFwiaW1hZ2VzL3BpYy1zbWFsbC5wbmdcIlxuICAgKiBHZXQgYW4gYXJyYXkgb2YgaW1hZ2UgY2FuZGlkYXRlcyBpbiB0aGUgZm9ybSBvZlxuICAgKiAgICAgIHt1cmw6IFwiL2Zvby9iYXIucG5nXCIsIHJlc29sdXRpb246IDF9XG4gICAqIHdoZXJlIHJlc29sdXRpb24gaXMgaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy0zLyNyZXNvbHV0aW9uLXZhbHVlXG4gICAqIElmIHNpemVzIGlzIHNwZWNpZmllZCwgcmVzb2x1dGlvbiBpcyBjYWxjdWxhdGVkXG4gICAqL1xuICBwZi5nZXRDYW5kaWRhdGVzRnJvbVNvdXJjZVNldCA9IGZ1bmN0aW9uKCBzcmNzZXQsIHNpemVzICkge1xuICAgIHZhciBjYW5kaWRhdGVzID0gcGYucGFyc2VTcmNzZXQoIHNyY3NldCApLFxuICAgICAgZm9ybWF0dGVkQ2FuZGlkYXRlcyA9IFtdO1xuXG4gICAgZm9yICggdmFyIGkgPSAwLCBsZW4gPSBjYW5kaWRhdGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xuICAgICAgdmFyIGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbIGkgXTtcblxuICAgICAgZm9ybWF0dGVkQ2FuZGlkYXRlcy5wdXNoKHtcbiAgICAgICAgdXJsOiBjYW5kaWRhdGUudXJsLFxuICAgICAgICByZXNvbHV0aW9uOiBwZi5wYXJzZURlc2NyaXB0b3IoIGNhbmRpZGF0ZS5kZXNjcmlwdG9yLCBzaXplcyApXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGZvcm1hdHRlZENhbmRpZGF0ZXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIGlmIGl0J3MgYW4gaW1nIGVsZW1lbnQgYW5kIGl0IGhhcyBhIHNyY3NldCBwcm9wZXJ0eSxcbiAgICogd2UgbmVlZCB0byByZW1vdmUgdGhlIGF0dHJpYnV0ZSBzbyB3ZSBjYW4gbWFuaXB1bGF0ZSBzcmNcbiAgICogKHRoZSBwcm9wZXJ0eSdzIGV4aXN0ZW5jZSBpbmZlcnMgbmF0aXZlIHNyY3NldCBzdXBwb3J0LCBhbmQgYSBzcmNzZXQtc3VwcG9ydGluZyBicm93c2VyIHdpbGwgcHJpb3JpdGl6ZSBzcmNzZXQncyB2YWx1ZSBvdmVyIG91ciB3aW5uaW5nIHBpY3R1cmUgY2FuZGlkYXRlKVxuICAgKiB0aGlzIG1vdmVzIHNyY3NldCdzIHZhbHVlIHRvIG1lbW9yeSBmb3IgbGF0ZXIgdXNlIGFuZCByZW1vdmVzIHRoZSBhdHRyXG4gICAqL1xuICBwZi5kb2RnZVNyY3NldCA9IGZ1bmN0aW9uKCBpbWcgKSB7XG4gICAgaWYgKCBpbWcuc3Jjc2V0ICkge1xuICAgICAgaW1nWyBwZi5ucyBdLnNyY3NldCA9IGltZy5zcmNzZXQ7XG4gICAgICBpbWcucmVtb3ZlQXR0cmlidXRlKCBcInNyY3NldFwiICk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEFjY2VwdCBhIHNvdXJjZSBvciBpbWcgZWxlbWVudCBhbmQgcHJvY2VzcyBpdHMgc3Jjc2V0IGFuZCBzaXplcyBhdHRyc1xuICBwZi5wcm9jZXNzU291cmNlU2V0ID0gZnVuY3Rpb24oIGVsICkge1xuICAgIHZhciBzcmNzZXQgPSBlbC5nZXRBdHRyaWJ1dGUoIFwic3Jjc2V0XCIgKSxcbiAgICAgIHNpemVzID0gZWwuZ2V0QXR0cmlidXRlKCBcInNpemVzXCIgKSxcbiAgICAgIGNhbmRpZGF0ZXMgPSBbXTtcblxuICAgIC8vIGlmIGl0J3MgYW4gaW1nIGVsZW1lbnQsIHVzZSB0aGUgY2FjaGVkIHNyY3NldCBwcm9wZXJ0eSAoZGVmaW5lZCBvciBub3QpXG4gICAgaWYgKCBlbC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIklNR1wiICYmIGVsWyBwZi5ucyBdICYmIGVsWyBwZi5ucyBdLnNyY3NldCApIHtcbiAgICAgIHNyY3NldCA9IGVsWyBwZi5ucyBdLnNyY3NldDtcbiAgICB9XG5cbiAgICBpZiAoIHNyY3NldCApIHtcbiAgICAgIGNhbmRpZGF0ZXMgPSBwZi5nZXRDYW5kaWRhdGVzRnJvbVNvdXJjZVNldCggc3Jjc2V0LCBzaXplcyApO1xuICAgIH1cbiAgICByZXR1cm4gY2FuZGlkYXRlcztcbiAgfTtcblxuICBwZi5hcHBseUJlc3RDYW5kaWRhdGUgPSBmdW5jdGlvbiggY2FuZGlkYXRlcywgcGljSW1nICkge1xuICAgIHZhciBjYW5kaWRhdGUsXG4gICAgICBsZW5ndGgsXG4gICAgICBiZXN0Q2FuZGlkYXRlO1xuXG4gICAgY2FuZGlkYXRlcy5zb3J0KCBwZi5hc2NlbmRpbmdTb3J0ICk7XG5cbiAgICBsZW5ndGggPSBjYW5kaWRhdGVzLmxlbmd0aDtcbiAgICBiZXN0Q2FuZGlkYXRlID0gY2FuZGlkYXRlc1sgbGVuZ3RoIC0gMSBdO1xuXG4gICAgZm9yICggdmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgICBjYW5kaWRhdGUgPSBjYW5kaWRhdGVzWyBpIF07XG4gICAgICBpZiAoIGNhbmRpZGF0ZS5yZXNvbHV0aW9uID49IHBmLmdldERwcigpICkge1xuICAgICAgICBiZXN0Q2FuZGlkYXRlID0gY2FuZGlkYXRlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIGJlc3RDYW5kaWRhdGUgJiYgIXBmLmVuZHNXaXRoKCBwaWNJbWcuc3JjLCBiZXN0Q2FuZGlkYXRlLnVybCApICkge1xuICAgICAgaWYgKCBwZi5yZXN0cmljdHNNaXhlZENvbnRlbnQoKSAmJiBiZXN0Q2FuZGlkYXRlLnVybC5zdWJzdHIoMCwgXCJodHRwOlwiLmxlbmd0aCkudG9Mb3dlckNhc2UoKSA9PT0gXCJodHRwOlwiICkge1xuICAgICAgICBpZiAoIHR5cGVvZiBjb25zb2xlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCBcIkJsb2NrZWQgbWl4ZWQgY29udGVudCBpbWFnZSBcIiArIGJlc3RDYW5kaWRhdGUudXJsICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBpY0ltZy5zcmMgPSBiZXN0Q2FuZGlkYXRlLnVybDtcbiAgICAgICAgLy8gY3VycmVudFNyYyBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5IHRvIG1hdGNoXG4gICAgICAgIC8vIGh0dHA6Ly9waWN0dXJlLnJlc3BvbnNpdmVpbWFnZXMub3JnLyN0aGUtaW1nLWVsZW1lbnRcbiAgICAgICAgcGljSW1nLmN1cnJlbnRTcmMgPSBwaWNJbWcuc3JjO1xuXG4gICAgICAgIHZhciBzdHlsZSA9IHBpY0ltZy5zdHlsZSB8fCB7fSxcbiAgICAgICAgICBXZWJraXRCYWNrZmFjZVZpc2liaWxpdHkgPSBcIndlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eVwiIGluIHN0eWxlLFxuICAgICAgICAgIGN1cnJlbnRab29tID0gc3R5bGUuem9vbTtcblxuICAgICAgICBpZiAoV2Via2l0QmFja2ZhY2VWaXNpYmlsaXR5KSB7IC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL3Njb3R0amVobC9waWN0dXJlZmlsbC9pc3N1ZXMvMzMyXG4gICAgICAgICAgc3R5bGUuem9vbSA9IFwiLjk5OVwiO1xuXG4gICAgICAgICAgV2Via2l0QmFja2ZhY2VWaXNpYmlsaXR5ID0gcGljSW1nLm9mZnNldFdpZHRoO1xuXG4gICAgICAgICAgc3R5bGUuem9vbSA9IGN1cnJlbnRab29tO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHBmLmFzY2VuZGluZ1NvcnQgPSBmdW5jdGlvbiggYSwgYiApIHtcbiAgICByZXR1cm4gYS5yZXNvbHV0aW9uIC0gYi5yZXNvbHV0aW9uO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbiBJRTksIDxzb3VyY2U+IGVsZW1lbnRzIGdldCByZW1vdmVkIGlmIHRoZXkgYXJlbid0IGNoaWxkcmVuIG9mXG4gICAqIHZpZGVvIGVsZW1lbnRzLiBUaHVzLCB3ZSBjb25kaXRpb25hbGx5IHdyYXAgc291cmNlIGVsZW1lbnRzXG4gICAqIHVzaW5nIDwhLS1baWYgSUUgOV0+PHZpZGVvIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48IVtlbmRpZl0tLT5cbiAgICogYW5kIG11c3QgYWNjb3VudCBmb3IgdGhhdCBoZXJlIGJ5IG1vdmluZyB0aG9zZSBzb3VyY2UgZWxlbWVudHNcbiAgICogYmFjayBpbnRvIHRoZSBwaWN0dXJlIGVsZW1lbnQuXG4gICAqL1xuICBwZi5yZW1vdmVWaWRlb1NoaW0gPSBmdW5jdGlvbiggcGljdHVyZSApIHtcbiAgICB2YXIgdmlkZW9zID0gcGljdHVyZS5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJ2aWRlb1wiICk7XG4gICAgaWYgKCB2aWRlb3MubGVuZ3RoICkge1xuICAgICAgdmFyIHZpZGVvID0gdmlkZW9zWyAwIF0sXG4gICAgICAgIHZzb3VyY2VzID0gdmlkZW8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwic291cmNlXCIgKTtcbiAgICAgIHdoaWxlICggdnNvdXJjZXMubGVuZ3RoICkge1xuICAgICAgICBwaWN0dXJlLmluc2VydEJlZm9yZSggdnNvdXJjZXNbIDAgXSwgdmlkZW8gKTtcbiAgICAgIH1cbiAgICAgIC8vIFJlbW92ZSB0aGUgdmlkZW8gZWxlbWVudCBvbmNlIHdlJ3JlIGZpbmlzaGVkIHJlbW92aW5nIGl0cyBjaGlsZHJlblxuICAgICAgdmlkZW8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggdmlkZW8gKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEZpbmQgYWxsIGBpbWdgIGVsZW1lbnRzLCBhbmQgYWRkIHRoZW0gdG8gdGhlIGNhbmRpZGF0ZSBsaXN0IGlmIHRoZXkgaGF2ZVxuICAgKiBhIGBwaWN0dXJlYCBwYXJlbnQsIGEgYHNpemVzYCBhdHRyaWJ1dGUgaW4gYmFzaWMgYHNyY3NldGAgc3VwcG9ydGluZyBicm93c2VycyxcbiAgICogYSBgc3Jjc2V0YCBhdHRyaWJ1dGUgYXQgYWxsLCBhbmQgdGhleSBoYXZlbuKAmXQgYmVlbiBldmFsdWF0ZWQgYWxyZWFkeS5cbiAgICovXG4gIHBmLmdldEFsbEVsZW1lbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVsZW1zID0gW10sXG4gICAgICBpbWdzID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcImltZ1wiICk7XG5cbiAgICBmb3IgKCB2YXIgaCA9IDAsIGxlbiA9IGltZ3MubGVuZ3RoOyBoIDwgbGVuOyBoKysgKSB7XG4gICAgICB2YXIgY3VyckltZyA9IGltZ3NbIGggXTtcblxuICAgICAgaWYgKCBjdXJySW1nLnBhcmVudE5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJQSUNUVVJFXCIgfHxcbiAgICAgICggY3VyckltZy5nZXRBdHRyaWJ1dGUoIFwic3Jjc2V0XCIgKSAhPT0gbnVsbCApIHx8IGN1cnJJbWdbIHBmLm5zIF0gJiYgY3VyckltZ1sgcGYubnMgXS5zcmNzZXQgIT09IG51bGwgKSB7XG4gICAgICAgIGVsZW1zLnB1c2goIGN1cnJJbWcgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVsZW1zO1xuICB9O1xuXG4gIHBmLmdldE1hdGNoID0gZnVuY3Rpb24oIGltZywgcGljdHVyZSApIHtcbiAgICB2YXIgc291cmNlcyA9IHBpY3R1cmUuY2hpbGROb2RlcyxcbiAgICAgIG1hdGNoO1xuXG4gICAgLy8gR28gdGhyb3VnaCBlYWNoIGNoaWxkLCBhbmQgaWYgdGhleSBoYXZlIG1lZGlhIHF1ZXJpZXMsIGV2YWx1YXRlIHRoZW1cbiAgICBmb3IgKCB2YXIgaiA9IDAsIHNsZW4gPSBzb3VyY2VzLmxlbmd0aDsgaiA8IHNsZW47IGorKyApIHtcbiAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzWyBqIF07XG5cbiAgICAgIC8vIGlnbm9yZSBub24tZWxlbWVudCBub2Rlc1xuICAgICAgaWYgKCBzb3VyY2Uubm9kZVR5cGUgIT09IDEgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBIaXR0aW5nIHRoZSBgaW1nYCBlbGVtZW50IHRoYXQgc3RhcnRlZCBldmVyeXRoaW5nIHN0b3BzIHRoZSBzZWFyY2ggZm9yIGBzb3VyY2VzYC5cbiAgICAgIC8vIElmIG5vIHByZXZpb3VzIGBzb3VyY2VgIG1hdGNoZXMsIHRoZSBgaW1nYCBpdHNlbGYgaXMgZXZhbHVhdGVkIGxhdGVyLlxuICAgICAgaWYgKCBzb3VyY2UgPT09IGltZyApIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgfVxuXG4gICAgICAvLyBpZ25vcmUgbm9uLWBzb3VyY2VgIG5vZGVzXG4gICAgICBpZiAoIHNvdXJjZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpICE9PSBcIlNPVVJDRVwiICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIGlmIGl0J3MgYSBzb3VyY2UgZWxlbWVudCB0aGF0IGhhcyB0aGUgYHNyY2AgcHJvcGVydHkgc2V0LCB0aHJvdyBhIHdhcm5pbmcgaW4gdGhlIGNvbnNvbGVcbiAgICAgIGlmICggc291cmNlLmdldEF0dHJpYnV0ZSggXCJzcmNcIiApICE9PSBudWxsICYmIHR5cGVvZiBjb25zb2xlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIlRoZSBgc3JjYCBhdHRyaWJ1dGUgaXMgaW52YWxpZCBvbiBgcGljdHVyZWAgYHNvdXJjZWAgZWxlbWVudDsgaW5zdGVhZCwgdXNlIGBzcmNzZXRgLlwiKTtcbiAgICAgIH1cblxuICAgICAgdmFyIG1lZGlhID0gc291cmNlLmdldEF0dHJpYnV0ZSggXCJtZWRpYVwiICk7XG5cbiAgICAgIC8vIGlmIHNvdXJjZSBkb2VzIG5vdCBoYXZlIGEgc3Jjc2V0IGF0dHJpYnV0ZSwgc2tpcFxuICAgICAgaWYgKCAhc291cmNlLmdldEF0dHJpYnV0ZSggXCJzcmNzZXRcIiApICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gaWYgdGhlcmUncyBubyBtZWRpYSBzcGVjaWZpZWQsIE9SIHcubWF0Y2hNZWRpYSBpcyBzdXBwb3J0ZWRcbiAgICAgIGlmICggKCAhbWVkaWEgfHwgcGYubWF0Y2hlc01lZGlhKCBtZWRpYSApICkgKSB7XG4gICAgICAgIHZhciB0eXBlU3VwcG9ydGVkID0gcGYudmVyaWZ5VHlwZVN1cHBvcnQoIHNvdXJjZSApO1xuXG4gICAgICAgIGlmICggdHlwZVN1cHBvcnRlZCA9PT0gdHJ1ZSApIHtcbiAgICAgICAgICBtYXRjaCA9IHNvdXJjZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBlbHNlIGlmICggdHlwZVN1cHBvcnRlZCA9PT0gXCJwZW5kaW5nXCIgKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hdGNoO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHBpY3R1cmVmaWxsKCBvcHQgKSB7XG4gICAgdmFyIGVsZW1lbnRzLFxuICAgICAgZWxlbWVudCxcbiAgICAgIHBhcmVudCxcbiAgICAgIGZpcnN0TWF0Y2gsXG4gICAgICBjYW5kaWRhdGVzLFxuICAgICAgb3B0aW9ucyA9IG9wdCB8fCB7fTtcblxuICAgIGVsZW1lbnRzID0gb3B0aW9ucy5lbGVtZW50cyB8fCBwZi5nZXRBbGxFbGVtZW50cygpO1xuXG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBlbGVtZW50c1xuICAgIGZvciAoIHZhciBpID0gMCwgcGxlbiA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IHBsZW47IGkrKyApIHtcbiAgICAgIGVsZW1lbnQgPSBlbGVtZW50c1sgaSBdO1xuICAgICAgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgZmlyc3RNYXRjaCA9IHVuZGVmaW5lZDtcbiAgICAgIGNhbmRpZGF0ZXMgPSB1bmRlZmluZWQ7XG5cbiAgICAgIC8vIGltbWVkaWF0ZWx5IHNraXAgbm9uLWBpbWdgIG5vZGVzXG4gICAgICBpZiAoIGVsZW1lbnQubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPT0gXCJJTUdcIiApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4cGFuZG8gZm9yIGNhY2hpbmcgZGF0YSBvbiB0aGUgaW1nXG4gICAgICBpZiAoICFlbGVtZW50WyBwZi5ucyBdICkge1xuICAgICAgICBlbGVtZW50WyBwZi5ucyBdID0ge307XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHRoZSBlbGVtZW50IGhhcyBhbHJlYWR5IGJlZW4gZXZhbHVhdGVkLCBza2lwIGl0IHVubGVzc1xuICAgICAgLy8gYG9wdGlvbnMucmVldmFsdWF0ZWAgaXMgc2V0IHRvIHRydWUgKCB0aGlzLCBmb3IgZXhhbXBsZSxcbiAgICAgIC8vIGlzIHNldCB0byB0cnVlIHdoZW4gcnVubmluZyBgcGljdHVyZWZpbGxgIG9uIGByZXNpemVgICkuXG4gICAgICBpZiAoICFvcHRpb25zLnJlZXZhbHVhdGUgJiYgZWxlbWVudFsgcGYubnMgXS5ldmFsdWF0ZWQgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBpZiBgaW1nYCBpcyBpbiBhIGBwaWN0dXJlYCBlbGVtZW50XG4gICAgICBpZiAoIHBhcmVudC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIlBJQ1RVUkVcIiApIHtcblxuICAgICAgICAvLyBJRTkgdmlkZW8gd29ya2Fyb3VuZFxuICAgICAgICBwZi5yZW1vdmVWaWRlb1NoaW0oIHBhcmVudCApO1xuXG4gICAgICAgIC8vIHJldHVybiB0aGUgZmlyc3QgbWF0Y2ggd2hpY2ggbWlnaHQgdW5kZWZpbmVkXG4gICAgICAgIC8vIHJldHVybnMgZmFsc2UgaWYgdGhlcmUgaXMgYSBwZW5kaW5nIHNvdXJjZVxuICAgICAgICAvLyBUT0RPIHRoZSByZXR1cm4gdHlwZSBoZXJlIGlzIGJydXRhbCwgY2xlYW51cFxuICAgICAgICBmaXJzdE1hdGNoID0gcGYuZ2V0TWF0Y2goIGVsZW1lbnQsIHBhcmVudCApO1xuXG4gICAgICAgIC8vIGlmIGFueSBzb3VyY2VzIGFyZSBwZW5kaW5nIGluIHRoaXMgcGljdHVyZSBkdWUgdG8gYXN5bmMgdHlwZSB0ZXN0KHMpXG4gICAgICAgIC8vIHJlbW92ZSB0aGUgZXZhbHVhdGVkIGF0dHIgYW5kIHNraXAgZm9yIG5vdyAoIHRoZSBwZW5kaW5nIHRlc3Qgd2lsbFxuICAgICAgICAvLyByZXJ1biBwaWN0dXJlZmlsbCBvbiB0aGlzIGVsZW1lbnQgd2hlbiBjb21wbGV0ZSlcbiAgICAgICAgaWYgKCBmaXJzdE1hdGNoID09PSBmYWxzZSApIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmlyc3RNYXRjaCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLy8gQ2FjaGUgYW5kIHJlbW92ZSBgc3Jjc2V0YCBpZiBwcmVzZW50IGFuZCB3ZeKAmXJlIGdvaW5nIHRvIGJlIGRvaW5nIGBwaWN0dXJlYC9gc3Jjc2V0YC9gc2l6ZXNgIHBvbHlmaWxsaW5nIHRvIGl0LlxuICAgICAgaWYgKCBwYXJlbnQubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJQSUNUVVJFXCIgfHxcbiAgICAgICggZWxlbWVudC5zcmNzZXQgJiYgIXBmLnNyY3NldFN1cHBvcnRlZCApIHx8XG4gICAgICAoICFwZi5zaXplc1N1cHBvcnRlZCAmJiAoIGVsZW1lbnQuc3Jjc2V0ICYmIGVsZW1lbnQuc3Jjc2V0LmluZGV4T2YoXCJ3XCIpID4gLTEgKSApICkge1xuICAgICAgICBwZi5kb2RnZVNyY3NldCggZWxlbWVudCApO1xuICAgICAgfVxuXG4gICAgICBpZiAoIGZpcnN0TWF0Y2ggKSB7XG4gICAgICAgIGNhbmRpZGF0ZXMgPSBwZi5wcm9jZXNzU291cmNlU2V0KCBmaXJzdE1hdGNoICk7XG4gICAgICAgIHBmLmFwcGx5QmVzdENhbmRpZGF0ZSggY2FuZGlkYXRlcywgZWxlbWVudCApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm8gc291cmNlcyBtYXRjaGVkLCBzbyB3ZeKAmXJlIGRvd24gdG8gcHJvY2Vzc2luZyB0aGUgaW5uZXIgYGltZ2AgYXMgYSBzb3VyY2UuXG4gICAgICAgIGNhbmRpZGF0ZXMgPSBwZi5wcm9jZXNzU291cmNlU2V0KCBlbGVtZW50ICk7XG5cbiAgICAgICAgaWYgKCBlbGVtZW50LnNyY3NldCA9PT0gdW5kZWZpbmVkIHx8IGVsZW1lbnRbIHBmLm5zIF0uc3Jjc2V0ICkge1xuICAgICAgICAgIC8vIEVpdGhlciBgc3Jjc2V0YCBpcyBjb21wbGV0ZWx5IHVuc3VwcG9ydGVkLCBvciB3ZSBuZWVkIHRvIHBvbHlmaWxsIGBzaXplc2AgZnVuY3Rpb25hbGl0eS5cbiAgICAgICAgICBwZi5hcHBseUJlc3RDYW5kaWRhdGUoIGNhbmRpZGF0ZXMsIGVsZW1lbnQgKTtcbiAgICAgICAgfSAvLyBFbHNlLCByZXNvbHV0aW9uLW9ubHkgYHNyY3NldGAgaXMgc3VwcG9ydGVkIG5hdGl2ZWx5LlxuICAgICAgfVxuXG4gICAgICAvLyBzZXQgZXZhbHVhdGVkIHRvIHRydWUgdG8gYXZvaWQgdW5uZWNlc3NhcnkgcmVwYXJzaW5nXG4gICAgICBlbGVtZW50WyBwZi5ucyBdLmV2YWx1YXRlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgcGljdHVyZSBwb2x5ZmlsbCBieSBwb2xsaW5nIHRoZSBkb2N1bWVudCBhbmQgcnVubmluZ1xuICAgKiB0aGUgcG9seWZpbGwgZXZlcnkgMjUwbXMgdW50aWwgdGhlIGRvY3VtZW50IGlzIHJlYWR5LlxuICAgKiBBbHNvIGF0dGFjaGVzIHBpY3R1cmVmaWxsIG9uIHJlc2l6ZVxuICAgKi9cbiAgZnVuY3Rpb24gcnVuUGljdHVyZWZpbGwoKSB7XG4gICAgcGljdHVyZWZpbGwoKTtcbiAgICB2YXIgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCBmdW5jdGlvbigpIHtcbiAgICAgIC8vIFdoZW4gdGhlIGRvY3VtZW50IGhhcyBmaW5pc2hlZCBsb2FkaW5nLCBzdG9wIGNoZWNraW5nIGZvciBuZXcgaW1hZ2VzXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZGVkL2RvbXJlYWR5L2Jsb2IvbWFzdGVyL3JlYWR5LmpzI0wxNVxuICAgICAgcGljdHVyZWZpbGwoKTtcbiAgICAgIGlmICggL15sb2FkZWR8Xml8XmMvLnRlc3QoIGRvYy5yZWFkeVN0YXRlICkgKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoIGludGVydmFsSWQgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0sIDI1MCApO1xuXG4gICAgZnVuY3Rpb24gY2hlY2tSZXNpemUoKSB7XG4gICAgICB2YXIgcmVzaXplVGhyb3R0bGU7XG5cbiAgICAgIGlmICggIXcuX3BpY3R1cmVmaWxsV29ya2luZyApIHtcbiAgICAgICAgdy5fcGljdHVyZWZpbGxXb3JraW5nID0gdHJ1ZTtcbiAgICAgICAgdy5jbGVhclRpbWVvdXQoIHJlc2l6ZVRocm90dGxlICk7XG4gICAgICAgIHJlc2l6ZVRocm90dGxlID0gdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBwaWN0dXJlZmlsbCh7IHJlZXZhbHVhdGU6IHRydWUgfSk7XG4gICAgICAgICAgdy5fcGljdHVyZWZpbGxXb3JraW5nID0gZmFsc2U7XG4gICAgICAgIH0sIDYwICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCB3LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG4gICAgICB3LmFkZEV2ZW50TGlzdGVuZXIoIFwicmVzaXplXCIsIGNoZWNrUmVzaXplLCBmYWxzZSApO1xuICAgIH0gZWxzZSBpZiAoIHcuYXR0YWNoRXZlbnQgKSB7XG4gICAgICB3LmF0dGFjaEV2ZW50KCBcIm9ucmVzaXplXCIsIGNoZWNrUmVzaXplICk7XG4gICAgfVxuICB9XG5cbiAgcnVuUGljdHVyZWZpbGwoKTtcblxuICAvKiBleHBvc2UgbWV0aG9kcyBmb3IgdGVzdGluZyAqL1xuICBwaWN0dXJlZmlsbC5fID0gcGY7XG5cbiAgLyogZXhwb3NlIHBpY3R1cmVmaWxsICovXG4gIGlmICggdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIgKSB7XG4gICAgLy8gQ29tbW9uSlMsIGp1c3QgZXhwb3J0XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBwaWN0dXJlZmlsbDtcbiAgfSBlbHNlIGlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XG4gICAgLy8gQU1EIHN1cHBvcnRcbiAgICBkZWZpbmUoIGZ1bmN0aW9uKCkgeyByZXR1cm4gcGljdHVyZWZpbGw7IH0gKTtcbiAgfSBlbHNlIGlmICggdHlwZW9mIHcgPT09IFwib2JqZWN0XCIgKSB7XG4gICAgLy8gSWYgbm8gQU1EIGFuZCB3ZSBhcmUgaW4gdGhlIGJyb3dzZXIsIGF0dGFjaCB0byB3aW5kb3dcbiAgICB3LnBpY3R1cmVmaWxsID0gcGljdHVyZWZpbGw7XG4gIH1cblxufSApKCB0aGlzLCB0aGlzLmRvY3VtZW50LCBuZXcgdGhpcy5JbWFnZSgpICk7XG4iLCIvKiFcbiAqIHZlcmdlIDEuOS4xKzIwMTQwMjEzMDgwM1xuICogaHR0cHM6Ly9naXRodWIuY29tL3J5YW52ZS92ZXJnZVxuICogTUlUIExpY2Vuc2UgMjAxMyBSeWFuIFZhbiBFdHRlblxuICovXG5cbihmdW5jdGlvbihyb290LCBuYW1lLCBtYWtlKSB7XG4gIGlmICh0eXBlb2YgbW9kdWxlICE9ICd1bmRlZmluZWQnICYmIG1vZHVsZVsnZXhwb3J0cyddKSBtb2R1bGVbJ2V4cG9ydHMnXSA9IG1ha2UoKTtcbiAgZWxzZSByb290W25hbWVdID0gbWFrZSgpO1xufSh0aGlzLCAndmVyZ2UnLCBmdW5jdGlvbigpIHtcblxuICB2YXIgeHBvcnRzID0ge31cbiAgICAsIHdpbiA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93XG4gICAgLCBkb2MgPSB0eXBlb2YgZG9jdW1lbnQgIT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnRcbiAgICAsIGRvY0VsZW0gPSBkb2MgJiYgZG9jLmRvY3VtZW50RWxlbWVudFxuICAgICwgbWF0Y2hNZWRpYSA9IHdpblsnbWF0Y2hNZWRpYSddIHx8IHdpblsnbXNNYXRjaE1lZGlhJ11cbiAgICAsIG1xID0gbWF0Y2hNZWRpYSA/IGZ1bmN0aW9uKHEpIHtcbiAgICAgICAgcmV0dXJuICEhbWF0Y2hNZWRpYS5jYWxsKHdpbiwgcSkubWF0Y2hlcztcbiAgICAgIH0gOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICwgdmlld3BvcnRXID0geHBvcnRzWyd2aWV3cG9ydFcnXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYSA9IGRvY0VsZW1bJ2NsaWVudFdpZHRoJ10sIGIgPSB3aW5bJ2lubmVyV2lkdGgnXTtcbiAgICAgICAgcmV0dXJuIGEgPCBiID8gYiA6IGE7XG4gICAgICB9XG4gICAgLCB2aWV3cG9ydEggPSB4cG9ydHNbJ3ZpZXdwb3J0SCddID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhID0gZG9jRWxlbVsnY2xpZW50SGVpZ2h0J10sIGIgPSB3aW5bJ2lubmVySGVpZ2h0J107XG4gICAgICAgIHJldHVybiBhIDwgYiA/IGIgOiBhO1xuICAgICAgfTtcblxuICAvKipcbiAgICogVGVzdCBpZiBhIG1lZGlhIHF1ZXJ5IGlzIGFjdGl2ZS4gTGlrZSBNb2Rlcm5penIubXFcbiAgICogQHNpbmNlIDEuNi4wXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICB4cG9ydHNbJ21xJ10gPSBtcTtcblxuICAvKipcbiAgICogTm9ybWFsaXplZCBtYXRjaE1lZGlhXG4gICAqIEBzaW5jZSAxLjYuMFxuICAgKiBAcmV0dXJuIHtNZWRpYVF1ZXJ5TGlzdHxPYmplY3R9XG4gICAqL1xuICB4cG9ydHNbJ21hdGNoTWVkaWEnXSA9IG1hdGNoTWVkaWEgPyBmdW5jdGlvbigpIHtcbiAgICAvLyBtYXRjaE1lZGlhIG11c3QgYmUgYmluZGVkIHRvIHdpbmRvd1xuICAgIHJldHVybiBtYXRjaE1lZGlhLmFwcGx5KHdpbiwgYXJndW1lbnRzKTtcbiAgfSA6IGZ1bmN0aW9uKCkge1xuICAgIC8vIEdyYWNlZnVsbHkgZGVncmFkZSB0byBwbGFpbiBvYmplY3RcbiAgICByZXR1cm4ge307XG4gIH07XG5cbiAgLyoqXG4gICAqIEBzaW5jZSAxLjguMFxuICAgKiBAcmV0dXJuIHt7d2lkdGg6bnVtYmVyLCBoZWlnaHQ6bnVtYmVyfX1cbiAgICovXG4gIGZ1bmN0aW9uIHZpZXdwb3J0KCkge1xuICAgIHJldHVybiB7J3dpZHRoJzp2aWV3cG9ydFcoKSwgJ2hlaWdodCc6dmlld3BvcnRIKCl9O1xuICB9XG4gIHhwb3J0c1sndmlld3BvcnQnXSA9IHZpZXdwb3J0O1xuXG4gIC8qKlxuICAgKiBDcm9zcy1icm93c2VyIHdpbmRvdy5zY3JvbGxYXG4gICAqIEBzaW5jZSAxLjAuMFxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB4cG9ydHNbJ3Njcm9sbFgnXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB3aW4ucGFnZVhPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxMZWZ0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcm9zcy1icm93c2VyIHdpbmRvdy5zY3JvbGxZXG4gICAqIEBzaW5jZSAxLjAuMFxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB4cG9ydHNbJ3Njcm9sbFknXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB3aW4ucGFnZVlPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxUb3A7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7e3RvcDpudW1iZXIsIHJpZ2h0Om51bWJlciwgYm90dG9tOm51bWJlciwgbGVmdDpudW1iZXJ9fSBjb29yZHNcbiAgICogQHBhcmFtIHtudW1iZXI9fSBjdXNoaW9uIGFkanVzdG1lbnRcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZnVuY3Rpb24gY2FsaWJyYXRlKGNvb3JkcywgY3VzaGlvbikge1xuICAgIHZhciBvID0ge307XG4gICAgY3VzaGlvbiA9ICtjdXNoaW9uIHx8IDA7XG4gICAgb1snd2lkdGgnXSA9IChvWydyaWdodCddID0gY29vcmRzWydyaWdodCddICsgY3VzaGlvbikgLSAob1snbGVmdCddID0gY29vcmRzWydsZWZ0J10gLSBjdXNoaW9uKTtcbiAgICBvWydoZWlnaHQnXSA9IChvWydib3R0b20nXSA9IGNvb3Jkc1snYm90dG9tJ10gKyBjdXNoaW9uKSAtIChvWyd0b3AnXSA9IGNvb3Jkc1sndG9wJ10gLSBjdXNoaW9uKTtcbiAgICByZXR1cm4gbztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcm9zcy1icm93c2VyIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IHBsdXMgb3B0aW9uYWwgY3VzaGlvbi5cbiAgICogQ29vcmRzIGFyZSByZWxhdGl2ZSB0byB0aGUgdG9wLWxlZnQgY29ybmVyIG9mIHRoZSB2aWV3cG9ydC5cbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsIGVsZW1lbnQgb3Igc3RhY2sgKHVzZXMgZmlyc3QgaXRlbSlcbiAgICogQHBhcmFtIHtudW1iZXI9fSBjdXNoaW9uICsvLSBwaXhlbCBhZGp1c3RtZW50IGFtb3VudFxuICAgKiBAcmV0dXJuIHtPYmplY3R8Ym9vbGVhbn1cbiAgICovXG4gIGZ1bmN0aW9uIHJlY3RhbmdsZShlbCwgY3VzaGlvbikge1xuICAgIGVsID0gZWwgJiYgIWVsLm5vZGVUeXBlID8gZWxbMF0gOiBlbDtcbiAgICBpZiAoIWVsIHx8IDEgIT09IGVsLm5vZGVUeXBlKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGNhbGlicmF0ZShlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgY3VzaGlvbik7XG4gIH1cbiAgeHBvcnRzWydyZWN0YW5nbGUnXSA9IHJlY3RhbmdsZTtcblxuICAvKipcbiAgICogR2V0IHRoZSB2aWV3cG9ydCBhc3BlY3QgcmF0aW8gKG9yIHRoZSBhc3BlY3QgcmF0aW8gb2YgYW4gb2JqZWN0IG9yIGVsZW1lbnQpXG4gICAqIEBzaW5jZSAxLjcuMFxuICAgKiBAcGFyYW0geyhFbGVtZW50fE9iamVjdCk9fSBvIG9wdGlvbmFsIG9iamVjdCB3aXRoIHdpZHRoL2hlaWdodCBwcm9wcyBvciBtZXRob2RzXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogQGxpbmsgaHR0cDovL3czLm9yZy9UUi9jc3MzLW1lZGlhcXVlcmllcy8jb3JpZW50YXRpb25cbiAgICovXG4gIGZ1bmN0aW9uIGFzcGVjdChvKSB7XG4gICAgbyA9IG51bGwgPT0gbyA/IHZpZXdwb3J0KCkgOiAxID09PSBvLm5vZGVUeXBlID8gcmVjdGFuZ2xlKG8pIDogbztcbiAgICB2YXIgaCA9IG9bJ2hlaWdodCddLCB3ID0gb1snd2lkdGgnXTtcbiAgICBoID0gdHlwZW9mIGggPT0gJ2Z1bmN0aW9uJyA/IGguY2FsbChvKSA6IGg7XG4gICAgdyA9IHR5cGVvZiB3ID09ICdmdW5jdGlvbicgPyB3LmNhbGwobykgOiB3O1xuICAgIHJldHVybiB3L2g7XG4gIH1cbiAgeHBvcnRzWydhc3BlY3QnXSA9IGFzcGVjdDtcblxuICAvKipcbiAgICogVGVzdCBpZiBhbiBlbGVtZW50IGlzIGluIHRoZSBzYW1lIHgtYXhpcyBzZWN0aW9uIGFzIHRoZSB2aWV3cG9ydC5cbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gY3VzaGlvblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgeHBvcnRzWydpblgnXSA9IGZ1bmN0aW9uKGVsLCBjdXNoaW9uKSB7XG4gICAgdmFyIHIgPSByZWN0YW5nbGUoZWwsIGN1c2hpb24pO1xuICAgIHJldHVybiAhIXIgJiYgci5yaWdodCA+PSAwICYmIHIubGVmdCA8PSB2aWV3cG9ydFcoKTtcbiAgfTtcblxuICAvKipcbiAgICogVGVzdCBpZiBhbiBlbGVtZW50IGlzIGluIHRoZSBzYW1lIHktYXhpcyBzZWN0aW9uIGFzIHRoZSB2aWV3cG9ydC5cbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gY3VzaGlvblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgeHBvcnRzWydpblknXSA9IGZ1bmN0aW9uKGVsLCBjdXNoaW9uKSB7XG4gICAgdmFyIHIgPSByZWN0YW5nbGUoZWwsIGN1c2hpb24pO1xuICAgIHJldHVybiAhIXIgJiYgci5ib3R0b20gPj0gMCAmJiByLnRvcCA8PSB2aWV3cG9ydEgoKTtcbiAgfTtcblxuICAvKipcbiAgICogVGVzdCBpZiBhbiBlbGVtZW50IGlzIGluIHRoZSB2aWV3cG9ydC5cbiAgICogQHNpbmNlIDEuMC4wXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gY3VzaGlvblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgeHBvcnRzWydpblZpZXdwb3J0J10gPSBmdW5jdGlvbihlbCwgY3VzaGlvbikge1xuICAgIC8vIEVxdWl2IHRvIGBpblgoZWwsIGN1c2hpb24pICYmIGluWShlbCwgY3VzaGlvbilgIGJ1dCBqdXN0IG1hbnVhbGx5IGRvIGJvdGhcbiAgICAvLyB0byBhdm9pZCBjYWxsaW5nIHJlY3RhbmdsZSgpIHR3aWNlLiBJdCBnemlwcyBqdXN0IGFzIHNtYWxsIGxpa2UgdGhpcy5cbiAgICB2YXIgciA9IHJlY3RhbmdsZShlbCwgY3VzaGlvbik7XG4gICAgcmV0dXJuICEhciAmJiByLmJvdHRvbSA+PSAwICYmIHIucmlnaHQgPj0gMCAmJiByLnRvcCA8PSB2aWV3cG9ydEgoKSAmJiByLmxlZnQgPD0gdmlld3BvcnRXKCk7XG4gIH07XG5cbiAgcmV0dXJuIHhwb3J0cztcbn0pKTtcbihmdW5jdGlvbigpIHtcbiAgdmFyIE11dGF0aW9uT2JzZXJ2ZXIsIFV0aWwsIFdlYWtNYXAsIGdldENvbXB1dGVkU3R5bGUsIGdldENvbXB1dGVkU3R5bGVSWCxcbiAgICBfX2JpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxuICAgIF9faW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9O1xuXG4gIFV0aWwgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gVXRpbCgpIHt9XG5cbiAgICBVdGlsLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbihjdXN0b20sIGRlZmF1bHRzKSB7XG4gICAgICB2YXIga2V5LCB2YWx1ZTtcbiAgICAgIGZvciAoa2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICAgIHZhbHVlID0gZGVmYXVsdHNba2V5XTtcbiAgICAgICAgaWYgKGN1c3RvbVtrZXldID09IG51bGwpIHtcbiAgICAgICAgICBjdXN0b21ba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VzdG9tO1xuICAgIH07XG5cbiAgICBVdGlsLnByb3RvdHlwZS5pc01vYmlsZSA9IGZ1bmN0aW9uKGFnZW50KSB7XG4gICAgICByZXR1cm4gL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KGFnZW50KTtcbiAgICB9O1xuXG4gICAgVXRpbC5wcm90b3R5cGUuYWRkRXZlbnQgPSBmdW5jdGlvbihlbGVtLCBldmVudCwgZm4pIHtcbiAgICAgIGlmIChlbGVtLmFkZEV2ZW50TGlzdGVuZXIgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZWxlbS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmIChlbGVtLmF0dGFjaEV2ZW50ICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGVsZW0uYXR0YWNoRXZlbnQoXCJvblwiICsgZXZlbnQsIGZuKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBlbGVtW2V2ZW50XSA9IGZuO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBVdGlsLnByb3RvdHlwZS5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uKGVsZW0sIGV2ZW50LCBmbikge1xuICAgICAgaWYgKGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGZuLCBmYWxzZSk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW0uZGV0YWNoRXZlbnQgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZWxlbS5kZXRhY2hFdmVudChcIm9uXCIgKyBldmVudCwgZm4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlbGV0ZSBlbGVtW2V2ZW50XTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVXRpbC5wcm90b3R5cGUuaW5uZXJIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgnaW5uZXJIZWlnaHQnIGluIHdpbmRvdykge1xuICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBVdGlsO1xuXG4gIH0pKCk7XG5cbiAgV2Vha01hcCA9IHRoaXMuV2Vha01hcCB8fCB0aGlzLk1veldlYWtNYXAgfHwgKFdlYWtNYXAgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gV2Vha01hcCgpIHtcbiAgICAgIHRoaXMua2V5cyA9IFtdO1xuICAgICAgdGhpcy52YWx1ZXMgPSBbXTtcbiAgICB9XG5cbiAgICBXZWFrTWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBpLCBpdGVtLCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgIF9yZWYgPSB0aGlzLmtleXM7XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBpdGVtID0gX3JlZltpXTtcbiAgICAgICAgaWYgKGl0ZW0gPT09IGtleSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlc1tpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBXZWFrTWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICB2YXIgaSwgaXRlbSwgX2ksIF9sZW4sIF9yZWY7XG4gICAgICBfcmVmID0gdGhpcy5rZXlzO1xuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgaXRlbSA9IF9yZWZbaV07XG4gICAgICAgIGlmIChpdGVtID09PSBrZXkpIHtcbiAgICAgICAgICB0aGlzLnZhbHVlc1tpXSA9IHZhbHVlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5rZXlzLnB1c2goa2V5KTtcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFdlYWtNYXA7XG5cbiAgfSkoKSk7XG5cbiAgTXV0YXRpb25PYnNlcnZlciA9IHRoaXMuTXV0YXRpb25PYnNlcnZlciB8fCB0aGlzLldlYmtpdE11dGF0aW9uT2JzZXJ2ZXIgfHwgdGhpcy5Nb3pNdXRhdGlvbk9ic2VydmVyIHx8IChNdXRhdGlvbk9ic2VydmVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIE11dGF0aW9uT2JzZXJ2ZXIoKSB7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ011dGF0aW9uT2JzZXJ2ZXIgaXMgbm90IHN1cHBvcnRlZCBieSB5b3VyIGJyb3dzZXIuJyk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1dPVy5qcyBjYW5ub3QgZGV0ZWN0IGRvbSBtdXRhdGlvbnMsIHBsZWFzZSBjYWxsIC5zeW5jKCkgYWZ0ZXIgbG9hZGluZyBuZXcgY29udGVudC4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBNdXRhdGlvbk9ic2VydmVyLm5vdFN1cHBvcnRlZCA9IHRydWU7XG5cbiAgICBNdXRhdGlvbk9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24oKSB7fTtcblxuICAgIHJldHVybiBNdXRhdGlvbk9ic2VydmVyO1xuXG4gIH0pKCkpO1xuXG4gIGdldENvbXB1dGVkU3R5bGUgPSB0aGlzLmdldENvbXB1dGVkU3R5bGUgfHwgZnVuY3Rpb24oZWwsIHBzZXVkbykge1xuICAgIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIHZhciBfcmVmO1xuICAgICAgaWYgKHByb3AgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgcHJvcCA9ICdzdHlsZUZsb2F0JztcbiAgICAgIH1cbiAgICAgIGlmIChnZXRDb21wdXRlZFN0eWxlUlgudGVzdChwcm9wKSkge1xuICAgICAgICBwcm9wLnJlcGxhY2UoZ2V0Q29tcHV0ZWRTdHlsZVJYLCBmdW5jdGlvbihfLCBfY2hhcikge1xuICAgICAgICAgIHJldHVybiBfY2hhci50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoKF9yZWYgPSBlbC5jdXJyZW50U3R5bGUpICE9IG51bGwgPyBfcmVmW3Byb3BdIDogdm9pZCAwKSB8fCBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgZ2V0Q29tcHV0ZWRTdHlsZVJYID0gLyhcXC0oW2Etel0pezF9KS9nO1xuXG4gIHRoaXMuV09XID0gKGZ1bmN0aW9uKCkge1xuICAgIFdPVy5wcm90b3R5cGUuZGVmYXVsdHMgPSB7XG4gICAgICBib3hDbGFzczogJ3dvdycsXG4gICAgICBhbmltYXRlQ2xhc3M6ICdhbmltYXRlZCcsXG4gICAgICBvZmZzZXQ6IDAsXG4gICAgICBtb2JpbGU6IHRydWUsXG4gICAgICBsaXZlOiB0cnVlLFxuICAgICAgY2FsbGJhY2s6IG51bGxcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gV09XKG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgdGhpcy5zY3JvbGxDYWxsYmFjayA9IF9fYmluZCh0aGlzLnNjcm9sbENhbGxiYWNrLCB0aGlzKTtcbiAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlciA9IF9fYmluZCh0aGlzLnNjcm9sbEhhbmRsZXIsIHRoaXMpO1xuICAgICAgdGhpcy5zdGFydCA9IF9fYmluZCh0aGlzLnN0YXJ0LCB0aGlzKTtcbiAgICAgIHRoaXMuc2Nyb2xsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5jb25maWcgPSB0aGlzLnV0aWwoKS5leHRlbmQob3B0aW9ucywgdGhpcy5kZWZhdWx0cyk7XG4gICAgICB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG4gICAgfVxuXG4gICAgV09XLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3JlZjtcbiAgICAgIHRoaXMuZWxlbWVudCA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICBpZiAoKF9yZWYgPSBkb2N1bWVudC5yZWFkeVN0YXRlKSA9PT0gXCJpbnRlcmFjdGl2ZVwiIHx8IF9yZWYgPT09IFwiY29tcGxldGVcIikge1xuICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudChkb2N1bWVudCwgJ0RPTUNvbnRlbnRMb2FkZWQnLCB0aGlzLnN0YXJ0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmZpbmlzaGVkID0gW107XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBib3gsIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmJveGVzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgICBfcmVmID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIgKyB0aGlzLmNvbmZpZy5ib3hDbGFzcyk7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIGJveCA9IF9yZWZbX2ldO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goYm94KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5hbGwgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZWYgPSB0aGlzLmJveGVzO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICBib3ggPSBfcmVmW19pXTtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKGJveCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgIGlmICh0aGlzLmJveGVzLmxlbmd0aCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCgpKSB7XG4gICAgICAgICAgdGhpcy5yZXNldFN0eWxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3JlZiA9IHRoaXMuYm94ZXM7XG4gICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICBib3ggPSBfcmVmW19pXTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTdHlsZShib3gsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKCkpIHtcbiAgICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQod2luZG93LCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQod2luZG93LCAncmVzaXplJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMuc2Nyb2xsQ2FsbGJhY2ssIDUwKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5saXZlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25PYnNlcnZlcigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVjb3Jkcykge1xuICAgICAgICAgICAgdmFyIG5vZGUsIHJlY29yZCwgX2osIF9sZW4xLCBfcmVzdWx0cztcbiAgICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSByZWNvcmRzLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgICAgICByZWNvcmQgPSByZWNvcmRzW19qXTtcbiAgICAgICAgICAgICAgX3Jlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9rLCBfbGVuMiwgX3JlZjEsIF9yZXN1bHRzMTtcbiAgICAgICAgICAgICAgICBfcmVmMSA9IHJlY29yZC5hZGRlZE5vZGVzIHx8IFtdO1xuICAgICAgICAgICAgICAgIF9yZXN1bHRzMSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAoX2sgPSAwLCBfbGVuMiA9IF9yZWYxLmxlbmd0aDsgX2sgPCBfbGVuMjsgX2srKykge1xuICAgICAgICAgICAgICAgICAgbm9kZSA9IF9yZWYxW19rXTtcbiAgICAgICAgICAgICAgICAgIF9yZXN1bHRzMS5wdXNoKHRoaXMuZG9TeW5jKG5vZGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHRzMTtcbiAgICAgICAgICAgICAgfSkuY2FsbChfdGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pKHRoaXMpKS5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgdGhpcy51dGlsKCkucmVtb3ZlRXZlbnQod2luZG93LCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcbiAgICAgIHRoaXMudXRpbCgpLnJlbW92ZUV2ZW50KHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XG4gICAgICBpZiAodGhpcy5pbnRlcnZhbCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnN5bmMgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICBpZiAoTXV0YXRpb25PYnNlcnZlci5ub3RTdXBwb3J0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9TeW5jKHRoaXMuZWxlbWVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuZG9TeW5jID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgdmFyIGJveCwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgaWYgKGVsZW1lbnQgPT0gbnVsbCkge1xuICAgICAgICBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgfVxuICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgIT09IDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSB8fCBlbGVtZW50O1xuICAgICAgX3JlZiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIHRoaXMuY29uZmlnLmJveENsYXNzKTtcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgYm94ID0gX3JlZltfaV07XG4gICAgICAgIGlmIChfX2luZGV4T2YuY2FsbCh0aGlzLmFsbCwgYm94KSA8IDApIHtcbiAgICAgICAgICB0aGlzLmJveGVzLnB1c2goYm94KTtcbiAgICAgICAgICB0aGlzLmFsbC5wdXNoKGJveCk7XG4gICAgICAgICAgaWYgKHRoaXMuc3RvcHBlZCB8fCB0aGlzLmRpc2FibGVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTdHlsZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5U3R5bGUoYm94LCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLnNjcm9sbGVkID0gdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaCh2b2lkIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgdGhpcy5hcHBseVN0eWxlKGJveCk7XG4gICAgICBib3guY2xhc3NOYW1lID0gXCJcIiArIGJveC5jbGFzc05hbWUgKyBcIiBcIiArIHRoaXMuY29uZmlnLmFuaW1hdGVDbGFzcztcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5jYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5jYWxsYmFjayhib3gpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmFwcGx5U3R5bGUgPSBmdW5jdGlvbihib3gsIGhpZGRlbikge1xuICAgICAgdmFyIGRlbGF5LCBkdXJhdGlvbiwgaXRlcmF0aW9uO1xuICAgICAgZHVyYXRpb24gPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1kdXJhdGlvbicpO1xuICAgICAgZGVsYXkgPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1kZWxheScpO1xuICAgICAgaXRlcmF0aW9uID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctaXRlcmF0aW9uJyk7XG4gICAgICByZXR1cm4gdGhpcy5hbmltYXRlKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmN1c3RvbVN0eWxlKGJveCwgaGlkZGVuLCBkdXJhdGlvbiwgZGVsYXksIGl0ZXJhdGlvbik7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuYW5pbWF0ZSA9IChmdW5jdGlvbigpIHtcbiAgICAgIGlmICgncmVxdWVzdEFuaW1hdGlvbkZyYW1lJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSkoKTtcblxuICAgIFdPVy5wcm90b3R5cGUucmVzZXRTdHlsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJveCwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgX3JlZiA9IHRoaXMuYm94ZXM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGJveCA9IF9yZWZbX2ldO1xuICAgICAgICBfcmVzdWx0cy5wdXNoKGJveC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5jdXN0b21TdHlsZSA9IGZ1bmN0aW9uKGJveCwgaGlkZGVuLCBkdXJhdGlvbiwgZGVsYXksIGl0ZXJhdGlvbikge1xuICAgICAgaWYgKGhpZGRlbikge1xuICAgICAgICB0aGlzLmNhY2hlQW5pbWF0aW9uTmFtZShib3gpO1xuICAgICAgfVxuICAgICAgYm94LnN0eWxlLnZpc2liaWxpdHkgPSBoaWRkZW4gPyAnaGlkZGVuJyA6ICd2aXNpYmxlJztcbiAgICAgIGlmIChkdXJhdGlvbikge1xuICAgICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcbiAgICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogZHVyYXRpb25cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoZGVsYXkpIHtcbiAgICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XG4gICAgICAgICAgYW5pbWF0aW9uRGVsYXk6IGRlbGF5XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZXJhdGlvbikge1xuICAgICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcbiAgICAgICAgICBhbmltYXRpb25JdGVyYXRpb25Db3VudDogaXRlcmF0aW9uXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XG4gICAgICAgIGFuaW1hdGlvbk5hbWU6IGhpZGRlbiA/ICdub25lJyA6IHRoaXMuY2FjaGVkQW5pbWF0aW9uTmFtZShib3gpXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBib3g7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUudmVuZG9ycyA9IFtcIm1velwiLCBcIndlYmtpdFwiXTtcblxuICAgIFdPVy5wcm90b3R5cGUudmVuZG9yU2V0ID0gZnVuY3Rpb24oZWxlbSwgcHJvcGVydGllcykge1xuICAgICAgdmFyIG5hbWUsIHZhbHVlLCB2ZW5kb3IsIF9yZXN1bHRzO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAobmFtZSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHZhbHVlID0gcHJvcGVydGllc1tuYW1lXTtcbiAgICAgICAgZWxlbVtcIlwiICsgbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgX3Jlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0czE7XG4gICAgICAgICAgX3JlZiA9IHRoaXMudmVuZG9ycztcbiAgICAgICAgICBfcmVzdWx0czEgPSBbXTtcbiAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgIHZlbmRvciA9IF9yZWZbX2ldO1xuICAgICAgICAgICAgX3Jlc3VsdHMxLnB1c2goZWxlbVtcIlwiICsgdmVuZG9yICsgKG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkpICsgKG5hbWUuc3Vic3RyKDEpKV0gPSB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0czE7XG4gICAgICAgIH0pLmNhbGwodGhpcykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLnZlbmRvckNTUyA9IGZ1bmN0aW9uKGVsZW0sIHByb3BlcnR5KSB7XG4gICAgICB2YXIgcmVzdWx0LCBzdHlsZSwgdmVuZG9yLCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTtcbiAgICAgIHJlc3VsdCA9IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUocHJvcGVydHkpO1xuICAgICAgX3JlZiA9IHRoaXMudmVuZG9ycztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICB2ZW5kb3IgPSBfcmVmW19pXTtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0IHx8IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUoXCItXCIgKyB2ZW5kb3IgKyBcIi1cIiArIHByb3BlcnR5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuYW5pbWF0aW9uTmFtZSA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgdmFyIGFuaW1hdGlvbk5hbWU7XG4gICAgICB0cnkge1xuICAgICAgICBhbmltYXRpb25OYW1lID0gdGhpcy52ZW5kb3JDU1MoYm94LCAnYW5pbWF0aW9uLW5hbWUnKS5jc3NUZXh0O1xuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgIGFuaW1hdGlvbk5hbWUgPSBnZXRDb21wdXRlZFN0eWxlKGJveCkuZ2V0UHJvcGVydHlWYWx1ZSgnYW5pbWF0aW9uLW5hbWUnKTtcbiAgICAgIH1cbiAgICAgIGlmIChhbmltYXRpb25OYW1lID09PSAnbm9uZScpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFuaW1hdGlvbk5hbWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuY2FjaGVBbmltYXRpb25OYW1lID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICByZXR1cm4gdGhpcy5hbmltYXRpb25OYW1lQ2FjaGUuc2V0KGJveCwgdGhpcy5hbmltYXRpb25OYW1lKGJveCkpO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmNhY2hlZEFuaW1hdGlvbk5hbWUgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgIHJldHVybiB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZS5nZXQoYm94KTtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5zY3JvbGxIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5zY3JvbGxlZCA9IHRydWU7XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUuc2Nyb2xsQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBib3g7XG4gICAgICBpZiAodGhpcy5zY3JvbGxlZCkge1xuICAgICAgICB0aGlzLnNjcm9sbGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYm94ZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0cztcbiAgICAgICAgICBfcmVmID0gdGhpcy5ib3hlcztcbiAgICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgYm94ID0gX3JlZltfaV07XG4gICAgICAgICAgICBpZiAoIShib3gpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKGJveCkpIHtcbiAgICAgICAgICAgICAgdGhpcy5zaG93KGJveCk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3Jlc3VsdHMucHVzaChib3gpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICAgIGlmICghKHRoaXMuYm94ZXMubGVuZ3RoIHx8IHRoaXMuY29uZmlnLmxpdmUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdPVy5wcm90b3R5cGUub2Zmc2V0VG9wID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgdmFyIHRvcDtcbiAgICAgIHdoaWxlIChlbGVtZW50Lm9mZnNldFRvcCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICB9XG4gICAgICB0b3AgPSBlbGVtZW50Lm9mZnNldFRvcDtcbiAgICAgIHdoaWxlIChlbGVtZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQpIHtcbiAgICAgICAgdG9wICs9IGVsZW1lbnQub2Zmc2V0VG9wO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRvcDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS5pc1Zpc2libGUgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgIHZhciBib3R0b20sIG9mZnNldCwgdG9wLCB2aWV3Qm90dG9tLCB2aWV3VG9wO1xuICAgICAgb2Zmc2V0ID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctb2Zmc2V0JykgfHwgdGhpcy5jb25maWcub2Zmc2V0O1xuICAgICAgdmlld1RvcCA9IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgIHZpZXdCb3R0b20gPSB2aWV3VG9wICsgTWF0aC5taW4odGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCwgdGhpcy51dGlsKCkuaW5uZXJIZWlnaHQoKSkgLSBvZmZzZXQ7XG4gICAgICB0b3AgPSB0aGlzLm9mZnNldFRvcChib3gpO1xuICAgICAgYm90dG9tID0gdG9wICsgYm94LmNsaWVudEhlaWdodDtcbiAgICAgIHJldHVybiB0b3AgPD0gdmlld0JvdHRvbSAmJiBib3R0b20gPj0gdmlld1RvcDtcbiAgICB9O1xuXG4gICAgV09XLnByb3RvdHlwZS51dGlsID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdXRpbCAhPSBudWxsID8gdGhpcy5fdXRpbCA6IHRoaXMuX3V0aWwgPSBuZXcgVXRpbCgpO1xuICAgIH07XG5cbiAgICBXT1cucHJvdG90eXBlLmRpc2FibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuY29uZmlnLm1vYmlsZSAmJiB0aGlzLnV0aWwoKS5pc01vYmlsZShuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFdPVztcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==